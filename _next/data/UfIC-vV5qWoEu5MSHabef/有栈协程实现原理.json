{"pageProps":{"site":{"domain":"yangsoon.github.io","name":"YangSoon","rootNotionPageId":"72a669717cf642c2a2524439d99d8f44","rootNotionSpaceId":null,"description":"YangSoon, Cloud Native Developer"},"recordMap":{"block":{"b779ada2-9a57-4774-abf3-076830766f60":{"role":"reader","value":{"id":"b779ada2-9a57-4774-abf3-076830766f60","version":264,"type":"page","properties":{"z`pV":[["(有栈)协程可以理解为一个用户态下的线程，在用户态下进行线程（协程）的上下文切换。"]],"title":[["有栈协程实现原理"]]},"content":["4f906dc1-09b1-4227-bf76-96170afc683d","8e81cab6-c3a2-450c-9bf1-f0882bac3486","35d499e0-c22a-4a2c-9ae1-2d85663e1e37","d136215b-f9ff-4684-af87-4713e87a58a9","2dac9005-e545-4d57-a460-ffb285320979","a7d14f4d-3bc5-4c50-bfd5-ea2a2a448af5","91628bb2-5c64-426d-b2b7-14b29e336250","4433f2bd-2a79-4795-92e1-c09a2636e3d5","75589f09-ebcf-4426-9dd9-eedc19488454","ad649228-34ba-4f17-9803-8f3e37bc263b","96ba8355-ddd9-4350-ad2e-ecc18cd12b42","07ba7389-4150-4490-9278-5b5da3b73e43","86e23e07-ac3f-4b6c-9e23-03a6abeb309d","5c43ca66-30dc-4e2d-b1d7-651d571c22d3","a43216da-fa18-4432-bfdf-87185671a249","12d175f5-ec8a-481c-a758-c7be23c23064","50bc5221-57b5-42e5-a937-b2c2d6d596f0","21eecbef-cda9-4605-ac90-76bbd66cca02","7b0e3d1e-9bcc-4c2d-a709-812198b482f8","055afaa0-415a-4bfc-b29e-feeeef70e6fc","a4c9f255-28fd-468c-9518-296a28388dbd","08d8031f-2c49-4288-ac06-52bf5588d29d","bb9d0a91-f647-464d-ab95-1e19088df2dd","abe8541c-01e7-4016-9fd3-77c958eb789c","e1e3a279-a731-4560-919e-8ce9fb71ae8c","3fbf77c8-2147-4151-9f49-a9ff7348f072","49976419-0270-4688-889c-56794efdba1b","0c6dfb0d-b3af-4c0a-bd00-8bf49c9f3e7c","7f809b26-a9b9-4443-a62b-877633432b10","cef12a15-5102-4973-baa8-0421f1e47ee4","f0eacf32-1694-4024-99b5-6c4350bfb1a0","9ee42d63-2922-4d15-add9-6e8651790ac6","59d72c96-5ad1-4aba-93cd-be36c5c66036","e66ddecc-a9b1-4385-9fc2-bd9893995708","30730b9a-01a6-4b21-be38-b91ec9d388c6","25f67fb5-0b1e-432c-96c4-9333aea3f1ae","c237a7a8-364e-4500-a1ae-bf7605745077","db508679-342b-49e6-a042-75a3b8efe585","37747cf3-026f-4a6c-ab4b-a66c02ed56c8","2ce1cc8a-ae4b-4be1-8e38-e61a7ef351c7","d8a14a30-fbaf-4e9b-84b2-94f7cd2aa6b5","9ea50f10-7834-49c6-bceb-3da6d172637f","cad9ed69-7d0d-4da9-8b65-b4263a3b1409","7fad2f70-d050-48d5-94a0-6387a032c97e","4248ee79-fe6b-4154-ac97-45cf469bb381","c9c84025-3590-46b1-9000-8b9ed4321c87","4c5bb217-d846-4cc7-bb7a-868ac368e362","d50715f1-896c-49fa-8f35-5cdec5daf320","1a947dcd-57ec-4555-a3be-7d2eda2ce51b","e77eb67a-17b6-407c-bffc-7ae7c9b8d1d9","d488bc7b-a4dc-45bd-993b-b3c3278e8916","0f5fe11f-ec66-46d7-a44c-1d2a99ce5e38","b91f6d88-d908-4262-b2fe-994aa7e8d436","9fb6b29b-acaa-4747-bf1f-7665b4f67933","790ae170-7b15-468a-8611-1282ea1467fc","8dd267bd-9110-4700-8357-be1e7f220e34","39761a5f-a2c1-41d1-8a1b-4bc0d11b62c7","058caf7a-8212-44ab-b2c4-5c7ed4fad8e0","fec8c2a7-fda7-4a04-a0ac-cd6334f45884","fae97933-8250-42a9-9d30-fd956d257f5b","cbd640e3-bcdb-4f97-a8a7-656cf924f707","c2987670-327c-4b36-b94f-6641d09914fe","f0e5f550-b393-40a4-afa7-795278afe9c8","4eaf087d-6ed6-47a4-b8ba-b57824ce3ae2","df95d776-1205-4b84-9b4f-63e0fff2dbed","a99feb74-7567-480c-96dd-a905d0552c56","fbe82787-4892-4a92-9ac5-03816011e43d","effeaa4d-437b-4633-9afe-84ab4d8679a3","f08bb8cc-e803-428f-b1c2-6d7ffb7f9082","65b0ac31-badf-4693-80ce-2819019efb9e","9de81087-7a12-4ff0-bb76-76cfb27a7c73","d5d8ffed-8268-480d-a351-b90524cb5a4c","af0f53fe-cf46-43b2-9674-08b17d92699f","78e0e956-3b6a-4a66-81cf-88bae3c08dfd","dfce57f8-28d1-4988-9d3e-a0ca7e79f531","130c601e-5a42-44e5-b22d-50e516936644","661cfdf7-9081-4917-acf5-bce89d9cef83","68f519a8-853b-40da-81e0-1b39efe2f008","ec7b4a6b-cebc-452f-9487-b3ecdff6cbfc","86b21e0f-1bf7-462a-939f-fcdcac5d4832","2f802c02-0f88-47ce-b2e9-e9d1f5262829","6f549867-4a2b-454d-a38f-22d32de3897a","38908e10-464a-4508-87cb-83214e36d75a","e91ae725-a876-48f0-9870-f86b2965e65a","60d0858b-fe06-42c7-b79d-89bd59462a08","348542ea-f766-4bd3-8320-20283d21882a","373fea8b-1d8e-41d0-a2a5-a23876c30bcf","fa3e131d-166e-4825-b0e5-22eebbb22aa2","981de3d6-0261-45f9-926d-9ee820dfef48","cd76a54c-ec9d-4ab2-9aa0-5c6496171059","a3504f0b-3428-4a26-a1ce-5fc587d3b5d2","ae006fa7-7862-4101-9d47-5503a259741f","26d83246-5be5-4d4b-b055-2c337ac7a6e1","dbe6311c-7a01-41b3-ba16-95b70bd42fcb","ae4bda44-8694-4936-a4b8-5f72af629ac0","1807cc1c-60f4-47ca-8eb7-99bbef34b28b"],"format":{"page_icon":"https://s3.us-west-2.amazonaws.com/secure.notion-static.com/efaf9256-833c-41b8-a88d-7466ca5ceeb9/srchttp___img.pconline.com.cn_images_nospd_upload_upc_tx_pcdlc_2108_16_c7_274750145_1629102176621.pngreferhttp___img.pconline.com.webp?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20221025%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20221025T133709Z&X-Amz-Expires=86400&X-Amz-Signature=26cb3fe310d3362107bc8b4bd249d5ce6ea13a337b9cf70d0809e148e61a7996&X-Amz-SignedHeaders=host&x-id=GetObject","page_cover":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/53a13a4f-9fad-4264-b03c-2c624cb95a5d/pexels-sarahclaude-levesque-stlouis-13740341.jpeg","page_small_text":true,"page_cover_position":0.7223},"created_time":1666705323761,"last_edited_time":1666792860000,"parent_id":"802f1041-8e8c-4dfb-9a7e-828adc379fe9","parent_table":"collection","alive":true,"file_ids":["efaf9256-833c-41b8-a88d-7466ca5ceeb9","53a13a4f-9fad-4264-b03c-2c624cb95a5d"],"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"4176c3f0-95d8-4ac1-9df1-7f705120857b":{"role":"reader","value":{"id":"4176c3f0-95d8-4ac1-9df1-7f705120857b","version":15,"type":"collection_view","view_ids":["2dc61413-fd47-4c47-9c55-7f12d9f3567c"],"collection_id":"802f1041-8e8c-4dfb-9a7e-828adc379fe9","format":{"collection_pointer":{"id":"802f1041-8e8c-4dfb-9a7e-828adc379fe9","table":"collection","spaceId":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"created_time":1666705323761,"last_edited_time":1666791689631,"parent_id":"72a66971-7cf6-42c2-a252-4439d99d8f44","parent_table":"block","alive":true,"file_ids":["bc7d6ffa-a7ed-4623-9b4b-760071f91143"],"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"72a66971-7cf6-42c2-a252-4439d99d8f44":{"role":"reader","value":{"id":"72a66971-7cf6-42c2-a252-4439d99d8f44","version":608,"type":"page","properties":{"title":[["流心家的羊"]]},"content":["23b11c7c-8146-4639-912c-14406e078331","416b3867-4b4b-4ac0-bc8e-196792a57c07","fec36412-bc7e-4ec3-972d-b67b1ddd20f8","8b4d1555-cb50-45a3-a875-87242a4548bb","4176c3f0-95d8-4ac1-9df1-7f705120857b","1118fa3e-20b3-488c-976d-3346081fde80","e7596c25-bafa-4ece-94b6-e7973c7a2ab3","20cd31e6-ea32-4c1b-b7ef-c70749c2f4cb","ab7c7afa-73c5-4b21-9759-89a9dee4d7e8","82aad922-cb77-4452-81bf-56f4e8e5a408"],"format":{"page_icon":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/37907dd5-3c76-4966-a419-daa027a84972/IMG_2189.jpg","page_full_width":false,"page_small_text":false,"copied_from_pointer":{"id":"bd32b787-e471-49f3-8941-174a9c6846b6","table":"block","spaceId":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"permissions":[{"role":"editor","type":"user_permission","user_id":"d1805983-7869-451d-bf8b-64135a5d4ee7"},{"role":"reader","type":"public_permission","added_timestamp":1660963691744,"allow_duplicate":false}],"created_time":1660961589760,"last_edited_time":1667651940000,"parent_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6","parent_table":"space","alive":true,"copied_from":"bd32b787-e471-49f3-8941-174a9c6846b6","file_ids":["63e89fe9-f5cd-4414-be0e-53d91aa54fc3","37907dd5-3c76-4966-a419-daa027a84972"],"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"4f906dc1-09b1-4227-bf76-96170afc683d":{"role":"reader","value":{"id":"4f906dc1-09b1-4227-bf76-96170afc683d","version":11,"type":"text","properties":{"title":[["本文主要讲解有栈线程的实现原理，以云风实现的coroutine为例。在讲解之前，本文会先描述一些基本的概念，保证读者能够轻松的理解coroutine的实现。"]]},"created_time":1666705631215,"last_edited_time":1666792860000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"8e81cab6-c3a2-450c-9bf1-f0882bac3486":{"role":"reader","value":{"id":"8e81cab6-c3a2-450c-9bf1-f0882bac3486","version":2,"type":"sub_header","properties":{"title":[["协程",[["b"]]]]},"created_time":1666705631215,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"35d499e0-c22a-4a2c-9ae1-2d85663e1e37":{"role":"reader","value":{"id":"35d499e0-c22a-4a2c-9ae1-2d85663e1e37","version":2,"type":"text","properties":{"title":[["关于协程的概念，在网上没有找到正式的解释，下面就说说个人的理解，(有栈)协程可以理解为一个用户态下的线程，在用户态下进行线程（协程）的上下文切换。但是和传统的线程不同的是：线程是抢占式执行，当发生系统调用或者中断的时候，交由OS调度执行；而协程是通过yield主动让出cpu所有权，切换到其他协程执行。"]]},"created_time":1666705631216,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"d136215b-f9ff-4684-af87-4713e87a58a9":{"role":"reader","value":{"id":"d136215b-f9ff-4684-af87-4713e87a58a9","version":2,"type":"sub_header","properties":{"title":[["进程、线程",[["b"]]]]},"created_time":1666705631216,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"2dac9005-e545-4d57-a460-ffb285320979":{"role":"reader","value":{"id":"2dac9005-e545-4d57-a460-ffb285320979","version":2,"type":"sub_sub_header","properties":{"title":[["进程地址空间",[["b"]]]]},"created_time":1666705631216,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"a7d14f4d-3bc5-4c50-bfd5-ea2a2a448af5":{"role":"reader","value":{"id":"a7d14f4d-3bc5-4c50-bfd5-ea2a2a448af5","version":2,"type":"text","properties":{"title":[["一般来说一个进程的地址空间有这几个默认区域:"]]},"created_time":1666705631216,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"91628bb2-5c64-426d-b2b7-14b29e336250":{"role":"reader","value":{"id":"91628bb2-5c64-426d-b2b7-14b29e336250","version":2,"type":"numbered_list","properties":{"title":[["栈：栈用于维护函数调用的上下文，包括函数的参数，局部变量等等。"]]},"created_time":1666705631216,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"4433f2bd-2a79-4795-92e1-c09a2636e3d5":{"role":"reader","value":{"id":"4433f2bd-2a79-4795-92e1-c09a2636e3d5","version":2,"type":"numbered_list","properties":{"title":[["堆：用来容纳程序中动态分配的内存区域，当程序使用malloc和new分配的内存就来自于堆里"]]},"created_time":1666705631216,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"75589f09-ebcf-4426-9dd9-eedc19488454":{"role":"reader","value":{"id":"75589f09-ebcf-4426-9dd9-eedc19488454","version":2,"type":"numbered_list","properties":{"title":[["可执行文件映像。"]]},"created_time":1666705631216,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"ad649228-34ba-4f17-9803-8f3e37bc263b":{"role":"reader","value":{"id":"ad649228-34ba-4f17-9803-8f3e37bc263b","version":2,"type":"numbered_list","properties":{"title":[["保留区，是对内存中受到保护而禁止访问的内存区域的总称。"]]},"created_time":1666705631216,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"96ba8355-ddd9-4350-ad2e-ecc18cd12b42":{"role":"reader","value":{"id":"96ba8355-ddd9-4350-ad2e-ecc18cd12b42","version":3,"type":"text","properties":{"title":[["下图是linux下一个进程的典型内存布局: 在经典的操作系统中，栈总是 "],["向下增长",[["b"]]],[" ，从高地址向低地址增长，其中栈顶指针存储在 "],["[E|R]SP",[["b"]]],[" 寄存器中，而堆则总是 "],["向上增长",[["b"]]],[" ，从低地址向高地址增长。"]]},"created_time":1666705631216,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"07ba7389-4150-4490-9278-5b5da3b73e43":{"role":"reader","value":{"id":"07ba7389-4150-4490-9278-5b5da3b73e43","version":8,"type":"image","properties":{"source":[["https://user-images.githubusercontent.com/29531394/69554356-a42f3380-0fdc-11ea-9cf6-21c7d4b62bcc.png"]]},"format":{"block_width":432,"display_source":"https://user-images.githubusercontent.com/29531394/69554356-a42f3380-0fdc-11ea-9cf6-21c7d4b62bcc.png","block_full_width":false,"block_page_width":false},"created_time":1666706040000,"last_edited_time":1666706040000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"86e23e07-ac3f-4b6c-9e23-03a6abeb309d":{"role":"reader","value":{"id":"86e23e07-ac3f-4b6c-9e23-03a6abeb309d","version":2,"type":"sub_sub_header","properties":{"title":[["栈的增长方式",[["b"]]]]},"created_time":1666705631221,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"5c43ca66-30dc-4e2d-b1d7-651d571c22d3":{"role":"reader","value":{"id":"5c43ca66-30dc-4e2d-b1d7-651d571c22d3","version":2,"type":"text","properties":{"title":[["栈在程序运行中具有举足轻重的地位，最重要的，栈保存了一个函数调用所需要维护的信息，这常常被称为"],["堆栈帧",[["b"]]],["，堆栈帧一般包括下面几方面内容："]]},"created_time":1666705631221,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"a43216da-fa18-4432-bfdf-87185671a249":{"role":"reader","value":{"id":"a43216da-fa18-4432-bfdf-87185671a249","version":2,"type":"numbered_list","properties":{"title":[["函数的返回地址和参数"]]},"created_time":1666705631221,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"12d175f5-ec8a-481c-a758-c7be23c23064":{"role":"reader","value":{"id":"12d175f5-ec8a-481c-a758-c7be23c23064","version":2,"type":"numbered_list","properties":{"title":[["临时变量：包括函数的非静态局部变量以及编译器自动生成的其他临时变量"]]},"created_time":1666705631221,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"50bc5221-57b5-42e5-a937-b2c2d6d596f0":{"role":"reader","value":{"id":"50bc5221-57b5-42e5-a937-b2c2d6d596f0","version":2,"type":"numbered_list","properties":{"title":[["保存的上下文：包括在函数调用前后需要保存不变的寄存器的值"]]},"created_time":1666705631221,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"21eecbef-cda9-4605-ac90-76bbd66cca02":{"role":"reader","value":{"id":"21eecbef-cda9-4605-ac90-76bbd66cca02","version":2,"type":"text","properties":{"title":[["一个函数的堆栈帧用 "],["[E|R]SP,[E|R]BP",[["b"]]],[" ，这两个寄存器划定范围，"],["[E|R]SP",[["b"]]],["始终指向栈顶的位置称为栈指针寄存器，"],["[E|R]BP",[["b"]]],["指向堆栈帧的一个固定位置，"],["[E|R]BP",[["b"]]],[" 又被称为帧指针，一般函数中的局部变量靠 "],["[E|R]BP",[["b"]]],[" 加上偏移量寻找。"]]},"created_time":1666705631221,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"7b0e3d1e-9bcc-4c2d-a709-812198b482f8":{"role":"reader","value":{"id":"7b0e3d1e-9bcc-4c2d-a709-812198b482f8","version":2,"type":"quote","properties":{"title":[["[E|R]SP表示esp或者rsp寄存器，esp表示32位x86架构下的栈指针寄存器，rsp表示64位x86架构下的栈指针寄存器，同理于[E|R]BP。 帧指针并不是必须的, x86-64过程中的栈帧通常有固定的大小，在调用过程中栈指针保持固定的位置，使得可以通过相对于栈指针的偏移量来访问数据^1。"]]},"created_time":1666705631221,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"055afaa0-415a-4bfc-b29e-feeeef70e6fc":{"role":"reader","value":{"id":"055afaa0-415a-4bfc-b29e-feeeef70e6fc","version":2,"type":"text","properties":{"title":[["下面我们就简单讲解一下当程序调用一个简单的函数时，线程中的栈是如何增长的。假设有一个foo函数"]]},"created_time":1666705631221,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"a4c9f255-28fd-468c-9518-296a28388dbd":{"role":"reader","value":{"id":"a4c9f255-28fd-468c-9518-296a28388dbd","version":2,"type":"code","properties":{"title":[["int foo(int m, int n){\n  int a = 0; // #i\n  ....\n}\n"]],"language":[["Plain Text"]]},"format":{"code_wrap":true},"created_time":1666705631222,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"08d8031f-2c49-4288-ac06-52bf5588d29d":{"role":"reader","value":{"id":"08d8031f-2c49-4288-ac06-52bf5588d29d","version":2,"type":"text","properties":{"title":[["该函数对应的堆栈帧的内存空间如下所示，一个函数的堆栈帧增长过程是这样的："]]},"created_time":1666705631222,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"bb9d0a91-f647-464d-ab95-1e19088df2dd":{"role":"reader","value":{"id":"bb9d0a91-f647-464d-ab95-1e19088df2dd","version":2,"type":"numbered_list","properties":{"title":[["把所有或一部分参数加入栈中，如果有其他参数没有入栈，那么使用某些寄存器传递"]]},"created_time":1666705631222,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"abe8541c-01e7-4016-9fd3-77c958eb789c":{"role":"reader","value":{"id":"abe8541c-01e7-4016-9fd3-77c958eb789c","version":2,"type":"numbered_list","properties":{"title":[["把当前指令的下一条指令地址压入栈中"]]},"created_time":1666705631222,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"e1e3a279-a731-4560-919e-8ce9fb71ae8c":{"role":"reader","value":{"id":"e1e3a279-a731-4560-919e-8ce9fb71ae8c","version":2,"type":"numbered_list","properties":{"title":[["跳转到函数体执行:"]]},"created_time":1666705631222,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"3fbf77c8-2147-4151-9f49-a9ff7348f072":{"role":"reader","value":{"id":"3fbf77c8-2147-4151-9f49-a9ff7348f072","version":2,"type":"numbered_list","properties":{"title":[["把[e|r]bp压入栈中，指向上一个函数堆栈帧中的帧指针的位置"]]},"created_time":1666705631222,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"49976419-0270-4688-889c-56794efdba1b":{"role":"reader","value":{"id":"49976419-0270-4688-889c-56794efdba1b","version":2,"type":"numbered_list","properties":{"title":[["保存调用前后需要保存不变的寄存器的值"]]},"created_time":1666705631222,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"0c6dfb0d-b3af-4c0a-bd00-8bf49c9f3e7c":{"role":"reader","value":{"id":"0c6dfb0d-b3af-4c0a-bd00-8bf49c9f3e7c","version":2,"type":"numbered_list","properties":{"title":[["将局部变量压入栈中"]]},"created_time":1666705631222,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"7f809b26-a9b9-4443-a62b-877633432b10":{"role":"reader","value":{"id":"7f809b26-a9b9-4443-a62b-877633432b10","version":2,"type":"numbered_list","properties":{"title":[["..."]]},"created_time":1666705631222,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"cef12a15-5102-4973-baa8-0421f1e47ee4":{"role":"reader","value":{"id":"cef12a15-5102-4973-baa8-0421f1e47ee4","version":3,"type":"text","properties":{"title":[["当函数调用返回之后，相应的函数堆栈帧也会弹出，弹出的流程不是本篇文章的重点，在此就不详细讲解，感兴趣的推荐看 "],["程序员的自我修养",[["b"]]],[" 中讲解堆栈的部分。"]]},"created_time":1666705631222,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"f0eacf32-1694-4024-99b5-6c4350bfb1a0":{"role":"reader","value":{"id":"f0eacf32-1694-4024-99b5-6c4350bfb1a0","version":8,"type":"image","properties":{"source":[["https://user-images.githubusercontent.com/29531394/69641429-2847f080-109b-11ea-80fa-fab3c148dba6.png"]]},"format":{"block_width":480,"display_source":"https://user-images.githubusercontent.com/29531394/69641429-2847f080-109b-11ea-80fa-fab3c148dba6.png","block_full_width":false,"block_page_width":false},"created_time":1666706100000,"last_edited_time":1666706100000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"9ee42d63-2922-4d15-add9-6e8651790ac6":{"role":"reader","value":{"id":"9ee42d63-2922-4d15-add9-6e8651790ac6","version":2,"type":"sub_sub_header","properties":{"title":[["线程",[["b"]]]]},"created_time":1666705631222,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"59d72c96-5ad1-4aba-93cd-be36c5c66036":{"role":"reader","value":{"id":"59d72c96-5ad1-4aba-93cd-be36c5c66036","version":2,"type":"text","properties":{"title":[["一个标准的线程由线程id、程序计数器(PC)、寄存器集合和栈组成。"]]},"created_time":1666705631222,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"e66ddecc-a9b1-4385-9fc2-bd9893995708":{"role":"reader","value":{"id":"e66ddecc-a9b1-4385-9fc2-bd9893995708","version":2,"type":"text","properties":{"title":[["每个线程类似一个独立进程，不同的是线程之间共享地址空间，能够访问到相同的数据。线程之间共享进程的内存空间(包括代码段、数据段、堆等)以及以下进程级的资源（如打开文件和信号）。"]]},"created_time":1666705631222,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"30730b9a-01a6-4b21-be38-b91ec9d388c6":{"role":"reader","value":{"id":"30730b9a-01a6-4b21-be38-b91ec9d388c6","version":3,"type":"text","properties":{"title":[["一个经典的进程和线程的关系如下图所示："]]},"created_time":1666705631222,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"25f67fb5-0b1e-432c-96c4-9333aea3f1ae":{"role":"reader","value":{"id":"25f67fb5-0b1e-432c-96c4-9333aea3f1ae","version":8,"type":"image","properties":{"source":[["https://user-images.githubusercontent.com/29531394/69556981-be6b1080-0fe0-11ea-8f46-9ef60c77f161.png"]]},"format":{"block_width":528,"display_source":"https://user-images.githubusercontent.com/29531394/69556981-be6b1080-0fe0-11ea-8f46-9ef60c77f161.png","block_full_width":false,"block_page_width":false},"created_time":1666706100000,"last_edited_time":1666706100000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"c237a7a8-364e-4500-a1ae-bf7605745077":{"role":"reader","value":{"id":"c237a7a8-364e-4500-a1ae-bf7605745077","version":2,"type":"sub_sub_header","properties":{"title":[["线程上下文切换",[["b"]]]]},"created_time":1666705631223,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"db508679-342b-49e6-a042-75a3b8efe585":{"role":"reader","value":{"id":"db508679-342b-49e6-a042-75a3b8efe585","version":3,"type":"text","properties":{"title":[["假设有2个线程运行在一个处理器上，从运行一个线程(T1)切换到另一个线程(T2)时，一定会发生上下文切换。对于进程，我们需要将状态保存到进程控制块(PCB)中，现在我们需要一个或多个线程控制块(TCB)来保存每个线程的状态，但是和进程上下文切换相比，线程在进行上下文切换的时候"],["地址空间保持不变",[["b"]]],["(即不需要切换当前使用的页表)。一个拥有多线程的进程的地址空间，如下图所示，我们可以看到每个线程拥有有自己的栈。"]]},"created_time":1666705631223,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"37747cf3-026f-4a6c-ab4b-a66c02ed56c8":{"role":"reader","value":{"id":"37747cf3-026f-4a6c-ab4b-a66c02ed56c8","version":9,"type":"image","properties":{"source":[["https://user-images.githubusercontent.com/29531394/69641464-372ea300-109b-11ea-9946-b107ad6f85d5.png"]]},"format":{"block_width":384,"display_source":"https://user-images.githubusercontent.com/29531394/69641464-372ea300-109b-11ea-9946-b107ad6f85d5.png","block_full_width":false,"block_page_width":false},"created_time":1666706100000,"last_edited_time":1666706160000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"2ce1cc8a-ae4b-4be1-8e38-e61a7ef351c7":{"role":"reader","value":{"id":"2ce1cc8a-ae4b-4be1-8e38-e61a7ef351c7","version":2,"type":"sub_sub_header","properties":{"title":[["实现协程的理论依据",[["b"]]]]},"created_time":1666705631223,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"d8a14a30-fbaf-4e9b-84b2-94f7cd2aa6b5":{"role":"reader","value":{"id":"d8a14a30-fbaf-4e9b-84b2-94f7cd2aa6b5","version":2,"type":"text","properties":{"title":[["有栈协程就是实现了一个用户态的线程，用户可以在堆上模拟出协程的栈空间，当需要进行协程上下文切换的时候，主线程只需要交换栈空间和恢复协程的一些相关的寄存器的状态就可以实现一个用户态的线程上下文切换，没有了从用户态转换到内核态的切换成本，协程的执行也就更加高效。"]]},"created_time":1666705631223,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"9ea50f10-7834-49c6-bceb-3da6d172637f":{"role":"reader","value":{"id":"9ea50f10-7834-49c6-bceb-3da6d172637f","version":2,"type":"sub_header","properties":{"title":[["ucontext",[["b"]]]]},"created_time":1666705631223,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"cad9ed69-7d0d-4da9-8b65-b4263a3b1409":{"role":"reader","value":{"id":"cad9ed69-7d0d-4da9-8b65-b4263a3b1409","version":2,"type":"text","properties":{"title":[["我们参考的协程实现是云风大佬编写的coroutine，源码只有不到200行，很适合用来阅读学习。在这个版本的coroutine中，使用ucontext族函数实现。我们先来简单的看一下这个函数族的基本功能。该部分参考自博客"],["^2",[["a","https://blog.csdn.net/qq910894904/article/details/41911175"]]],["。"]]},"created_time":1666705631223,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"7fad2f70-d050-48d5-94a0-6387a032c97e":{"role":"reader","value":{"id":"7fad2f70-d050-48d5-94a0-6387a032c97e","version":2,"type":"text","properties":{"title":[["在类System V环境中,在头文件< ucontext.h > 中定义了两个结构类型，mcontext_t 和 ucontext_t和四个函数getcontext(),setcontext(),makecontext(),swapcontext().利用它们可以在一个进程中实现用户级的线程切换。 ucontext_t 结构体定义如下:"]]},"created_time":1666705631223,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"4248ee79-fe6b-4154-ac97-45cf469bb381":{"role":"reader","value":{"id":"4248ee79-fe6b-4154-ac97-45cf469bb381","version":2,"type":"code","properties":{"title":[["typedef struct ucontext {\n  struct ucontext *uc_link;\n  sigset_t         uc_sigmask;\n  stack_t          uc_stack;\n  mcontext_t       uc_mcontext;\n  ...\n} ucontext_t;\n"]],"language":[["Plain Text"]]},"format":{"code_wrap":true},"created_time":1666705631223,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"c9c84025-3590-46b1-9000-8b9ed4321c87":{"role":"reader","value":{"id":"c9c84025-3590-46b1-9000-8b9ed4321c87","version":2,"type":"text","properties":{"title":[["当当前上下文(如使用 makecontext 创建的上下文）运行终止时系统会恢复uc_link指向的上下文；uc_sigmask为该上下文中的阻塞信号集合；uc_stack为该上下文中使用的栈；uc_mcontext保存的上下文的特定机器表示，包括调用线程的特定寄存器等。"]]},"created_time":1666705631223,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"4c5bb217-d846-4cc7-bb7a-868ac368e362":{"role":"reader","value":{"id":"4c5bb217-d846-4cc7-bb7a-868ac368e362","version":2,"type":"text","properties":{"title":[["下面讲解四个函数的作用，详细的函数使用方法参考man手册:"]]},"created_time":1666705631223,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"d50715f1-896c-49fa-8f35-5cdec5daf320":{"role":"reader","value":{"id":"d50715f1-896c-49fa-8f35-5cdec5daf320","version":2,"type":"text","properties":{"title":[["1. 初始化ucp结构体，将当前的上下文保存到ucp中"]]},"created_time":1666705631223,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"1a947dcd-57ec-4555-a3be-7d2eda2ce51b":{"role":"reader","value":{"id":"1a947dcd-57ec-4555-a3be-7d2eda2ce51b","version":2,"type":"code","properties":{"title":[["   int getcontext(ucontext_t *ucp);\n"]],"language":[["Plain Text"]]},"format":{"code_wrap":true},"created_time":1666705631223,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"e77eb67a-17b6-407c-bffc-7ae7c9b8d1d9":{"role":"reader","value":{"id":"e77eb67a-17b6-407c-bffc-7ae7c9b8d1d9","version":2,"type":"text","properties":{"title":[["2. 修改用户线程的上下文指向参数ucp，在调用makecontext之前必须调用getcontext初始化一个ucp，并且需要分配一个栈空间给初始化后的ucp，当上下文通过setcontext或者swapcontext激活后，就会紧接着调用第二个参数指向的函数func，参数argc代表 func所需的参数，在调用makecontext之前你需要初始化参数ucp->uc_link，这个参数表示func()执行之后，用户线程将要切换到ucp->uc_link所代表的上下文，其实是隐式的调用了setcontext函数。"]]},"created_time":1666705631223,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"d488bc7b-a4dc-45bd-993b-b3c3278e8916":{"role":"reader","value":{"id":"d488bc7b-a4dc-45bd-993b-b3c3278e8916","version":2,"type":"code","properties":{"title":[["   void makecontext(ucontext_t *ucp, void (*func)(), int argc, ...);\n"]],"language":[["Plain Text"]]},"format":{"code_wrap":true},"created_time":1666705631223,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"0f5fe11f-ec66-46d7-a44c-1d2a99ce5e38":{"role":"reader","value":{"id":"0f5fe11f-ec66-46d7-a44c-1d2a99ce5e38","version":2,"type":"text","properties":{"title":[["3. 设置当前的上下文为ucp，setcontext的上下文ucp应该通过getcontext或者makecontext取得，如果调用成功则不返回。"]]},"created_time":1666705631223,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"b91f6d88-d908-4262-b2fe-994aa7e8d436":{"role":"reader","value":{"id":"b91f6d88-d908-4262-b2fe-994aa7e8d436","version":2,"type":"code","properties":{"title":[["   int setcontext(const ucontext_t *ucp);\n"]],"language":[["Plain Text"]]},"format":{"code_wrap":true},"created_time":1666705631223,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"9fb6b29b-acaa-4747-bf1f-7665b4f67933":{"role":"reader","value":{"id":"9fb6b29b-acaa-4747-bf1f-7665b4f67933","version":2,"type":"text","properties":{"title":[["4.  保存当前上下文到oucp结构体中，然后激活upc上下文。"]]},"created_time":1666705631223,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"790ae170-7b15-468a-8611-1282ea1467fc":{"role":"reader","value":{"id":"790ae170-7b15-468a-8611-1282ea1467fc","version":2,"type":"code","properties":{"title":[["   int swapcontext(ucontext_t *oucp, ucontext_t *ucp);\n"]],"language":[["Plain Text"]]},"format":{"code_wrap":true},"created_time":1666705631223,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"8dd267bd-9110-4700-8357-be1e7f220e34":{"role":"reader","value":{"id":"8dd267bd-9110-4700-8357-be1e7f220e34","version":2,"type":"text","properties":{"title":[["写个简单的例子来看一下如何使用："]]},"created_time":1666705631223,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"39761a5f-a2c1-41d1-8a1b-4bc0d11b62c7":{"role":"reader","value":{"id":"39761a5f-a2c1-41d1-8a1b-4bc0d11b62c7","version":2,"type":"code","properties":{"title":[["#include <ucontext.h>\n#include <stdio.h>\n\nint func(void *arg) {\n  puts(\"this is func\");\n}\n\nvoid coroutine_test() {\n  char stack[1024 * 128];\n  ucontext_t child, main;\n  // 获取当前上下文\n  getcontext(&child);\n\n  // 分配栈空间 uc_stack.ss_sp 指向栈顶\n  child.uc_stack.ss_sp = stack;\n  child.uc_stack.ss_size = sizeof(stack);\n  child.uc_stack.ss_flags = 0;\n  // 指定后继上下文\n  child.uc_link = &main;\n  // child.uc_link = NULL;\n\n  makecontext(&child, (void (*)(void))func, 0);\n\n  //切换到child上下文，保存当前上下文到main\n  swapcontext(&main, &child);\n  // 如果设置了后继上下文，func函数指向完后会返回此处 如果设置为NULL，就不会执行这一步\n  puts(\"this is coroutine_test\");\n}\n\nint main() {\n  coroutine_test();\n  return 0;\n}\n"]],"language":[["Plain Text"]]},"format":{"code_wrap":true},"created_time":1666705631223,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"058caf7a-8212-44ab-b2c4-5c7ed4fad8e0":{"role":"reader","value":{"id":"058caf7a-8212-44ab-b2c4-5c7ed4fad8e0","version":2,"type":"text","properties":{"title":[["程序的执行结果为："]]},"created_time":1666705631223,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"fec8c2a7-fda7-4a04-a0ac-cd6334f45884":{"role":"reader","value":{"id":"fec8c2a7-fda7-4a04-a0ac-cd6334f45884","version":2,"type":"code","properties":{"title":[["this is func\nthis is coroutine_test\n"]],"language":[["Plain Text"]]},"format":{"code_wrap":true},"created_time":1666705631223,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"fae97933-8250-42a9-9d30-fd956d257f5b":{"role":"reader","value":{"id":"fae97933-8250-42a9-9d30-fd956d257f5b","version":2,"type":"sub_header","properties":{"title":[["coroutine实现",[["b"]]]]},"created_time":1666705631223,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"cbd640e3-bcdb-4f97-a8a7-656cf924f707":{"role":"reader","value":{"id":"cbd640e3-bcdb-4f97-a8a7-656cf924f707","version":2,"type":"text","properties":{"title":[["本文不打算详细讲解coroutine的代码实现，具体的实现细节大家可以参考文章"],["^3",[["a","https://zhuanlan.zhihu.com/p/84935949"]]],[",本文的代码注释也来自这篇文章，建议看完本节之后再阅读该文章来了解代码实现细节。通过学习了前几节讲到的基础知识，相信大家能够比较轻松的看懂协程代码的实现。本小节主要从整体的角度来讲解coroutine的实现。"]]},"created_time":1666705631224,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"c2987670-327c-4b36-b94f-6641d09914fe":{"role":"reader","value":{"id":"c2987670-327c-4b36-b94f-6641d09914fe","version":2,"type":"sub_sub_header","properties":{"title":[["coroutine例子",[["b"]]]]},"created_time":1666705631224,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"f0e5f550-b393-40a4-afa7-795278afe9c8":{"role":"reader","value":{"id":"f0e5f550-b393-40a4-afa7-795278afe9c8","version":2,"type":"code","properties":{"title":[["#include \"coroutine.h\"\n#include <stdio.h>\n\nstruct args {\n    int n;\n};\n\nstatic void\nfoo(struct schedule * S, void *ud) {\n    struct args * arg = ud;\n    int start = arg->n;\n    int i;\n    for (i=0;i<5;i++) {\n        printf(\"coroutine %d : %d\\n\",coroutine_running(S) , start + i);\n        // 切出当前协程\n        coroutine_yield(S);\n    }\n}\n\nstatic void\ntest(struct schedule *S) {\n    struct args arg1 = { 0 };\n    struct args arg2 = { 100 };\n\n    // 创建两个协程\n    int co1 = coroutine_new(S, foo, &arg1);\n    int co2 = coroutine_new(S, foo, &arg2);\n    printf(\"main start\\n\");\n    while (coroutine_status(S,co1) && coroutine_status(S,co2)) {\n        // 使用协程co1\n        coroutine_resume(S,co1);\n        // 使用协程co2\n        coroutine_resume(S,co2);\n    }\n    printf(\"main end\\n\");\n}\n\nint\nmain() {\n    // 创建一个协程调度器\n    struct schedule * S = coroutine_open();\n    test(S);\n    // 关闭协程调度器\n    coroutine_close(S);\n    return 0;\n}\n"]],"language":[["Plain Text"]]},"format":{"code_wrap":true},"created_time":1666705631224,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"4eaf087d-6ed6-47a4-b8ba-b57824ce3ae2":{"role":"reader","value":{"id":"4eaf087d-6ed6-47a4-b8ba-b57824ce3ae2","version":2,"type":"sub_sub_header","properties":{"title":[["核心对象",[["b"]]]]},"created_time":1666705631224,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"df95d776-1205-4b84-9b4f-63e0fff2dbed":{"role":"reader","value":{"id":"df95d776-1205-4b84-9b4f-63e0fff2dbed","version":2,"type":"numbered_list","properties":{"title":[["struct schedule* S 协程调度器"]]},"created_time":1666705631224,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"a99feb74-7567-480c-96dd-a905d0552c56":{"role":"reader","value":{"id":"a99feb74-7567-480c-96dd-a905d0552c56","version":2,"type":"code","properties":{"title":[["   struct schedule {\n       char stack[STACK_SIZE]; // 运行时栈，此栈即是共享栈\n       ucontext_t main; // 主协程的上下文\n       int nco;        // 当前存活的协程个数\n       int cap;        // 协程管理器的当前最大容量，即可以同时支持多少个协程。如果不够了，则进行2倍扩容\n       int running;    // 正在运行的协程ID\n       struct coroutine **co; // 一个一维数组，用于存放所有协程。其长度等于cap\n   };\n"]],"language":[["Plain Text"]]},"format":{"code_wrap":true},"created_time":1666705631224,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"fbe82787-4892-4a92-9ac5-03816011e43d":{"role":"reader","value":{"id":"fbe82787-4892-4a92-9ac5-03816011e43d","version":2,"type":"text","properties":{"title":[["调度器中包含协程运行时的共享栈stack，共享栈可以认为所有的协程在运行时用的都是同一块栈，当调用协程的时候，将自己的栈拷贝到共享栈即可。当协程切出时，将栈空间再复制出来。"]]},"created_time":1666705631224,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"effeaa4d-437b-4633-9afe-84ab4d8679a3":{"role":"reader","value":{"id":"effeaa4d-437b-4633-9afe-84ab4d8679a3","version":2,"type":"text","properties":{"title":[["还包括主协程上下文，可以认为是协程执行完毕之后回到的上下文。"]]},"created_time":1666705631224,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"f08bb8cc-e803-428f-b1c2-6d7ffb7f9082":{"role":"reader","value":{"id":"f08bb8cc-e803-428f-b1c2-6d7ffb7f9082","version":2,"type":"text","properties":{"title":[["以及一个一维数组，用来存放调度器包括的所有协程。"]]},"created_time":1666705631224,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"65b0ac31-badf-4693-80ce-2819019efb9e":{"role":"reader","value":{"id":"65b0ac31-badf-4693-80ce-2819019efb9e","version":2,"type":"text","properties":{"title":[["2. coroutine协程"]]},"created_time":1666705631224,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"9de81087-7a12-4ff0-bb76-76cfb27a7c73":{"role":"reader","value":{"id":"9de81087-7a12-4ff0-bb76-76cfb27a7c73","version":2,"type":"text","properties":{"title":[["coroutine结构体包括协程需要执行的函数，协程自己的上下文，用于上下文切换，以及stack用来保存运行时栈。"]]},"created_time":1666705631224,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"d5d8ffed-8268-480d-a351-b90524cb5a4c":{"role":"reader","value":{"id":"d5d8ffed-8268-480d-a351-b90524cb5a4c","version":2,"type":"sub_sub_header","properties":{"title":[["协程状态",[["b"]]]]},"created_time":1666705631224,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"af0f53fe-cf46-43b2-9674-08b17d92699f":{"role":"reader","value":{"id":"af0f53fe-cf46-43b2-9674-08b17d92699f","version":4,"type":"text","properties":{"title":[["协程有4个状态，分别是READY、RUNNING、SUSPEND、DEAD这四个状态。状态转换如图所示："]]},"created_time":1666705631224,"last_edited_time":1666705680000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"78e0e956-3b6a-4a66-81cf-88bae3c08dfd":{"role":"reader","value":{"id":"78e0e956-3b6a-4a66-81cf-88bae3c08dfd","version":8,"type":"image","properties":{"source":[["https://user-images.githubusercontent.com/29531394/69722195-7a4b4d80-1151-11ea-97e8-3c7c32c91046.png"]]},"format":{"block_width":480,"display_source":"https://user-images.githubusercontent.com/29531394/69722195-7a4b4d80-1151-11ea-97e8-3c7c32c91046.png","block_full_width":false,"block_page_width":false},"created_time":1666706160000,"last_edited_time":1666706160000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"dfce57f8-28d1-4988-9d3e-a0ca7e79f531":{"role":"reader","value":{"id":"dfce57f8-28d1-4988-9d3e-a0ca7e79f531","version":2,"type":"text","properties":{"title":[["coroutine_new函数用来创建一个协程，协程进行状态转移的核心实现位于coroutine_resume函数和coroutine_yield函数中。"]]},"created_time":1666705631224,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"130c601e-5a42-44e5-b22d-50e516936644":{"role":"reader","value":{"id":"130c601e-5a42-44e5-b22d-50e516936644","version":2,"type":"sub_sub_header","properties":{"title":[["READY -> RUNNING",[["b"]]]]},"created_time":1666705631224,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"661cfdf7-9081-4917-acf5-bce89d9cef83":{"role":"reader","value":{"id":"661cfdf7-9081-4917-acf5-bce89d9cef83","version":2,"type":"text","properties":{"title":[["我们现看一下从READY状态转移到RUNNING状态进行的操作，和我们上面讲ucontext举的例子一样。首先，我们初始化协程的上下文，将协程的栈空间指向调度器中的共享栈，uc_link参数设定为S->main，当执行完makecontext指定的函数之后就会返回到调用coroutine_resume函数的地方。"]]},"created_time":1666705631224,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"68f519a8-853b-40da-81e0-1b39efe2f008":{"role":"reader","value":{"id":"68f519a8-853b-40da-81e0-1b39efe2f008","version":2,"type":"code","properties":{"title":[["// coroutine_resume\nswitch(status) {\n    case COROUTINE_READY:\n        //初始化ucontext_t结构体,将当前的上下文放到C->ctx里面\n        getcontext(&C->ctx);\n        // 将当前协程的运行时栈的栈顶设置为S->stack，每个协程都这么设置，这就是所谓的共享栈。（注意，这里是栈顶）\n        C->ctx.uc_stack.ss_sp = S->stack;\n        C->ctx.uc_stack.ss_size = STACK_SIZE;\n        C->ctx.uc_link = &S->main; // 如果协程执行完，将切换到主协程中执行\n        S->running = id;\n        C->status = COROUTINE_RUNNING;\n\n        // 设置执行C->ctx函数, 并将S作为参数传进去\n        uintptr_t ptr = (uintptr_t)S;\n        makecontext(&C->ctx, (void (*)(void)) mainfunc, 2, (uint32_t)ptr, (uint32_t)(ptr>>32));\n\n        // 将当前的上下文放入S->main中，并将C->ctx的上下文替换到当前上下文\n        swapcontext(&S->main, &C->ctx);\n        break;\n"]],"language":[["Plain Text"]]},"format":{"code_wrap":true},"created_time":1666705631224,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"ec7b4a6b-cebc-452f-9487-b3ecdff6cbfc":{"role":"reader","value":{"id":"ec7b4a6b-cebc-452f-9487-b3ecdff6cbfc","version":2,"type":"sub_sub_header","properties":{"title":[["RUNNING -> SUSPEND",[["b"]]]]},"created_time":1666705631224,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"86b21e0f-1bf7-462a-939f-fcdcac5d4832":{"role":"reader","value":{"id":"86b21e0f-1bf7-462a-939f-fcdcac5d4832","version":2,"type":"text","properties":{"title":[["当执行coroutine_yield函数之后，我们看到程序会首先保存当前协程的运行时栈，然后把协程的状态修改为挂起状态，并切换到主协程中。"]]},"created_time":1666705631224,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"2f802c02-0f88-47ce-b2e9-e9d1f5262829":{"role":"reader","value":{"id":"2f802c02-0f88-47ce-b2e9-e9d1f5262829","version":2,"type":"code","properties":{"title":[["void\ncoroutine_yield(struct schedule * S) {\n    // 取出当前正在运行的协程\n    int id = S->running;\n    assert(id >= 0);\n\n    struct coroutine * C = S->co[id];\n    assert((char *)&C > S->stack);\n\n    // 将当前运行的协程的栈内容保存起来\n    _save_stack(C,S->stack + STACK_SIZE);\n\n    // 将当前栈的状态改为 挂起\n    C->status = COROUTINE_SUSPEND;\n    S->running = -1;\n\n    // 所以这里可以看到，只能从协程切换到主协程中\n    swapcontext(&C->ctx , &S->main);\n}\n"]],"language":[["Plain Text"]]},"format":{"code_wrap":true},"created_time":1666705631224,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"6f549867-4a2b-454d-a38f-22d32de3897a":{"role":"reader","value":{"id":"6f549867-4a2b-454d-a38f-22d32de3897a","version":2,"type":"sub_sub_header","properties":{"title":[["SUSPEND -> RUNNING",[["b"]]]]},"created_time":1666705631224,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"38908e10-464a-4508-87cb-83214e36d75a":{"role":"reader","value":{"id":"38908e10-464a-4508-87cb-83214e36d75a","version":2,"type":"text","properties":{"title":[["当从挂起状态恢复为执行状态时，会将协程的运行时栈拷贝到共享栈，并再次切换上下文回到调用coroutine_yield函数的地方。"]]},"created_time":1666705631224,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"e91ae725-a876-48f0-9870-f86b2965e65a":{"role":"reader","value":{"id":"e91ae725-a876-48f0-9870-f86b2965e65a","version":2,"type":"code","properties":{"title":[["case COROUTINE_SUSPEND:\n        // 将协程所保存的栈的内容，拷贝到当前运行时栈中\n        // 其中C->size在yield时有保存\n        memcpy(S->stack + STACK_SIZE - C->size, C->stack, C->size);\n        S->running = id;\n        C->status = COROUTINE_RUNNING;\n        swapcontext(&S->main, &C->ctx);\n        break;\n"]],"language":[["Plain Text"]]},"format":{"code_wrap":true},"created_time":1666705631224,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"60d0858b-fe06-42c7-b79d-89bd59462a08":{"role":"reader","value":{"id":"60d0858b-fe06-42c7-b79d-89bd59462a08","version":2,"type":"sub_sub_header","properties":{"title":[["运行栈保存",[["b"]]]]},"created_time":1666705631224,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"348542ea-f766-4bd3-8320-20283d21882a":{"role":"reader","value":{"id":"348542ea-f766-4bd3-8320-20283d21882a","version":2,"type":"text","properties":{"title":[["当执行coroutine_yield函数的时候，会发现该函数会调用_save_stack将当前协程的栈保存起来，因为coroutine是基于共享栈的，所以协程的栈内容需要单独保存起来。这里有一个很trick的点，那就是当前协程的运行栈怎么保存起来，也就是如何获取协程的栈空间。"]]},"created_time":1666705631224,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"373fea8b-1d8e-41d0-a2a5-a23876c30bcf":{"role":"reader","value":{"id":"373fea8b-1d8e-41d0-a2a5-a23876c30bcf","version":2,"type":"text","properties":{"title":[["一开始我们会在初始化调度器的时候设置共享栈的大小，stack指向栈顶，为了降低内存的占用，我们保存协程栈的时候不会直接保存一份和共享栈一样大小的栈空间，这时候我们需要找到该协程的栈顶位置。"]]},"created_time":1666705631224,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"fa3e131d-166e-4825-b0e5-22eebbb22aa2":{"role":"reader","value":{"id":"fa3e131d-166e-4825-b0e5-22eebbb22aa2","version":2,"type":"text","properties":{"title":[["下面代码的实现非常巧妙，他声明了一个局部变量dummy，而dummy的地址就是栈顶位置，大家可以参考上面讲的foo函数栈增长部分，相信你一定也能想到。"]]},"created_time":1666705631224,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"981de3d6-0261-45f9-926d-9ee820dfef48":{"role":"reader","value":{"id":"981de3d6-0261-45f9-926d-9ee820dfef48","version":2,"type":"code","properties":{"title":[["static void\n_save_stack(struct coroutine *C, char *top) {\n    // 这个dummy很关键，是求取整个栈的关键\n    // 这个非常经典，涉及到linux的内存分布，栈是从高地址向低地址扩展，因此\n    // S->stack + STACK_SIZE就是运行时栈的栈底\n    // dummy，此时在栈中，肯定是位于最底的位置的，即栈顶\n    // top - &dummy 即整个栈的容量\n    char dummy = 0;\n    assert(top - &dummy <= STACK_SIZE);\n    if (C->cap < top - &dummy) {\n        free(C->stack);\n        C->cap = top-&dummy;\n        C->stack = malloc(C->cap);\n    }\n    C->size = top - &dummy;\n    memcpy(C->stack, &dummy, C->size);\n}\n"]],"language":[["Plain Text"]]},"format":{"code_wrap":true},"created_time":1666705631224,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"cd76a54c-ec9d-4ab2-9aa0-5c6496171059":{"role":"reader","value":{"id":"cd76a54c-ec9d-4ab2-9aa0-5c6496171059","version":2,"type":"sub_header","properties":{"title":[["goroutine实现",[["b"]]]]},"created_time":1666705631224,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"a3504f0b-3428-4a26-a1ce-5fc587d3b5d2":{"role":"reader","value":{"id":"a3504f0b-3428-4a26-a1ce-5fc587d3b5d2","version":2,"type":"text","properties":{"title":[["golang语言中的goroutine也是一个有栈协程，但是和本文讲到的coroutine还是有很大不同，首先golang有自己的协程调度器，而且golang的协程是抢占式执行的，关于golang的协程要写的东西还是太多了，得再开一篇文章讨论，大家可以阅读下面的文章有个深入的了解。"]]},"created_time":1666705631224,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"ae006fa7-7862-4101-9d47-5503a259741f":{"role":"reader","value":{"id":"ae006fa7-7862-4101-9d47-5503a259741f","version":2,"type":"text","properties":{"title":[["深入golang-runtime的调度",[["a","https://zboya.github.io/post/go_scheduler/#%E6%B7%B1%E5%85%A5golang-runtime%E7%9A%84%E8%B0%83%E5%BA%A6"]]]]},"created_time":1666705631224,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"26d83246-5be5-4d4b-b055-2c337ac7a6e1":{"role":"reader","value":{"id":"26d83246-5be5-4d4b-b055-2c337ac7a6e1","version":2,"type":"sub_header","properties":{"title":[["参考文献",[["b"]]]]},"created_time":1666705631224,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"dbe6311c-7a01-41b3-ba16-95b70bd42fcb":{"role":"reader","value":{"id":"dbe6311c-7a01-41b3-ba16-95b70bd42fcb","version":2,"type":"numbered_list","properties":{"title":[["Operating Systems",[["a","https://book.douban.com/subject/19973015/"]]]]},"created_time":1666705631225,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"ae4bda44-8694-4936-a4b8-5f72af629ac0":{"role":"reader","value":{"id":"ae4bda44-8694-4936-a4b8-5f72af629ac0","version":2,"type":"numbered_list","properties":{"title":[["程序员的自我修养",[["a","https://book.douban.com/subject/3652388/"]]]]},"created_time":1666705631225,"last_edited_time":1666705620000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"1807cc1c-60f4-47ca-8eb7-99bbef34b28b":{"role":"reader","value":{"id":"1807cc1c-60f4-47ca-8eb7-99bbef34b28b","version":24,"type":"sub_header","properties":{"title":[["Rust Learn"]]},"created_time":1664097392880,"last_edited_time":1666707180000,"parent_id":"b779ada2-9a57-4774-abf3-076830766f60","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"dd2baae1-8900-4073-854b-bdde392d5b36":{"role":"reader","value":{"id":"dd2baae1-8900-4073-854b-bdde392d5b36","version":68,"type":"page","properties":{"title":[["About"]]},"content":["e34dbc42-98d0-4e1d-ad9e-dc6631aa7273","36cdda23-4789-4ff5-8d18-99142f89bec4","770dde4e-b74e-4848-8b48-8b1ce3c111ea","2ca1f27b-da43-46f8-b8c0-ef3e05e583d9"],"format":{"page_icon":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/0dba7a3b-a420-477f-a184-076421f71ce6/external-author-literature-flaticons-lineal-color-flat-icons-2.png"},"permissions":[{"role":"editor","type":"user_permission","user_id":"d1805983-7869-451d-bf8b-64135a5d4ee7"},{"role":"reader","type":"public_permission","added_timestamp":1666532032810}],"created_time":1666531980000,"last_edited_time":1666655220000,"parent_id":"314bb437-f8b5-44ca-a749-b2b1413baa58","parent_table":"block","alive":true,"file_ids":["5349e794-a695-40dd-8bb5-4ea012d8b3f0","0dba7a3b-a420-477f-a184-076421f71ce6"],"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"314bb437-f8b5-44ca-a749-b2b1413baa58":{"role":"reader","value":{"id":"314bb437-f8b5-44ca-a749-b2b1413baa58","version":5,"type":"column","content":["dd2baae1-8900-4073-854b-bdde392d5b36"],"format":{"column_ratio":0.5},"created_time":1666625040000,"last_edited_time":1666625040000,"parent_id":"82aad922-cb77-4452-81bf-56f4e8e5a408","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"82aad922-cb77-4452-81bf-56f4e8e5a408":{"role":"reader","value":{"id":"82aad922-cb77-4452-81bf-56f4e8e5a408","version":5,"type":"column_list","content":["314bb437-f8b5-44ca-a749-b2b1413baa58","c7c8db4e-2a84-4461-9042-c0ccd0c86b7a"],"created_time":1666625040000,"last_edited_time":1666625040000,"parent_id":"72a66971-7cf6-42c2-a252-4439d99d8f44","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"e34dbc42-98d0-4e1d-ad9e-dc6631aa7273":{"role":"reader","value":{"id":"e34dbc42-98d0-4e1d-ad9e-dc6631aa7273","version":385,"type":"text","properties":{"title":[["你好呀！欢迎访问我的博客，我是 yangsoon，一名从事 Paas 开发的程序员，一直想写一些不一样的文章，不过一直在当鸽子…"]]},"created_time":1666624500000,"last_edited_time":1666624920000,"parent_id":"dd2baae1-8900-4073-854b-bdde392d5b36","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}}},"collection":{"802f1041-8e8c-4dfb-9a7e-828adc379fe9":{"role":"reader","value":{"id":"802f1041-8e8c-4dfb-9a7e-828adc379fe9","version":7,"name":[["OS"]],"schema":{"Zr<q":{"name":"Tags","type":"multi_select"},"vRhJ":{"name":"Created","type":"created_time"},"z`pV":{"name":"Text","type":"text"},"title":{"name":"Name","type":"title"}},"icon":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/bc7d6ffa-a7ed-4623-9b4b-760071f91143/linux.svg","format":{"collection_page_properties":[{"visible":true,"property":"vRhJ"},{"visible":true,"property":"Zr<q"}]},"parent_id":"4176c3f0-95d8-4ac1-9df1-7f705120857b","parent_table":"block","alive":true,"file_ids":["bc7d6ffa-a7ed-4623-9b4b-760071f91143"],"migrated":true,"space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}}},"collection_view":{"2dc61413-fd47-4c47-9c55-7f12d9f3567c":{"role":"reader","value":{"id":"2dc61413-fd47-4c47-9c55-7f12d9f3567c","version":9,"type":"gallery","name":"Blog","format":{"gallery_cover":{"type":"page_cover"},"collection_pointer":{"id":"802f1041-8e8c-4dfb-9a7e-828adc379fe9","table":"collection","spaceId":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"},"gallery_properties":[{"visible":true,"property":"title"},{"visible":true,"property":"vRhJ"},{"visible":true,"property":"Zr<q"},{"visible":true,"property":"z`pV"}],"collection_peek_mode":"full_page"},"parent_id":"4176c3f0-95d8-4ac1-9df1-7f705120857b","parent_table":"block","alive":true,"page_sort":["b779ada2-9a57-4774-abf3-076830766f60","d3ecd552-789f-452c-8753-2f0226325f65","a8bd2ec9-1288-4669-9940-ad46c5539100"],"query2":{"aggregations":[{"aggregator":"count"}]},"space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}}},"notion_user":{},"collection_query":{},"signed_urls":{"b779ada2-9a57-4774-abf3-076830766f60":"https://s3.us-west-2.amazonaws.com/secure.notion-static.com/53a13a4f-9fad-4264-b03c-2c624cb95a5d/pexels-sarahclaude-levesque-stlouis-13740341.jpeg?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20221117%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20221117T140114Z&X-Amz-Expires=86400&X-Amz-Signature=2fcbc4510dfeb806228a8ffde4692af38b2c4fe1b159a95747bbba3a714a7e0b&X-Amz-SignedHeaders=host&x-id=GetObject"},"preview_images":{"notion.so/image/s3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F53a13a4f-9fad-4264-b03c-2c624cb95a5d%2Fpexels-sarahclaude-levesque-stlouis-13740341.jpeg":{"originalWidth":640,"originalHeight":427,"dataURIBase64":"data:image/webp;base64,UklGRmAAAABXRUJQVlA4IFQAAADQAQCdASoQAAsABUB8JbACdAC7B6CzgAD9mTWaRaYs6Y29HE8WI1NMDVbxa7bbyzZ6pRkJGzGH+/CbZOfO83Lf4eLR32zWPrOKVPXxuaUy+632mAA="},"s3.us-west-2.amazonaws.com/secure.notion-static.com/efaf9256-833c-41b8-a88d-7466ca5ceeb9/srchttp___img.pconline.com.cn_images_nospd_upload_upc_tx_pcdlc_2108_16_c7_274750145_1629102176621.pngreferhttp___img.pconline.com.webp":null,"notion.so/image/s3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fbc7d6ffa-a7ed-4623-9b4b-760071f91143%2Flinux.svg":{"originalWidth":200,"originalHeight":200,"dataURIBase64":"data:image/webp;base64,UklGRvAAAABXRUJQVlA4WAoAAAAQAAAADwAADwAAQUxQSEgAAAARL6CmbQMWl9G+GhGB8hwYRZKkqBcEHP7RwgnAP5Z/MUsWIvo/AcrdltiPSdgiFwzQBzdcwQtYST/gpYrYlviCNWf82ukySgNWUDggggAAANACAJ0BKhAAEAAFQHwlsALsME3IhErhrZerbbqmhYAA/rpSPntN34RbF5ZiFqvoVR9aaNeqqhkCHMhmGkyd86a2UdSxXyLwDZA9FMibDkQIWHGXrrm99KgCockR36I9LaEYbm8zgAk/+ABBjq+PSlIyMYVuojzcm+gkSRpkZG4AAAA="},"notion.so/image/s3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F37907dd5-3c76-4966-a419-daa027a84972%2FIMG_2189.jpg":{"originalWidth":688,"originalHeight":689,"dataURIBase64":"data:image/webp;base64,UklGRmoAAABXRUJQVlA4IF4AAABQAgCdASoQABAABUB8JbACdH8AF6kqWZq7wgAA/tFZccfpD5SaLC06Ab1xNlhuQgaC2peDlG2wJ+PIWe8AtNjEYYN+9hybVKfEbmvVGYOWRzw8xmakIGSWE0zkkYAA"},"notion.so/image/user-images.githubusercontent.com%2F29531394%2F69554356-a42f3380-0fdc-11ea-9cf6-21c7d4b62bcc.png":{"originalWidth":619,"originalHeight":661,"dataURIBase64":"data:image/webp;base64,UklGRqgAAABXRUJQVlA4WAoAAAAQAAAADgAADwAAQUxQSDMAAAARHyAQICSY8p9kIyKCEwph24quUQpJ5JPE5ymJL9O+pxDR/wkAiD1gnV7kohf50oNPhh0AVlA4IE4AAADwAQCdASoPABAABUB8JaQAAutGoKpVACAA/sbs09pMqec2+5VB8bhHjWHUUcPQUb/plDIax+e3PgpELzTyatlp7I8HBN6YPOS6tRGEwAA="},"notion.so/image/user-images.githubusercontent.com%2F29531394%2F69641429-2847f080-109b-11ea-80fa-fab3c148dba6.png":{"originalWidth":730,"originalHeight":595,"dataURIBase64":"data:image/webp;base64,UklGRqQAAABXRUJQVlA4WAoAAAAQAAAADwAADAAAQUxQSD8AAAARL0AWYBqcxATqTKWICHw6MIQk2dU8g12HJxABflB4/jAZIaL/E8DF9P9xeHpvAwqMkj0LArxA8soLAbYnIAMAVlA4ID4AAACQAQCdASoQAA0ABUB8JaQAAxOugwAA/iP13arNx8635mco3NDCVXFs1PDCgj30VAFzg8swIJ4QlGbSAAAAAA=="},"notion.so/image/user-images.githubusercontent.com%2F29531394%2F69556981-be6b1080-0fe0-11ea-8f46-9ef60c77f161.png":{"originalWidth":842,"originalHeight":595,"dataURIBase64":"data:image/webp;base64,UklGRooAAABXRUJQVlA4WAoAAAAQAAAADwAACgAAQUxQSEsAAAARL6C2bRsWe+tJRARq9sEQkmRXg/D3nsCFJ5C+QCL4/jjfIaL/yV9ykyDW6NMgVtZVEGvWLBjvdX4dVLIIUEYbBsp1Pw2kKAngaAAAVlA4IBgAAAAwAQCdASoQAAsABUB8JaQAA3AA/vDmwAA="},"notion.so/image/user-images.githubusercontent.com%2F29531394%2F69641464-372ea300-109b-11ea-9946-b107ad6f85d5.png":{"originalWidth":476,"originalHeight":595,"dataURIBase64":"data:image/webp;base64,UklGRtIAAABXRUJQVlA4WAoAAAAQAAAADAAADwAAQUxQSEYAAAARL0AWYBqcyBjqzqCICHxWMIhsq8o+KOAzCjRwaOC8/mH8Rojo/wR4GZK8clZVZ4w5GgQca63GWVX9tzHn3CEgr8iMy5YAVlA4IGYAAAAwAgCdASoNABAABUB8JaQAD4/QcnUXphhgAAD2diNmVipdFFv+rBSPpMFudUL0vfcYZAFBQiXBjqAn5fvJ2p+k19bq5xHrU0IrB8cU3QzbCEa5VGFa699BrcAXwwa3kf0ftOE4AAA="},"notion.so/image/user-images.githubusercontent.com%2F29531394%2F69722195-7a4b4d80-1151-11ea-97e8-3c7c32c91046.png":{"originalWidth":637,"originalHeight":554,"dataURIBase64":"data:image/webp;base64,UklGRoYAAABXRUJQVlA4WAoAAAAQAAAADwAADQAAQUxQSEcAAAARL6CmbQMW9tuNiACzFwwiWXVzoICgoBlIdRD/pn7RENH/CWBtvvhm1Mw8pATiufpXwA9pgFNNhsQSiOfSWwZjQNKN8Wp2AQBWUDggGAAAADABAJ0BKhAADgAFQHwlpAADcAD+8ObAAA=="},"notion.so/image/s3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F0dba7a3b-a420-477f-a184-076421f71ce6%2Fexternal-author-literature-flaticons-lineal-color-flat-icons-2.png":{"originalWidth":344,"originalHeight":344,"dataURIBase64":"data:image/webp;base64,UklGRgYBAABXRUJQVlA4WAoAAAAQAAAADwAADwAAQUxQSGAAAAARL6CgbRsWl9HdiYhAnmc4imRbdeaDAN5Dkv1HAwEBD8a/mHwREf2fAP63E2jmRgdIbnpB/gWVSd/6Y4jXqi+6eE3ZklXrpoCg4wOI+mqBoH6rOwu2rPaQ1QuIagk06x1WUDgggAAAAHACAJ0BKhAAEAAFQHwlsAJ0R/+LWgkUM4NVd5AA/rtbZbCprBwJYTawRmnxqObC6UoHxQOAyP45DLubktnwStm7LKtJSL6WMCqMYDO8enIhkQosGTqWt/7Q+0BPJrbirZZnq7LoBuu3p27kJfYvstk8am+7iRUU424iZ9A45gAA"}}},"pageId":"b779ada2-9a57-4774-abf3-076830766f60"},"__N_SSG":true}