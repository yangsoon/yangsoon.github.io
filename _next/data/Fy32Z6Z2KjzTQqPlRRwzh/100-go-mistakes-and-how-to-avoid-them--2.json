{"pageProps":{"site":{"domain":"yangsoon.github.io","name":"YangSoon","rootNotionPageId":"72a669717cf642c2a2524439d99d8f44","rootNotionSpaceId":null,"description":"YangSoon, Cloud Native Developer"},"recordMap":{"block":{"f8e41082-81f4-4d47-a6f3-3489e7c3453c":{"role":"reader","value":{"id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","version":1720,"type":"page","properties":{"Zr<q":[["golang"]],"z`pV":[["WIP(80%)"]],"title":[["100 Go Mistakes and How to Avoid Them - 2"]]},"content":["a85d9fed-92aa-4cf4-ae92-00751ec8ab5b","7c7869cc-60ca-4e10-8583-d4a5062b6ac4","164f95cb-c34d-469c-b85c-2bc356b4e3c0","0decdc5a-63f6-4cbc-a101-acf83211ccff","76b64baf-a8dd-4007-a565-664a00046b06","db506446-b2b1-4506-ad5e-c86683194e91","c94b3a79-2507-408d-8aef-c2d11343c7fc","91b46093-1166-42ec-bf70-9fcf8d6b87ec","aa034550-14d1-4e86-8475-807cfc28c526","104c6b88-dfb3-4253-8e26-66b685beae33","b0dbcc2b-d143-444f-a9c4-fa7b2bd1466a","476a8035-98db-443c-b303-57897ee1a5b3","d063db16-6f75-400f-8397-8a908920b734","fe958b5d-0a7c-4d06-a05a-39fff22ece70","5eea680d-96d5-4622-bf61-fc9df8741066","8e9fc5af-f060-464f-83fb-8f2954c0406e","3cd2c017-ab3e-4a78-8dbb-855fe703e324","92fe02f6-abe8-4191-b122-9174b3a93017","cc26dc03-b1fd-4a0c-8aea-2d47acc1d32e","6a42791f-2d95-4750-9eac-5152c344224d","cf04f3b6-9852-4ecc-af8a-394a75a9d1da","e331508f-44af-4e24-88ca-94e3be618be7","a1743b61-d7ec-4a81-9de9-17c0c47a8499","00be8470-9c61-41e1-b49a-c4e652c48e70","a8ae21ec-bb85-4c71-af75-fab84fc7b7dd","17dbaba5-4db2-446b-8966-7b17d775b52b","ff246c9e-e04f-4661-9c0a-3baffd9239d3","d5985c13-735b-497c-862c-ab8b526e92e2","313fa910-9059-498c-8d59-5a950ed0f995","57f95bce-c9bb-4270-a8dd-92a40ef3a1a3","2f5c6e56-e9e6-44a1-815a-ddd5a1186c76","d673a08e-511e-4053-8d79-ee1ff9fe4cef","c6b629f6-76c9-49c2-8d26-ce643e0eb665","e56a2dd0-827d-4a93-a846-c995966af5e2","71c585c4-66b9-491d-9911-837721721de8","c2d13cad-020f-4e31-9e37-7b0bfed1c883","d772c84a-7288-470f-b572-7ee663d840ab","a8d376b3-17f8-4cd9-b314-8ad7176d9e1b","c2b1bec3-6602-4ee2-9f32-4d77c553a7a5","5a466fc5-c039-4c7c-97a9-620f2d136d32","cf7a70d4-a166-4ad6-a1b9-28796d6c3d63","0123f31d-9175-4e75-a1f2-5bd45fcfb612","3dd7eaf0-156f-4c6a-bdcd-3a55c5fbcb3a","9f6aff3b-0c78-4ae2-8126-85c866c15393","205795a0-9ae6-4bb9-b9b4-84402296fb54","255963cd-490e-4c81-be70-d07858aaa2ee","dfcc4d98-61f4-49eb-8dea-e93e16f9ca93","c1fd97d9-c1ee-4dd1-9332-36d5595b086c","cc925770-1c7b-4ae5-823f-025bd222029b","fccf2654-571d-4d20-9226-6509e082c70c","4c4b43ef-4eda-4ed2-9773-699c3d1943db","34f14f8a-4616-4a18-9c69-89de6aa6781c","ae22c659-1211-43ce-9e83-5a792f1a021a","0adc0022-5b09-49c5-93a9-1ba31aff7abb","9dded198-efb5-4a1e-bcd0-b9b75f8ec55b","1f280e09-a0dd-4216-8597-b64b70fef159","0715f0c5-5f79-4522-a41f-27233d9ed647","7d4a3d12-9804-40f6-a658-97353929b8e6","8e1c18ad-763a-475e-89f7-e6bc06005ee2","b8eaa0a4-d435-4ee0-9551-4733f8163b15","5f0c7c0c-7607-468f-85eb-d4b215228044","08e9a857-ec47-4fdb-8aa9-c5bc48c869ed","e8cdcd4c-ee40-4960-a078-eafd872eafb5","0546b163-58e4-43c3-9e72-b73acad85c60","f2c2e94e-998a-4de7-a5ae-bcf06d550ed8","ee5bb67f-6ad1-4fab-bb0b-1a7dce24d9c2","f3ffd82d-32aa-4f02-a213-4433dc49ac47","6cfd2378-16aa-4971-93d6-409a1d72e941","05126ba2-4ec4-4fc7-95da-075532c368a1","a48e9d53-4a7b-4ccd-98c6-63a6fa09431b","453398a1-1f7d-4d7f-a1a2-e55388f769ed","afeef38e-58d1-41e4-90fb-9eb2c37f6023","0ffe02a2-7a29-4bee-80cb-975ea1a74581","88f060bd-7d3f-4788-ba4e-bfbc76dab641","f02802f2-ac92-45b2-9e34-8249cc28f83c","beeca050-1653-4a87-b160-10addf066c52","f77b15bb-406e-4855-b5ef-24046fc192d3","96d2f9c4-34eb-4e34-bb63-49498741c591","8d247983-4f18-442d-a7c4-b6bbb17290c7","1246aa68-9cc7-4a6e-a08c-52954f88c4ff","6c29ce3f-4eed-49b5-93c8-58df7a2a7e2b","cd5ee62f-517b-47ff-9a8c-8225dda1402b","21c7ccf6-a336-4bb6-bcfa-675201e730b7","b2f26809-9764-4f19-a034-22447742004b","27550b2d-9cb9-4723-ab32-e19460bbdaf3","1403eaf6-6acf-49a0-a0bf-63b7110b08c8","05073c8f-5ad7-409a-a745-19510ffa810a","2ae63cfd-1c6e-4115-95d8-8c9cdad6ed48","57ce497e-3cf8-49bc-b7d8-0b07f519d22f","f399ca3f-f7da-4e33-897a-2bec1ce11812","13051c2f-d259-4003-8708-bd92d9da1e65","025990b7-1780-448e-bddb-c41d3b01a39d","ab42b85c-e154-496c-89b6-fe46d0422f90","1ff65c47-6e07-4394-8707-313437896372","848371a5-c992-41a2-9f86-6ef4658c51f8","84ae3f8e-908e-4bbb-bf8a-e86a3da41474","9f4045fb-444c-40d3-b7f8-2b06b9cefbca","c7621cb3-721b-46ef-befd-ddfb3b44cc0b","ef69e218-a8c8-4af2-89d3-ca12b0e3439f","cd32d9b8-e8d4-4528-9e87-5d90015e01ed","288b1883-4bb5-43fe-82a9-9d9be770b80d","9f15a4b7-1af7-4561-a178-be3549245a31","7047667f-245f-4699-81a1-116b2ea7da39","06912f42-ff0d-4a18-9e51-94e03629e89f","842f3802-89ed-42ee-8da5-c3dbed8595d0","84aab02c-2114-40de-bf63-aacf4441ece8","b20ff457-f8d2-4347-8100-1d5580ddaff7","bf473240-1a67-4da5-9cb7-94dd3268251a","06e85100-6112-4599-9f64-7b2d5a2a6756","fd82c821-b590-41d9-b667-2bafa3db1cd0","caa56b20-195d-42d5-be46-41236961ea50","6ac96acb-1077-472f-8767-c40e4127ef23","69323788-37f1-4eaf-a9fe-1f4cc6d07612","5d20410d-a2b5-4985-89f0-fabd1fe4c41f","76b3e79a-509f-4278-8fae-4c52782e49e8","63d79e70-12a2-432e-ab71-df3357377542","5eb1d5cd-c1e5-43c5-b30e-cb6801de0f82","1ab793b7-47f2-4b88-8cfe-e949b9e75b22","83e82805-2dc9-4e53-8f3e-51e440cfd9c8","237e8057-b4ac-4260-b71c-491d34183dd0","1bf3fec0-d8ab-4d12-a2f1-027252ced749","59593fcb-288e-4cea-9fe7-f19c4dd41452","e627e05c-94e5-4f31-b9e6-0f02d3d98925","8994b063-6c97-4a75-be86-d6328532d3e3","2253ef49-7c5e-4350-ad44-df3c54253062","23cbab1f-00d4-4562-acc0-38eb0146e4ae","3d60e22e-c861-4743-b0f2-5122fb36b1b5","d92c6e0a-7a31-476f-824e-c473518b420b","89681485-b930-408b-a8fc-c7469d8471f6","05b5f033-ec4d-461d-af1d-7cefb91b7c53","8fc4ebe2-98d1-4cff-b42c-ca0dc1c4abe1","4a96c111-f2e2-4de5-b271-e8953499d5ed","ba4e2bf8-3505-4edd-9beb-13c54ae119fd","58d13e73-6cf2-4dba-8424-eed3c75e4218","0d6a2f6f-0775-42c5-b8fb-7c2049a372d6","47dd299a-bfba-4c69-bc7e-fc3e48f91eef","6ae4a931-1fac-44ad-afcc-226175df6950","73e7182c-1f92-409f-b1fe-fc6fd4155379","785be981-30e9-4f40-bdd4-2f382c460fff","89a58d1f-960a-4f8c-ae84-dbebf0e1c1f9","cf2f40df-00ce-4774-a384-985d1a8a1bfa","d9d3392d-d431-4aa0-97e0-444be8eed06a","f39c82b9-724d-425f-8f0d-22f2946f1e64","1dbafafd-0f92-413e-b75e-dacadb91f58c","8ea8463d-42a6-4b52-b906-8b92b1d06e85","771fa5df-d3ac-48f8-8187-2473df326cab","4636c314-45ee-46f0-9344-aba743d5be67","b35a427d-d84a-435f-b6fe-fbf5bb019d80","0151fd1e-20d1-497b-8571-3e7a4b56cba1","9bd5ec0b-6a66-4f80-9018-04cffc0e6c96","d3a0161a-12c8-472f-a09c-53c6f950a50f","18d2307d-4cca-4345-b9d7-dc1507096c15","13254856-fafd-446f-b75d-47e0b729e908","066b4fe7-3b0a-4155-94c6-1becca3e9d8f","61f30ac5-1602-4026-b1f0-c224de4d4a52","2b923df5-5a33-48da-b4b1-5e37cbcfab79","fd7f0e16-0b04-4e69-ab74-53f4cbc81541","5612d0cc-e719-462e-9d50-a83b52a4f119","279fc137-aee5-4ee8-a834-c528b81c1399","48e75eaa-3af8-4213-bf2f-c9062c03531f","55294b84-b02f-4788-87b5-80619a243f7b","4bb76f0f-7f77-4120-bef0-c17b56343a3f","10412a94-a4d5-40d4-b22a-12e851e06267","8d112139-cad0-4e6c-8dab-c749905eb0de","8c257446-183c-4091-85fb-a01bbbb2c102","da43facf-e52a-4d69-b3bc-30251ff554b7","27b883c3-5411-4696-8205-7309c5e4bade","4ffc3109-112b-4796-b609-e9c6aac8870d","f29c8a17-9201-40b4-ba87-ed1803138bc4","8e0e68cd-9e70-4f16-8c35-8a117dfd5d71","61cb57b1-a9f1-4773-b3a4-643a34b3e95f","bc009233-5a77-4bd6-a0c7-17f4941a7c3c","75840e6c-4417-4466-90ac-d4cf0980164e","e6a589ca-b455-4346-9fad-6777b30f3137","e4708e59-6399-4c5d-91d6-87cfc7877e7d","8512923b-b7db-41b5-9502-2fbf95942a1f","be636884-56af-44cd-9d46-4f35a5ee9e56","a74de5e0-84f9-43b6-94a0-c63e4023ae6e","fa08f802-f769-4af2-b880-0a7cd3cb5e22","21f335df-2e59-4cd8-8d0c-9fbcdbf1d503","9fd8ad81-e457-4d2e-9d8e-145daafd7af9","da4990c0-5e42-460c-8425-cfbd41c51f6d","4f9c6c06-3ad6-46b1-9907-c5f09f199062","5595aec8-9bdc-4ee6-aad8-885ffa50909a","27701362-dbb7-4aca-b5a6-c08b830ac4b6","ff80f41e-1180-4fc3-9ea2-46b3880651a8","ac422070-7e32-47cf-ab96-2dfb26036066","1c099fc5-7ce8-4ff4-a33b-85d4a00473ac","9500e573-009a-4727-bd77-1d8f230dc675","b1fc957f-0112-444a-941c-4953a128b292","25e1958f-8fbe-4705-a749-c9d5055a6e48","facda99f-78f1-48b9-9538-695bc10c8e6f","f0e5bc4a-1fcd-48cf-a95c-96774bfa9512","c99860f7-ff36-43ca-ba6d-71d6387b2da5","f0c02b1b-69a8-4a9e-992d-d891d242108a","8255a912-93f3-4348-a902-2ae62bbf3b4d","adba6ae7-1628-4d8e-8536-54ddc26c38f2","e38daf6b-978a-425f-a1fe-ce0a16cff87b","cce3764c-04e8-48b7-bea8-074f2dda6274","ac1f48b7-0410-4f19-982c-d1ec93fb8a3b","d8765efc-6576-4658-ae4b-46d86438a11d","f8fa26f3-5bba-4d5e-8ead-24c19ed51f7d","e79cc7c2-f705-4d5e-897a-2c468659cb24","549f1688-5f62-4c63-b029-235a01196960","3f92e134-c58d-4101-be2d-bb7a042ae323","9a094856-c66e-46ef-8b42-c1ad28a3a326","062c653a-7cf2-4566-adae-21c3284b6d10","94fabb0b-2f87-4667-bd0c-f9a1335b8cfd","01c16695-373d-4689-9829-1b555d88b5a6","edb2e964-834f-455c-a5da-a681964d3837","07c9aecc-d54d-4985-9cc4-b1e405c910c7","12bebafb-235b-4674-9df6-47d0b23513a2","46c07bae-be17-4303-a964-f97e63e11629","627c31e9-b71f-454f-ae78-baaf59be7610","a94784ba-c29c-4f02-9172-8d5d5983125b","20049e49-6daf-492c-a3d8-f4efa351cac1","fe0a1f1a-403d-44db-beae-e99e2ab82ab3","71b567f9-ae6f-401d-b495-08d5e24da45e","4cd81bb0-70de-43d9-9f26-ba622d87c876","2794e264-74a5-4ddc-a60d-966f4759a13e","05189425-d70a-44eb-9879-3306bbac3a35","370d04b8-b5b2-4a04-a6fb-9d104da5d9dd","86e3641d-395b-4045-8060-ff5a493f70fc","a502b2c5-d0f4-49a4-827d-5aa64c073a20","9f62f9c4-b271-42e2-ae4f-a263d1b8b03a","324e446f-532f-4d5f-b9da-f5570808bfe6","58dcb767-08ae-456d-8ec6-2e0a780cbdd1","431e2f71-8aa3-4fd3-bf50-fa1b5518b116","cf7bca78-d407-4c2d-899e-b3aeeb1cb3f4","7921d39c-d036-42fb-a75c-8da1646cc1be","a6337376-2852-41b3-b3ba-2c936b3b134a","7a08a2b9-bf7d-46a4-bf7f-bdb430fafdd7","2eb92afc-c6c9-4788-a89b-c33a8059f80f","d9c2fabe-79fe-4ca1-9190-9f78713d8e46","184963b1-116a-4ee6-b602-a503001fd3a7","3f8a1d9c-df1e-41e8-8c51-98e4c22cd7c8","70d29465-bf72-4dd1-b4fd-5a8d0428788b","76f06611-7573-4d22-8199-e4f63998bf09","0c142a31-4082-444d-8066-19c3375d698a","678b750d-f082-4b28-a37e-c22518645f15","f10a3d28-71ca-42c6-90d9-07435feb699c","f468d2d2-1276-4e89-86a2-e859709b53f8","30b00cf6-25b5-478f-b673-a57cc8c78750","d2579c23-3031-4256-a718-a5a977d25701","8db18d1b-4045-415d-a05e-23841d8135ae","bf34ed9e-0ce9-4bd4-8f79-8b0333f96eb3","5887a6f5-7336-4f78-a90c-fa06a1dece39","e06adf5c-4a18-448a-b555-58af9361e565","13a2819c-c505-42e2-a6f0-76baf680f14d","69ba59eb-0736-4d96-8dae-bd4ff106afb4","736571b5-9ea4-4a7a-ae53-2641434d60f7","c3872ea3-9c1a-4809-8808-1354fb352bc5","9a83c73f-8ad3-4c35-be7e-4b95119a1761","67fadee9-9644-4491-8975-d6d2c4ab2077","68c43586-55c5-4a5f-8ec3-541af7c441da","955b6f88-8345-4e9a-a4f4-3ba6a458b132","1a7b3b4e-8450-4694-a211-5abcb93e2d74","9aa9a7e6-3aba-45b5-a115-9b82fd3bdfb4","cd2fe84a-f4f8-4b8b-8c89-ab9d4a13d19b","bddd8685-c37b-4d0e-87c3-e91408a7471b","5b291621-020e-4960-b861-a731941b960a","2fcefb23-8f89-4602-9034-46027943a47f","30b81503-981a-4c53-b56b-0bfb8d7df329","42d7c20b-2a74-4bd5-a093-d456433e8bef","b26e4d75-e063-46e5-9261-96d6230f9740","49e1a8df-ab85-47d5-95cf-b59f0695a502","eedec653-1ae7-4242-a15b-fc6809a93c81","81d7bd0a-f7bd-4ffa-aa5c-e9cbe2f6c9a7","21442a22-f277-4ae7-a6b0-006c49ccf421","ba447b4e-e85f-449c-a731-a8248907f86b","25145895-42b0-473f-a745-d095fa2098e9","f7742b4d-4f1d-4ca7-b9b2-b0105ecf0bf5","01ecb2a6-20de-4f99-9933-a613918a3288","5380d83d-6a2f-40cf-80d4-bbd742ed605d","b937757e-ff0f-4767-aa84-0230aa346b68","8952ea0f-9098-4f61-8d59-04d1efb54276","7ebad180-a966-455b-b651-e6cbbd2f0909","289ac144-d0ba-4e04-94ca-9d21aa351195","4c5c1693-f921-481e-844c-8fa12c249c4c","e531352e-b784-4b50-a39b-6d91c595c4cf","c2da8712-24ae-44dc-9055-718fcac0385c","257b5e64-b993-4734-a7de-f9f2083f961b","eab511ab-fbb3-4ebb-8eb7-7cf28bcf307e","57bfa55b-f426-4cb2-a07f-361835d2b919","4daee3b5-2375-4c2e-ae9f-b67dd5702874","910fc0f7-32e0-459f-9683-466f4a1e04fd","eb25b40d-1fa2-4aab-98bd-1fda51cae8ef","dac48791-fe69-4211-86c6-17c5a9b97fa0","dde97d95-3d40-470e-b46b-3e8365ca3b7a","c2c0c5a6-149c-4fa2-9c2c-5dd19a5b49b7","065fc0cd-e795-44e6-9ca4-8eba2f157683","d78b456d-bee1-4a61-abe0-61167afd0bac","89fda714-2e58-4128-8953-b28b17cdbdf8","bfc3988d-ad4b-41cd-a173-60196f6c126e","6807b666-4056-4bc9-8565-f9184cd5c899","f035023b-9618-400d-9d27-8024a13f5934","437f60c8-7360-449c-9ed3-4a94f8788bde","179af155-4c29-428e-a45a-13e9ff7b315a","ff5b7422-1d19-4a74-85f7-9d38c8199d0a","098a44d1-705d-48e1-b920-740403deef8f","fe2813d4-594d-493b-a645-b8bf2fa70a27","89adcd8e-3e32-4796-9221-6f9c7259c557","483ce884-48cb-46d9-8327-21f974594378","acfe8e8b-de46-403a-bcdb-da1a85515a57","4684cc1a-4c71-408e-a3bc-a00a6739f491","fb2f427c-5902-4770-b751-f7c22bb9cb7b","53a8614a-f7f3-4511-bfe4-7981745d9c9a","10aa31db-c7de-40e2-926d-8f44403d0d4a","6ef0821b-d7b1-4072-9ff0-1039b728f2d6","12d68a96-e8cb-49d6-9581-3c5ee5d4fa74","6af86236-e46c-439c-a5fe-453ba96d6873","689ea1e4-3b56-4efb-bb1a-2ce5866e003d","d047a3b1-be24-4c3d-832f-93618bea958a","eeb14631-1291-4f06-99f7-4e7676b4b06b","66259d84-c257-4f32-83e7-ead747a077e5","c5236dd6-d07d-48ae-b001-654820c324ae","857cad67-00b9-4f50-82cb-8bf2d30c8a26","c4adafde-2e8d-486c-92f4-cfcf330b49a9","bc9c27dc-28f1-4f7f-959d-cd16662115ab"],"format":{"page_icon":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/a22fb73f-5a7d-4fdc-8319-52ed15316e76/images.jpeg","page_cover":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/47263733-11bc-4ae7-9e1e-c3401a49c171/Manning.100.Go.Mistakes.and.How.to.Avoid.Them.2022-1%EF%BC%88%E6%8B%96%E7%A7%BB%E9%A1%B9%E7%9B%AE%EF%BC%89.png","copied_from_pointer":{"id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","table":"block","spaceId":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"},"page_cover_position":0.8261},"created_time":1677290925684,"last_edited_time":1677902820294,"parent_id":"89829c97-9e4b-43b0-b37c-457a3da9ad96","parent_table":"collection","alive":true,"copied_from":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","file_ids":["47263733-11bc-4ae7-9e1e-c3401a49c171","425f0231-9af0-4f62-a9f7-f9f567cfe460","a22fb73f-5a7d-4fdc-8319-52ed15316e76"],"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"e7596c25-bafa-4ece-94b6-e7973c7a2ab3":{"role":"reader","value":{"id":"e7596c25-bafa-4ece-94b6-e7973c7a2ab3","version":49,"type":"collection_view","view_ids":["11f62eb2-ba92-4ffd-91b4-c964b8cedfeb"],"collection_id":"89829c97-9e4b-43b0-b37c-457a3da9ad96","format":{"collection_pointer":{"id":"89829c97-9e4b-43b0-b37c-457a3da9ad96","table":"collection","spaceId":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"},"copied_from_pointer":{"id":"4176c3f0-95d8-4ac1-9df1-7f705120857b","table":"block","spaceId":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"created_time":1667525160616,"last_edited_time":1677290922625,"parent_id":"72a66971-7cf6-42c2-a252-4439d99d8f44","parent_table":"block","alive":true,"copied_from":"4176c3f0-95d8-4ac1-9df1-7f705120857b","created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"72a66971-7cf6-42c2-a252-4439d99d8f44":{"role":"reader","value":{"id":"72a66971-7cf6-42c2-a252-4439d99d8f44","version":769,"type":"page","properties":{"title":[["萨博一直跑"]]},"content":["23b11c7c-8146-4639-912c-14406e078331","416b3867-4b4b-4ac0-bc8e-196792a57c07","fec36412-bc7e-4ec3-972d-b67b1ddd20f8","8b4d1555-cb50-45a3-a875-87242a4548bb","4176c3f0-95d8-4ac1-9df1-7f705120857b","1118fa3e-20b3-488c-976d-3346081fde80","e7596c25-bafa-4ece-94b6-e7973c7a2ab3","20cd31e6-ea32-4c1b-b7ef-c70749c2f4cb","ab7c7afa-73c5-4b21-9759-89a9dee4d7e8","82aad922-cb77-4452-81bf-56f4e8e5a408"],"format":{"page_icon":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/37907dd5-3c76-4966-a419-daa027a84972/IMG_2189.jpg","page_full_width":false,"page_small_text":false,"copied_from_pointer":{"id":"bd32b787-e471-49f3-8941-174a9c6846b6","table":"block","spaceId":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"permissions":[{"role":"editor","type":"user_permission","user_id":"d1805983-7869-451d-bf8b-64135a5d4ee7"},{"role":"reader","type":"public_permission","added_timestamp":1660963691744,"allow_duplicate":false}],"created_time":1660961589760,"last_edited_time":1677681498416,"parent_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6","parent_table":"space","alive":true,"copied_from":"bd32b787-e471-49f3-8941-174a9c6846b6","file_ids":["63e89fe9-f5cd-4414-be0e-53d91aa54fc3","37907dd5-3c76-4966-a419-daa027a84972"],"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"a85d9fed-92aa-4cf4-ae92-00751ec8ab5b":{"role":"reader","value":{"id":"a85d9fed-92aa-4cf4-ae92-00751ec8ab5b","version":34,"type":"callout","properties":{"title":[["本文是 100 Go Mistakes读书笔记 的下篇"]]},"format":{"page_icon":"💡","block_color":"gray_background"},"created_time":1677291093556,"last_edited_time":1677396896301,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"7c7869cc-60ca-4e10-8583-d4a5062b6ac4":{"role":"reader","value":{"id":"7c7869cc-60ca-4e10-8583-d4a5062b6ac4","version":36,"type":"sub_header","properties":{"title":[["关于本书"]]},"created_time":1677396013332,"last_edited_time":1677396018423,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"164f95cb-c34d-469c-b85c-2bc356b4e3c0":{"role":"reader","value":{"id":"164f95cb-c34d-469c-b85c-2bc356b4e3c0","version":10,"type":"bookmark","properties":{"link":[["https://book.douban.com/subject/36084407/"]],"title":[["100 Go Mistakes and How to Avoid Them"]],"description":[["Spot errors in your Go code you didn’t even know you were making and boost your productivity by avoi..."]]},"format":{"bookmark_icon":"https://img1.doubanio.com/favicon.ico","bookmark_cover":"https://img2.doubanio.com/view/subject/l/public/s34311243.jpg"},"created_time":1677396001021,"last_edited_time":1677396001024,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"0decdc5a-63f6-4cbc-a101-acf83211ccff":{"role":"reader","value":{"id":"0decdc5a-63f6-4cbc-a101-acf83211ccff","version":29,"type":"sub_header","properties":{"title":[["7 Error management"]]},"created_time":1677291024848,"last_edited_time":1677291039984,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"76b64baf-a8dd-4007-a565-664a00046b06":{"role":"reader","value":{"id":"76b64baf-a8dd-4007-a565-664a00046b06","version":45,"type":"sub_sub_header","properties":{"title":[["7.1 #48: Panicking（什么是panic）"]]},"created_time":1677292203010,"last_edited_time":1677294732692,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"db506446-b2b1-4506-ad5e-c86683194e91":{"role":"reader","value":{"id":"db506446-b2b1-4506-ad5e-c86683194e91","version":333,"type":"code","properties":{"title":[["func main() {\n  // 在defer中执行 recover 可以恢复panic，defer也会在周围出现panic的时候执行\n\tdefer func() {\n\t\tif r := recover(); r != nil {\n\t\t\tfmt.Println(\"recover\", r)\n\t\t}\n\t}()\n\tf()\n}\nfunc f() {\n\tfmt.Println(\"a\")\n\tpanic(\"foo\")\n\tfmt.Println(\"b\")\n}"]],"language":[["Go"]]},"created_time":1677292570881,"last_edited_time":1677292814251,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"c94b3a79-2507-408d-8aef-c2d11343c7fc":{"role":"reader","value":{"id":"c94b3a79-2507-408d-8aef-c2d11343c7fc","version":167,"type":"sub_sub_header","properties":{"title":[["7.2 #49: Ignoring when to wrap an error（不明确何时包装一个error，fmt.Errorf用法）"]]},"created_time":1677293210806,"last_edited_time":1677299316602,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"91b46093-1166-42ec-bf70-9fcf8d6b87ec":{"role":"reader","value":{"id":"91b46093-1166-42ec-bf70-9fcf8d6b87ec","version":168,"type":"text","properties":{"title":[["在如下场景你可以选择包装一下error："]]},"created_time":1677293269422,"last_edited_time":1677294355241,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"aa034550-14d1-4e86-8475-807cfc28c526":{"role":"reader","value":{"id":"aa034550-14d1-4e86-8475-807cfc28c526","version":265,"type":"numbered_list","properties":{"title":[["你需要在错误上增加一些上下文"]]},"created_time":1677293957481,"last_edited_time":1677293981449,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"104c6b88-dfb3-4253-8e26-66b685beae33":{"role":"reader","value":{"id":"104c6b88-dfb3-4253-8e26-66b685beae33","version":248,"type":"numbered_list","properties":{"title":[["你需要把错误封装在另一个错误内"]]},"created_time":1677293981774,"last_edited_time":1677294353841,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"b0dbcc2b-d143-444f-a9c4-fa7b2bd1466a":{"role":"reader","value":{"id":"b0dbcc2b-d143-444f-a9c4-fa7b2bd1466a","version":7,"type":"column_list","content":["a0af9c7a-485d-4991-b55f-fc99c001c7cd","0bbfdf78-648f-4f12-bb15-c263feb01acc"],"created_time":1677294255341,"last_edited_time":1677294255345,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"a0af9c7a-485d-4991-b55f-fc99c001c7cd":{"role":"reader","value":{"id":"a0af9c7a-485d-4991-b55f-fc99c001c7cd","version":7,"type":"column","content":["7b47c760-07b5-4458-91c0-27039f752bed"],"format":{"column_ratio":0.5},"created_time":1677294255341,"last_edited_time":1677294255345,"parent_id":"b0dbcc2b-d143-444f-a9c4-fa7b2bd1466a","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"0bbfdf78-648f-4f12-bb15-c263feb01acc":{"role":"reader","value":{"id":"0bbfdf78-648f-4f12-bb15-c263feb01acc","version":6,"type":"column","content":["29ea918e-04ec-4527-8b38-0076f604b0a5"],"format":{"column_ratio":0.5},"created_time":1677294255343,"last_edited_time":1677294255345,"parent_id":"b0dbcc2b-d143-444f-a9c4-fa7b2bd1466a","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"7b47c760-07b5-4458-91c0-27039f752bed":{"role":"reader","value":{"id":"7b47c760-07b5-4458-91c0-27039f752bed","version":14,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbfjzjehr4j30tc0ccq5c.jpg"]]},"format":{"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbfjzjehr4j30tc0ccq5c.jpg"},"created_time":1677294203420,"last_edited_time":1677294255345,"parent_id":"a0af9c7a-485d-4991-b55f-fc99c001c7cd","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"29ea918e-04ec-4527-8b38-0076f604b0a5":{"role":"reader","value":{"id":"29ea918e-04ec-4527-8b38-0076f604b0a5","version":15,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbfjzrczn0j30t00bmgnc.jpg"]]},"format":{"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbfjzrczn0j30t00bmgnc.jpg"},"created_time":1677294216319,"last_edited_time":1677294255345,"parent_id":"0bbfdf78-648f-4f12-bb15-c263feb01acc","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"476a8035-98db-443c-b303-57897ee1a5b3":{"role":"reader","value":{"id":"476a8035-98db-443c-b303-57897ee1a5b3","version":185,"type":"text","properties":{"title":[["GO支持如下几种包装error的方式："]]},"created_time":1677294259429,"last_edited_time":1677294520912,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"d063db16-6f75-400f-8397-8a908920b734":{"role":"reader","value":{"id":"d063db16-6f75-400f-8397-8a908920b734","version":83,"type":"numbered_list","properties":{"title":[["自定义Error结构体"]]},"content":["220667b1-4edb-473c-a0d5-920c5a702a1b"],"created_time":1677294521443,"last_edited_time":1677294715630,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"220667b1-4edb-473c-a0d5-920c5a702a1b":{"role":"reader","value":{"id":"220667b1-4edb-473c-a0d5-920c5a702a1b","version":74,"type":"code","properties":{"title":[["type BarError struct {\n\tErr error\n}\n\nfunc (b BarError) Error() string {\n\treturn \"bar failed:\" + b.Err.Error()\n}\n\nfunc test() {\n\terr := bar()\n\tif err != nil {\n\t\treturn BarError{Err: err}\n\t}\n}"]],"language":[["Go"]]},"created_time":1677294587323,"last_edited_time":1677294624021,"parent_id":"d063db16-6f75-400f-8397-8a908920b734","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"fe958b5d-0a7c-4d06-a05a-39fff22ece70":{"role":"reader","value":{"id":"fe958b5d-0a7c-4d06-a05a-39fff22ece70","version":191,"type":"numbered_list","properties":{"title":[["使用 fmt.Errorf 方法，⚠️ %w 和 %v 有不同的执行效果"]]},"content":["4f3b56c1-9172-45de-92a6-9830d93e06fc"],"created_time":1677294714721,"last_edited_time":1677295436285,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"4f3b56c1-9172-45de-92a6-9830d93e06fc":{"role":"reader","value":{"id":"4f3b56c1-9172-45de-92a6-9830d93e06fc","version":1178,"type":"code","properties":{"title":[["if err != nil {\n\t\t// 使用 %w 指令，会返回一个包装了err的错误，接收方可以从父error中获取到源error\n\t\t// 并根据判断错误是否为某一个错误类型\n\t\t// sourceErr --wrap--> WrapErr(sourceErr)\n    return fmt.Errorf(\"bar failed: %w\", err)\n}\n\nif err != nil {\n\t\t// 使用 %v 指令，不会包装错误，会直接转化为另一个错误，源错误不再可用\n    // sourceErr --transform--> otherErr\n    return fmt.Errorf(\"bar failed: %v\", err)\n}\n"]],"language":[["Go"]]},"created_time":1677294755363,"last_edited_time":1677295051738,"parent_id":"fe958b5d-0a7c-4d06-a05a-39fff22ece70","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"5eea680d-96d5-4622-bf61-fc9df8741066":{"role":"reader","value":{"id":"5eea680d-96d5-4622-bf61-fc9df8741066","version":10,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbfkkxdgp1j31gw0i6tel.jpg"]]},"format":{"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbfkkxdgp1j31gw0i6tel.jpg"},"created_time":1677295438230,"last_edited_time":1677295440903,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"8e9fc5af-f060-464f-83fb-8f2954c0406e":{"role":"reader","value":{"id":"8e9fc5af-f060-464f-83fb-8f2954c0406e","version":686,"type":"text","properties":{"title":[["如果保留源错误的信息，会有潜在的耦合信息，因为接收方需要直接函数实现的细节，需要知道被包装的错误是什么类型，所以没有特殊需求在使用fmt.Errorf的时候使用%v指令。"]]},"created_time":1677295447353,"last_edited_time":1677295639610,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"3cd2c017-ab3e-4a78-8dbb-855fe703e324":{"role":"reader","value":{"id":"3cd2c017-ab3e-4a78-8dbb-855fe703e324","version":187,"type":"sub_sub_header","properties":{"title":[["7.3 #50: Checking an error type inaccurately（如何正确的判断Error类型-error.As用法）"]]},"created_time":1677295625002,"last_edited_time":1677299300560,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"92fe02f6-abe8-4191-b122-9174b3a93017":{"role":"reader","value":{"id":"92fe02f6-abe8-4191-b122-9174b3a93017","version":34,"type":"code","properties":{"title":[["func handler(w http.ResponseWriter, r *http.Request) {\n\ttransactionID := r.URL.Query().Get(\"transaction\")\n\n\tamount, err := getTransactionAmount(transactionID)\n\tif err != nil {\n\t\tif errors.As(err, &transientError{}) {\n\t\t\thttp.Error(w, err.Error(), http.StatusServiceUnavailable)\n\t\t} else {\n\t\t\thttp.Error(w, err.Error(), http.StatusBadRequest)\n\t\t}\n\t\treturn\n\t}\n\n\t// Write response\n\t_ = amount\n}\n\nfunc getTransactionAmount(transactionID string) (float32, error) {\n\t// Check transaction ID validity\n\n\tamount, err := getTransactionAmountFromDB(transactionID)\n\tif err != nil {\n\t\treturn 0, fmt.Errorf(\"failed to get transaction %s: %w\",\n\t\t\ttransactionID, err)\n\t}\n\treturn amount, nil\n}\n\nfunc getTransactionAmountFromDB(transactionID string) (float32, error) {\n\t// ...\n\tvar err error\n\tif err != nil {\n\t\treturn 0, transientError{err: err}\n\t}\n\t// ...\n\treturn 0, nil\n}"]],"language":[["Go"]]},"created_time":1677298025270,"last_edited_time":1677298065539,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"cc26dc03-b1fd-4a0c-8aea-2d47acc1d32e":{"role":"reader","value":{"id":"cc26dc03-b1fd-4a0c-8aea-2d47acc1d32e","version":473,"type":"text","properties":{"title":[["当使用%w指令或者结构体封装的方式包装一个错误的时候，可以使用 errors.As 递归判断错误类型，errors.As函数需要传递一个目标错误类型的指针。"]]},"created_time":1677295637489,"last_edited_time":1677298204646,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"6a42791f-2d95-4750-9eac-5152c344224d":{"role":"reader","value":{"id":"6a42791f-2d95-4750-9eac-5152c344224d","version":239,"type":"sub_sub_header","properties":{"title":[["7.4 #51: Checking an error value inaccurately（如何正确的处理Error的值-error.Is用法）"]]},"format":{"copied_from_pointer":{"id":"3cd2c017-ab3e-4a78-8dbb-855fe703e324","table":"block","spaceId":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"created_time":1677298199263,"last_edited_time":1677299292543,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"copied_from":"3cd2c017-ab3e-4a78-8dbb-855fe703e324","created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"cf04f3b6-9852-4ecc-af8a-394a75a9d1da":{"role":"reader","value":{"id":"cf04f3b6-9852-4ecc-af8a-394a75a9d1da","version":182,"type":"text","properties":{"title":[["sentinel error ",[["b"]]],["是指定义为全局变量的错误类型。"],["命名规约是以Err开头加上类型",[["b"]]],["。"]]},"created_time":1677298251378,"last_edited_time":1677298525470,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"e331508f-44af-4e24-88ca-94e3be618be7":{"role":"reader","value":{"id":"e331508f-44af-4e24-88ca-94e3be618be7","version":7,"type":"code","properties":{"title":[["import \"errors\"\nvar ErrFoo = errors.New(\"foo\")"]],"language":[["Go"]]},"created_time":1677298442204,"last_edited_time":1677298442535,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"a1743b61-d7ec-4a81-9de9-17c0c47a8499":{"role":"reader","value":{"id":"a1743b61-d7ec-4a81-9de9-17c0c47a8499","version":813,"type":"text","properties":{"title":[["这种类型的错误，有时候是程序允许存在的错误，比如查询数据库返回没有查询到结果的sql.ErrNoRows和io.Reader读取返回io.EOF.他们传递的信息客户端可以接受，并认为是正常的情况。"]]},"created_time":1677298398268,"last_edited_time":1677298853588,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"00be8470-9c61-41e1-b49a-c4e652c48e70":{"role":"reader","value":{"id":"00be8470-9c61-41e1-b49a-c4e652c48e70","version":641,"type":"text","properties":{"title":[["在查询数据的场景，我们想判断错误的值是否等于sql.ErrNoRows这种"],["sentinel error，",[["b"]]],["使用 == 可能会出现问题，因为ErrNoRows可能已经被包装过。对于这种问题，可以直接使用 "],["errors.Is",[["b"],["a","http://errors.Is"]]],[" ",[["b"]]],["来判断，他可以帮你递归判断出正确的错误。"]]},"created_time":1677299145007,"last_edited_time":1677299283955,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"a8ae21ec-bb85-4c71-af75-fab84fc7b7dd":{"role":"reader","value":{"id":"a8ae21ec-bb85-4c71-af75-fab84fc7b7dd","version":64,"type":"code","properties":{"title":[["func main() {\n\terr := query()\n\tif err != nil {\n\t\t// if err == sql.ErrNoRows {\n\t\tif errors.Is(err, sql.ErrNoRows) {\n\t\t\t// ...\n\t\t} else {\n\t\t\t// ...\n\t\t}\n\t}\n}\n\nfunc query() error {\n\treturn nil\n}"]],"language":[["Go"]]},"created_time":1677299093575,"last_edited_time":1677299142421,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"17dbaba5-4db2-446b-8966-7b17d775b52b":{"role":"reader","value":{"id":"17dbaba5-4db2-446b-8966-7b17d775b52b","version":128,"type":"sub_sub_header","properties":{"title":[["7.5 #52: Handling an error twice（多次处理错误）"]]},"created_time":1677307531800,"last_edited_time":1677308154505,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"ff246c9e-e04f-4661-9c0a-3baffd9239d3":{"role":"reader","value":{"id":"ff246c9e-e04f-4661-9c0a-3baffd9239d3","version":10,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbfqoq89goj31ja0tmani.jpg"]]},"format":{"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbfqoq89goj31ja0tmani.jpg"},"created_time":1677308112085,"last_edited_time":1677308114911,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"d5985c13-735b-497c-862c-ab8b526e92e2":{"role":"reader","value":{"id":"d5985c13-735b-497c-862c-ab8b526e92e2","version":51,"type":"sub_sub_header","properties":{"title":[["7.6 #53: Not handling an error（没有处理error）"]]},"created_time":1677308130897,"last_edited_time":1677308429032,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"313fa910-9059-498c-8d59-5a950ed0f995":{"role":"reader","value":{"id":"313fa910-9059-498c-8d59-5a950ed0f995","version":298,"type":"text","properties":{"title":[["如果代码中没有处理一个函数返回的error，需要编写注释明确指明不处理error的原因"]]},"created_time":1677308430132,"last_edited_time":1677308457699,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"57f95bce-c9bb-4270-a8dd-92a40ef3a1a3":{"role":"reader","value":{"id":"57f95bce-c9bb-4270-a8dd-92a40ef3a1a3","version":9,"type":"code","properties":{"title":[["// At-most once delivery.\n// Hence, it's accepted to miss some of them in case of errors.\n _ = notify()"]],"language":[["Go"]]},"created_time":1677308799865,"last_edited_time":1677308806084,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"2f5c6e56-e9e6-44a1-815a-ddd5a1186c76":{"role":"reader","value":{"id":"2f5c6e56-e9e6-44a1-815a-ddd5a1186c76","version":154,"type":"sub_sub_header","properties":{"title":[["7.7 #54: Not handling defer errors（没有处理defer语句中的error）"]]},"created_time":1677308477042,"last_edited_time":1677308676033,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"d673a08e-511e-4053-8d79-ee1ff9fe4cef":{"role":"reader","value":{"id":"d673a08e-511e-4053-8d79-ee1ff9fe4cef","version":923,"type":"text","properties":{"title":[["defer语句经常会做一些收尾工作，关闭socket，释放锁等..,有些语句会返回错误，如果不处理这些错误就会导致错误信息丢失，造成资源泄露等问题。本节提出了一个通过给错误返回值命名，在defer的时候把错误值赋值给返回结果，向上传递错误。"]]},"created_time":1677309507905,"last_edited_time":1677309618103,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"c6b629f6-76c9-49c2-8d26-ce643e0eb665":{"role":"reader","value":{"id":"c6b629f6-76c9-49c2-8d26-ce643e0eb665","version":10,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbfr8gkmhjj319a0hatdy.jpg"]]},"format":{"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbfr8gkmhjj319a0hatdy.jpg"},"created_time":1677309250974,"last_edited_time":1677309254348,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"e56a2dd0-827d-4a93-a846-c995966af5e2":{"role":"reader","value":{"id":"e56a2dd0-827d-4a93-a846-c995966af5e2","version":771,"type":"code","properties":{"title":[["// 一种解决方式是使用命名结果，把错误信息通过命名结果返回\nfunc getBalance(db *sql.DB, clientID string) (balance float32, err error) {\n\trows, err := db.Query(query, clientID)\n\tif err != nil {\n\t\treturn 0, err\n\t}\n\tdefer func() {\n\t\tcloseErr := rows.Close()\n\t\tif err != nil {\n\t\t\tif closeErr != nil {\n        // 如果db.Query语句也出现了执行错误，把close错误的信息打印出来\n\t\t\t\tlog.Printf(\"failed to close rows: %v\", err)\n\t\t\t}\n\t\t\treturn\n\t\t}\n\t\t// 当只要close的时候有错误，把closeErr赋值给err传递到上一层\n\t\terr = closeErr\n\t}()\n\n\t// Use rows\n\treturn 0, nil\n}"]],"language":[["Go"]]},"created_time":1677309378674,"last_edited_time":1677309503274,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"71c585c4-66b9-491d-9911-837721721de8":{"role":"reader","value":{"id":"71c585c4-66b9-491d-9911-837721721de8","version":13,"type":"sub_header","properties":{"title":[["8 Concurrency: Foundations"]]},"created_time":1677460048529,"last_edited_time":1677462029011,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"c2d13cad-020f-4e31-9e37-7b0bfed1c883":{"role":"reader","value":{"id":"c2d13cad-020f-4e31-9e37-7b0bfed1c883","version":12,"type":"bookmark","properties":{"link":[["https://golang.design/under-the-hood/zh-cn/part1basic/ch05sync/mem/"]],"title":[["5.9 内存一致模型"]],"description":[["5.9 内存一致模型 读者可能注意到了，无论是在谈论 Go 的运行时还是编译器，直到目前为止我们都有意无意的 尝试去回避 Go 语言的「内存模型」这个话题。 这有非常多的原因，作为本章的收尾，也是全书对 Go 语言同步原语与同步模式的一个总结， 我们最后来详细展开内存模型这个话题，解答读者心中的疑惑。 对为什么到目前为止我们都刻意的回避有关内存模型的内容作出一个相对完整的解释。 5.9.1 内存模型的重要性 内存一致模型，或称内存模型，是一份语言用户与语言自身、语言自身与所在的操作系统平台、 所在操作系统平台与硬件平台之间的契约。它定义了并行状态下拥有确定读取和写入的时序的条件， 并回答了一个共享变量是否具有足够的同步机制来保障一个线程的写入能否发生在另一个线程的读取之前这个问题。 在一份 Go 语言的程序被写成后，将经过编译器的转换与优化、所运行操作系统或虚拟机等动态优化器的优化，以及 CPU 硬件平台对指令流的优化才最终得以被执行。这个过程意味着，对于某一个变量的读取与写入操作，可能 被这个过程中任何一个中间步骤进行调整，从而偏离程序员在程序中所指定的原有顺序。 没有内存模型的保障，就无法正确的推演程序在最终被执行时的正确性。 内存模型的策略同样有着长期影响，并且直接决定了程序的可移植性和可维护性。 例如，过强的内存模型将约束硬件和编译器优化的空间，从而严重降低程序性能上限； 已经选择了强内存模型的硬件体系结构，无法在不破坏兼容性的情况下向更弱的内存模型进行迁移， 这种兼容性破坏所带来的代价就是要求其平台上的程序重新实现其源码。 这种横跨用户、软件与硬件三大领域的主题使得内存模型的设计愿景变得异常的困难，至今仍是一个开放的研究问题。因此在讨论 Go 语言的内存模型之前，我们还需要了解现有的内存模型、历史上软硬件平台之间形成契约的经验教训。 5.9.2 强序与弱序 令同步模型为对内存访问的一组约束，这些约束指定了需要如何以及何时完成同步，则当且仅当硬件与遵循该同步模型的所有软件顺序一致时，称该同步模型对于硬件而言满足弱序（Weak Ordering）。 5.9.3 免数据竞争范式 当一个程序在特定输入上具有顺序一致的执行顺序时，且其中两个相互冲突的操作同时执行，则称其为无数据竞争（Data-Race-Free, DRF）。 5.9.4 历史实践 C++ 是一个在内存模型方面实践优秀的一个例子。 线性一致性：又称强一致性或原子一致性。它要求任何一次读操作都能读到某个数据的最近一次写的数据，并且所有线程的操作顺序与全局时钟下的顺序是一致的。  x.store(1) x.load() G1 ---------+----------------+------> G2 -------------------+-------------> x.store(2) 在这种情况下线程 G1, G2 对 x 的两次写操作是原子的，且 x.store(1) 是严格的发生在 x.store(2) 之前，x.store(2) 严格的发生在 x.load() 之前。 值得一提的是，线性一致性对全局时钟的要求是难以实现的，这也是人们不断研究比这个一致性更弱条件下其他一致性的算法的原因。 顺序一致性：同样要求任何一次读操作都能读到数据最近一次写入的数据，但未要求与全局时钟的顺序一致。  x.store(1) x."]]},"format":{"bookmark_icon":"https://golang.design/under-the-hood/favicon.png"},"created_time":1677460051027,"last_edited_time":1677460054240,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"d772c84a-7288-470f-b572-7ee663d840ab":{"role":"reader","value":{"id":"d772c84a-7288-470f-b572-7ee663d840ab","version":17,"type":"sub_sub_header","properties":{"title":[["8.6 #60: Misunderstanding Go contexts"]]},"created_time":1677497058349,"last_edited_time":1677497065420,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"a8d376b3-17f8-4cd9-b314-8ad7176d9e1b":{"role":"reader","value":{"id":"a8d376b3-17f8-4cd9-b314-8ad7176d9e1b","version":7,"type":"text","created_time":1677497065831,"last_edited_time":1677499088017,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"c2b1bec3-6602-4ee2-9f32-4d77c553a7a5":{"role":"reader","value":{"id":"c2b1bec3-6602-4ee2-9f32-4d77c553a7a5","version":9,"type":"sub_header","properties":{"title":[["9 Concurrency: Practice"]]},"created_time":1677499091555,"last_edited_time":1677594501926,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"5a466fc5-c039-4c7c-97a9-620f2d136d32":{"role":"reader","value":{"id":"5a466fc5-c039-4c7c-97a9-620f2d136d32","version":77,"type":"sub_sub_header","properties":{"title":[["9.1 #61: Propagating an inappropriate context（错误传递context）"]]},"created_time":1677499100819,"last_edited_time":1677500544072,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"cf7a70d4-a166-4ad6-a1b9-28796d6c3d63":{"role":"reader","value":{"id":"cf7a70d4-a166-4ad6-a1b9-28796d6c3d63","version":10,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbibdjgitaj31q80meank.jpg"]]},"format":{"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbibdjgitaj31q80meank.jpg"},"created_time":1677500531533,"last_edited_time":1677500534213,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"0123f31d-9175-4e75-a1f2-5bd45fcfb612":{"role":"reader","value":{"id":"0123f31d-9175-4e75-a1f2-5bd45fcfb612","version":651,"type":"text","properties":{"title":[["为了能够异步执行写入消息队列的动作，又能继承来自request context中的值，我们可以编写自定义的context，只继承父context的值。"]]},"created_time":1677500545956,"last_edited_time":1677500738419,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"3dd7eaf0-156f-4c6a-bdcd-3a55c5fbcb3a":{"role":"reader","value":{"id":"3dd7eaf0-156f-4c6a-bdcd-3a55c5fbcb3a","version":15,"type":"code","properties":{"title":[["type detach struct {\n\tctx context.Context\n}\n\nfunc (d detach) Deadline() (time.Time, bool) {\n\treturn time.Time{}, false\n}\n\nfunc (d detach) Done() <-chan struct{} {\n\treturn nil\n}\n\nfunc (d detach) Err() error {\n\treturn nil\n}\n\nfunc (d detach) Value(key any) any {\n\treturn d.ctx.Value(key)\n}\n\nfunc handler(w http.ResponseWriter, r *http.Request) {\n\tresponse, err := doSomeTask(r.Context(), r)\n\tif err != nil {\n\t\thttp.Error(w, err.Error(), http.StatusInternalServerError)\n\t\treturn\n\t}\n\n\tgo func() {\n\t\terr := publish(detach{ctx: r.Context()}, response)\n\t\t// Do something with err\n\t\t_ = err\n\t}()\n\n\twriteResponse(response)\n}"]],"language":[["Go"]]},"created_time":1677500839790,"last_edited_time":1677500855280,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"9f6aff3b-0c78-4ae2-8126-85c866c15393":{"role":"reader","value":{"id":"9f6aff3b-0c78-4ae2-8126-85c866c15393","version":122,"type":"sub_sub_header","properties":{"title":[["9.2 #62: Starting a goroutine without knowing when to stop it（管理好协程）"]]},"created_time":1677504183112,"last_edited_time":1677584499350,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"205795a0-9ae6-4bb9-b9b4-84402296fb54":{"role":"reader","value":{"id":"205795a0-9ae6-4bb9-b9b4-84402296fb54","version":7,"type":"code","properties":{"title":[["func main() {\n\tw := newWatcher()\n\tdefer w.close()\n\n\t// Run the application\n}\n\nfunc newWatcher() watcher {\n\tw := watcher{}\n\tgo w.watch()\n\treturn w\n}\n\ntype watcher struct { /* Some resources */\n}\n\nfunc (w watcher) watch() {}\n\nfunc (w watcher) close() {\n\t// Close the resources\n}"]],"language":[["Go"]]},"created_time":1677505028826,"last_edited_time":1677505029303,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"255963cd-490e-4c81-be70-d07858aaa2ee":{"role":"reader","value":{"id":"255963cd-490e-4c81-be70-d07858aaa2ee","version":309,"type":"sub_sub_header","properties":{"title":[["9.3 #63: Not being careful with goroutines and loop variables（在range loop中执行协程，注意不要引用range生成的变量）"]]},"created_time":1677591205610,"last_edited_time":1677591266570,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"dfcc4d98-61f4-49eb-8dea-e93e16f9ca93":{"role":"reader","value":{"id":"dfcc4d98-61f4-49eb-8dea-e93e16f9ca93","version":58,"type":"text","properties":{"title":[["参考 "],["#30",[["a","https://yangsoon.github.io/100-go-mistakes-and-how-to-avoid-them--1#f78ef2507ea64ebda88578bfb188720c"]]]]},"created_time":1677591460957,"last_edited_time":1677591488995,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"c1fd97d9-c1ee-4dd1-9332-36d5595b086c":{"role":"reader","value":{"id":"c1fd97d9-c1ee-4dd1-9332-36d5595b086c","version":316,"type":"code","properties":{"title":[["func listing1() {\n\ts := []int{1, 2, 3}\n\t// 协程打印的结果可能会出现相同的值\n\tfor _, i := range s {\n\t\tgo func() {\n\t\t\tfmt.Print(i)\n\t\t}()\n\t}\n}\n// 解决方案一\nfunc listing2() {\n\ts := []int{1, 2, 3}\n\t\n\tfor _, i := range s {\n\t\tval := i\n\t\tgo func() {\n\t\t\tfmt.Print(val)\n\t\t}()\n\t}\n}\n// 解决方案二\nfunc listing3() {\n\ts := []int{1, 2, 3}\n\n\tfor _, i := range s {\n\t\tgo func(val int) {\n\t\t\tfmt.Print(val)\n\t\t}(i)\n\t}\n}"]],"language":[["Go"]]},"created_time":1677591299358,"last_edited_time":1677591360248,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"cc925770-1c7b-4ae5-823f-025bd222029b":{"role":"reader","value":{"id":"cc925770-1c7b-4ae5-823f-025bd222029b","version":125,"type":"sub_sub_header","properties":{"title":[["9.4 #64: Expecting deterministic behavior using select and channels（错误的以为 select 的执行结果是确定的）"]]},"created_time":1677591368970,"last_edited_time":1677591504407,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"fccf2654-571d-4d20-9226-6509e082c70c":{"role":"reader","value":{"id":"fccf2654-571d-4d20-9226-6509e082c70c","version":160,"type":"bulleted_list","properties":{"title":[["select 中的 case 执行时机是随机的"]]},"created_time":1677591967665,"last_edited_time":1677591986597,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"4c4b43ef-4eda-4ed2-9773-699c3d1943db":{"role":"reader","value":{"id":"4c4b43ef-4eda-4ed2-9773-699c3d1943db","version":10,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbjjepyykqj31ca0lg47c.jpg"]]},"format":{"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbjjepyykqj31ca0lg47c.jpg"},"created_time":1677591938850,"last_edited_time":1677591941495,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"34f14f8a-4616-4a18-9c69-89de6aa6781c":{"role":"reader","value":{"id":"34f14f8a-4616-4a18-9c69-89de6aa6781c","version":110,"type":"text","properties":{"title":[["解决方案可以是使用for-select嵌套："]]},"created_time":1677591988917,"last_edited_time":1677592058492,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"ae22c659-1211-43ce-9e83-5a792f1a021a":{"role":"reader","value":{"id":"ae22c659-1211-43ce-9e83-5a792f1a021a","version":15,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbjjgb39klj310s0juwh4.jpg"]]},"format":{"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbjjgb39klj310s0juwh4.jpg"},"created_time":1677592042520,"last_edited_time":1677592777461,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"0adc0022-5b09-49c5-93a9-1ba31aff7abb":{"role":"reader","value":{"id":"0adc0022-5b09-49c5-93a9-1ba31aff7abb","version":315,"type":"sub_sub_header","properties":{"title":[["9.5 #65: Not using notification channels（chan struct{} 可以用于通知事件）"]]},"created_time":1677593408024,"last_edited_time":1677593491928,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"9dded198-efb5-4a1e-bcd0-b9b75f8ec55b":{"role":"reader","value":{"id":"9dded198-efb5-4a1e-bcd0-b9b75f8ec55b","version":149,"type":"code","properties":{"title":[["// struct{} 不占用内存，经常用于通知场景\nchan struct{}"]],"language":[["Go"]]},"created_time":1677593513327,"last_edited_time":1677593542196,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"1f280e09-a0dd-4216-8597-b64b70fef159":{"role":"reader","value":{"id":"1f280e09-a0dd-4216-8597-b64b70fef159","version":4,"type":"sub_sub_header","properties":{"title":[["9.6 #66: Not using nil channels（利用nil的channel读写都会block的特性）"]]},"created_time":1677592067975,"last_edited_time":1677593400350,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"0715f0c5-5f79-4522-a41f-27233d9ed647":{"role":"reader","value":{"id":"0715f0c5-5f79-4522-a41f-27233d9ed647","version":12,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbjjsatms6j310a0m8q8p.jpg"]]},"format":{"block_width":480,"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbjjsatms6j310a0m8q8p.jpg","block_full_width":false,"block_page_width":false},"created_time":1677592780340,"last_edited_time":1677592805253,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"7d4a3d12-9804-40f6-a658-97353929b8e6":{"role":"reader","value":{"id":"7d4a3d12-9804-40f6-a658-97353929b8e6","version":331,"type":"bulleted_list","properties":{"title":[["GO对于close的channel仍然能够读取到0值，所以需要使用  "],["v, open := <-ch",[["c"]]],[" 语法中的open来判断channel是否被close"]]},"created_time":1677592815786,"last_edited_time":1677592880629,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"8e1c18ad-763a-475e-89f7-e6bc06005ee2":{"role":"reader","value":{"id":"8e1c18ad-763a-475e-89f7-e6bc06005ee2","version":14,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbjjx84ansj31bs10yaip.jpg"]]},"format":{"block_width":576,"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbjjx84ansj31bs10yaip.jpg","block_full_width":false,"block_page_width":false},"created_time":1677593004442,"last_edited_time":1677593289174,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"b8eaa0a4-d435-4ee0-9551-4733f8163b15":{"role":"reader","value":{"id":"b8eaa0a4-d435-4ee0-9551-4733f8163b15","version":433,"type":"text","properties":{"title":[["解决方案：通过 ",[["b"]]],["v, open := <-ch",[["c"],["b"]]],[" 语法判断 chan 是否被close，避免读取0值，close之后的channel置为nil，避免for循环空转",[["b"]]]]},"created_time":1677593187323,"last_edited_time":1677593265394,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"5f0c7c0c-7607-468f-85eb-d4b215228044":{"role":"reader","value":{"id":"5f0c7c0c-7607-468f-85eb-d4b215228044","version":12,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbjjzxzub1j31520s445i.jpg"]]},"format":{"block_width":576,"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbjjzxzub1j31520s445i.jpg","block_full_width":false,"block_page_width":false},"created_time":1677593161482,"last_edited_time":1677593282277,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"08e9a857-ec47-4fdb-8aa9-c5bc48c869ed":{"role":"reader","value":{"id":"08e9a857-ec47-4fdb-8aa9-c5bc48c869ed","version":118,"type":"sub_sub_header","properties":{"title":[["9.7 #67: Being puzzled about channel size（不清楚channel的大小如何设置）"]]},"created_time":1677593315976,"last_edited_time":1677593355635,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"e8cdcd4c-ee40-4960-a078-eafd872eafb5":{"role":"reader","value":{"id":"e8cdcd4c-ee40-4960-a078-eafd872eafb5","version":156,"type":"bulleted_list","properties":{"title":[["无缓存的channel可以用于同步场景"]]},"created_time":1677593597796,"last_edited_time":1677593615906,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"0546b163-58e4-43c3-9e72-b73acad85c60":{"role":"reader","value":{"id":"0546b163-58e4-43c3-9e72-b73acad85c60","version":189,"type":"bulleted_list","properties":{"title":[["带有缓存的channel经常用于传递消息，控制协程数量等等"]]},"created_time":1677593616538,"last_edited_time":1677593654862,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"f2c2e94e-998a-4de7-a5ae-bcf06d550ed8":{"role":"reader","value":{"id":"f2c2e94e-998a-4de7-a5ae-bcf06d550ed8","version":4,"type":"sub_sub_header","properties":{"title":[["9.8 #68: Forgetting about possible side effects with string formatting（字符串格式化可能会带来的并发错误）"]]},"created_time":1677585738834,"last_edited_time":1677593312480,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"ee5bb67f-6ad1-4fab-bb0b-1a7dce24d9c2":{"role":"reader","value":{"id":"ee5bb67f-6ad1-4fab-bb0b-1a7dce24d9c2","version":514,"type":"text","properties":{"title":[["如下例子，在 age < 0 的场景下 UpdateAge 会执行到 fmt.Errorf 函数并打印结构体c，fmt.Errorf会直接调用c结构的 String 方法导致死锁。"]]},"created_time":1677585930924,"last_edited_time":1677586052704,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"f3ffd82d-32aa-4f02-a213-4433dc49ac47":{"role":"reader","value":{"id":"f3ffd82d-32aa-4f02-a213-4433dc49ac47","version":17,"type":"code","properties":{"title":[["type Customer struct {\n\tmutex sync.RWMutex\n\tid    string\n\tage   int\n}\n\nfunc (c *Customer) UpdateAge(age int) error {\n\tc.mutex.Lock()\n\tdefer c.mutex.Unlock()\n\n\tif age < 0 {\n\t\treturn fmt.Errorf(\"age should be positive for customer %v\", c)\n\t}\n\n\tc.age = age\n\treturn nil\n}\n\nfunc (c *Customer) String() string {\n\tc.mutex.RLock()\n\tdefer c.mutex.RUnlock()\n\treturn fmt.Sprintf(\"id %s, age %d\", c.id, c.age)\n}"]],"language":[["Go"]]},"created_time":1677585899992,"last_edited_time":1677585921387,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"6cfd2378-16aa-4971-93d6-409a1d72e941":{"role":"reader","value":{"id":"6cfd2378-16aa-4971-93d6-409a1d72e941","version":332,"type":"text","properties":{"title":[["解决方案是缩小加锁的范围，只在对临界区的值进行修改的时候才加锁"]]},"created_time":1677586219769,"last_edited_time":1677586256695,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"05126ba2-4ec4-4fc7-95da-075532c368a1":{"role":"reader","value":{"id":"05126ba2-4ec4-4fc7-95da-075532c368a1","version":7,"type":"code","properties":{"title":[["func (c *Customer) UpdateAge2(age int) error {\n\tif age < 0 {\n\t\treturn fmt.Errorf(\"age should be positive for customer %v\", c)\n\t}\n\n\tc.mutex.Lock()\n\tdefer c.mutex.Unlock()\n\n\tc.age = age\n\treturn nil\n}"]],"language":[["Go"]]},"created_time":1677586264761,"last_edited_time":1677586277297,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"a48e9d53-4a7b-4ccd-98c6-63a6fa09431b":{"role":"reader","value":{"id":"a48e9d53-4a7b-4ccd-98c6-63a6fa09431b","version":108,"type":"sub_sub_header","properties":{"title":[["9.9 #69: Creating data races with append（使用append函数的时候出现data race）"]]},"created_time":1677586289212,"last_edited_time":1677587250117,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"453398a1-1f7d-4d7f-a1a2-e55388f769ed":{"role":"reader","value":{"id":"453398a1-1f7d-4d7f-a1a2-e55388f769ed","version":113,"type":"bulleted_list","properties":{"title":[["注意append操作不是线程安全的"]]},"created_time":1677587217908,"last_edited_time":1677587234617,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"afeef38e-58d1-41e4-90fb-9eb2c37f6023":{"role":"reader","value":{"id":"afeef38e-58d1-41e4-90fb-9eb2c37f6023","version":10,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbjh3fld7pj31eg0n6n7d.jpg"]]},"format":{"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbjh3fld7pj31eg0n6n7d.jpg"},"created_time":1677587135650,"last_edited_time":1677587146764,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"0ffe02a2-7a29-4bee-80cb-975ea1a74581":{"role":"reader","value":{"id":"0ffe02a2-7a29-4bee-80cb-975ea1a74581","version":143,"type":"sub_sub_header","properties":{"title":[["9.10 #70: Using mutexes inaccurately with slices and maps（错误的给slice和map加锁）"]]},"created_time":1677587292072,"last_edited_time":1677588457576,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"88f060bd-7d3f-4788-ba4e-bfbc76dab641":{"role":"reader","value":{"id":"88f060bd-7d3f-4788-ba4e-bfbc76dab641","version":379,"type":"text","properties":{"title":[["当有2个协程同事调用 AddBalance 和 AverageBalance，还会出现data race，因为 AverageBalance 中对 c.balances 只拷贝引用，对slice同理。"]]},"created_time":1677588471645,"last_edited_time":1677588664006,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"f02802f2-ac92-45b2-9e34-8249cc28f83c":{"role":"reader","value":{"id":"f02802f2-ac92-45b2-9e34-8249cc28f83c","version":9,"type":"code","properties":{"title":[["type Cache struct {\n\tmu       sync.RWMutex\n\tbalances map[string]float64\n}\n\nfunc (c *Cache) AddBalance(id string, balance float64) {\n\tc.mu.Lock()\n\tc.balances[id] = balance\n\tc.mu.Unlock()\n}\n\nfunc (c *Cache) AverageBalance() float64 {\n\tc.mu.RLock()\n\tbalances := c.balances\n\tc.mu.RUnlock()\n\n\tsum := 0.\n\tfor _, balance := range balances {\n\t\tsum += balance\n\t}\n\treturn sum / float64(len(balances))\n}"]],"language":[["Go"]]},"created_time":1677588429369,"last_edited_time":1677588484729,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"beeca050-1653-4a87-b160-10addf066c52":{"role":"reader","value":{"id":"beeca050-1653-4a87-b160-10addf066c52","version":73,"type":"sub_sub_header","properties":{"title":[["9.11 #71: Misusing sync.WaitGroup（错误使用 sync.WaitGroup）"]]},"created_time":1677588675323,"last_edited_time":1677588691782,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"f77b15bb-406e-4855-b5ef-24046fc192d3":{"role":"reader","value":{"id":"f77b15bb-406e-4855-b5ef-24046fc192d3","version":481,"type":"text","properties":{"title":[["因为 for 循环创建的3个协程是异步执行，可能执行到wg.Wait的时候有2个协程已经执行成功并退出了，所以v的值可能为2"]]},"created_time":1677588837747,"last_edited_time":1677588903263,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"96d2f9c4-34eb-4e34-bb63-49498741c591":{"role":"reader","value":{"id":"96d2f9c4-34eb-4e34-bb63-49498741c591","version":16,"type":"code","properties":{"title":[["func main() {\n\twg := sync.WaitGroup{}\n\tvar v uint64\n\n\tfor i := 0; i < 3; i++ {\n\t\tgo func() {\n\t\t\twg.Add(1)\n\t\t\tatomic.AddUint64(&v, 1)\n\t\t\twg.Done()\n\t\t}()\n\t}\n\n\twg.Wait()\n\tfmt.Println(v)\n}"]],"language":[["Go"]]},"created_time":1677588834994,"last_edited_time":1677588841705,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"8d247983-4f18-442d-a7c4-b6bbb17290c7":{"role":"reader","value":{"id":"8d247983-4f18-442d-a7c4-b6bbb17290c7","version":76,"type":"text","properties":{"title":[["解决方案一"]]},"created_time":1677588917705,"last_edited_time":1677588941291,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"1246aa68-9cc7-4a6e-a08c-52954f88c4ff":{"role":"reader","value":{"id":"1246aa68-9cc7-4a6e-a08c-52954f88c4ff","version":16,"type":"code","properties":{"title":[["func main() {\n\twg := sync.WaitGroup{}\n\tvar v uint64\n\n\twg.Add(3)\n\tfor i := 0; i < 3; i++ {\n\t\tgo func() {\n\t\t\tatomic.AddUint64(&v, 1)\n\t\t\twg.Done()\n\t\t}()\n\t}\n\n\twg.Wait()\n\tfmt.Println(v)\n}"]],"language":[["Go"]]},"created_time":1677588927865,"last_edited_time":1677588931024,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"6c29ce3f-4eed-49b5-93c8-58df7a2a7e2b":{"role":"reader","value":{"id":"6c29ce3f-4eed-49b5-93c8-58df7a2a7e2b","version":37,"type":"text","properties":{"title":[["解决方案二"]]},"created_time":1677588942483,"last_edited_time":1677588945454,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"cd5ee62f-517b-47ff-9a8c-8225dda1402b":{"role":"reader","value":{"id":"cd5ee62f-517b-47ff-9a8c-8225dda1402b","version":16,"type":"code","properties":{"title":[["func main() {\n\twg := sync.WaitGroup{}\n\tvar v uint64\n\n\tfor i := 0; i < 3; i++ {\n\t\twg.Add(1)\n\t\tgo func() {\n\t\t\tatomic.AddUint64(&v, 1)\n\t\t\twg.Done()\n\t\t}()\n\t}\n\n\twg.Wait()\n\tfmt.Println(v)\n}"]],"language":[["Go"]]},"created_time":1677588950128,"last_edited_time":1677588954446,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"21c7ccf6-a336-4bb6-bcfa-675201e730b7":{"role":"reader","value":{"id":"21c7ccf6-a336-4bb6-bcfa-675201e730b7","version":156,"type":"sub_sub_header","properties":{"title":[["9.12 #72: Forgetting about sync.Cond（别忘记条件变量sync.Cond）"]]},"created_time":1677588963802,"last_edited_time":1677589298529,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"b2f26809-9764-4f19-a034-22447742004b":{"role":"reader","value":{"id":"b2f26809-9764-4f19-a034-22447742004b","version":12,"type":"bookmark","properties":{"link":[["https://geektutu.com/post/hpg-sync-cond.html"]],"title":[["Go sync.Cond | Go 语言高性能编程 | 极客兔兔"]],"description":[["Go 语言/golang 高性能编程，Go 语言进阶教程，Go 语言高性能编程(high performance go)。sync.Cond 是一个条件锁，也被称为条件变量，常用来一写多读(一个 goroutine 通知多个在等待的 goroutines)的场景。"]]},"format":{"bookmark_icon":"https://geektutu.com/img/icon.png"},"created_time":1677589948088,"last_edited_time":1677589951099,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"27550b2d-9cb9-4723-ab32-e19460bbdaf3":{"role":"reader","value":{"id":"27550b2d-9cb9-4723-ab32-e19460bbdaf3","version":18,"type":"code","properties":{"title":[["func main() {\n\ttype Donation struct {\n\t\tcond    *sync.Cond\n\t\tbalance int\n\t}\n\n\tdonation := &Donation{\n\t\tcond: sync.NewCond(&sync.Mutex{}),\n\t}\n\n\t// Listener goroutines\n\tf := func(goal int) {\n\t\tdonation.cond.L.Lock()\n\t\tfor donation.balance < goal {\n\t\t\tdonation.cond.Wait()\n\t\t}\n\t\tfmt.Printf(\"%d$ goal reached\\n\", donation.balance)\n\t\tdonation.cond.L.Unlock()\n\t}\n\n\tgo f(10)\n\tgo f(15)\n\n\t// Updater goroutine\n\tfor {\n\t\ttime.Sleep(time.Second)\n\t\tdonation.cond.L.Lock()\n\t\tdonation.balance++\n\t\tdonation.cond.L.Unlock()\n\t\tdonation.cond.Broadcast()\n\t}\n}"]],"language":[["Go"]]},"created_time":1677589635249,"last_edited_time":1677589766952,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"1403eaf6-6acf-49a0-a0bf-63b7110b08c8":{"role":"reader","value":{"id":"1403eaf6-6acf-49a0-a0bf-63b7110b08c8","version":105,"type":"text","properties":{"title":[["使用Cond可以避免CPU空转的情况。"]]},"created_time":1677589733364,"last_edited_time":1677589996924,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"05073c8f-5ad7-409a-a745-19510ffa810a":{"role":"reader","value":{"id":"05073c8f-5ad7-409a-a745-19510ffa810a","version":143,"type":"sub_sub_header","properties":{"title":[["9.13 #73: Not using errgroup（使用 errgroup 采集多个协程执行结果）"]]},"created_time":1677590004183,"last_edited_time":1677590120396,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"2ae63cfd-1c6e-4115-95d8-8c9cdad6ed48":{"role":"reader","value":{"id":"2ae63cfd-1c6e-4115-95d8-8c9cdad6ed48","version":10,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbjiirbgghj31f60hywhb.jpg"]]},"format":{"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbjiirbgghj31f60hywhb.jpg"},"created_time":1677590095233,"last_edited_time":1677590098427,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"57ce497e-3cf8-49bc-b7d8-0b07f519d22f":{"role":"reader","value":{"id":"57ce497e-3cf8-49bc-b7d8-0b07f519d22f","version":375,"type":"text","properties":{"title":[["使用 "],["golang.org/x/sync/errgroup",[["a","http://golang.org/x/sync/errgroup"]]],[" 采集多个协程的错误, 但是 errorgroup限制比较多，需要函数签名符合"],["func() error {}",[["c"]]],[" "]]},"created_time":1677590258919,"last_edited_time":1677590862217,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"f399ca3f-f7da-4e33-897a-2bec1ce11812":{"role":"reader","value":{"id":"f399ca3f-f7da-4e33-897a-2bec1ce11812","version":10,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbjiqad262j31aq0rsaib.jpg"]]},"format":{"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbjiqad262j31aq0rsaib.jpg"},"created_time":1677590528818,"last_edited_time":1677590531589,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"13051c2f-d259-4003-8708-bd92d9da1e65":{"role":"reader","value":{"id":"13051c2f-d259-4003-8708-bd92d9da1e65","version":15,"type":"text","properties":{"title":[["k8s 中提供了集合多种错误的功能，可以参考 k8s.io/apimachinery/pkg/util/errors/errors.go:35"]]},"created_time":1677590863928,"last_edited_time":1677590864462,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"025990b7-1780-448e-bddb-c41d3b01a39d":{"role":"reader","value":{"id":"025990b7-1780-448e-bddb-c41d3b01a39d","version":133,"type":"sub_sub_header","properties":{"title":[["9.14 #74: Copying a sync type（同步类型的值不能被拷贝）"]]},"created_time":1677590673494,"last_edited_time":1677591145654,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"ab42b85c-e154-496c-89b6-fe46d0422f90":{"role":"reader","value":{"id":"ab42b85c-e154-496c-89b6-fe46d0422f90","version":12,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbjj0adk20j31200i2q9f.jpg"]]},"format":{"block_width":528,"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbjj0adk20j31200i2q9f.jpg","block_full_width":false,"block_page_width":false},"created_time":1677591105009,"last_edited_time":1677591118548,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"1ff65c47-6e07-4394-8707-313437896372":{"role":"reader","value":{"id":"1ff65c47-6e07-4394-8707-313437896372","version":109,"type":"text","properties":{"title":[["以下类型均不能被拷贝"]]},"created_time":1677595497160,"last_edited_time":1677595530487,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"848371a5-c992-41a2-9f86-6ef4658c51f8":{"role":"reader","value":{"id":"848371a5-c992-41a2-9f86-6ef4658c51f8","version":42,"type":"bulleted_list","properties":{"title":[["sync.Cond"]]},"created_time":1677595447352,"last_edited_time":1677595499175,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"84ae3f8e-908e-4bbb-bf8a-e86a3da41474":{"role":"reader","value":{"id":"84ae3f8e-908e-4bbb-bf8a-e86a3da41474","version":10,"type":"bulleted_list","properties":{"title":[["sync.Map"]]},"created_time":1677595499172,"last_edited_time":1677595500890,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"9f4045fb-444c-40d3-b7f8-2b06b9cefbca":{"role":"reader","value":{"id":"9f4045fb-444c-40d3-b7f8-2b06b9cefbca","version":10,"type":"bulleted_list","properties":{"title":[["sync.Mutex"]]},"created_time":1677595500889,"last_edited_time":1677595502117,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"c7621cb3-721b-46ef-befd-ddfb3b44cc0b":{"role":"reader","value":{"id":"c7621cb3-721b-46ef-befd-ddfb3b44cc0b","version":5,"type":"bulleted_list","properties":{"title":[["sync.RWMutex "]]},"created_time":1677595502114,"last_edited_time":1677595502117,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"ef69e218-a8c8-4af2-89d3-ca12b0e3439f":{"role":"reader","value":{"id":"ef69e218-a8c8-4af2-89d3-ca12b0e3439f","version":16,"type":"bulleted_list","properties":{"title":[["sync.Once"]]},"created_time":1677595482924,"last_edited_time":1677595504284,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"cd32d9b8-e8d4-4528-9e87-5d90015e01ed":{"role":"reader","value":{"id":"cd32d9b8-e8d4-4528-9e87-5d90015e01ed","version":10,"type":"bulleted_list","properties":{"title":[["sync.Pool"]]},"created_time":1677595504281,"last_edited_time":1677595505587,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"288b1883-4bb5-43fe-82a9-9d9be770b80d":{"role":"reader","value":{"id":"288b1883-4bb5-43fe-82a9-9d9be770b80d","version":5,"type":"bulleted_list","properties":{"title":[["sync.WaitGroup"]]},"created_time":1677595505584,"last_edited_time":1677595505587,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"9f15a4b7-1af7-4561-a178-be3549245a31":{"role":"reader","value":{"id":"9f15a4b7-1af7-4561-a178-be3549245a31","version":15,"type":"sub_header","properties":{"title":[["10 The standard library"]]},"created_time":1677632531416,"last_edited_time":1677632545936,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"7047667f-245f-4699-81a1-116b2ea7da39":{"role":"reader","value":{"id":"7047667f-245f-4699-81a1-116b2ea7da39","version":142,"type":"sub_sub_header","properties":{"title":[["10.1 #75: Providing a wrong time duration（记住标准库的时间单位）"]]},"created_time":1677675294836,"last_edited_time":1677675354396,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"06912f42-ff0d-4a18-9e51-94e03629e89f":{"role":"reader","value":{"id":"06912f42-ff0d-4a18-9e51-94e03629e89f","version":206,"type":"bulleted_list","properties":{"title":[["设置时间的时候还是建议使用time.Duration类型，不要直接用数字"]]},"created_time":1677675360602,"last_edited_time":1677675442050,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"842f3802-89ed-42ee-8da5-c3dbed8595d0":{"role":"reader","value":{"id":"842f3802-89ed-42ee-8da5-c3dbed8595d0","version":12,"type":"code","properties":{"title":[["func listing1() {\n\tticker := time.NewTicker(1000)\n\tfor {\n\t\tselect {\n\t\tcase <-ticker.C:\n\t\t\tfmt.Println(\"tick\")\n\t\t}\n\t}\n}\n\nfunc listing2() {\n\tticker := time.NewTicker(time.Microsecond)\n\tfor {\n\t\tselect {\n\t\tcase <-ticker.C:\n\t\t\tfmt.Println(\"tick\")\n\t\t}\n\t}\n}"]],"language":[["Go"]]},"created_time":1677675326580,"last_edited_time":1677675352359,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"84aab02c-2114-40de-bf63-aacf4441ece8":{"role":"reader","value":{"id":"84aab02c-2114-40de-bf63-aacf4441ece8","version":126,"type":"sub_sub_header","properties":{"title":[["10.2 #76: time.After and memory leaks （使用 time.After 可能会导致内存溢出）"]]},"created_time":1677675471480,"last_edited_time":1677675490688,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"b20ff457-f8d2-4347-8100-1d5580ddaff7":{"role":"reader","value":{"id":"b20ff457-f8d2-4347-8100-1d5580ddaff7","version":413,"type":"text","properties":{"title":[["每次调用 "],["time.After",[["c"]]],[" 时使用大约200字节的内存。但是只有在指定的时间到达的时候才会GC，如果在1小时内，频繁的调用 "],["time.After",[["c"]]],[" 会导致内存爆炸。"]]},"created_time":1677675522953,"last_edited_time":1677675660216,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"bf473240-1a67-4da5-9cb7-94dd3268251a":{"role":"reader","value":{"id":"bf473240-1a67-4da5-9cb7-94dd3268251a","version":301,"type":"code","properties":{"title":[["func consumer1(ch <-chan Event) {\n\tfor {\n\t\tselect {\n\t\tcase event := <-ch:\n\t\t\thandle(event)\n\t\tcase <-time.After(time.Hour):\n\t\t\tlog.Println(\"warning: no messages received\")\n\t\t}\n\t}\n}\n\n// 解决方案一\nfunc consumer2(ch <-chan Event) {\n\tfor {\n\t\tctx, cancel := context.WithTimeout(context.Background(), time.Hour)\n\t\tselect {\n\t\tcase event := <-ch:\n\t\t\tcancel()\n\t\t\thandle(event)\n\t\tcase <-ctx.Done():\n\t\t\tlog.Println(\"warning: no messages received\")\n\t\t}\n\t}\n}\n\n// 解决方案二，创建一次 Timer 每次循环都会重置时间\nfunc consumer3(ch <-chan Event) {\n\ttimerDuration := 1 * time.Hour\n\ttimer := time.NewTimer(timerDuration)\n\n\tfor {\n\t\ttimer.Reset(timerDuration)\n\t\tselect {\n\t\tcase event := <-ch:\n\t\t\thandle(event)\n\t\tcase <-timer.C:\n\t\t\tlog.Println(\"warning: no messages received\")\n\t\t}\n\t}\n}"]],"language":[["Go"]]},"created_time":1677675520414,"last_edited_time":1677675733521,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"06e85100-6112-4599-9f64-7b2d5a2a6756":{"role":"reader","value":{"id":"06e85100-6112-4599-9f64-7b2d5a2a6756","version":85,"type":"sub_sub_header","properties":{"title":[["10.3 #77: Common JSON-handling mistakes（常见的 JSON 处理错误）"]]},"created_time":1677632560750,"last_edited_time":1677675986910,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"fd82c821-b590-41d9-b667-2bafa3db1cd0":{"role":"reader","value":{"id":"fd82c821-b590-41d9-b667-2bafa3db1cd0","version":12,"type":"bookmark","properties":{"link":[["https://zhuanlan.zhihu.com/p/53125839"]],"title":[["go json 实践中遇到的坑"]],"description":[["在使用 go 语言开发过程中，经常需要使用到 json 包来进行 json 和 struct 的互相转换，在使用过程中，遇到了一些需要额外注意的地方，记录如下。 整数变浮点数问题假设有一个 Person 结构，其中包含 Age int64 和…"]]},"format":{"bookmark_icon":"https://static.zhihu.com/heifetz/assets/apple-touch-icon-152.81060cab.png","bookmark_cover":"https://pic1.zhimg.com/v2-9281b3e47858daa5e9086f0a0047d116_720w.jpg?source=172ae18b"},"created_time":1677677267662,"last_edited_time":1677677270669,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"caa56b20-195d-42d5-be46-41236961ea50":{"role":"reader","value":{"id":"caa56b20-195d-42d5-be46-41236961ea50","version":21,"type":"text","properties":{"title":[["Unexpected behavior due to type embedding",[["b"]]]]},"created_time":1677675745133,"last_edited_time":1677675767236,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"6ac96acb-1077-472f-8767-c40e4127ef23":{"role":"reader","value":{"id":"6ac96acb-1077-472f-8767-c40e4127ef23","version":224,"type":"text","properties":{"title":[["如果类型实现了 "],["Marshaler",[["c"]]],[" 接口，在调用 "],["json.Marshal",[["c"]]],[" 的时候，会直接调用 "],["MarshalJSON",[["c"]]],[" 方法。"]]},"created_time":1677675910559,"last_edited_time":1677675969885,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"69323788-37f1-4eaf-a9fe-1f4cc6d07612":{"role":"reader","value":{"id":"69323788-37f1-4eaf-a9fe-1f4cc6d07612","version":11,"type":"code","properties":{"title":[["type Marshaler interface {\n    MarshalJSON() ([]byte, error)\n}"]],"language":[["Go"]]},"created_time":1677675908333,"last_edited_time":1677675941358,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"5d20410d-a2b5-4985-89f0-fabd1fe4c41f":{"role":"reader","value":{"id":"5d20410d-a2b5-4985-89f0-fabd1fe4c41f","version":782,"type":"code","properties":{"title":[["// Event1 内嵌了 time.Time 类型，会自动实现 time.Time 的所有方法\n// time.Time 实现了 Marshaler 接口，所以 Marshal Event1 的时候会直接调用\n// time.Time 的 MarshalJSON 方法\ntype Event1 struct {\n\tID int\n\ttime.Time\n}\n\nfunc listing1() error {\n\tevent := Event1{\n\t\tID:   1234,\n\t\tTime: time.Now(),\n\t}\n\n\tb, err := json.Marshal(event)\n\tif err != nil {\n\t\treturn err\n\t}\n\t// \"2021-05-18T21:15:08.381652+02:00\"\n\tfmt.Println(string(b))\n\treturn nil\n}\n\n// 解决方案一：不使用内嵌类型，给 time.Time 定义一个成员名字 \ntype Event2 struct {\n\tID   int\n\tTime time.Time\n}\n\nfunc listing2() error {\n\tevent := Event2{\n\t\tID:   1234,\n\t\tTime: time.Now(),\n\t}\n\n\tb, err := json.Marshal(event)\n\tif err != nil {\n\t\treturn err\n\t}\n\n\tfmt.Println(string(b))\n\treturn nil\n}\n\ntype Event3 struct {\n\tID int\n\ttime.Time\n}\n\n// 解决方案二：给 Event 类型实现 MarshalJSON 方法\nfunc (e Event3) MarshalJSON() ([]byte, error) {\n\treturn json.Marshal(\n\t\tstruct {\n\t\t\tID   int\n\t\t\tTime time.Time\n\t\t}{\n\t\t\tID:   e.ID,\n\t\t\tTime: e.Time,\n\t\t},\n\t)\n}\n\nfunc listing3() error {\n\tevent := Event3{\n\t\tID:   1234,\n\t\tTime: time.Now(),\n\t}\n\n\tb, err := json.Marshal(event)\n\tif err != nil {\n\t\treturn err\n\t}\n\n\tfmt.Println(string(b))\n\treturn nil\n}"]],"language":[["Go"]]},"created_time":1677675798878,"last_edited_time":1677676124097,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"76b3e79a-509f-4278-8fae-4c52782e49e8":{"role":"reader","value":{"id":"76b3e79a-509f-4278-8fae-4c52782e49e8","version":26,"type":"text","properties":{"title":[["JSON and the monotonic clock",[["b"]]]]},"created_time":1677676139651,"last_edited_time":1677676144965,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"63d79e70-12a2-432e-ab71-df3357377542":{"role":"reader","value":{"id":"63d79e70-12a2-432e-ab71-df3357377542","version":12,"type":"bookmark","properties":{"link":[["https://zhuanlan.zhihu.com/p/47754783"]],"title":[["理解Golang的Time结构"]],"description":[["在golang中创建并打印一个时间对象，会看到如下输出 2018-10-26 14:15:50.306558969 +0800 CST m=+0.000401093前面表示的意义好理解，分别是年月日和时间时区，最后的m=+xxxx这部分代表什么呢？ Monotonic Clocks …"]]},"format":{"bookmark_icon":"https://static.zhihu.com/heifetz/assets/apple-touch-icon-152.81060cab.png","bookmark_cover":"https://picx.zhimg.com/v2-fae5dcfcf8827c6066d51f9b12cd9864_720w.jpg?source=172ae18b"},"created_time":1677676358634,"last_edited_time":1677676361644,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"5eb1d5cd-c1e5-43c5-b30e-cb6801de0f82":{"role":"reader","value":{"id":"5eb1d5cd-c1e5-43c5-b30e-cb6801de0f82","version":7,"type":"code","properties":{"title":[["now := time.Now()\nencodeNow, _ := json.Marshal(now)\n\ndecodeNow := time.Time{}\njson.Unmarshal(encodeNow, &decodeNow)\n\nfmt.Println(now)  // 2018-10-26 16:04:55.230121766 +0800 CST m=+0.000520419\nfmt.Println(decodeNow)  // 2018-10-26 16:04:55.230121766 +0800 CST"]],"language":[["Go"]]},"created_time":1677676813238,"last_edited_time":1677676813511,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"1ab793b7-47f2-4b88-8cfe-e949b9e75b22":{"role":"reader","value":{"id":"1ab793b7-47f2-4b88-8cfe-e949b9e75b22","version":8,"type":"text","properties":{"title":[["可以看到，经过JSON转码之后，Time结构体会被表示成不带Monotonic Clock的字符串，丢失了Monotonic Clock信息，而将字符串转码回Time结构时，自然也就和转码之前的不一样了。同样的情况，也发生在数据库存储中，存储到数据库里的Time结构和从数据库取出来的也是不一样的。"]]},"created_time":1677676818556,"last_edited_time":1677676847585,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"83e82805-2dc9-4e53-8f3e-51e440cfd9c8":{"role":"reader","value":{"id":"83e82805-2dc9-4e53-8f3e-51e440cfd9c8","version":250,"type":"bulleted_list","properties":{"title":[["可以使用 Time.Equal() 对比时间是否相关，这里判断相等不会包含单调时间"]]},"created_time":1677676901820,"last_edited_time":1677676974977,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"237e8057-b4ac-4260-b71c-491d34183dd0":{"role":"reader","value":{"id":"237e8057-b4ac-4260-b71c-491d34183dd0","version":179,"type":"bulleted_list","properties":{"title":[["使用 Time.Truncate() 函数排除单调时钟"]]},"content":["c344609f-bc31-4c18-bd1f-862c52a36993"],"created_time":1677676979030,"last_edited_time":1677677168206,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"1bf3fec0-d8ab-4d12-a2f1-027252ced749":{"role":"reader","value":{"id":"1bf3fec0-d8ab-4d12-a2f1-027252ced749","version":28,"type":"text","properties":{"title":[["Map of any",[["b"]]]]},"created_time":1677677222396,"last_edited_time":1677677325300,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"59593fcb-288e-4cea-9fe7-f19c4dd41452":{"role":"reader","value":{"id":"59593fcb-288e-4cea-9fe7-f19c4dd41452","version":313,"type":"text","properties":{"title":[["当把json解析到 "],["map[string]any",[["c"]]],[" 类型，会出现数字类型解析错误的情况"]]},"created_time":1677677327714,"last_edited_time":1677677492819,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"e627e05c-94e5-4f31-b9e6-0f02d3d98925":{"role":"reader","value":{"id":"e627e05c-94e5-4f31-b9e6-0f02d3d98925","version":272,"type":"code","properties":{"title":[["func listing1() error {\n\tb := getMessage()\n\tvar m map[string]any\n\terr := json.Unmarshal(b, &m)\n\tif err != nil {\n\t\treturn err\n\t}\n\treturn nil\n}\n\nfunc getMessage() []byte {\n\treturn nil\n}\n\n// getMessage 函数返回如下json，解析后 id 类型为 float64\n// {\n//   \"id\": 32,\n//   \"name\": \"foo\"\n// }"]],"language":[["Go"]]},"created_time":1677677297244,"last_edited_time":1677677556572,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"8994b063-6c97-4a75-be86-d6328532d3e3":{"role":"reader","value":{"id":"8994b063-6c97-4a75-be86-d6328532d3e3","version":72,"type":"text","properties":{"title":[["解决方案: "],["使用 json.Decoder 来代替 json.Unmarshal 方法",[["b"]]]]},"created_time":1677677500164,"last_edited_time":1677677779603,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"2253ef49-7c5e-4350-ad44-df3c54253062":{"role":"reader","value":{"id":"2253ef49-7c5e-4350-ad44-df3c54253062","version":14,"type":"code","properties":{"title":[["decoder := json.NewDecoder(bytes.NewReader(getMessage()))\ndecoder.UseNumber()\nvar m map[string]any\ndecoder.Decode(&personFromJSON)"]],"language":[["Go"]]},"created_time":1677677565681,"last_edited_time":1677677659624,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"23cbab1f-00d4-4562-acc0-38eb0146e4ae":{"role":"reader","value":{"id":"23cbab1f-00d4-4562-acc0-38eb0146e4ae","version":8,"type":"text","properties":{"title":[["这种方法首先创建了一个 jsonDecoder，然后调用了 UseNumber 方法，从文档中可以知道，使用 UseNumber 方法后，json 包会将数字转换成一个内置的 Number 类型（而不是 float64），这个 Number 类型提供了转换为 int64、float64 等多个方法。"]]},"created_time":1677677672468,"last_edited_time":1677677673040,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"3d60e22e-c861-4743-b0f2-5122fb36b1b5":{"role":"reader","value":{"id":"3d60e22e-c861-4743-b0f2-5122fb36b1b5","version":55,"type":"sub_sub_header","properties":{"title":[["10.4 #78: Common SQL mistakes（常见的 SQL 错误）"]]},"created_time":1677632720408,"last_edited_time":1677677796774,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"d92c6e0a-7a31-476f-824e-c473518b420b":{"role":"reader","value":{"id":"d92c6e0a-7a31-476f-824e-c473518b420b","version":13,"type":"text","properties":{"title":[["Forgetting that sql.Open doesn’t necessarily establish connections to a database",[["b"]]]]},"created_time":1677677808114,"last_edited_time":1677677829320,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"89681485-b930-408b-a8fc-c7469d8471f6":{"role":"reader","value":{"id":"89681485-b930-408b-a8fc-c7469d8471f6","version":43,"type":"callout","properties":{"title":[["sql.Open 可能只是验证其参数而不创建与数据库的连接"]]},"format":{"page_icon":"💡","block_color":"gray_background"},"created_time":1677677830741,"last_edited_time":1677677932165,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"05b5f033-ec4d-461d-af1d-7cefb91b7c53":{"role":"reader","value":{"id":"05b5f033-ec4d-461d-af1d-7cefb91b7c53","version":144,"type":"text","properties":{"title":[["如果我们要确保使用 sql.Open 的函数也保证底层数据库可访问，我们应该使用Ping方法："]]},"created_time":1677677934693,"last_edited_time":1677678005941,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"8fc4ebe2-98d1-4cff-b42c-ca0dc1c4abe1":{"role":"reader","value":{"id":"8fc4ebe2-98d1-4cff-b42c-ca0dc1c4abe1","version":21,"type":"code","properties":{"title":[["func listing1() error {\n\tdb, err := sql.Open(\"mysql\", dsn)\n\tif err != nil {\n\t\treturn err\n\t}\n\t// ping强制建立连接，确保数据源名称有效并且数据库可访问\n\tif err := db.Ping(); err != nil {\n\t\treturn err\n\t}\n\n\t_ = db\n\treturn nil\n}"]],"language":[["Go"]]},"created_time":1677677959355,"last_edited_time":1677678037118,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"4a96c111-f2e2-4de5-b271-e8953499d5ed":{"role":"reader","value":{"id":"4a96c111-f2e2-4de5-b271-e8953499d5ed","version":10,"type":"text","properties":{"title":[["Forgetting about connections pooling",[["b"]]]]},"created_time":1677678054495,"last_edited_time":1677678059242,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"ba4e2bf8-3505-4edd-9beb-13c54ae119fd":{"role":"reader","value":{"id":"ba4e2bf8-3505-4edd-9beb-13c54ae119fd","version":9,"type":"text","properties":{"title":[["sql.Open 返回一个sql.DB结构。这个结构不表示单个数据库连接，而是表示连接池。"]]},"created_time":1677678060257,"last_edited_time":1677678107492,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"58d13e73-6cf2-4dba-8424-eed3c75e4218":{"role":"reader","value":{"id":"58d13e73-6cf2-4dba-8424-eed3c75e4218","version":10,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbkoxg0061j31a40cmwj2.jpg"]]},"format":{"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbkoxg0061j31a40cmwj2.jpg"},"created_time":1677678131166,"last_edited_time":1677678133684,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"0d6a2f6f-0775-42c5-b8fb-7c2049a372d6":{"role":"reader","value":{"id":"0d6a2f6f-0775-42c5-b8fb-7c2049a372d6","version":10,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbkoxuh1sij319c0ccjx3.jpg"]]},"format":{"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbkoxuh1sij319c0ccjx3.jpg"},"created_time":1677678153843,"last_edited_time":1677678156147,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"47dd299a-bfba-4c69-bc7e-fc3e48f91eef":{"role":"reader","value":{"id":"47dd299a-bfba-4c69-bc7e-fc3e48f91eef","version":10,"type":"text","properties":{"title":[["Not using prepared statements",[["b"]]]]},"created_time":1677678167099,"last_edited_time":1677678172427,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"6ae4a931-1fac-44ad-afcc-226175df6950":{"role":"reader","value":{"id":"6ae4a931-1fac-44ad-afcc-226175df6950","version":12,"type":"bookmark","properties":{"link":[["https://manjusaka.itscoder.com/posts/2020/01/05/simple-introdution-about-sql-prepared/"]],"title":[["简单聊聊 SQL 中的 Prepared Statements"]],"description":[["好久没写文章了，新年还是得写点技术水文来保证下状态，正好最近遇到一个比较有意思的问题，就来简单聊聊一下关于 MySQL 中 Prepared Statements 吧"]]},"format":{"bookmark_icon":"https://user-images.githubusercontent.com/7054676/56820343-2fe1b580-687e-11e9-8f6f-778df3a8eafd.png","bookmark_cover":"https://manjusaka.blog/img/og_image.png"},"created_time":1677678570794,"last_edited_time":1677678573802,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"73e7182c-1f92-409f-b1fe-fc6fd4155379":{"role":"reader","value":{"id":"73e7182c-1f92-409f-b1fe-fc6fd4155379","version":125,"type":"text","properties":{"title":[["使用 Prepare 方法创建 "],["prepared statements ",[["b"]]],["，提升查询性能，避免重复解析 SQL 带来的开销"]]},"created_time":1677678173495,"last_edited_time":1677678942950,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"785be981-30e9-4f40-bdd4-2f382c460fff":{"role":"reader","value":{"id":"785be981-30e9-4f40-bdd4-2f382c460fff","version":7,"type":"code","properties":{"title":[["func listing1(db *sql.DB, id string) error {\n\tstmt, err := db.Prepare(\"SELECT * FROM ORDER WHERE ID = ?\")\n\tif err != nil {\n\t\treturn err\n\t}\n\trows, err := stmt.Query(id)\n\tif err != nil {\n\t\treturn err\n\t}\n\t_ = rows\n\treturn nil\n}"]],"language":[["Go"]]},"created_time":1677678660891,"last_edited_time":1677678661176,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"89a58d1f-960a-4f8c-ae84-dbebf0e1c1f9":{"role":"reader","value":{"id":"89a58d1f-960a-4f8c-ae84-dbebf0e1c1f9","version":4,"type":"text","properties":{"title":[["Mishandling null values",[["b"]]]]},"created_time":1677678173495,"last_edited_time":1677678666138,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"cf2f40df-00ce-4774-a384-985d1a8a1bfa":{"role":"reader","value":{"id":"cf2f40df-00ce-4774-a384-985d1a8a1bfa","version":248,"type":"code","properties":{"title":[["func listing3(db *sql.DB, id string) error {\n\trows, err := db.Query(\"SELECT DEP, AGE FROM EMP WHERE ID = ?\", id)\n\tif err != nil {\n\t\treturn err\n\t}\n\t// Defer closing rows\n\n\tvar (\n\t\t// 使用 ql.NullString 类型，可以匹配在查询遇到NULL值的情况\n\t\tdepartment sql.NullString\n\t\tage        int\n\t)\n\tfor rows.Next() {\n\t\terr := rows.Scan(&department, &age)\n\t\tif err != nil {\n\t\t\treturn err\n\t\t}\n\t\t// ...\n\t}\n\treturn nil\n}"]],"language":[["Go"]]},"created_time":1677679113081,"last_edited_time":1677679186529,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"d9d3392d-d431-4aa0-97e0-444be8eed06a":{"role":"reader","value":{"id":"d9d3392d-d431-4aa0-97e0-444be8eed06a","version":9,"type":"text","properties":{"title":[["Not handling row iteration errors",[["b"]]]]},"created_time":1677678252096,"last_edited_time":1677678259652,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"f39c82b9-724d-425f-8f0d-22f2946f1e64":{"role":"reader","value":{"id":"f39c82b9-724d-425f-8f0d-22f2946f1e64","version":389,"type":"text","properties":{"title":[["for rows .Next() {}",[["c"]]],["  循环可能会因为没有查询到值或者遇到错误退出，所以退出后要调用 "],["rows.Err()",[["c"]]],[" 看是否是正常退出"]]},"created_time":1677679348395,"last_edited_time":1677679423667,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"1dbafafd-0f92-413e-b75e-dacadb91f58c":{"role":"reader","value":{"id":"1dbafafd-0f92-413e-b75e-dacadb91f58c","version":7,"type":"code","properties":{"title":[["func get2(ctx context.Context, db *sql.DB, id string) (string, int, error) {\n\trows, err := db.QueryContext(ctx,\n\t\t\"SELECT DEP, AGE FROM EMP WHERE ID = ?\", id)\n\tif err != nil {\n\t\treturn \"\", 0, err\n\t}\n\tdefer func() {\n\t\terr := rows.Close()\n\t\tif err != nil {\n\t\t\tlog.Printf(\"failed to close rows: %v\\n\", err)\n\t\t}\n\t}()\n\n\tvar (\n\t\tdepartment string\n\t\tage        int\n\t)\n\tfor rows.Next() {\n\t\terr := rows.Scan(&department, &age)\n\t\tif err != nil {\n\t\t\treturn \"\", 0, err\n\t\t}\n\t}\n\tif err := rows.Err(); err != nil {\n\t\treturn \"\", 0, err\n\t}\n\n\treturn department, age, nil\n}"]],"language":[["Go"]]},"created_time":1677679336524,"last_edited_time":1677679336906,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"8ea8463d-42a6-4b52-b906-8b92b1d06e85":{"role":"reader","value":{"id":"8ea8463d-42a6-4b52-b906-8b92b1d06e85","version":4,"type":"sub_sub_header","properties":{"title":[["10.5 #79: Not closing transient resources（没有及时关闭临时资源）"]]},"created_time":1677669470283,"last_edited_time":1677678167099,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"771fa5df-d3ac-48f8-8187-2473df326cab":{"role":"reader","value":{"id":"771fa5df-d3ac-48f8-8187-2473df326cab","version":8,"type":"text","properties":{"title":[["10.5.1 HTTP body",[["b"]]]]},"created_time":1677669910104,"last_edited_time":1677669915631,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"4636c314-45ee-46f0-9344-aba743d5be67":{"role":"reader","value":{"id":"4636c314-45ee-46f0-9344-aba743d5be67","version":10,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbkl8uy7mxj319c0jkwkx.jpg"]]},"format":{"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbkl8uy7mxj319c0jkwkx.jpg"},"created_time":1677670485752,"last_edited_time":1677670488645,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"b35a427d-d84a-435f-b6fe-fbf5bb019d80":{"role":"reader","value":{"id":"b35a427d-d84a-435f-b6fe-fbf5bb019d80","version":58,"type":"text","properties":{"title":[["需要注意的点："]]},"created_time":1677669483716,"last_edited_time":1677670536785,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"0151fd1e-20d1-497b-8571-3e7a4b56cba1":{"role":"reader","value":{"id":"0151fd1e-20d1-497b-8571-3e7a4b56cba1","version":322,"type":"bulleted_list","properties":{"title":[["如果你没有读取Respose.Body的内容，那么默认的 http transport 会直接关闭连接",[["b"]]]]},"created_time":1677670540546,"last_edited_time":1677671710505,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"9bd5ec0b-6a66-4f80-9018-04cffc0e6c96":{"role":"reader","value":{"id":"9bd5ec0b-6a66-4f80-9018-04cffc0e6c96","version":195,"type":"bulleted_list","properties":{"title":[["如果你读取了Body的内容，下次连接可以直接复用",[["b"]]]]},"created_time":1677670600619,"last_edited_time":1677671714282,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"d3a0161a-12c8-472f-a09c-53c6f950a50f":{"role":"reader","value":{"id":"d3a0161a-12c8-472f-a09c-53c6f950a50f","version":427,"type":"text","properties":{"title":[["在高并发的场景下，建议你使用长连接，可以调用 "],["io.Copy(io.Discard, resp.Body)",[["c"]]],[" 读取Body的内容。"]]},"created_time":1677670968858,"last_edited_time":1677671731665,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"18d2307d-4cca-4345-b9d7-dc1507096c15":{"role":"reader","value":{"id":"18d2307d-4cca-4345-b9d7-dc1507096c15","version":7,"type":"code","properties":{"title":[["func (h handler) getStatusCode2(body io.Reader) (int, error) {\n\tresp, err := h.client.Post(h.url, \"application/json\", body)\n\tif err != nil {\n\t\treturn 0, err\n\t}\n\n\tdefer func() {\n\t\terr := resp.Body.Close()\n\t\tif err != nil {\n\t\t\tlog.Printf(\"failed to close response: %v\\n\", err)\n\t\t}\n\t}()\n\n\t_, _ = io.Copy(io.Discard, resp.Body)\n\n\treturn resp.StatusCode, nil\n}"]],"language":[["Go"]]},"created_time":1677670964749,"last_edited_time":1677670965210,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"13254856-fafd-446f-b75d-47e0b729e908":{"role":"reader","value":{"id":"13254856-fafd-446f-b75d-47e0b729e908","version":8,"type":"text","properties":{"title":[["10.5.2 sql.Rows",[["b"]]]]},"created_time":1677671048551,"last_edited_time":1677671052052,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"066b4fe7-3b0a-4155-94c6-1becca3e9d8f":{"role":"reader","value":{"id":"066b4fe7-3b0a-4155-94c6-1becca3e9d8f","version":12,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbklkt9cxrj316s0i243s.jpg"]]},"format":{"block_width":528,"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbklkt9cxrj316s0i243s.jpg","block_full_width":false,"block_page_width":false},"created_time":1677671174195,"last_edited_time":1677671683302,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"61f30ac5-1602-4026-b1f0-c224de4d4a52":{"role":"reader","value":{"id":"61f30ac5-1602-4026-b1f0-c224de4d4a52","version":8,"type":"text","properties":{"title":[["10.5.3 os.File",[["b"]]]]},"created_time":1677671174731,"last_edited_time":1677671185507,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"2b923df5-5a33-48da-b4b1-5e37cbcfab79":{"role":"reader","value":{"id":"2b923df5-5a33-48da-b4b1-5e37cbcfab79","version":599,"type":"text","properties":{"title":[["写入操作是异步的，所以对写入的文件进行close操作，可能会遇到在buffer内的数据没有写到磁盘的错误，所以在close的时候如果遇到错误要及时上报。"]]},"created_time":1677671842665,"last_edited_time":1677672124139,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"fd7f0e16-0b04-4e69-ab74-53f4cbc81541":{"role":"reader","value":{"id":"fd7f0e16-0b04-4e69-ab74-53f4cbc81541","version":7,"type":"code","properties":{"title":[["func writeToFile1(filename string, content []byte) (err error) {\n\tf, err := os.OpenFile(filename, os.O_APPEND|os.O_WRONLY, os.ModeAppend)\n\tif err != nil {\n\t\treturn err\n\t}\n\n\tdefer func() {\n\t\tcloseErr := f.Close()\n\t\tif err == nil {\n\t\t\terr = closeErr\n\t\t}\n\t}()\n\n\t_, err = f.Write(content)\n\treturn\n}"]],"language":[["Go"]]},"created_time":1677671915857,"last_edited_time":1677671916296,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"5612d0cc-e719-462e-9d50-a83b52a4f119":{"role":"reader","value":{"id":"5612d0cc-e719-462e-9d50-a83b52a4f119","version":600,"type":"text","properties":{"title":[["但是如果使用了Sync调用可以同步的把数据写入磁盘，所以调用Close方法的时候也可以不用在意错误，因为数据已经正常写入。"]]},"created_time":1677671676285,"last_edited_time":1677672157554,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"279fc137-aee5-4ee8-a834-c528b81c1399":{"role":"reader","value":{"id":"279fc137-aee5-4ee8-a834-c528b81c1399","version":12,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbklrxm43yj30z60hiwj0.jpg"]]},"format":{"block_width":528,"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbklrxm43yj30z60hiwj0.jpg","block_full_width":false,"block_page_width":false},"created_time":1677671585745,"last_edited_time":1677671678600,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"48e75eaa-3af8-4213-bf2f-c9062c03531f":{"role":"reader","value":{"id":"48e75eaa-3af8-4213-bf2f-c9062c03531f","version":216,"type":"sub_sub_header","properties":{"title":[["10.6 #80: Forgetting the return statement after replying to an HTTP request（在发送完响应后忘记及时返回http handler函数）"]]},"created_time":1677672165619,"last_edited_time":1677673067315,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"55294b84-b02f-4788-87b5-80619a243f7b":{"role":"reader","value":{"id":"55294b84-b02f-4788-87b5-80619a243f7b","version":123,"type":"code","properties":{"title":[["func handler(w http.ResponseWriter, req *http.Request) {\n\terr := foo(req)\n\tif err != nil {\n\t\thttp.Error(w, \"foo\", http.StatusInternalServerError)\n\t\t// 记得这里就及时返回\n\t}\n\n\t_, _ = w.Write([]byte(\"all good\"))\n\tw.WriteHeader(http.StatusCreated)\n}"]],"language":[["Go"]]},"created_time":1677673108909,"last_edited_time":1677673133970,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"4bb76f0f-7f77-4120-bef0-c17b56343a3f":{"role":"reader","value":{"id":"4bb76f0f-7f77-4120-bef0-c17b56343a3f","version":263,"type":"sub_sub_header","properties":{"title":[["10.7 #81: Using the default HTTP client and server（生成环境不要直接使用默认的Http客户端和服务端）"]]},"created_time":1677673142896,"last_edited_time":1677722177727,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"10412a94-a4d5-40d4-b22a-12e851e06267":{"role":"reader","value":{"id":"10412a94-a4d5-40d4-b22a-12e851e06267","version":61,"type":"text","properties":{"title":[["http.Client",[["b"]]]]},"created_time":1677674392973,"last_edited_time":1677674405508,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"8d112139-cad0-4e6c-8dab-c749905eb0de":{"role":"reader","value":{"id":"8d112139-cad0-4e6c-8dab-c749905eb0de","version":724,"type":"text","properties":{"title":[["直接使用标准库的里的client和server可能会存在问题，没有完备的配置项，可能会导致生产问题，首先就是直接使用 "],["http.Client",[["c"]]],[" 发送请求，没有配置超时时间，这在生产环境是绝对不允许的。"]]},"created_time":1677673172471,"last_edited_time":1677673569117,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"8c257446-183c-4091-85fb-a01bbbb2c102":{"role":"reader","value":{"id":"8c257446-183c-4091-85fb-a01bbbb2c102","version":7,"type":"code","properties":{"title":[["client := &http.Client{}\nresp, err := client.Get(\"https://golang.org/\")"]],"language":[["Go"]]},"created_time":1677673502531,"last_edited_time":1677673502882,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"da43facf-e52a-4d69-b3bc-30251ff554b7":{"role":"reader","value":{"id":"da43facf-e52a-4d69-b3bc-30251ff554b7","version":14,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbkn8dimu6j312g0bs42e.jpg"]]},"format":{"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbkn8dimu6j312g0bs42e.jpg"},"created_time":1677673469852,"last_edited_time":1677674612727,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"27b883c3-5411-4696-8205-7309c5e4bade":{"role":"reader","value":{"id":"27b883c3-5411-4696-8205-7309c5e4bade","version":10,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbkmqobncij31480cqgoz.jpg"]]},"format":{"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbkmqobncij31480cqgoz.jpg"},"created_time":1677673588471,"last_edited_time":1677673590548,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"4ffc3109-112b-4796-b609-e9c6aac8870d":{"role":"reader","value":{"id":"4ffc3109-112b-4796-b609-e9c6aac8870d","version":286,"type":"text","properties":{"title":[["关于默认HTTP Client 还要记住他是如何处理连接的。缺省情况下，HTTP Client 会维持一个连接池。客户端在请求的时候可以重用连接(你也可以通过设置 htt"],["http.Transport.DisableKeepAlives",[["c"]]],[" 为 "],["true",[["c"]]],[" 来禁用)。"]]},"created_time":1677673589002,"last_edited_time":1677673882879,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"f29c8a17-9201-40b4-ba87-ed1803138bc4":{"role":"reader","value":{"id":"f29c8a17-9201-40b4-ba87-ed1803138bc4","version":57,"type":"text","properties":{"title":[["有一个额外的超时来指定空闲连接在连接池中保留多长时间："],["http.Transfer.IdleConnTimeout",[["c"]]]]},"created_time":1677673885542,"last_edited_time":1677673934710,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"8e0e68cd-9e70-4f16-8c35-8a117dfd5d71":{"role":"reader","value":{"id":"8e0e68cd-9e70-4f16-8c35-8a117dfd5d71","version":259,"type":"text","properties":{"title":[["这值的默认值为90s，意味着这个连接可以在90s内都能给其他请求复用。"]]},"created_time":1677673726712,"last_edited_time":1677674012215,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"61cb57b1-a9f1-4773-b3a4-643a34b3e95f":{"role":"reader","value":{"id":"61cb57b1-a9f1-4773-b3a4-643a34b3e95f","version":1092,"type":"text","properties":{"title":[["http.Transport.MaxIdleConns",[["c"]]],[" 用于配置连接池的最大数量，这个值默认为100。其中 "],["http.Transport.MaxIdleConnsPerHost",[["c"]]],[" 用于限制每个host的连接池数量，默认为2，表示如果我们对同一个host触发100次请求，只用2个请求保留在连接池中，如果我们再触发100次请求，那么我们还要再重新创建98次新的连接，这个配置对请求响应的影响也极大。"]]},"created_time":1677674012916,"last_edited_time":1677674277374,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"bc009233-5a77-4bd6-a0c7-17f4941a7c3c":{"role":"reader","value":{"id":"bc009233-5a77-4bd6-a0c7-17f4941a7c3c","version":330,"type":"callout","properties":{"title":[["突然想到自己之前手写的压测脚本，qps一直上不去，应该就是直接裸用 http.Client的锅"]]},"format":{"page_icon":"💡","block_color":"gray_background"},"created_time":1677674342074,"last_edited_time":1677674385133,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"75840e6c-4417-4466-90ac-d4cf0980164e":{"role":"reader","value":{"id":"75840e6c-4417-4466-90ac-d4cf0980164e","version":183,"type":"text","properties":{"title":[["所以我们要明确一些参数的含义，帮助我们生产上线",[["b"]]]]},"created_time":1677674278003,"last_edited_time":1677674329326,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"e6a589ca-b455-4346-9fad-6777b30f3137":{"role":"reader","value":{"id":"e6a589ca-b455-4346-9fad-6777b30f3137","version":27,"type":"text","properties":{"title":[["http.Server",[["b"]]]]},"created_time":1677674386870,"last_edited_time":1677674413789,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"e4708e59-6399-4c5d-91d6-87cfc7877e7d":{"role":"reader","value":{"id":"e4708e59-6399-4c5d-91d6-87cfc7877e7d","version":10,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbkn98yhstj315g0fo78p.jpg"]]},"format":{"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbkn98yhstj315g0fo78p.jpg"},"created_time":1677674659605,"last_edited_time":1677674662310,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"8512923b-b7db-41b5-9502-2fbf95942a1f":{"role":"reader","value":{"id":"8512923b-b7db-41b5-9502-2fbf95942a1f","version":10,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbkndg329oj31ag08kjwv.jpg"]]},"format":{"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbkndg329oj31ag08kjwv.jpg"},"created_time":1677674901555,"last_edited_time":1677674912882,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"be636884-56af-44cd-9d46-4f35a5ee9e56":{"role":"reader","value":{"id":"be636884-56af-44cd-9d46-4f35a5ee9e56","version":618,"type":"text","properties":{"title":[["服务端同样可以保持长连接，配置长连接的最长超时时间 "],["IdleTimeout",[["c"]]],[" , 如果 "],["http.Server.IdleTimeout",[["c"]]],["  没有配置就会和 "],["http.Server .ReadTimeout",[["c"]]],[" 保持一致，如果都没设置，就会在结束请求后就立马结束连接。"]]},"created_time":1677674901886,"last_edited_time":1677675174811,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"a74de5e0-84f9-43b6-94a0-c63e4023ae6e":{"role":"reader","value":{"id":"a74de5e0-84f9-43b6-94a0-c63e4023ae6e","version":7,"type":"code","properties":{"title":[["s := &http.Server{\n    // ...\n    IdleTimeout: time.Second,\n}"]],"language":[["Go"]]},"created_time":1677675050903,"last_edited_time":1677675051201,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"fa08f802-f769-4af2-b880-0a7cd3cb5e22":{"role":"reader","value":{"id":"fa08f802-f769-4af2-b880-0a7cd3cb5e22","version":265,"type":"callout","properties":{"title":[["在生产环境，有时候为了避免服务断流，会把keep-alive给关闭"]]},"format":{"page_icon":"💡","block_color":"gray_background"},"created_time":1677675194502,"last_edited_time":1677675222604,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"21f335df-2e59-4cd8-8d0c-9fbcdbf1d503":{"role":"reader","value":{"id":"21f335df-2e59-4cd8-8d0c-9fbcdbf1d503","version":11,"type":"sub_header","properties":{"title":[["11 Testing"]]},"created_time":1677679565941,"last_edited_time":1677679573114,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"9fd8ad81-e457-4d2e-9d8e-145daafd7af9":{"role":"reader","value":{"id":"9fd8ad81-e457-4d2e-9d8e-145daafd7af9","version":74,"type":"sub_sub_header","properties":{"title":[["11.1 #82: Not categorizing tests（没有对测试类型分类）"]]},"created_time":1677679624997,"last_edited_time":1677765209356,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"da4990c0-5e42-460c-8425-cfbd41c51f6d":{"role":"reader","value":{"id":"da4990c0-5e42-460c-8425-cfbd41c51f6d","version":855,"type":"text","properties":{"title":[["不同类型的测试:单元测试、集成测试、E2E测试各自的执行时间和个数都有很大差距，如下的测试金字塔显示了测试的占比，各种测试的执行时间也呈反比。这一节介绍了一些方法提醒开发者，不同类型的测试，需要明确区分，并且最好独立执行，可以提升开发效率。"]]},"created_time":1677765364422,"last_edited_time":1677765570557,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"4f9c6c06-3ad6-46b1-9907-c5f09f199062":{"role":"reader","value":{"id":"4f9c6c06-3ad6-46b1-9907-c5f09f199062","version":12,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbluxpm2fqj30la0ci0uc.jpg"]]},"format":{"block_width":384,"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbluxpm2fqj30la0ci0uc.jpg","block_full_width":false,"block_page_width":false},"created_time":1677765349336,"last_edited_time":1677765361086,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"5595aec8-9bdc-4ee6-aad8-885ffa50909a":{"role":"reader","value":{"id":"5595aec8-9bdc-4ee6-aad8-885ffa50909a","version":203,"type":"bulleted_list","properties":{"title":[["使用 "],["go:build",[["c"]]],[" tag来给测试归类,用法可参考："]]},"content":["7c2ce0a4-ab7f-46c6-9dc5-07a43ab425cd","18c9eccc-9da6-42f6-8ec8-e88c65be7a5e"],"created_time":1677765577011,"last_edited_time":1677765994623,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"27701362-dbb7-4aca-b5a6-c08b830ac4b6":{"role":"reader","value":{"id":"27701362-dbb7-4aca-b5a6-c08b830ac4b6","version":99,"type":"bulleted_list","properties":{"title":[["使用环境变量分类"]]},"content":["18666ce9-f011-454d-9338-067ff8b091af"],"created_time":1677765799988,"last_edited_time":1677765811796,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"ff80f41e-1180-4fc3-9ea2-46b3880651a8":{"role":"reader","value":{"id":"ff80f41e-1180-4fc3-9ea2-46b3880651a8","version":299,"type":"bulleted_list","properties":{"title":[["Short mode，执行go test的时候加上 "],["-short",[["c"]]],[" 选项，可以选择性的执行耗时短的测试"]]},"content":["c06a6433-6f93-4703-ba8b-247a1e863581"],"created_time":1677766070989,"last_edited_time":1677766337274,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"ac422070-7e32-47cf-ab96-2dfb26036066":{"role":"reader","value":{"id":"ac422070-7e32-47cf-ab96-2dfb26036066","version":169,"type":"sub_sub_header","properties":{"title":[["11.2 #83: Not enabling the -race flag（没开启 -race flag来检验并发冲突）"]]},"created_time":1677766347539,"last_edited_time":1677766379279,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"1c099fc5-7ce8-4ff4-a33b-85d4a00473ac":{"role":"reader","value":{"id":"1c099fc5-7ce8-4ff4-a33b-85d4a00473ac","version":294,"type":"text","properties":{"title":[["开启 -race 之后性能和内存占用都有影响，所以生产环境不建议开启（废话。。）"]]},"created_time":1677766380251,"last_edited_time":1677766433370,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"9500e573-009a-4727-bd77-1d8f230dc675":{"role":"reader","value":{"id":"9500e573-009a-4727-bd77-1d8f230dc675","version":9,"type":"code","properties":{"title":[["go test -race ./..."]],"language":[["Bash"]]},"created_time":1677766466762,"last_edited_time":1677766470337,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"b1fc957f-0112-444a-941c-4953a128b292":{"role":"reader","value":{"id":"b1fc957f-0112-444a-941c-4953a128b292","version":204,"type":"sub_sub_header","properties":{"title":[["11.3 #84: Not using test execution modes（没有使用test执行模式：并行 or shuffle ）"]]},"created_time":1677766485263,"last_edited_time":1677766655825,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"25e1958f-8fbe-4705-a749-c9d5055a6e48":{"role":"reader","value":{"id":"25e1958f-8fbe-4705-a749-c9d5055a6e48","version":82,"type":"bulleted_list","properties":{"title":[["The parallel flag 开启并行模式执行测试"]]},"content":["261965ec-5673-446b-af34-e55af690c950"],"created_time":1677766663177,"last_edited_time":1677766725882,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"facda99f-78f1-48b9-9538-695bc10c8e6f":{"role":"reader","value":{"id":"facda99f-78f1-48b9-9538-695bc10c8e6f","version":104,"type":"bulleted_list","properties":{"title":[["The -shuffle flag 开启 shuffle 模式执行测试"]]},"content":["2168ff07-0f1c-4631-8be1-5e0845466c7d","f4223d0c-99c0-44ab-b38f-09d099a91481"],"created_time":1677766672585,"last_edited_time":1677766977803,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"f0e5bc4a-1fcd-48cf-a95c-96774bfa9512":{"role":"reader","value":{"id":"f0e5bc4a-1fcd-48cf-a95c-96774bfa9512","version":97,"type":"sub_sub_header","properties":{"title":[["11.4 #85: Not using table-driven tests（使用 table-driven 的模式编写测试）"]]},"created_time":1677766995689,"last_edited_time":1677767020862,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"c99860f7-ff36-43ca-ba6d-71d6387b2da5":{"role":"reader","value":{"id":"c99860f7-ff36-43ca-ba6d-71d6387b2da5","version":18,"type":"text","properties":{"title":[["略"]]},"created_time":1677767090033,"last_edited_time":1677767094393,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"f0c02b1b-69a8-4a9e-992d-d891d242108a":{"role":"reader","value":{"id":"f0c02b1b-69a8-4a9e-992d-d891d242108a","version":12,"type":"bookmark","properties":{"link":[["https://dave.cheney.net/2019/05/07/prefer-table-driven-tests"]],"title":[["Prefer table driven tests"]]},"format":{"bookmark_icon":"https://dave.cheney.net/favicon.ico"},"created_time":1677767069306,"last_edited_time":1677767072316,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"8255a912-93f3-4348-a902-2ae62bbf3b4d":{"role":"reader","value":{"id":"8255a912-93f3-4348-a902-2ae62bbf3b4d","version":233,"type":"sub_sub_header","properties":{"title":[["11.5 #86: Sleeping in unit tests（在测试代码中包含sleep逻辑，导致出现flaky测试）"]]},"created_time":1677767114617,"last_edited_time":1677767328268,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"adba6ae7-1628-4d8e-8536-54ddc26c38f2":{"role":"reader","value":{"id":"adba6ae7-1628-4d8e-8536-54ddc26c38f2","version":770,"type":"text","properties":{"title":[["依赖等待一段时间直到特定的逻辑执行完成的方式会因为时间设置问题导致出现不稳定的测试，这种情况，可以通过指定多次重试或者使用同步的方法来避免直接调用 time.sleep 来等待。"]]},"created_time":1677767148385,"last_edited_time":1677767313172,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"e38daf6b-978a-425f-a1fe-ce0a16cff87b":{"role":"reader","value":{"id":"e38daf6b-978a-425f-a1fe-ce0a16cff87b","version":150,"type":"text","properties":{"title":[["可以使用 testify 或者 "],["Gomega",[["a","http://onsi.github.io/gomega/"]]],[" 中的 Eventually 方法"]]},"created_time":1677767456347,"last_edited_time":1677767502714,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"cce3764c-04e8-48b7-bea8-074f2dda6274":{"role":"reader","value":{"id":"cce3764c-04e8-48b7-bea8-074f2dda6274","version":11,"type":"bookmark","properties":{"link":[["https://stackoverflow.com/questions/30427013/testing-for-asynchronous-results-without-sleep-in-go/30427356#30427356"]],"title":[["Testing for asynchronous results without sleep in Go"]],"description":[["I have quite a few components in my code that have persistent go-routines that listen for events to trigger actions. Most of the time, there is no reason (outside of testing) for them to send back a"]]},"format":{"bookmark_icon":"https://cdn.sstatic.net/Sites/stackoverflow/Img/apple-touch-icon.png?v=c78bd457575a","bookmark_cover":"https://cdn.sstatic.net/Sites/stackoverflow/Img/apple-touch-icon@2.png?v=73d79a89bded"},"created_time":1677767454571,"last_edited_time":1677767457578,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"ac1f48b7-0410-4f19-982c-d1ec93fb8a3b":{"role":"reader","value":{"id":"ac1f48b7-0410-4f19-982c-d1ec93fb8a3b","version":99,"type":"sub_sub_header","properties":{"title":[["11.6 #87: Not dealing with the time API efficiently（没有正确的处理时间问题）"]]},"created_time":1677767332883,"last_edited_time":1677767524889,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"d8765efc-6576-4658-ae4b-46d86438a11d":{"role":"reader","value":{"id":"d8765efc-6576-4658-ae4b-46d86438a11d","version":1131,"type":"text","properties":{"title":[["一些函数处理逻辑和超时相关的，如果在编写测试的时候依赖实时的时间，但测试可能没有立即执行，导致代码没有按照期望的行为运行。比如下面的例子，想要过滤掉超时的事件，如果代码执行到 "],["cache.GetAll()",[["c"]]],[" 的时候耗费了一些时间，原本希望缓存2个事件，却一个也没缓存。"]]},"created_time":1677767599399,"last_edited_time":1677767859030,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"f8fa26f3-5bba-4d5e-8ead-24c19ed51f7d":{"role":"reader","value":{"id":"f8fa26f3-5bba-4d5e-8ead-24c19ed51f7d","version":9,"type":"code","properties":{"title":[["func TestCache_TrimOlderThan(t *testing.T) {\n\tevents := []Event{\n\t\t{Timestamp: time.Now().Add(-20 * time.Millisecond)},\n\t\t{Timestamp: time.Now().Add(-10 * time.Millisecond)},\n\t\t{Timestamp: time.Now().Add(10 * time.Millisecond)},\n\t}\n\tcache := &Cache{}\n\tcache.Add(events)\n\tcache.TrimOlderThan(15 * time.Millisecond)\n\tgot := cache.GetAll()\n\texpected := 2\n\tif len(got) != expected {\n\t\tt.Fatalf(\"expected %d, got %d\", expected, len(got))\n\t}\n}"]],"language":[["Go"]]},"created_time":1677767568764,"last_edited_time":1677767573543,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"e79cc7c2-f705-4d5e-897a-2c468659cb24":{"role":"reader","value":{"id":"e79cc7c2-f705-4d5e-897a-2c468659cb24","version":244,"type":"text","properties":{"title":[["这类测试可以使用确切的时间来代替实时获取时间"]]},"created_time":1677767578503,"last_edited_time":1677767919182,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"549f1688-5f62-4c63-b029-235a01196960":{"role":"reader","value":{"id":"549f1688-5f62-4c63-b029-235a01196960","version":7,"type":"code","properties":{"title":[["func TestCache_TrimOlderThan(t *testing.T) {\n\tevents := []Event{\n\t\t{Timestamp: parseTime(t, \"2020-01-01T12:00:00.04Z\")},\n\t\t{Timestamp: parseTime(t, \"2020-01-01T12:00:00.05Z\")},\n\t\t{Timestamp: parseTime(t, \"2020-01-01T12:00:00.06Z\")},\n\t}\n\tcache := &Cache{now: func() time.Time {\n\t\treturn parseTime(t, \"2020-01-01T12:00:00.06Z\")\n\t}}\n\tcache.Add(events)\n\tcache.TrimOlderThan(15 * time.Millisecond)\n\t// ...\n}"]],"language":[["Go"]]},"created_time":1677767597148,"last_edited_time":1677767597452,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"3f92e134-c58d-4101-be2d-bb7a042ae323":{"role":"reader","value":{"id":"3f92e134-c58d-4101-be2d-bb7a042ae323","version":174,"type":"sub_sub_header","properties":{"title":[["11.7 #88: Not using testing utility packages（没有使用内置的工具包，比如httptest、iotest）"]]},"created_time":1677767939377,"last_edited_time":1677768003828,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"9a094856-c66e-46ef-8b42-c1ad28a3a326":{"role":"reader","value":{"id":"9a094856-c66e-46ef-8b42-c1ad28a3a326","version":320,"type":"text","properties":{"title":[["略，此处就不讲解包的使用了，知道在mock http 和 io 操作的时候可以使用这2个内置的工具包"]]},"created_time":1677768084214,"last_edited_time":1677768120247,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"062c653a-7cf2-4566-adae-21c3284b6d10":{"role":"reader","value":{"id":"062c653a-7cf2-4566-adae-21c3284b6d10","version":11,"type":"bookmark","properties":{"link":[["https://pkg.go.dev/net/http/httptest"]],"title":[["httptest package - net/http/httptest - Go Packages"]],"description":[["Package httptest provides utilities for HTTP testing."]]},"format":{"bookmark_icon":"https://pkg.go.dev/static/shared/icon/favicon.ico"},"created_time":1677768035940,"last_edited_time":1677768038979,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"94fabb0b-2f87-4667-bd0c-f9a1335b8cfd":{"role":"reader","value":{"id":"94fabb0b-2f87-4667-bd0c-f9a1335b8cfd","version":12,"type":"bookmark","properties":{"link":[["https://pkg.go.dev/testing/iotest"]],"title":[["iotest package - testing/iotest - Go Packages"]],"description":[["Package iotest implements Readers and Writers useful mainly for testing."]]},"format":{"bookmark_icon":"https://pkg.go.dev/static/shared/icon/favicon.ico"},"created_time":1677768082363,"last_edited_time":1677768085372,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"01c16695-373d-4689-9829-1b555d88b5a6":{"role":"reader","value":{"id":"01c16695-373d-4689-9829-1b555d88b5a6","version":4,"type":"sub_sub_header","properties":{"title":[["11.8 #89: Writing inaccurate benchmarks（编写了不正确的BencMark）"]]},"created_time":1677755226797,"last_edited_time":1677768078280,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"edb2e964-834f-455c-a5da-a681964d3837":{"role":"reader","value":{"id":"edb2e964-834f-455c-a5da-a681964d3837","version":9,"type":"text","properties":{"title":[["Not resetting or pausing the timer",[["b"]]]]},"created_time":1677757715462,"last_edited_time":1677757719478,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"07c9aecc-d54d-4985-9cc4-b1e405c910c7":{"role":"reader","value":{"id":"07c9aecc-d54d-4985-9cc4-b1e405c910c7","version":396,"type":"text","properties":{"title":[["在具体测量某一段函数性能时，一些SetUp操作可能比较耗时会影响测量结果。调用 "],["ResetTimer",[["c"]]],[" 函数可以重置一些Bench数据。"]]},"created_time":1677757409264,"last_edited_time":1677757499980,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"12bebafb-235b-4674-9df6-47d0b23513a2":{"role":"reader","value":{"id":"12bebafb-235b-4674-9df6-47d0b23513a2","version":10,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hblqycs54hj31e80b6jwa.jpg"]]},"format":{"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hblqycs54hj31e80b6jwa.jpg"},"created_time":1677757071856,"last_edited_time":1677757075519,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"46c07bae-be17-4303-a964-f97e63e11629":{"role":"reader","value":{"id":"46c07bae-be17-4303-a964-f97e63e11629","version":231,"type":"text","properties":{"title":[["每次迭代都会有一些耗时动作，可以调用 "],["b.StopTimer()",[["c"]]],[" 和 "],["b.StartTimer()",[["c"]]],[" 暂停和启动BenchMark计量"]]},"created_time":1677757634567,"last_edited_time":1677757723668,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"627c31e9-b71f-454f-ae78-baaf59be7610":{"role":"reader","value":{"id":"627c31e9-b71f-454f-ae78-baaf59be7610","version":10,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hblr850zbgj31eo0cutdw.jpg"]]},"format":{"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hblr850zbgj31eo0cutdw.jpg"},"created_time":1677757633226,"last_edited_time":1677757639868,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"a94784ba-c29c-4f02-9172-8d5d5983125b":{"role":"reader","value":{"id":"a94784ba-c29c-4f02-9172-8d5d5983125b","version":7,"type":"text","properties":{"title":[["Making wrong assumptions about micro-benchmarks",[["b"]]]]},"created_time":1677757669667,"last_edited_time":1677757735425,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"20049e49-6daf-492c-a3d8-f4efa351cac1":{"role":"reader","value":{"id":"20049e49-6daf-492c-a3d8-f4efa351cac1","version":286,"type":"text","properties":{"title":[["在一些做一些 "],["micro-benchmark ",[["b"]]],["的时候，如果不多次进行基准测试很容易就得出错误的结论"]]},"created_time":1677759040073,"last_edited_time":1677759104077,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"fe0a1f1a-403d-44db-beae-e99e2ab82ab3":{"role":"reader","value":{"id":"fe0a1f1a-403d-44db-beae-e99e2ab82ab3","version":7,"type":"code","properties":{"title":[["func BenchmarkAtomicStoreInt32(b *testing.B) {\n\tvar v int32\n\tfor i := 0; i < b.N; i++ {\n\t\tatomic.StoreInt32(&v, 1)\n\t}\n}\n\nfunc BenchmarkAtomicStoreInt64(b *testing.B) {\n\tvar v int64\n\tfor i := 0; i < b.N; i++ {\n\t\tatomic.StoreInt64(&v, 1)\n\t}\n}"]],"language":[["Go"]]},"created_time":1677758910378,"last_edited_time":1677758910784,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"71b567f9-ae6f-401d-b495-08d5e24da45e":{"role":"reader","value":{"id":"71b567f9-ae6f-401d-b495-08d5e24da45e","version":97,"type":"text","properties":{"title":[["下图是执行2次BenchMark的结果"]]},"created_time":1677759112279,"last_edited_time":1677759135128,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"4cd81bb0-70de-43d9-9f26-ba622d87c876":{"role":"reader","value":{"id":"4cd81bb0-70de-43d9-9f26-ba622d87c876","version":10,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hblrwgav5vj317k0gun42.jpg"]]},"format":{"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hblrwgav5vj317k0gun42.jpg"},"created_time":1677759111668,"last_edited_time":1677759114632,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"2794e264-74a5-4ddc-a60d-966f4759a13e":{"role":"reader","value":{"id":"2794e264-74a5-4ddc-a60d-966f4759a13e","version":312,"type":"text","properties":{"title":[["解决方案：对于 "],["micro-benchmark 需要",[["b"]]],["进行多次 BenchMark，可以利用 "],["benchstat",[["c"]]],[" 统计BenchMark的结果进行均值计算。"]]},"created_time":1677759135978,"last_edited_time":1677759273737,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"05189425-d70a-44eb-9879-3306bbac3a35":{"role":"reader","value":{"id":"05189425-d70a-44eb-9879-3306bbac3a35","version":10,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbls3gwljrj317u0iitgl.jpg"]]},"format":{"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbls3gwljrj317u0iitgl.jpg"},"created_time":1677759441199,"last_edited_time":1677759443240,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"370d04b8-b5b2-4a04-a6fb-9d104da5d9dd":{"role":"reader","value":{"id":"370d04b8-b5b2-4a04-a6fb-9d104da5d9dd","version":8,"type":"text","properties":{"title":[["Not being careful about compiler optimizations",[["b"]]]]},"created_time":1677759453570,"last_edited_time":1677759456620,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"86e3641d-395b-4045-8060-ff5a493f70fc":{"role":"reader","value":{"id":"86e3641d-395b-4045-8060-ff5a493f70fc","version":293,"type":"text","properties":{"title":[["golang的内联优化会导致我们的测试函数被优化，执行结果不符合我们的预期（效果更好）"]]},"created_time":1677759970540,"last_edited_time":1677760000839,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"a502b2c5-d0f4-49a4-827d-5aa64c073a20":{"role":"reader","value":{"id":"a502b2c5-d0f4-49a4-827d-5aa64c073a20","version":16,"type":"external_object_instance","format":{"uri":"https://github.com/golang/go/issues/14813","stale":false,"bot_id":"efde49d0-e017-4d2f-a301-c28f0da86161","domain":"github.com","attributes":[{"id":"title","name":"Title","type":"inline","format":{"type":"title","section":"title"},"values":["cmd/compile: SSA compiler removes code in benchmarks"]},{"id":"state","name":"State","type":"relation","values":["github:issue_state/closed"]},{"id":"number","name":"Issue Number","type":"inline","values":["#14813"]},{"id":"created_at","name":"Created At","type":"inline","format":{"type":"created_time"},"values":[{"type":"datetime","time_zone":"UTC","start_date":"2016-03-14","start_time":"08:08"}]},{"id":"updated_at","name":"Updated At","type":"inline","format":{"type":"last_edited_time"},"values":[{"type":"datetime","time_zone":"UTC","start_date":"2019-10-25","start_time":"17:13"}]},{"id":"user","name":"Related Github Creator","type":"relation","values":["https://github.com/ainar-g"]},{"id":"user_as_people","name":"Creator","type":"person","values":["https://github.com/ainar-g"]},{"id":"closed_at","name":"Closed At","type":"inline","values":[{"type":"datetime","time_zone":"UTC","start_date":"2016-03-14","start_time":"08:17"}]},{"id":"description","name":"Description","type":"inline","values":["Go version: \\`go version devel +2dcbbbd Mon Mar 14 05:13:47 2016 +0000 linux/amd64\\` Go env: \\`\\`\\` GOARCH=\"amd64\" GOHOSTARCH=\"amd64\" GOHOSTOS=\"linux\" GOOS=\"linux\" \\`\\`\\` This code is a simple benchmark of Hamming weight algorithms: http://play.golang.org/p/kOid3lX9Yz In Go 1.6 running \\`go test popcnt\\_test.go -bench .\\` gives the result: \\`\\`\\` testing: warning: no tests to run PASS BenchmarkPopcnt-4 50000000 27.1 ns/op BenchmarkPopcnt2-4 1000000000 2.90 ns/op ok command-line-arguments 4.567s \\`\\`\\` But on tip with SSA turned on it's \\`\\`\\` testing: warning: no tests to run BenchmarkPopcnt-4 100000000 24.0 ns/op BenchmarkPopcnt2-4 2000000000 0.41 ns/op PASS ok command-line-arguments 3.286s \\`\\`\\` Running with \\`-gcflags \"-S\"\\` confirms that the tip version completely removes the call to popcnt2\\. If I add \\`//go:noinline\\` before popcnt2 definition, it works fine (although slower than 1.6 because it doesn't inline): \\`\\`\\` testing: warning: no tests to run BenchmarkPopcnt-4 50000000 22.9 ns/op BenchmarkPopcnt2-4 300000000 4.42 ns/op PASS ok command-line-arguments 2.946s \\`\\`\\` Same goes for running with \\`-gcflags \"-ssa=0\"\\`, the call isn't removed."]}],"original_url":"https://github.com/golang/go/issues/14813","external_object_id":"57ab4e41-185d-444b-87f9-8501366d2e98","related_external_object_uris_to_instance_ids":{"github:issue_state/closed":"934db1b0-4c5f-42f0-a0b2-92e681e04ca4","https://github.com/ainar-g":"697048b9-38fd-4273-ab5a-6da75e432a72"}},"created_time":1677759924126,"last_edited_time":1677888664514,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"bot","last_edited_by_id":"efde49d0-e017-4d2f-a301-c28f0da86161","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"9f62f9c4-b271-42e2-ae4f-a263d1b8b03a":{"role":"reader","value":{"id":"9f62f9c4-b271-42e2-ae4f-a263d1b8b03a","version":12,"type":"bookmark","properties":{"link":[["https://dave.cheney.net/2013/06/30/how-to-write-benchmarks-in-go"]],"title":[["How to write benchmarks in Go"]]},"format":{"bookmark_icon":"https://dave.cheney.net/favicon.ico"},"created_time":1677759966479,"last_edited_time":1677759969487,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"324e446f-532f-4d5f-b9da-f5570808bfe6":{"role":"reader","value":{"id":"324e446f-532f-4d5f-b9da-f5570808bfe6","version":10,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hblshj22g8j31ci0pg7cf.jpg"]]},"format":{"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hblshj22g8j31ci0pg7cf.jpg"},"created_time":1677760251930,"last_edited_time":1677760254965,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"58dcb767-08ae-456d-8ec6-2e0a780cbdd1":{"role":"reader","value":{"id":"58dcb767-08ae-456d-8ec6-2e0a780cbdd1","version":316,"type":"callout","properties":{"title":[["给"],["go test",[["c"]]],["增加"],["-gcflags=\"-m\"",[["c"]]],["参数，"],["-m",[["c"]]],["表示打印编译器做出的优化决定。可以看到是否做了内联优化，如果有"],[" inlining call to xxx 函数",[["c"]]],[" 的字样就是做了优化"]]},"format":{"page_icon":"💡","block_color":"gray_background"},"created_time":1677760289450,"last_edited_time":1677760351344,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"431e2f71-8aa3-4fd3-bf50-fa1b5518b116":{"role":"reader","value":{"id":"431e2f71-8aa3-4fd3-bf50-fa1b5518b116","version":11,"type":"bulleted_list","properties":{"title":[["执行"],["go test",[["c"]]],["的时候，增加"],["-gcfloags=\"-l\"",[["c"]]],["参数，"],["-l",[["c"]]],["表示禁用编译器的内联优化。"]]},"created_time":1677760380722,"last_edited_time":1677760388899,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"cf7bca78-d407-4c2d-899e-b3aeeb1cb3f4":{"role":"reader","value":{"id":"cf7bca78-d407-4c2d-899e-b3aeeb1cb3f4","version":20,"type":"bulleted_list","properties":{"title":[["使用"],["//go:noinline ",[["c"]]],["编译器指令(compiler directive)，编译器在编译时会识别到这个指令，不做内联优化。"]]},"content":["010df427-32d2-4c01-bbcc-e9e2f0b55d2d"],"created_time":1677760401496,"last_edited_time":1677760424540,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"7921d39c-d036-42fb-a75c-8da1646cc1be":{"role":"reader","value":{"id":"7921d39c-d036-42fb-a75c-8da1646cc1be","version":10,"type":"text","properties":{"title":[["Being fooled by the observer effect",[["b"]]]]},"created_time":1677760413710,"last_edited_time":1677760428465,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"a6337376-2852-41b3-b3ba-2c936b3b134a":{"role":"reader","value":{"id":"a6337376-2852-41b3-b3ba-2c936b3b134a","version":8,"type":"text","properties":{"title":[["在物理学中，观测者效应是观测行为对被观测系统的扰动。这种影响也可以在基准测试中看到，并可能导致对结果的错误假设。"]]},"created_time":1677760428744,"last_edited_time":1677762139769,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"7a08a2b9-bf7d-46a4-bf7f-bdb430fafdd7":{"role":"reader","value":{"id":"7a08a2b9-bf7d-46a4-bf7f-bdb430fafdd7","version":42,"type":"code","properties":{"title":[["// 我们想实现一个接收int64元素矩阵的函数。这个矩阵有固定数量的512列，我们想计算前八列的总和\nfunc calculateSum512(s [][512]int64) int64 {\n\tvar sum int64\n\tfor i := 0; i < len(s); i++ {\n\t\tfor j := 0; j < 8; j++ {\n\t\t\tsum += s[i][j]\n\t\t}\n\t}\n\treturn sum\n}\n// 为了优化，我们还想确定更改列数是否有影响，因此我们还实现了第二个包含513列的函数。\nfunc calculateSum513(s [][513]int64) int64 {\n\tvar sum int64\n\tfor i := 0; i < len(s); i++ {\n\t\tfor j := 0; j < 8; j++ {\n\t\t\tsum += s[i][j]\n\t\t}\n\t}\n\treturn sum\n}"]],"language":[["Go"]]},"created_time":1677762007596,"last_edited_time":1677762124460,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"2eb92afc-c6c9-4788-a89b-c33a8059f80f":{"role":"reader","value":{"id":"2eb92afc-c6c9-4788-a89b-c33a8059f80f","version":375,"type":"text","properties":{"title":[["BenchMark后的结果很出乎意料，513*513矩阵的计算更加高效，原因和CPU Cache命中有很高的关系。"]]},"created_time":1677763140340,"last_edited_time":1677763215214,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"d9c2fabe-79fe-4ca1-9190-9f78713d8e46":{"role":"reader","value":{"id":"d9c2fabe-79fe-4ca1-9190-9f78713d8e46","version":519,"type":"text","properties":{"title":[["因为BenchMark事先创建了一个矩阵并重复计算，再加上缓存命中的影响更加加重了测试差距，解决方案就是每次迭代都创建新的矩阵",[["b"]]]]},"created_time":1677763236455,"last_edited_time":1677844995626,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"184963b1-116a-4ee6-b602-a503001fd3a7":{"role":"reader","value":{"id":"184963b1-116a-4ee6-b602-a503001fd3a7","version":13,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hblu0ivr0oj31dc0tqtjc.jpg"]]},"format":{"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hblu0ivr0oj31dc0tqtjc.jpg"},"created_time":1677763423457,"last_edited_time":1677763453793,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"3f8a1d9c-df1e-41e8-8c51-98e4c22cd7c8":{"role":"reader","value":{"id":"3f8a1d9c-df1e-41e8-8c51-98e4c22cd7c8","version":175,"type":"text","properties":{"title":[["关于 513*513矩阵的计算更加高效 的原理可以参考 "],["#91 Not understanding CPU caches",[["b"]]]]},"created_time":1677763216620,"last_edited_time":1677844666459,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"70d29465-bf72-4dd1-b4fd-5a8d0428788b":{"role":"reader","value":{"id":"70d29465-bf72-4dd1-b4fd-5a8d0428788b","version":10,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hblu30b7w2j31580k0grq.jpg"]]},"format":{"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hblu30b7w2j31580k0grq.jpg"},"created_time":1677763565753,"last_edited_time":1677763567991,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"76f06611-7573-4d22-8199-e4f63998bf09":{"role":"reader","value":{"id":"76f06611-7573-4d22-8199-e4f63998bf09","version":134,"type":"sub_sub_header","properties":{"title":[["11.9 #90: Not exploring all the Go testing features（没有利用 Go testing的特性）"]]},"created_time":1677763574391,"last_edited_time":1677764231425,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"0c142a31-4082-444d-8066-19c3375d698a":{"role":"reader","value":{"id":"0c142a31-4082-444d-8066-19c3375d698a","version":79,"type":"bulleted_list","properties":{"title":[["使用 "],["coverprofile",[["c"]]],[" flag 查看代码覆盖率"]]},"content":["dc6458a6-89c5-410a-af4b-3e0f56450ecf"],"created_time":1677764298325,"last_edited_time":1677764357871,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"678b750d-f082-4b28-a37e-c22518645f15":{"role":"reader","value":{"id":"678b750d-f082-4b28-a37e-c22518645f15","version":193,"type":"bulleted_list","properties":{"title":[["把测试文件可以放在"],["_test",[["c"]]],["包中, 测试文件可以放在不同的包中"]]},"content":["c948a666-4c3a-4c1a-8e9d-367833b111bf","d7039932-cb0c-4e6a-bde1-6d5c2d4f5ccc"],"created_time":1677764419829,"last_edited_time":1677764700245,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"f10a3d28-71ca-42c6-90d9-07435feb699c":{"role":"reader","value":{"id":"f10a3d28-71ca-42c6-90d9-07435feb699c","version":94,"type":"bulleted_list","properties":{"title":[["Setup and teardown 搭建和卸载环境"]]},"content":["1c10a040-7f54-4a6f-9b72-bfa11b8ec8fb","b9afc4da-dd29-4872-a0f5-29d6233e7b1f"],"created_time":1677764703723,"last_edited_time":1677842945817,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"f468d2d2-1276-4e89-86a2-e859709b53f8":{"role":"reader","value":{"id":"f468d2d2-1276-4e89-86a2-e859709b53f8","version":13,"type":"sub_header","properties":{"title":[["Optimizations"]]},"created_time":1677842929023,"last_edited_time":1677842950014,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"30b00cf6-25b5-478f-b673-a57cc8c78750":{"role":"reader","value":{"id":"30b00cf6-25b5-478f-b673-a57cc8c78750","version":97,"type":"sub_sub_header","properties":{"title":[["12.1 #91: Not understanding CPU caches（利用缓存加速代码执行速度）"]]},"created_time":1677842953351,"last_edited_time":1677843382002,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"d2579c23-3031-4256-a718-a5a977d25701":{"role":"reader","value":{"id":"d2579c23-3031-4256-a718-a5a977d25701","version":203,"type":"text","properties":{"title":[["关于CPU Cache部分不属于GO专属的知识，这里就不细讲了"]]},"created_time":1677843406758,"last_edited_time":1677843436437,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"8db18d1b-4045-415d-a05e-23841d8135ae":{"role":"reader","value":{"id":"8db18d1b-4045-415d-a05e-23841d8135ae","version":10,"type":"bookmark","properties":{"link":[["https://zhuanlan.zhihu.com/p/31875174"]],"title":[["细说Cache-L1/L2/L3/TLB"]],"description":[["本来打算今天把Cache写透的，结果今天陪娃出去玩了两次，先虎头蛇尾了，放出来，有时间再补。补了我会通知的~~。大家别忘了关注我的专栏。 概述cache是一种又小又快的存储器。它存在的意义是弥合Memory与CPU之间的…"]]},"format":{"bookmark_icon":"https://static.zhihu.com/heifetz/assets/apple-touch-icon-152.81060cab.png","bookmark_cover":"https://pic1.zhimg.com/v2-b044ecf48648f83743602ddf9ae4a7ac_r.jpg?source=172ae18b"},"created_time":1677843359168,"last_edited_time":1677843359176,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"bf34ed9e-0ce9-4bd4-8f79-8b0333f96eb3":{"role":"reader","value":{"id":"bf34ed9e-0ce9-4bd4-8f79-8b0333f96eb3","version":12,"type":"callout","properties":{"title":[["cache line 是固定大小的连续内存段，通常为64字节（8个int64变量）。"]]},"format":{"page_icon":"💡","block_color":"gray_background"},"created_time":1677843665654,"last_edited_time":1677843673840,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"5887a6f5-7336-4f78-a90c-fa06a1dece39":{"role":"reader","value":{"id":"5887a6f5-7336-4f78-a90c-fa06a1dece39","version":10,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbmwsvsyz0j31py0ryk4x.jpg"]]},"format":{"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbmwsvsyz0j31py0ryk4x.jpg"},"created_time":1677843951843,"last_edited_time":1677843959145,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"e06adf5c-4a18-448a-b555-58af9361e565":{"role":"reader","value":{"id":"e06adf5c-4a18-448a-b555-58af9361e565","version":10,"type":"text","properties":{"title":[["Slice of structs vs. struct of slices",[["b"]]]]},"created_time":1677844364464,"last_edited_time":1677844387402,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"13a2819c-c505-42e2-a6f0-76baf680f14d":{"role":"reader","value":{"id":"13a2819c-c505-42e2-a6f0-76baf680f14d","version":10,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbmwzxix54j31so0ucjz7.jpg"]]},"format":{"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbmwzxix54j31so0ucjz7.jpg"},"created_time":1677844353603,"last_edited_time":1677844355872,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"69ba59eb-0736-4d96-8dae-bd4ff106afb4":{"role":"reader","value":{"id":"69ba59eb-0736-4d96-8dae-bd4ff106afb4","version":110,"type":"text","properties":{"title":[["Cache placement policy（关于#89出现问题的解释）",[["b"]]]]},"created_time":1677844406601,"last_edited_time":1677845014144,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"736571b5-9ea4-4a7a-ae53-2641434d60f7":{"role":"reader","value":{"id":"736571b5-9ea4-4a7a-ae53-2641434d60f7","version":12,"type":"code","properties":{"title":[["// 我们想实现一个接收int64元素矩阵的函数。这个矩阵有固定数量的512列，我们想计算前八列的总和\nfunc calculateSum512(s [][512]int64) int64 {\n\tvar sum int64\n\tfor i := 0; i < len(s); i++ {\n\t\tfor j := 0; j < 8; j++ {\n\t\t\tsum += s[i][j]\n\t\t}\n\t}\n\treturn sum\n}\n// 为了优化，我们还想确定更改列数是否有影响，因此我们还实现了第二个包含513列的函数。\nfunc calculateSum513(s [][513]int64) int64 {\n\tvar sum int64\n\tfor i := 0; i < len(s); i++ {\n\t\tfor j := 0; j < 8; j++ {\n\t\t\tsum += s[i][j]\n\t\t}\n\t}\n\treturn sum\n}"]],"language":[["Go"]]},"created_time":1677844924816,"last_edited_time":1677844938800,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"c3872ea3-9c1a-4809-8808-1354fb352bc5":{"role":"reader","value":{"id":"c3872ea3-9c1a-4809-8808-1354fb352bc5","version":15,"type":"bookmark","properties":{"link":[["https://zhuanlan.zhihu.com/p/31859105"]],"title":[["Cache是怎么组织和工作的？"]],"description":[["我的习惯是想到哪里，写到哪里，只管挖坑不管填，近期更是工作繁忙，没有更新Cache部分的内容，实在抱歉。承蒙很多朋友催稿，由此可见Cache的关注度还是不错的，今天带来Cache的第二篇内容。我们经常能够看到2-way…"]]},"format":{"bookmark_icon":"https://static.zhihu.com/heifetz/assets/apple-touch-icon-152.81060cab.png","bookmark_cover":"https://pica.zhimg.com/v2-864713c7a8ec958b0293e9feb3238e66_720w.jpg?source=172ae18b"},"created_time":1677856348135,"last_edited_time":1677856352147,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"9a83c73f-8ad3-4c35-be7e-4b95119a1761":{"role":"reader","value":{"id":"9a83c73f-8ad3-4c35-be7e-4b95119a1761","version":10,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbn2inqfv5j31aw0z2gz1.jpg"]]},"format":{"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbn2inqfv5j31aw0z2gz1.jpg"},"created_time":1677855813932,"last_edited_time":1677855816394,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"67fadee9-9644-4491-8975-d6d2c4ab2077":{"role":"reader","value":{"id":"67fadee9-9644-4491-8975-d6d2c4ab2077","version":10,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbn2n9bbttj31g00zi7jf.jpg"]]},"format":{"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbn2n9bbttj31g00zi7jf.jpg"},"created_time":1677856085303,"last_edited_time":1677856087834,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"68c43586-55c5-4a5f-8ec3-541af7c441da":{"role":"reader","value":{"id":"68c43586-55c5-4a5f-8ec3-541af7c441da","version":10,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbn2qwfee0j31he0z2e0o.jpg"]]},"format":{"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbn2qwfee0j31he0z2e0o.jpg"},"created_time":1677856286109,"last_edited_time":1677856288377,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"955b6f88-8345-4e9a-a4f4-3ba6a458b132":{"role":"reader","value":{"id":"955b6f88-8345-4e9a-a4f4-3ba6a458b132","version":718,"type":"text","properties":{"title":[["现在回到真实场景，L1D的大小为32KB，一行Cache line大小为64byte，这样就有512(32KB/64byte)行Cache line，按照8路组相连的规则，会被分为64(512行/8)组。"]]},"created_time":1677856389988,"last_edited_time":1677856647491,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"1a7b3b4e-8450-4694-a211-5abcb93e2d74":{"role":"reader","value":{"id":"1a7b3b4e-8450-4694-a211-5abcb93e2d74","version":555,"type":"text","properties":{"title":[["1000*512的int64矩阵内存也按照Cache Line大小划分，因为一行Cache line大小为64byte，一行可以包含8(64byte/8)个元素，512个元素需要64(512/8)行Cache Line大小的内存。"]]},"created_time":1677856675436,"last_edited_time":1677856848717,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"9aa9a7e6-3aba-45b5-a115-9b82fd3bdfb4":{"role":"reader","value":{"id":"9aa9a7e6-3aba-45b5-a115-9b82fd3bdfb4","version":723,"type":"text","properties":{"title":[["可以算出矩阵一行的内存块正好被分到L1D的64个组中，这样迭代完第一行之后，后续的行数都会分别被缓存到对应的组里，当迭代次数超过8次后就会出现缓存冲突的问题，然后就会一直导致Cache Miss。"]]},"created_time":1677856849034,"last_edited_time":1677856986987,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"cd2fe84a-f4f8-4b8b-8c89-ab9d4a13d19b":{"role":"reader","value":{"id":"cd2fe84a-f4f8-4b8b-8c89-ab9d4a13d19b","version":195,"type":"sub_sub_header","properties":{"title":[["12.2 #92: Writing concurrent code that leads to false sharing（编写并发代码的时候，注意避免伪共享）"]]},"created_time":1677857026294,"last_edited_time":1677890505229,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"bddd8685-c37b-4d0e-87c3-e91408a7471b":{"role":"reader","value":{"id":"bddd8685-c37b-4d0e-87c3-e91408a7471b","version":1488,"type":"text","properties":{"title":[["创建2个协程，并发对一个结构体的内的2个成员写入，看起来都是在更改独立的内存应该不会出现同步写，但是因为Result1的2个成员会分配到一行Cache Line中。"]]},"created_time":1677890554475,"last_edited_time":1677891117371,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"5b291621-020e-4960-b861-a731941b960a":{"role":"reader","value":{"id":"5b291621-020e-4960-b861-a731941b960a","version":5,"type":"text","properties":{"title":[["假设每个协程都在独立的CPU上运算，L1D会加载同一行内存到Cache Line中，CPU运算时候也是先写回到Cache Line中，所以每个CPU在运算时候为了保证内存一致性，在写入时是使用同步写的模式"]]},"created_time":1677891117368,"last_edited_time":1677891117371,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"2fcefb23-8f89-4602-9034-46027943a47f":{"role":"reader","value":{"id":"2fcefb23-8f89-4602-9034-46027943a47f","version":7,"type":"code","properties":{"title":[["type Input struct {\n\ta int64\n\tb int64\n}\n\ntype Result1 struct {\n\tsumA int64\n\tsumB int64\n}\n\nfunc count1(inputs []Input) Result1 {\n\twg := sync.WaitGroup{}\n\twg.Add(2)\n\n\tresult := Result1{}\n\n\tgo func() {\n\t\tfor i := 0; i < len(inputs); i++ {\n\t\t\tresult.sumA += inputs[i].a\n\t\t}\n\t\twg.Done()\n\t}()\n\n\tgo func() {\n\t\tfor i := 0; i < len(inputs); i++ {\n\t\t\tresult.sumB += inputs[i].b\n\t\t}\n\t\twg.Done()\n\t}()\n\n\twg.Wait()\n\treturn result\n}"]],"language":[["Go"]]},"created_time":1677890552417,"last_edited_time":1677890552649,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"30b81503-981a-4c53-b56b-0bfb8d7df329":{"role":"reader","value":{"id":"30b81503-981a-4c53-b56b-0bfb8d7df329","version":10,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbnjogl30yj31ei0o4dpi.jpg"]]},"format":{"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbnjogl30yj31ei0o4dpi.jpg"},"created_time":1677891435583,"last_edited_time":1677891437938,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"42d7c20b-2a74-4bd5-a093-d456433e8bef":{"role":"reader","value":{"id":"42d7c20b-2a74-4bd5-a093-d456433e8bef","version":261,"type":"text","properties":{"title":[["解决方案：填充结构体让2个成员处于不同的Cache Line中，计算性能明显提升"]]},"created_time":1677891445055,"last_edited_time":1677891538902,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"b26e4d75-e063-46e5-9261-96d6230f9740":{"role":"reader","value":{"id":"b26e4d75-e063-46e5-9261-96d6230f9740","version":10,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbnjptfbquj31fq0l8wku.jpg"]]},"format":{"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbnjptfbquj31fq0l8wku.jpg"},"created_time":1677891514139,"last_edited_time":1677891516362,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"49e1a8df-ab85-47d5-95cf-b59f0695a502":{"role":"reader","value":{"id":"49e1a8df-ab85-47d5-95cf-b59f0695a502","version":175,"type":"sub_sub_header","properties":{"title":[["12.3 #93: Not taking into account instruction-level parallelism（没有考虑到CPU指令并行优化）"]]},"created_time":1677857058328,"last_edited_time":1677893417832,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"eedec653-1ae7-4242-a15b-fc6809a93c81":{"role":"reader","value":{"id":"eedec653-1ae7-4242-a15b-fc6809a93c81","version":561,"type":"text","properties":{"title":[["本节讲解了CPU指令优化和分支预测的知识，通过增加指令的并发数和缩短指令步数来提升执行效率，感兴趣的可以自行查阅书籍，这里就不做记录。"]]},"created_time":1677891547017,"last_edited_time":1677893316323,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"81d7bd0a-f7bd-4ffa-aa5c-e9cbe2f6c9a7":{"role":"reader","value":{"id":"81d7bd0a-f7bd-4ffa-aa5c-e9cbe2f6c9a7","version":598,"type":"callout","properties":{"title":[["关于这部分涉及到计算机体系结构，感兴趣的自行查阅相关知识，个人认为如果考虑到这层优化程度可能就不一定要用GO来实现功能了"]]},"format":{"page_icon":"💡","block_color":"gray_background"},"created_time":1677893424955,"last_edited_time":1677893490718,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"21442a22-f277-4ae7-a6b0-006c49ccf421":{"role":"reader","value":{"id":"21442a22-f277-4ae7-a6b0-006c49ccf421","version":63,"type":"sub_sub_header","properties":{"title":[["12.4 #94: Not being aware of data alignment（没有数据对齐的意识）"]]},"created_time":1677857080876,"last_edited_time":1677893505782,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"ba447b4e-e85f-449c-a731-a8248907f86b":{"role":"reader","value":{"id":"ba447b4e-e85f-449c-a731-a8248907f86b","version":12,"type":"bookmark","properties":{"link":[["https://geektutu.com/post/hpg-struct-alignment.html"]],"title":[["Go struct 内存对齐 | Go 语言高性能编程 | 极客兔兔"]],"description":[["Go 语言/golang 高性能编程，Go 语言进阶教程，Go 语言高性能编程(high performance go)。本文介绍了结构体(struct)占用的内存空间如何计算，为什么要字节对齐/内存对齐，Go 语言中的大小和对齐保证(size and alignment guarantees)，字节对齐和安全访问(原子访问)的关系，以及如果利用内存对齐的规律减小 struct 内存占用。"]]},"format":{"bookmark_icon":"https://geektutu.com/img/icon.png"},"created_time":1677894393449,"last_edited_time":1677894396481,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"25145895-42b0-473f-a745-d095fa2098e9":{"role":"reader","value":{"id":"25145895-42b0-473f-a745-d095fa2098e9","version":383,"type":"text","properties":{"title":[["GO对以下类型有默认的数据对齐行为（如下类型值的地址等于值大小的倍数）："]]},"created_time":1677893507040,"last_edited_time":1677894323738,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"f7742b4d-4f1d-4ca7-b9b2-b0105ecf0bf5":{"role":"reader","value":{"id":"f7742b4d-4f1d-4ca7-b9b2-b0105ecf0bf5","version":5,"type":"bulleted_list","properties":{"title":[["byte, uint8, int8: 1 byte"]]},"created_time":1677894241861,"last_edited_time":1677894246249,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"01ecb2a6-20de-4f99-9933-a613918a3288":{"role":"reader","value":{"id":"01ecb2a6-20de-4f99-9933-a613918a3288","version":7,"type":"bulleted_list","properties":{"title":[["uint16, int16: 2 bytes"]]},"created_time":1677894246849,"last_edited_time":1677894254141,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"5380d83d-6a2f-40cf-80d4-bbd742ed605d":{"role":"reader","value":{"id":"5380d83d-6a2f-40cf-80d4-bbd742ed605d","version":9,"type":"bulleted_list","properties":{"title":[[" uint32, int32, float32: 4 bytes"]]},"created_time":1677894257529,"last_edited_time":1677894264439,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"b937757e-ff0f-4767-aa84-0230aa346b68":{"role":"reader","value":{"id":"b937757e-ff0f-4767-aa84-0230aa346b68","version":7,"type":"bulleted_list","properties":{"title":[["uint64, int64, float64, complex64: 8 bytes"]]},"created_time":1677894263088,"last_edited_time":1677894263583,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"8952ea0f-9098-4f61-8d59-04d1efb54276":{"role":"reader","value":{"id":"8952ea0f-9098-4f61-8d59-04d1efb54276","version":7,"type":"bulleted_list","properties":{"title":[["complex128: 16 bytes"]]},"created_time":1677894268825,"last_edited_time":1677894269087,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"7ebad180-a966-455b-b651-e6cbbd2f0909":{"role":"reader","value":{"id":"7ebad180-a966-455b-b651-e6cbbd2f0909","version":12,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbnl717wmhj316w0nutes.jpg"]]},"format":{"block_width":624,"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbnl717wmhj316w0nutes.jpg","block_full_width":false,"block_page_width":false},"created_time":1677894582070,"last_edited_time":1677894591794,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"289ac144-d0ba-4e04-94ca-9d21aa351195":{"role":"reader","value":{"id":"289ac144-d0ba-4e04-94ca-9d21aa351195","version":10,"type":"code","properties":{"title":[["type Foo1 struct {\n\tb1 byte\n\ti  int64\n\tb2 byte\n}\n\nfunc sum1(foos []Foo1) int64 {\n\tvar s int64\n\tfor i := 0; i < len(foos); i++ {\n\t\ts += foos[i].i\n\t}\n\treturn s\n}\n\ntype Foo2 struct {\n\ti  int64\n\tb1 byte\n\tb2 byte\n}\n\nfunc sum2(foos []Foo2) int64 {\n\tvar s int64\n\tfor i := 0; i < len(foos); i++ {\n\t\ts += foos[i].i\n\t}\n\treturn s\n}"]],"language":[["Go"]]},"created_time":1677894783407,"last_edited_time":1677894786805,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"4c5c1693-f921-481e-844c-8fa12c249c4c":{"role":"reader","value":{"id":"4c5c1693-f921-481e-844c-8fa12c249c4c","version":10,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbnla6gukkj31aw0fm441.jpg"]]},"format":{"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbnla6gukkj31aw0fm441.jpg"},"created_time":1677894762930,"last_edited_time":1677894765112,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"e531352e-b784-4b50-a39b-6d91c595c4cf":{"role":"reader","value":{"id":"e531352e-b784-4b50-a39b-6d91c595c4cf","version":210,"type":"callout","properties":{"title":[["其实还是内存压缩带来的缓存命中率的提高"]]},"format":{"page_icon":"💡","block_color":"gray_background"},"created_time":1677894795646,"last_edited_time":1677894824721,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"c2da8712-24ae-44dc-9055-718fcac0385c":{"role":"reader","value":{"id":"c2da8712-24ae-44dc-9055-718fcac0385c","version":93,"type":"sub_sub_header","properties":{"title":[["12.5 #95: Not understanding stack vs. heap（不理解堆栈和逃逸分析）"]]},"created_time":1677857096326,"last_edited_time":1677896058278,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"257b5e64-b993-4734-a7de-f9f2083f961b":{"role":"reader","value":{"id":"257b5e64-b993-4734-a7de-f9f2083f961b","version":296,"type":"text","properties":{"title":[["都是老生常谈了，就不细说了。"]]},"created_time":1677896081316,"last_edited_time":1677896553252,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"eab511ab-fbb3-4ebb-8eb7-7cf28bcf307e":{"role":"reader","value":{"id":"eab511ab-fbb3-4ebb-8eb7-7cf28bcf307e","version":10,"type":"bookmark","properties":{"link":[["https://geektutu.com/post/hpg-escape-analysis.html"]],"title":[["Go 逃逸分析 | Go 语言高性能编程 | 极客兔兔"]],"description":[["Go 语言/golang 高性能编程，Go 语言进阶教程，Go 语言高性能编程(high performance go)。介绍了 Go 内存分配逃逸分析(escape analysis)的几种典型场景，变量所使用的内存什么时候分配到栈上，什么时候分配到堆上。以及如何利用逃逸分析的原理优化代码的性能，例如传值 VS 传指针。"]]},"format":{"bookmark_icon":"https://geektutu.com/img/icon.png"},"created_time":1677896060984,"last_edited_time":1677896060992,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"57bfa55b-f426-4cb2-a07f-361835d2b919":{"role":"reader","value":{"id":"57bfa55b-f426-4cb2-a07f-361835d2b919","version":113,"type":"code","properties":{"title":[["// -gcflags \"-m=2\" 可以帮助查看是否有逃逸\n$ go build -gcflags \"-m=2\"\n...\n./main.go:12:2: z escapes to heap:"]],"language":[["Go"]]},"created_time":1677896133257,"last_edited_time":1677896150942,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"4daee3b5-2375-4c2e-ae9f-b67dd5702874":{"role":"reader","value":{"id":"4daee3b5-2375-4c2e-ae9f-b67dd5702874","version":37,"type":"text","properties":{"title":[["以下是变量可以逃逸到堆的情况:"]]},"created_time":1677896161751,"last_edited_time":1677896185195,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"910fc0f7-32e0-459f-9683-466f4a1e04fd":{"role":"reader","value":{"id":"910fc0f7-32e0-459f-9683-466f4a1e04fd","version":5,"type":"bulleted_list","properties":{"title":[["全局变量，因为多个goroutine可以访问它们。"]]},"created_time":1677896189786,"last_edited_time":1677896198537,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"eb25b40d-1fa2-4aab-98bd-1fda51cae8ef":{"role":"reader","value":{"id":"eb25b40d-1fa2-4aab-98bd-1fda51cae8ef","version":14,"type":"bulleted_list","properties":{"title":[["发送到通道的指针:"]]},"content":["38302c97-4316-4379-a068-e952fa0677dc"],"created_time":1677896198932,"last_edited_time":1677896210809,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"dac48791-fe69-4211-86c6-17c5a9b97fa0":{"role":"reader","value":{"id":"dac48791-fe69-4211-86c6-17c5a9b97fa0","version":172,"type":"bulleted_list","properties":{"title":[["被发送到通道的指针引用的变量"]]},"content":["bae4f7a9-fea3-4594-88d8-364578605ab0"],"created_time":1677896249389,"last_edited_time":1677896292985,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"dde97d95-3d40-470e-b46b-3e8365ca3b7a":{"role":"reader","value":{"id":"dde97d95-3d40-470e-b46b-3e8365ca3b7a","version":7,"type":"bulleted_list","properties":{"title":[["如果局部变量太大而无法放入栈"]]},"created_time":1677896325472,"last_edited_time":1677896327659,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"c2c0c5a6-149c-4fa2-9c2c-5dd19a5b49b7":{"role":"reader","value":{"id":"c2c0c5a6-149c-4fa2-9c2c-5dd19a5b49b7","version":48,"type":"bulleted_list","properties":{"title":[["如果局部变量的大小未知。例如，"],["s := make([]int, 10)",[["c"]]],[" 可能不会逃逸到堆，但"],["s := make([]int, n)",[["c"]]],[" 会，因为它的大小基于一个变量。"]]},"created_time":1677896328534,"last_edited_time":1677896465518,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"065fc0cd-e795-44e6-9ca4-8eba2f157683":{"role":"reader","value":{"id":"065fc0cd-e795-44e6-9ca4-8eba2f157683","version":222,"type":"bulleted_list","properties":{"title":[["如果切片的底层数据因为调用append被重新分配"]]},"created_time":1677896394398,"last_edited_time":1677896442061,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"d78b456d-bee1-4a61-abe0-61167afd0bac":{"role":"reader","value":{"id":"d78b456d-bee1-4a61-abe0-61167afd0bac","version":126,"type":"bulleted_list","properties":{"title":[["函数的形参是"],["any",[["c"]]],["类型，那么形参也会逃逸"]]},"created_time":1677896443201,"last_edited_time":1677896461803,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"89fda714-2e58-4128-8953-b28b17cdbdf8":{"role":"reader","value":{"id":"89fda714-2e58-4128-8953-b28b17cdbdf8","version":66,"type":"sub_sub_header","properties":{"title":[["12.6 #96: Not knowing how to reduce allocations（减少内存分配）"]]},"created_time":1677857119721,"last_edited_time":1677896613249,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"bfc3988d-ad4b-41cd-a173-60196f6c126e":{"role":"reader","value":{"id":"bfc3988d-ad4b-41cd-a173-60196f6c126e","version":201,"type":"text","properties":{"title":[["本书已经讲解了很多种优化内存的方式："]]},"created_time":1677896614415,"last_edited_time":1677897259849,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"6807b666-4056-4bc9-8565-f9184cd5c899":{"role":"reader","value":{"id":"6807b666-4056-4bc9-8565-f9184cd5c899","version":124,"type":"bulleted_list","properties":{"title":[["#39 使用strings.Builder拼接字符串"]]},"created_time":1677897263862,"last_edited_time":1677897284649,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"f035023b-9618-400d-9d27-8024a13f5934":{"role":"reader","value":{"id":"f035023b-9618-400d-9d27-8024a13f5934","version":110,"type":"bulleted_list","properties":{"title":[["#40 避免不必要的string和[]byte类型转换"]]},"created_time":1677897284941,"last_edited_time":1677897306667,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"437f60c8-7360-449c-9ed3-4a94f8788bde":{"role":"reader","value":{"id":"437f60c8-7360-449c-9ed3-4a94f8788bde","version":208,"type":"bulleted_list","properties":{"title":[["#21和#27给slice和map预先分配内存"]]},"created_time":1677897307098,"last_edited_time":1677897347908,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"179af155-4c29-428e-a45a-13e9ff7b315a":{"role":"reader","value":{"id":"179af155-4c29-428e-a45a-13e9ff7b315a","version":187,"type":"bulleted_list","properties":{"title":[["#94 用更好的内存分配方式减少内存占用"]]},"created_time":1677897348509,"last_edited_time":1677897378643,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"ff5b7422-1d19-4a74-85f7-9d38c8199d0a":{"role":"reader","value":{"id":"ff5b7422-1d19-4a74-85f7-9d38c8199d0a","version":175,"type":"text","properties":{"title":[["本节会提出新的几种减少内存分配的方式:"]]},"created_time":1677897379310,"last_edited_time":1677897555532,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"098a44d1-705d-48e1-b920-740403deef8f":{"role":"reader","value":{"id":"098a44d1-705d-48e1-b920-740403deef8f","version":9,"type":"text","properties":{"title":[["Compiler optimizations",[["b"]]]]},"created_time":1677897555752,"last_edited_time":1677898186085,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"fe2813d4-594d-493b-a645-b8bf2fa70a27":{"role":"reader","value":{"id":"fe2813d4-594d-493b-a645-b8bf2fa70a27","version":10,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbnn0mq2t1j319u0m2dnv.jpg"]]},"format":{"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbnn0mq2t1j319u0m2dnv.jpg"},"created_time":1677898364192,"last_edited_time":1677898367128,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"89adcd8e-3e32-4796-9221-6f9c7259c557":{"role":"reader","value":{"id":"89adcd8e-3e32-4796-9221-6f9c7259c557","version":21,"type":"text","properties":{"title":[["sync.Pool",[["b"]]]]},"created_time":1677898375105,"last_edited_time":1677898378865,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"483ce884-48cb-46d9-8327-21f974594378":{"role":"reader","value":{"id":"483ce884-48cb-46d9-8327-21f974594378","version":10,"type":"text","properties":{"title":[["Go 语言从 1.3 版本开始提供了对象重用的机制，即 "],["sync.Pool",[["b"],["c"]]],["。"],["sync.Pool ",[["c"]]],["是可伸缩的，同时也是并发安全的，其大小仅受限于内存的大小。"],["sync.Pool",[["c"]]],[" 用于存储那些被分配了但是没有被使用，而未来可能会使用的值。这样就可以不用再次经过内存分配，可直接复用已有对象，减轻 GC 的压力，从而提升系统的性能。"]]},"created_time":1677899299903,"last_edited_time":1677899316192,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"acfe8e8b-de46-403a-bcdb-da1a85515a57":{"role":"reader","value":{"id":"acfe8e8b-de46-403a-bcdb-da1a85515a57","version":4,"type":"text","properties":{"title":[["sync.Pool",[["c"]]],[" 的大小是可伸缩的，高负载时会动态扩容，存放在池中的对象如果不活跃了会被自动清理。"]]},"created_time":1677899299903,"last_edited_time":1677899322727,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"4684cc1a-4c71-408e-a3bc-a00a6739f491":{"role":"reader","value":{"id":"4684cc1a-4c71-408e-a3bc-a00a6739f491","version":10,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbnnk71j4wj314y0ikwmr.jpg"]]},"format":{"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbnnk71j4wj314y0ikwmr.jpg"},"created_time":1677899494103,"last_edited_time":1677899496455,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"fb2f427c-5902-4770-b751-f7c22bb9cb7b":{"role":"reader","value":{"id":"fb2f427c-5902-4770-b751-f7c22bb9cb7b","version":10,"type":"bookmark","properties":{"link":[["https://geektutu.com/post/hpg-sync-pool.html"]],"title":[["Go sync.Pool | Go 语言高性能编程 | 极客兔兔"]],"description":[["Go 语言/golang 高性能编程，Go 语言进阶教程，Go 语言高性能编程(high performance go)。Go 语言标准库中的 sync.Pool 可以建立对象池，复用已有对象，解决内存分配碎片化的问题，有效减轻垃圾回收的压力(Garbage Collection, GC)，在特定场景下可以有效地降低内存占用，提升性能。最后介绍了 sync.Pool 的作用和用法。"]]},"format":{"bookmark_icon":"https://geektutu.com/img/icon.png"},"created_time":1677899184833,"last_edited_time":1677899184839,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"53a8614a-f7f3-4511-bfe4-7981745d9c9a":{"role":"reader","value":{"id":"53a8614a-f7f3-4511-bfe4-7981745d9c9a","version":214,"type":"sub_sub_header","properties":{"title":[["12.7 #97: Not relying on inlining（忘记依赖 inlining 编译优化）"]]},"created_time":1677857136131,"last_edited_time":1677899531012,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"10aa31db-c7de-40e2-926d-8f44403d0d4a":{"role":"reader","value":{"id":"10aa31db-c7de-40e2-926d-8f44403d0d4a","version":172,"type":"text","properties":{"title":[["内联有两个主要好处。首先，它消除了函数调用的开销（即使自Go 1.17和基于寄存器的调用约定以来开销已经减轻）。其次，它允许编译器进行进一步的优化。例如，在内联函数后，编译器可以决定把一些逃逸的变量放在堆上。"]]},"created_time":1677899532110,"last_edited_time":1677899902968,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"6ef0821b-d7b1-4072-9ff0-1039b728f2d6":{"role":"reader","value":{"id":"6ef0821b-d7b1-4072-9ff0-1039b728f2d6","version":10,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbnnsf8ks4j317q0k2wh7.jpg"]]},"format":{"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbnnsf8ks4j317q0k2wh7.jpg"},"created_time":1677899972228,"last_edited_time":1677899975043,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"12d68a96-e8cb-49d6-9581-3c5ee5d4fa74":{"role":"reader","value":{"id":"12d68a96-e8cb-49d6-9581-3c5ee5d4fa74","version":10,"type":"bookmark","properties":{"link":[["https://dave.cheney.net/2020/05/02/mid-stack-inlining-in-go"]],"title":[["Mid-stack inlining in Go"]]},"format":{"bookmark_icon":"https://dave.cheney.net/favicon.ico"},"created_time":1677900309869,"last_edited_time":1677900309877,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"6af86236-e46c-439c-a5fe-453ba96d6873":{"role":"reader","value":{"id":"6af86236-e46c-439c-a5fe-453ba96d6873","version":479,"type":"text","properties":{"title":[["如果内联是交由编译器实现，那么开发者应该如何利用内联来优化代码呢？这里我们可以利用 Mid-stack inlining 技术，他是关于把一个调用其他函数的函数做内联。"]]},"created_time":1677900312263,"last_edited_time":1677900379537,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"689ea1e4-3b56-4efb-bb1a-2ce5866e003d":{"role":"reader","value":{"id":"689ea1e4-3b56-4efb-bb1a-2ce5866e003d","version":12,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbno0rtbgej30yw0bm0ua.jpg"]]},"format":{"block_width":528,"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbno0rtbgej30yw0bm0ua.jpg","block_full_width":false,"block_page_width":false},"created_time":1677900452696,"last_edited_time":1677900797033,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"d047a3b1-be24-4c3d-832f-93618bea958a":{"role":"reader","value":{"id":"d047a3b1-be24-4c3d-832f-93618bea958a","version":43,"type":"text","properties":{"title":[["由于中间堆栈内联的支持，作为 Go 开发者，我们现在可以使用快速路径内联来优化应用程序。让我们看一个具体的例子sync.Mutex 实现："]]},"created_time":1677900889978,"last_edited_time":1677901226548,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"eeb14631-1291-4f06-99f7-4e7676b4b06b":{"role":"reader","value":{"id":"eeb14631-1291-4f06-99f7-4e7676b4b06b","version":10,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbnor1eessj31v00rgk3o.jpg"]]},"format":{"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbnor1eessj31v00rgk3o.jpg"},"created_time":1677901968281,"last_edited_time":1677901970888,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"66259d84-c257-4f32-83e7-ead747a077e5":{"role":"reader","value":{"id":"66259d84-c257-4f32-83e7-ead747a077e5","version":65,"type":"text","properties":{"title":[["由于这一变化，Lock方法可以内联。好处是，尚未锁定的互斥锁现在不会产生调用函数的开销（速度提高了约5%）。互斥锁已经锁定时的慢速路径没有改变。以前它需要一个函数调用来执行这个逻辑；它仍然是一个函数调用这次是lockSlow。"]]},"created_time":1677902041838,"last_edited_time":1677902099360,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"c5236dd6-d07d-48ae-b001-654820c324ae":{"role":"reader","value":{"id":"c5236dd6-d07d-48ae-b001-654820c324ae","version":67,"type":"sub_sub_header","properties":{"title":[["12.8 #98: Not using Go diagnostics tooling（使用Go诊断工具）"]]},"created_time":1677857150407,"last_edited_time":1677902133431,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"857cad67-00b9-4f50-82cb-8bf2d30c8a26":{"role":"reader","value":{"id":"857cad67-00b9-4f50-82cb-8bf2d30c8a26","version":271,"type":"text","properties":{"title":[["这一部分内容还是比较多的，就不适合整理归纳了，建议直接阅读原文"]]},"created_time":1677902362880,"last_edited_time":1677902820294,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"c4adafde-2e8d-486c-92f4-cfcf330b49a9":{"role":"reader","value":{"id":"c4adafde-2e8d-486c-92f4-cfcf330b49a9","version":5,"type":"sub_sub_header","properties":{"title":[["12.9 #99: Not understanding how the GC works"]]},"created_time":1677857172033,"last_edited_time":1677857172250,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"bc9c27dc-28f1-4f7f-959d-cd16662115ab":{"role":"reader","value":{"id":"bc9c27dc-28f1-4f7f-959d-cd16662115ab","version":10,"type":"sub_sub_header","properties":{"title":[["12.10 #100: Not understanding the impacts of running Go in Docker and Kubernetes"]]},"created_time":1677857192043,"last_edited_time":1677857194633,"parent_id":"f8e41082-81f4-4d47-a6f3-3489e7c3453c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"c344609f-bc31-4c18-bd1f-862c52a36993":{"role":"reader","value":{"id":"c344609f-bc31-4c18-bd1f-862c52a36993","version":12,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbkofx9925j31040my42u.jpg"]]},"format":{"block_width":528,"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbkofx9925j31040my42u.jpg","block_full_width":false,"block_page_width":false},"created_time":1677677138141,"last_edited_time":1677677173288,"parent_id":"237e8057-b4ac-4260-b71c-491d34183dd0","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"7c2ce0a4-ab7f-46c6-9dc5-07a43ab425cd":{"role":"reader","value":{"id":"7c2ce0a4-ab7f-46c6-9dc5-07a43ab425cd","version":10,"type":"bookmark","properties":{"link":[["https://clivern.com/separate-test-cases-in-golang-with-build-tags/"]],"title":[["Separate Test Cases in Golang With Build Tags | Clivern"]],"description":[["A build tag or a build constraint as described in the build package documentation, is a line comment that begins // +build that lists the conditions under which a file should be included in the package. You can provide build constraints for one file. The tags can then be passed to the go build command,"]]},"format":{"bookmark_icon":"https://clivern.com/wp-content/uploads/2015/08/cropped-icon-192x192.png","bookmark_cover":"https://clivern.com/wp-content/uploads/2021/01/0_YZIFWK0uy9s_BWVW.jpeg"},"created_time":1677765981195,"last_edited_time":1677765981201,"parent_id":"5595aec8-9bdc-4ee6-aad8-885ffa50909a","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"18c9eccc-9da6-42f6-8ec8-e88c65be7a5e":{"role":"reader","value":{"id":"18c9eccc-9da6-42f6-8ec8-e88c65be7a5e","version":19,"type":"code","properties":{"title":[["//go:build integration\n// +build integration\n\npackage db\n\nimport (\n\t\"os\"\n\t\"testing\"\n)\n\nfunc TestInsert1(t *testing.T) {\n\t// ...\n}"]],"language":[["Go"]]},"created_time":1677765770282,"last_edited_time":1677765978514,"parent_id":"5595aec8-9bdc-4ee6-aad8-885ffa50909a","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"18666ce9-f011-454d-9338-067ff8b091af":{"role":"reader","value":{"id":"18666ce9-f011-454d-9338-067ff8b091af","version":12,"type":"code","properties":{"title":[["func TestInsert2(t *testing.T) {\n\tif os.Getenv(\"INTEGRATION\") != \"true\" {\n\t\tt.Skip(\"skipping integration test\")\n\t}\n\n\t// ..."]],"language":[["Go"]]},"created_time":1677765811794,"last_edited_time":1677766063820,"parent_id":"27701362-dbb7-4aca-b5a6-c08b830ac4b6","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"c06a6433-6f93-4703-ba8b-247a1e863581":{"role":"reader","value":{"id":"c06a6433-6f93-4703-ba8b-247a1e863581","version":64,"type":"code","properties":{"title":[["func TestLongRunning(t *testing.T) {\n\tif testing.Short() {\n\t\tt.Skip(\"skipping long-running test\")\n\t}\n\t// ...\n}\n\n// % go test -short -v .\n// === RUN   TestLongRunning\n//     foo_test.go:9: skipping long-running test\n// --- SKIP: TestLongRunning (0.00s)\n// PASS\n// ok      foo  0.174s"]],"language":[["Go"]]},"created_time":1677766144689,"last_edited_time":1677766337274,"parent_id":"ff80f41e-1180-4fc3-9ea2-46b3880651a8","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"261965ec-5673-446b-af34-e55af690c950":{"role":"reader","value":{"id":"261965ec-5673-446b-af34-e55af690c950","version":222,"type":"code","properties":{"title":[["// 并行执行测试，并行最大个数 16\ngo test -parallel 16 ."]],"language":[["Bash"]]},"created_time":1677766548776,"last_edited_time":1677766669048,"parent_id":"25e1958f-8fbe-4705-a749-c9d5055a6e48","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"2168ff07-0f1c-4631-8be1-5e0845466c7d":{"role":"reader","value":{"id":"2168ff07-0f1c-4631-8be1-5e0845466c7d","version":7,"type":"code","properties":{"title":[["go test -shuffle=on -v"]],"language":[["Bash"]]},"created_time":1677766710691,"last_edited_time":1677766711004,"parent_id":"facda99f-78f1-48b9-9538-695bc10c8e6f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"f4223d0c-99c0-44ab-b38f-09d099a91481":{"role":"reader","value":{"id":"f4223d0c-99c0-44ab-b38f-09d099a91481","version":10,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hblvq2ildqj31dm0dw493.jpg"]]},"format":{"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hblvq2ildqj31dm0dw493.jpg"},"created_time":1677766977800,"last_edited_time":1677766980308,"parent_id":"facda99f-78f1-48b9-9538-695bc10c8e6f","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"010df427-32d2-4c01-bbcc-e9e2f0b55d2d":{"role":"reader","value":{"id":"010df427-32d2-4c01-bbcc-e9e2f0b55d2d","version":7,"type":"code","properties":{"title":[["//go:noinline\nfunc add(a int, b int) int {\n return a + b\n}"]],"language":[["Go"]]},"created_time":1677760408947,"last_edited_time":1677760412774,"parent_id":"cf7bca78-d407-4c2d-899e-b3aeeb1cb3f4","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"dc6458a6-89c5-410a-af4b-3e0f56450ecf":{"role":"reader","value":{"id":"dc6458a6-89c5-410a-af4b-3e0f56450ecf","version":181,"type":"code","properties":{"title":[["// 获得测试覆盖率文件\ngo test -coverprofile=coverage.out ./...\n\n// 可视化展示覆盖率\ngo tool cover -html=coverage.out"]],"language":[["Bash"]]},"created_time":1677764357870,"last_edited_time":1677764407844,"parent_id":"0c142a31-4082-444d-8066-19c3375d698a","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"c948a666-4c3a-4c1a-8e9d-367833b111bf":{"role":"reader","value":{"id":"c948a666-4c3a-4c1a-8e9d-367833b111bf","version":12,"type":"code","properties":{"title":[["package counter\n\nimport \"sync/atomic\"\n\nvar count uint64\n\nfunc Inc() uint64 {\n\tatomic.AddUint64(&count, 1)\n\treturn count\n}"]],"language":[["Go"]]},"created_time":1677764601940,"last_edited_time":1677764637849,"parent_id":"678b750d-f082-4b28-a37e-c22518645f15","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"d7039932-cb0c-4e6a-bde1-6d5c2d4f5ccc":{"role":"reader","value":{"id":"d7039932-cb0c-4e6a-bde1-6d5c2d4f5ccc","version":22,"type":"code","properties":{"title":[["package counter_test\n\nimport (\n\t\"testing\"\n\n\tcounter \"myapp/counter\"\n)\n\nfunc TestCount(t *testing.T) {\n\tif counter.Inc() != 1 {\n\t\tt.Errorf(\"expected 1\")\n\t}\n}"]],"language":[["Go"]]},"created_time":1677764642324,"last_edited_time":1677764679102,"parent_id":"678b750d-f082-4b28-a37e-c22518645f15","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"1c10a040-7f54-4a6f-9b72-bfa11b8ec8fb":{"role":"reader","value":{"id":"1c10a040-7f54-4a6f-9b72-bfa11b8ec8fb","version":290,"type":"text","properties":{"title":[["调用 "],["t.Cleanup",[["c"]]],[" 注册一个闭包函数做清理工作，可以在测试结束后被调用来清理环境。"]]},"created_time":1677765002095,"last_edited_time":1677765142184,"parent_id":"f10a3d28-71ca-42c6-90d9-07435feb699c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"b9afc4da-dd29-4872-a0f5-29d6233e7b1f":{"role":"reader","value":{"id":"b9afc4da-dd29-4872-a0f5-29d6233e7b1f","version":41,"type":"code","properties":{"title":[["func TestMySQLIntegration(t *testing.T) {\n\t// ...\n\tdb := createConnection(t, \"tcp(localhost:3306)/db\")\n\t// ...\n}\n\nfunc createConnection(t *testing.T, dsn string) *sql.DB {\n\tdb, err := sql.Open(\"mysql\", dsn)\n\tif err != nil {\n\t\tt.FailNow()\n\t}\n\tt.Cleanup(\n\t\tfunc() {\n\t\t\t_ = db.Close()\n\t\t})\n\treturn db\n}"]],"language":[["Go"]]},"created_time":1677764992074,"last_edited_time":1677842946320,"parent_id":"f10a3d28-71ca-42c6-90d9-07435feb699c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"38302c97-4316-4379-a068-e952fa0677dc":{"role":"reader","value":{"id":"38302c97-4316-4379-a068-e952fa0677dc","version":45,"type":"code","properties":{"title":[["type Foo struct{ s string }\nch := make(chan *Foo, 1)\nfoo := &Foo{s: \"x\"}\nch <- foo"]],"language":[["Go"]]},"created_time":1677896210808,"last_edited_time":1677896228739,"parent_id":"eb25b40d-1fa2-4aab-98bd-1fda51cae8ef","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"bae4f7a9-fea3-4594-88d8-364578605ab0":{"role":"reader","value":{"id":"bae4f7a9-fea3-4594-88d8-364578605ab0","version":36,"type":"code","properties":{"title":[["type Foo struct{ s *string }\nch := make(chan Foo, 1)\ns := \"x\"\nbar := Foo{s: &s}\nch <- bar"]],"language":[["Go"]]},"created_time":1677896292984,"last_edited_time":1677896309446,"parent_id":"dac48791-fe69-4211-86c6-17c5a9b97fa0","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"dd2baae1-8900-4073-854b-bdde392d5b36":{"role":"reader","value":{"id":"dd2baae1-8900-4073-854b-bdde392d5b36","version":192,"type":"page","properties":{"title":[["关于作者"]]},"content":["1d759e84-b1ff-4bae-857e-e2fd95fa9b45","e34dbc42-98d0-4e1d-ad9e-dc6631aa7273","349b10bd-90c8-4db1-afc9-e590d9c60671","5b00c702-1eba-43ce-b04c-4747ed7c04b1","308d038c-dc47-440c-866d-5f06ca7e16fe","4b1a8f14-180e-421d-8af6-8a40a14b8d12","ef634a33-80f6-48d8-bcd4-054e0ec68337","3c187b42-de80-4359-b13b-5c778a6f49a6","274ad047-a46e-4187-b438-129e6cfd5cc8","ade9b3ae-520f-4752-87d4-52a41bb1d875","770dde4e-b74e-4848-8b48-8b1ce3c111ea","2ca1f27b-da43-46f8-b8c0-ef3e05e583d9"],"format":{"page_icon":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/020bfbea-dbb3-44dd-b5aa-5048fb71462f/IMG_2189.jpg","page_cover":"/images/page-cover/gradients_8.png","page_cover_position":0.3},"permissions":[{"role":"editor","type":"user_permission","user_id":"d1805983-7869-451d-bf8b-64135a5d4ee7"},{"role":"reader","type":"public_permission","added_timestamp":1666532032810}],"created_time":1666531980000,"last_edited_time":1677768743041,"parent_id":"314bb437-f8b5-44ca-a749-b2b1413baa58","parent_table":"block","alive":true,"file_ids":["5349e794-a695-40dd-8bb5-4ea012d8b3f0","0dba7a3b-a420-477f-a184-076421f71ce6","020bfbea-dbb3-44dd-b5aa-5048fb71462f"],"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"314bb437-f8b5-44ca-a749-b2b1413baa58":{"role":"reader","value":{"id":"314bb437-f8b5-44ca-a749-b2b1413baa58","version":5,"type":"column","content":["dd2baae1-8900-4073-854b-bdde392d5b36"],"format":{"column_ratio":0.5},"created_time":1666625040000,"last_edited_time":1666625040000,"parent_id":"82aad922-cb77-4452-81bf-56f4e8e5a408","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"82aad922-cb77-4452-81bf-56f4e8e5a408":{"role":"reader","value":{"id":"82aad922-cb77-4452-81bf-56f4e8e5a408","version":5,"type":"column_list","content":["314bb437-f8b5-44ca-a749-b2b1413baa58","c7c8db4e-2a84-4461-9042-c0ccd0c86b7a"],"created_time":1666625040000,"last_edited_time":1666625040000,"parent_id":"72a66971-7cf6-42c2-a252-4439d99d8f44","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"1d759e84-b1ff-4bae-857e-e2fd95fa9b45":{"role":"reader","value":{"id":"1d759e84-b1ff-4bae-857e-e2fd95fa9b45","version":39,"type":"sub_header","properties":{"title":[["About Me"]]},"created_time":1677585426899,"last_edited_time":1677585433015,"parent_id":"dd2baae1-8900-4073-854b-bdde392d5b36","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}}},"collection":{"89829c97-9e4b-43b0-b37c-457a3da9ad96":{"role":"reader","value":{"id":"89829c97-9e4b-43b0-b37c-457a3da9ad96","version":50,"name":[["读书笔记"]],"schema":{"Zr<q":{"name":"Tags","type":"multi_select","options":[{"id":"24b84736-a103-42ac-9240-4822e0f65e43","color":"brown","value":"golang"}]},"vRhJ":{"name":"Created","type":"created_time"},"z`pV":{"name":"Text","type":"text"},"title":{"name":"Name","type":"title"}},"icon":"/icons/book_gray.svg","format":{"copied_from_pointer":{"id":"802f1041-8e8c-4dfb-9a7e-828adc379fe9","table":"collection","spaceId":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"},"collection_page_properties":[{"visible":true,"property":"vRhJ"},{"visible":true,"property":"Zr<q"}]},"parent_id":"e7596c25-bafa-4ece-94b6-e7973c7a2ab3","parent_table":"block","alive":true,"file_ids":["bc7d6ffa-a7ed-4623-9b4b-760071f91143","53747170-d36e-41e1-b2b7-bc3fe775c828","2f5c27c6-3d03-4a36-9426-254d118d3831","43cb5540-5d53-449b-83bd-609b24688d0b","982ec7e7-aebe-4e08-b2be-22f8f4fe0275","85f9e952-304a-46a7-99e1-0b8806f8fa2e","76a743a7-2ac6-426f-810b-87b2b7091d16"],"copied_from":"802f1041-8e8c-4dfb-9a7e-828adc379fe9","migrated":true,"space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}}},"collection_view":{"11f62eb2-ba92-4ffd-91b4-c964b8cedfeb":{"role":"reader","value":{"id":"11f62eb2-ba92-4ffd-91b4-c964b8cedfeb","version":7,"type":"gallery","name":"Blog","format":{"gallery_cover":{"type":"page_cover"},"collection_pointer":{"id":"89829c97-9e4b-43b0-b37c-457a3da9ad96","table":"collection","spaceId":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"},"gallery_properties":[{"visible":true,"property":"title"},{"visible":true,"property":"vRhJ"},{"visible":true,"property":"Zr<q"},{"visible":true,"property":"z`pV"}],"collection_peek_mode":"full_page","gallery_cover_aspect":"cover"},"parent_id":"e7596c25-bafa-4ece-94b6-e7973c7a2ab3","parent_table":"block","alive":true,"page_sort":["6838510a-0002-4284-b31b-f6587ab3eae0","d3ecd552-789f-452c-8753-2f0226325f65","a8bd2ec9-1288-4669-9940-ad46c5539100","3397e27f-0e8a-49b8-89ae-67d10e3d94fa","db80f497-e22c-4bff-bdcb-0ac06b5c4528","f8e41082-81f4-4d47-a6f3-3489e7c3453c","e04337ab-49dd-4dfe-80b2-0330e8da5e06"],"query2":{"aggregations":[{"aggregator":"count"}]},"space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}}},"notion_user":{},"collection_query":{},"signed_urls":{"f8e41082-81f4-4d47-a6f3-3489e7c3453c":"https://s3.us-west-2.amazonaws.com/secure.notion-static.com/47263733-11bc-4ae7-9e1e-c3401a49c171/Manning.100.Go.Mistakes.and.How.to.Avoid.Them.2022-1%EF%BC%88%E6%8B%96%E7%A7%BB%E9%A1%B9%E7%9B%AE%EF%BC%89.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20230304%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20230304T040745Z&X-Amz-Expires=86400&X-Amz-Signature=be118f8a82537e9df820ca7bc452fb487eb848779c30626a10352cc2f0296d8c&X-Amz-SignedHeaders=host&x-id=GetObject"},"preview_images":{"notion.so/image/s3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F47263733-11bc-4ae7-9e1e-c3401a49c171%2FManning.100.Go.Mistakes.and.How.to.Avoid.Them.2022-1%EF%BC%88%E6%8B%96%E7%A7%BB%E9%A1%B9%E7%9B%AE%EF%BC%89.png":{"originalWidth":2000,"originalHeight":2508,"dataURIBase64":"data:image/webp;base64,UklGRkoAAABXRUJQVlA4ID4AAACQAQCdASoNABAABUB8JZQAAUJYnCAA/i3sgO0Yegdb+5LvlWhw/psHDLyVDpX8zYYcjaZB/BXtD4y71SAAAA=="},"notion.so/image/s3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fa22fb73f-5a7d-4fdc-8319-52ed15316e76%2Fimages.jpeg":{"originalWidth":2000,"originalHeight":1159,"dataURIBase64":"data:image/webp;base64,UklGRjwAAABXRUJQVlA4IDAAAACwAQCdASoQAAkABUB8JQAAT6/36IiAAP4EcU3AJPD5WZWYi6rGw+MWNhG0kKdLMAA="},"notion.so/image/s3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F37907dd5-3c76-4966-a419-daa027a84972%2FIMG_2189.jpg":{"originalWidth":2000,"originalHeight":2003,"dataURIBase64":"data:image/webp;base64,UklGRmoAAABXRUJQVlA4IF4AAADQAQCdASoQABAABUB8JbACdAERATxWoAD+0Vlxx+kOh3kDC0Z3s4OjUZzRpnTiXUiN5qtuCLGbw3Q3meKHmbJDj3X9KoWlb/kas/KasMX31nkEcPwD09TPGVsO8AAA"},"notion.so/image/img2.doubanio.com%2Fview%2Fsubject%2Fl%2Fpublic%2Fs34311243.jpg":{"originalWidth":2000,"originalHeight":2507,"dataURIBase64":"data:image/webp;base64,UklGRk4AAABXRUJQVlA4IEIAAACwAQCdASoNABAABUB8JZQAAcCzMdgAAP1pPb5smyxoh54e7LDGK8Yk2gEHbh/20RBmhShKjfB1bjvvEl7pU7XAAAA="},"notion.so/image/img1.doubanio.com%2Ffavicon.ico":null,"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbfjzjehr4j30tc0ccq5c.jpg":{"originalWidth":2000,"originalHeight":841,"dataURIBase64":"data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAAAwAQCdASoQAAcABUB8JZQAA3AA/vBmGaPoMMfT+4RThezUN53k8lwNzeTsgAAA"},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbfjzrczn0j30t00bmgnc.jpg":{"originalWidth":2000,"originalHeight":801,"dataURIBase64":"data:image/webp;base64,UklGRjYAAABXRUJQVlA4ICoAAACQAQCdASoQAAYABUB8JZQAApuLmvgA/usyeOnRnoxEhb3C52zBu7IA3AA="},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbfkkxdgp1j31gw0i6tel.jpg":{"originalWidth":2000,"originalHeight":687,"dataURIBase64":"data:image/webp;base64,UklGRiwAAABXRUJQVlA4ICAAAACQAQCdASoQAAUABUB8JZwAAudR6dAA/sYFJUtPYAAAAA=="},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbfqoq89goj31ja0tmani.jpg":{"originalWidth":2000,"originalHeight":1071,"dataURIBase64":"data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACwAQCdASoQAAkABUB8JQAAXOudR8AAAP7tzTjaDKMHDJ3iIuQAAyBaRRsyGwAA"},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbfr8gkmhjj319a0hatdy.jpg":{"originalWidth":2000,"originalHeight":763,"dataURIBase64":"data:image/webp;base64,UklGRjAAAABXRUJQVlA4ICQAAAAwAQCdASoQAAYABUB8JYwAA3AA/vBl/VgRnYjho4mzKY1AAAA="},"notion.so/image/golang.design%2Funder-the-hood%2Ffavicon.png":{"originalWidth":2000,"originalHeight":2000,"dataURIBase64":"data:image/webp;base64,UklGRnwAAABXRUJQVlA4WAoAAAAQAAAADwAADwAAQUxQSD0AAAARL0AWYJocyO4IEugqIgK/FAohSXLmEE5hFR4hGPz6w3w2iOj/BPB/2HYPtOSwLIPa5mAvSdOwHUBmJj8BAFZQOCAYAAAAMAEAnQEqEAAQAAVAfCWkAANwAP7w5sAA"},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbibdjgitaj31q80meank.jpg":{"originalWidth":2000,"originalHeight":720,"dataURIBase64":"data:image/webp;base64,UklGRkIAAABXRUJQVlA4IDYAAADwAQCdASoQAAYABUB8JQBdgCIhCA5MkBgA/u/D+wKXNbqWDcr/ALDtIhD/DxlKxDxIjiT4AAA="},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbjjepyykqj31ca0lg47c.jpg":{"originalWidth":2000,"originalHeight":888,"dataURIBase64":"data:image/webp;base64,UklGRkAAAABXRUJQVlA4IDQAAABwAQCdASoQAAcABUB8JQAAXILjAAD+78P0LX+qJKHEgMI0ar+zRjIgffCYuPUeFApoAAAA"},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbjjgb39klj310s0juwh4.jpg":{"originalWidth":2000,"originalHeight":1079,"dataURIBase64":"data:image/webp;base64,UklGRigAAABXRUJQVlA4IBwAAAAwAQCdASoQAAkABUB8JaQAA3AA/vCTr0unFgAA"},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbjjsatms6j310a0m8q8p.jpg":{"originalWidth":2000,"originalHeight":1225,"dataURIBase64":"data:image/webp;base64,UklGRkQAAABXRUJQVlA4IDgAAADQAQCdASoQAAoABUB8JZAAAudSvXUaAAD+78Nlqe7GDD+q7mOMW/2C5MYVqQTcWQBmV3rBjogAAA=="},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbjjx84ansj31bs10yaip.jpg":{"originalWidth":2000,"originalHeight":1547,"dataURIBase64":"data:image/webp;base64,UklGRjQAAABXRUJQVlA4ICgAAABwAQCdASoQAAwABUB8JQAAXOi1gAD+78PTalf6BwRerTmRXpyaRDAA"},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbjjzxzub1j31520s445i.jpg":{"originalWidth":2000,"originalHeight":1369,"dataURIBase64":"data:image/webp;base64,UklGRjgAAABXRUJQVlA4ICwAAACwAQCdASoQAAsABUB8JQAAXQXhlZwAAP7vvWec+Y0zLFdOWoXJvR5h4AAAAA=="},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbjh3fld7pj31eg0n6n7d.jpg":{"originalWidth":2000,"originalHeight":919,"dataURIBase64":"data:image/webp;base64,UklGRjQAAABXRUJQVlA4ICgAAACwAQCdASoQAAcABUB8JZQAAxZgjkQAAP7nrpu3K66aoH3cjtsAS8gA"},"notion.so/image/geektutu.com%2Fimg%2Ficon.png":{"originalWidth":2000,"originalHeight":2000,"dataURIBase64":"data:image/webp;base64,UklGRmYAAABXRUJQVlA4IFoAAABwAgCdASoQABAABUB8JbACdH8AFC6wyImyc7DAAPaOm7ZuB9T9glxeiEuAabs/A/Yx58LekgPLrFy+aWU25Bqx00Pi1ZMHr4aDoxmAEN/qo7Ux6LN80bBgAAA="},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbjiirbgghj31f60hywhb.jpg":{"originalWidth":2000,"originalHeight":701,"dataURIBase64":"data:image/webp;base64,UklGRigAAABXRUJQVlA4IBwAAAAwAQCdASoQAAYABUB8JaQAA3AA/vBnJdvxRIAA"},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbjiqad262j31aq0rsaib.jpg":{"originalWidth":2000,"originalHeight":1189,"dataURIBase64":"data:image/webp;base64,UklGRjIAAABXRUJQVlA4ICYAAAAwAQCdASoQAAoABUB8JZwAA3AA/vBkMLPCIt2QO3UjS1tNtwaAAA=="},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbjj0adk20j31200i2q9f.jpg":{"originalWidth":2000,"originalHeight":950,"dataURIBase64":"data:image/webp;base64,UklGRjwAAABXRUJQVlA4IDAAAACwAQCdASoQAAgABUB8JQAAXUjdZLLAAP7vxEd0wiRocXfi5fbFND1NmUxfYhGGAAA="},"notion.so/image/pic1.zhimg.com%2Fv2-9281b3e47858daa5e9086f0a0047d116_720w.jpg":{"originalWidth":2000,"originalHeight":1111,"dataURIBase64":"data:image/webp;base64,UklGRjwAAABXRUJQVlA4IDAAAACwAQCdASoQAAkABUB8JaQAAt0LI1EAAP7tnv1Q2LXteOfrlWNMUsU7SJ8XcwL0AAA="},"notion.so/image/static.zhihu.com%2Fheifetz%2Fassets%2Fapple-touch-icon-152.81060cab.png":{"originalWidth":2000,"originalHeight":2000,"dataURIBase64":"data:image/webp;base64,UklGRrYAAABXRUJQVlA4WAoAAAAQAAAADwAADwAAQUxQSDgAAAARD9D/iAiwqa29yZe2RlM8ZOpZYwCUsLaJtXcc4AQT6Ijof2j0JOARpfxMNeSk/q5WBwq8WJExAlZQOCBYAAAAMAIAnQEqEAAQAAVAfCWwAnS6ABCSD7Rp2IAA/Rq9d/8IprfV7WTm9aip9ilUb3xYIZJjsRUozTXvOQ8J1LIspl6/6D5nunMzyQ0H8jfeZ9M97aFyegAAAA=="},"notion.so/image/picx.zhimg.com%2Fv2-fae5dcfcf8827c6066d51f9b12cd9864_720w.jpg":{"originalWidth":2000,"originalHeight":808,"dataURIBase64":"data:image/webp;base64,UklGRjAAAABXRUJQVlA4ICQAAAAwAQCdASoQAAYABUB8JaQAA3AA/vBJ+7MeyZP9TBvjO/SAAAA="},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbkoxg0061j31a40cmwj2.jpg":{"originalWidth":2000,"originalHeight":547,"dataURIBase64":"data:image/webp;base64,UklGRjIAAABXRUJQVlA4ICYAAACwAQCdASoQAAQABUB8JaQAAu19ie/gAP7ta0kIY8QrWGYASGAAAA=="},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbkoxuh1sij319c0ccjx3.jpg":{"originalWidth":2000,"originalHeight":544,"dataURIBase64":"data:image/webp;base64,UklGRi4AAABXRUJQVlA4ICIAAADQAQCdASoQAAQABUB8JaQAAueGu1VMAAD+7cYA+gRAAAAA"},"notion.so/image/manjusaka.blog%2Fimg%2Fog_image.png":{"originalWidth":2000,"originalHeight":1050,"dataURIBase64":"data:image/webp;base64,UklGRjgAAABXRUJQVlA4ICwAAAAwAQCdASoQAAgABUB8JZQAA3AA/vCAenTKTsOBz4xgQ077BXZ+UKG97M+AAA=="},"notion.so/image/user-images.githubusercontent.com%2F7054676%2F56820343-2fe1b580-687e-11e9-8f6f-778df3a8eafd.png":{"originalWidth":2000,"originalHeight":1993,"dataURIBase64":"data:image/webp;base64,UklGRnQAAABXRUJQVlA4IGgAAADQAQCdASoQABAABUB8JbACdAdwA9g8+AD+yNW/badNZ7FtlQtPwxNagUxzJaJlceYls4PpyPEAc/wCwsSyBsY3lFTevNnrVVfsWwLY+bA7COpLsyXtHSddlbfaojguDZIq/yVh4IdgAA=="},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbkl8uy7mxj319c0jkwkx.jpg":{"originalWidth":2000,"originalHeight":863,"dataURIBase64":"data:image/webp;base64,UklGRjAAAABXRUJQVlA4ICQAAACQAQCdASoQAAcABUB8JYwAAudQDBAA/u/DbQ+4c6ikAPcNQAA="},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbklkt9cxrj316s0i243s.jpg":{"originalWidth":2000,"originalHeight":844,"dataURIBase64":"data:image/webp;base64,UklGRjYAAABXRUJQVlA4ICoAAACwAQCdASoQAAcABUB8JQAAXWUGinAAAP7vxZfvfflzp+h3Z6l8MulAAAA="},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbklrxm43yj30z60hiwj0.jpg":{"originalWidth":2000,"originalHeight":995,"dataURIBase64":"data:image/webp;base64,UklGRjIAAABXRUJQVlA4ICYAAAAwAQCdASoQAAgABUB8JQAAbgAA/vBmEoDgg4jt4ZqmrHWzKYkgAA=="},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbkn8dimu6j312g0bs42e.jpg":{"originalWidth":2000,"originalHeight":613,"dataURIBase64":"data:image/webp;base64,UklGRjAAAABXRUJQVlA4ICQAAACwAQCdASoQAAUABUB8JZwAAu0dYNzQAP7q3H7ds2TljmQ8AAA="},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbkmqobncij31480cqgoz.jpg":{"originalWidth":2000,"originalHeight":633,"dataURIBase64":"data:image/webp;base64,UklGRiwAAABXRUJQVlA4ICAAAACQAQCdASoQAAUABUB8JaQAAudZtgAA/u3GJPSKDvAAAA=="},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbkn98yhstj315g0fo78p.jpg":{"originalWidth":2000,"originalHeight":756,"dataURIBase64":"data:image/webp;base64,UklGRjQAAABXRUJQVlA4ICgAAACwAQCdASoQAAYABUB8JZwAAq9EBEnAAP7toHeO7YWSt8CObJJcgyAA"},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbkndg329oj31ag08kjwv.jpg":{"originalWidth":2000,"originalHeight":368,"dataURIBase64":"data:image/webp;base64,UklGRi4AAABXRUJQVlA4ICIAAACQAQCdASoQAAMABUB8JYwAAujbZdAA/u/FZyjhUvprygAA"},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbluxpm2fqj30la0ci0uc.jpg":{"originalWidth":2000,"originalHeight":1175,"dataURIBase64":"data:image/webp;base64,UklGRjgAAABXRUJQVlA4ICwAAACQAQCdASoQAAkABUB8JaQAAp0JGAAA/vHgwiu0daRTMfWD5vUiX/I3EAAAAA=="},"notion.so/image/dave.cheney.net%2Ffavicon.ico":null,"notion.so/image/cdn.sstatic.net%2FSites%2Fstackoverflow%2FImg%2Fapple-touch-icon%402.png":{"originalWidth":2000,"originalHeight":2000,"dataURIBase64":"data:image/webp;base64,UklGRrIAAABXRUJQVlA4WAoAAAAQAAAADwAADwAAQUxQSEgAAAARL6CgbRs2VTbt/omIwHPCwCiSJEV59F8wsHvwRwUk4PwrOgcR/U+/RiB8DVjnAeT7BNfdQZluKPE4E9bpmA+seUwHyvs8ix9WUDggRAAAAFACAJ0BKhAAEAAFQHwlsAJ0VAC7K943/9AO4AD+3yf6HtzpRo2x8s6Ijl+4c5jqg90ZvZ+chd1b/WRwhQSWZRRufAAA"},"notion.so/image/cdn.sstatic.net%2FSites%2Fstackoverflow%2FImg%2Fapple-touch-icon.png":{"originalWidth":2000,"originalHeight":2000,"dataURIBase64":"data:image/webp;base64,UklGRrQAAABXRUJQVlA4WAoAAAAQAAAADwAADwAAQUxQSEUAAAARL6AmABI2RxRucBsRgfaLYBRJtpMucJDuP94DGIj+deEgov/p1wDCNYFWdrDeJ7iPGUJ+ICzHmdDyWQ60NS0nwve+1Q8AVlA4IEgAAAAwAgCdASoQABAABUB8JbACdDiAN5DBkIL5YAD8Qinke/q889yo9g035WPfLcd8dxHCK0oPnIUG9M+Qbtcz9Bp+/l+qbyEAAAA="},"notion.so/image/pkg.go.dev%2Fstatic%2Fshared%2Ficon%2Ffavicon.ico":null,"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hblqycs54hj31e80b6jwa.jpg":{"originalWidth":2000,"originalHeight":445,"dataURIBase64":"data:image/webp;base64,UklGRi4AAABXRUJQVlA4ICIAAACwAQCdASoQAAQABUB8JZQAAxalyJIAAP7tlqSwWHkoB8AA"},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hblr850zbgj31eo0cutdw.jpg":{"originalWidth":2000,"originalHeight":507,"dataURIBase64":"data:image/webp;base64,UklGRjAAAABXRUJQVlA4ICQAAACwAQCdASoQAAQABUB8JZwAAxf+5/AAAP7g2t0+6ErGXJzIAAA="},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hblrwgav5vj317k0gun42.jpg":{"originalWidth":2000,"originalHeight":773,"dataURIBase64":"data:image/webp;base64,UklGRi4AAABXRUJQVlA4ICIAAACwAQCdASoQAAYABUB8JaQAAvd3BJgAAP7n+oluAtCWgAAA"},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbls3gwljrj317u0iitgl.jpg":{"originalWidth":2000,"originalHeight":844,"dataURIBase64":"data:image/webp;base64,UklGRjQAAABXRUJQVlA4ICgAAADQAQCdASoQAAcABUB8JaQAAscEGeYwAAD+7W8wXFrk+aQL7p73UwAA"},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hblshj22g8j31ci0pg7cf.jpg":{"originalWidth":2000,"originalHeight":1049,"dataURIBase64":"data:image/webp;base64,UklGRj4AAABXRUJQVlA4IDIAAADQAQCdASoQAAgABUB8JaQAAusfKtacAAD+6GCOkJkmC7wIE2VOwmkJ/HUlj/HGzAAAAA=="},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hblu0ivr0oj31dc0tqtjc.jpg":{"originalWidth":2000,"originalHeight":1205,"dataURIBase64":"data:image/webp;base64,UklGRjYAAABXRUJQVlA4ICoAAACQAQCdASoQAAoABUB8JaQAAudZN8AA/u/OaqpXS5QaYf6i/20dUUymAAA="},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hblu30b7w2j31580k0grq.jpg":{"originalWidth":2000,"originalHeight":970,"dataURIBase64":"data:image/webp;base64,UklGRjAAAABXRUJQVlA4ICQAAADQAQCdASoQAAgABUB8JZwAAudkbzxmAAD+7c1iH5Jjc9BDAAA="},"notion.so/image/pic1.zhimg.com%2Fv2-b044ecf48648f83743602ddf9ae4a7ac_r.jpg":{"originalWidth":2000,"originalHeight":924,"dataURIBase64":"data:image/webp;base64,UklGRjAAAABXRUJQVlA4ICQAAACwAQCdASoQAAcABUB8JZQAAqsHVRAAAP7fhaOWgJ57eTXZAAA="},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbmwsvsyz0j31py0ryk4x.jpg":{"originalWidth":2000,"originalHeight":902,"dataURIBase64":"data:image/webp;base64,UklGRjIAAABXRUJQVlA4ICYAAABwAQCdASoQAAcABUB8JZ2HgAGIAAD+8E4TH1KOAa9t3bA1kAAAAA=="},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbmwzxix54j31so0ucjz7.jpg":{"originalWidth":2000,"originalHeight":938,"dataURIBase64":"data:image/webp;base64,UklGRjQAAABXRUJQVlA4ICgAAAAwAQCdASoQAAgABUB8JZwAA3AA/vB+uXCjcusQ6TyL/pUJRfrOAAAA"},"notion.so/image/pica.zhimg.com%2Fv2-864713c7a8ec958b0293e9feb3238e66_720w.jpg":{"originalWidth":2000,"originalHeight":1125,"dataURIBase64":"data:image/webp;base64,UklGRm4AAABXRUJQVlA4IGIAAADwAQCdASoQAAkABUB8JbACdADp/qHRQIAA4dxzwYUI31zmLkPO23tJCU8j9Wd+A5wxU0GaWBbAUQtGQ0DcJnLzUG1FbP7o7wr3hXv5lgSYSl+92q3m4ztSwArH8WcPzCAAAA=="},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbn2inqfv5j31aw0z2gz1.jpg":{"originalWidth":2000,"originalHeight":1495,"dataURIBase64":"data:image/webp;base64,UklGRkgAAABXRUJQVlA4IDwAAADQAQCdASoQAAwABUB8JZgAAuQDY9d6AAD+7d2UH3XbJIWPO70dX1er3GJB7G1Oi1PIA0U2gCZXvipwAAA="},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbn2n9bbttj31g00zi7jf.jpg":{"originalWidth":2000,"originalHeight":1365,"dataURIBase64":"data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAADQAQCdASoQAAsABUB8JZwAAxZhLTwcQAD+6yZupTEB4CUSQI59T7v+4Y4oAAAA"},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbn2qwfee0j31he0z2e0o.jpg":{"originalWidth":2000,"originalHeight":1313,"dataURIBase64":"data:image/webp;base64,UklGRkgAAABXRUJQVlA4IDwAAADQAQCdASoQAAsABUB8JaQAAp0jh5V2gAD+64SQ92av0QstgwYYWUgCTp926jDXItfARSLd5/TFNlZ0AAA="},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbnjogl30yj31ei0o4dpi.jpg":{"originalWidth":2000,"originalHeight":955,"dataURIBase64":"data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAADQAQCdASoQAAgABUB8JZQAApPd19b6YAD+15F3Ncva7+6bP2OQMzzDG7SFl4AA"},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbnjptfbquj31fq0l8wku.jpg":{"originalWidth":2000,"originalHeight":821,"dataURIBase64":"data:image/webp;base64,UklGRj4AAABXRUJQVlA4IDIAAACwAQCdASoQAAcABUB8JZQAApEtS0mAAP7x3Zd5js1nVz+2SpvE8TdaqcKJvXus3i4AAA=="},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbnl717wmhj316w0nutes.jpg":{"originalWidth":2000,"originalHeight":1111,"dataURIBase64":"data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACwAQCdASoQAAkABUB8JZwAAuQAz/IAAP7VEQVv/al6qMfxL4bbuOgSHlGiAAAA"},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbnla6gukkj31aw0fm441.jpg":{"originalWidth":2000,"originalHeight":666,"dataURIBase64":"data:image/webp;base64,UklGRjgAAABXRUJQVlA4ICwAAACQAQCdASoQAAUABUB8JaQAAu0QBgAA/ursdi+S+bJjXiO+KY/CTDe3AAAAAA=="},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbnn0mq2t1j319u0m2dnv.jpg":{"originalWidth":2000,"originalHeight":962,"dataURIBase64":"data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACwAQCdASoQAAgABUB8JaQAAxZhCuaAAP7t3iOW7NiDu1uDSU8uKpBNx7EqqYAA"},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbnnk71j4wj314y0ikwmr.jpg":{"originalWidth":2000,"originalHeight":906,"dataURIBase64":"data:image/webp;base64,UklGRj4AAABXRUJQVlA4IDIAAACwAQCdASoQAAcABUB8JaQAAqHnh2iAAP7v1im1yU/XTL5PcNV74eqN+7lbpUdWM9AAAA=="},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbnnsf8ks4j317q0k2wh7.jpg":{"originalWidth":2000,"originalHeight":917,"dataURIBase64":"data:image/webp;base64,UklGRiwAAABXRUJQVlA4ICAAAACQAQCdASoQAAcABUB8JaQAAudFrAAA/vHebjYRAY+AAA=="},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbno0rtbgej30yw0bm0ua.jpg":{"originalWidth":2000,"originalHeight":666,"dataURIBase64":"data:image/webp;base64,UklGRjAAAABXRUJQVlA4ICQAAACQAQCdASoQAAUABUB8JaQAAsfyvcAA/u/XQTXzBfgvfXUQAAA="},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbnor1eessj31v00rgk3o.jpg":{"originalWidth":2000,"originalHeight":819,"dataURIBase64":"data:image/webp;base64,UklGRjIAAABXRUJQVlA4ICYAAACwAQCdASoQAAcABUB8JZwAAusooL70AP7tR2avGphgyVj2dAAAAA=="},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbkofx9925j31040my42u.jpg":{"originalWidth":2000,"originalHeight":1271,"dataURIBase64":"data:image/webp;base64,UklGRjQAAABXRUJQVlA4ICgAAAAwAQCdASoQAAoABUB8JZQAA3AA/vBNe7Pr2YZOuhfObAEVAAEwAAAA"},"notion.so/image/clivern.com%2Fwp-content%2Fuploads%2F2021%2F01%2F0_YZIFWK0uy9s_BWVW.jpeg":{"originalWidth":2000,"originalHeight":1333,"dataURIBase64":"data:image/webp;base64,UklGRlYAAABXRUJQVlA4IEoAAAAwAgCdASoQAAsABUB8JYwCdAELV1gytlScUAD+L3yNFFJK3QMfzIXxImbHNlYsmb3z0De5drFR5gRYEdd6wk7xRsW9J1UeiH8IAA=="},"notion.so/image/clivern.com%2Fwp-content%2Fuploads%2F2015%2F08%2Fcropped-icon-192x192.png":{"originalWidth":2000,"originalHeight":2000,"dataURIBase64":"data:image/webp;base64,UklGRowAAABXRUJQVlA4WAoAAAAQAAAADwAADwAAQUxQSE4AAAARL0AkQJrjENqsRkTQ3YBpJMmq5r3/A2DPnj17vPyDufs5RPR/AvjtR7O+xMwLK+BTJ9yqhU6FECkHPCIzwCKSq0LEK94T826tLrQiZ5lWUDggGAAAADABAJ0BKhAAEAAFQHwlpAADcAD+8ObAAA=="},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hblvq2ildqj31dm0dw493.jpg":{"originalWidth":2000,"originalHeight":560,"dataURIBase64":"data:image/webp;base64,UklGRj4AAABXRUJQVlA4IDIAAACwAQCdASoQAAQABUB8JbAAAudJ3/oAAP7tSe6PsUkHzDrlym84Xf/2t61e2aNPoAAAAA=="},"notion.so/image/notion.so%2Fimages%2Fpage-cover%2Fgradients_8.png":{"originalWidth":2000,"originalHeight":2000,"dataURIBase64":"data:image/webp;base64,UklGRjwAAABXRUJQVlA4IDAAAAAQAgCdASoQABAABUB8JbACdAD0rs0LxfQAAN2Q17E9Qv7sg8pZvQfdquRRRGrAAAA="},"notion.so/image/s3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F020bfbea-dbb3-44dd-b5aa-5048fb71462f%2FIMG_2189.jpg":{"originalWidth":2000,"originalHeight":2003,"dataURIBase64":"data:image/webp;base64,UklGRmoAAABXRUJQVlA4IF4AAADQAQCdASoQABAABUB8JbACdAERATxWoAD+0Vlxx+kOh3kDC0Z3s4OjUZzRpnTiXUiN5qtuCLGbw3Q3meKHmbJDj3X9KoWlb/kas/KasMX31nkEcPwD09TPGVsO8AAA"}}},"pageId":"f8e41082-81f4-4d47-a6f3-3489e7c3453c"},"__N_SSG":true}