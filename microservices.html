<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- iOS Safari -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<!-- Chrome, Firefox OS and Opera Status Bar Color -->
<meta name="theme-color" content="#FFFFFF">
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css">
<link rel="stylesheet" type="text/css"
  href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.19.0/themes/prism.min.css">
<link rel="stylesheet" type="text/css" href="css/SourceSansPro.css">
<link rel="stylesheet" type="text/css" href="css/theme.css">
<link rel="stylesheet" type="text/css" href="css/notablog.css">
<!-- Favicon -->

  <link rel="shortcut icon" href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F755439b9-9583-43c3-b282-b5d6af4102f1%2Fcodeedit.svg?table=collection&amp;id=3e8bb3a8-a159-4df7-963b-d7260c12c7f3">

<style>
  :root {
    font-size: 20px;
  }
</style>
  <title>微服务架构设计模式&nbsp;|&nbsp;yangsoon の 自嗨</title>
  <meta property="og:type" content="blog">
  <meta property="og:title" content="微服务架构设计模式">
  
    <meta name="description" content="什么这样设计微服务架构 —《微服务架构设计模式》读书笔记">
    <meta property="og:description" content="什么这样设计微服务架构 —《微服务架构设计模式》读书笔记">
  
  
    <meta property="og:image" content="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F6fbdb8ce-00a3-4976-94ee-6ef50cd77194%2Fmse_%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%95%E6%93%8E.svg?table=block&amp;id=bd473a5c-49ac-4671-8417-ebf9e546a68a">
  
  <style>
    .DateTagBar {
      margin-top: 1.0rem;
    }
  </style>
</head>

<body>
  <nav class="Navbar">
  <a href="index.html">
    <div class="Navbar__Btn">
      
        <span><img class="inline-img-icon" src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F755439b9-9583-43c3-b282-b5d6af4102f1%2Fcodeedit.svg?table=collection&amp;id=3e8bb3a8-a159-4df7-963b-d7260c12c7f3"></span>&nbsp;
      
      <span>Home</span>
    </div>
  </a>
  
    
  
    
  
    
  
    
      <span class="Navbar__Delim">&centerdot;</span>
      <a href="about.html">
        <div class="Navbar__Btn">
          
            <span><img class="inline-img-icon" src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fe8540b67-25be-41a9-8a21-2d3e20712d66%2FIMG_2189.jpg?table=block&amp;id=4bf8bf12-ac4b-47a5-a71e-d5892342c49c"></span>&nbsp;
          
          <span>About</span>
        </div>
      </a>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
</nav>
  <header class="Header">
    
    <div class="Header__Spacer Header__Spacer--NoCover">
    </div>
    
      <div class="Header__Icon">
        <span><img class="inline-img-icon" src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F6fbdb8ce-00a3-4976-94ee-6ef50cd77194%2Fmse_%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%BC%95%E6%93%8E.svg?table=block&amp;id=bd473a5c-49ac-4671-8417-ebf9e546a68a"></span>
      </div>
    
    <h1 class="Header__Title">微服务架构设计模式</h1>
    
      <div class="DateTagBar">
        
          <span class="DateTagBar__Item DateTagBar__Date">Posted on Sun, May 1, 2022</span>
        
        
          <span class="DateTagBar__Item DateTagBar__Tag DateTagBar__Tag--brown">
            <a href="tag/microservices.html">microservices</a>
          </span>
        
          <span class="DateTagBar__Item DateTagBar__Tag DateTagBar__Tag--orange">
            <a href="tag/java.html">java</a>
          </span>
        
          <span class="DateTagBar__Item DateTagBar__Tag DateTagBar__Tag--green">
            <a href="tag/kubernetes.html">kubernetes</a>
          </span>
        
      </div>
    
  </header>
  <article id="https://www.notion.so/bd473a5c49ac46718417ebf9e546a68a" class="PageRoot PageRoot--FullWidth"><h2 id="https://www.notion.so/27146a4c36b34d21849ed978dbbb504d" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/27146a4c36b34d21849ed978dbbb504d"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">为什么迈向微服务架构</span></span></h2><h3 id="https://www.notion.so/8861d8694bc34c419d67456eb733d74d" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/8861d8694bc34c419d67456eb733d74d"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">什么是单体地域</span></span></h3><div id="https://www.notion.so/81dee2236f3746b59539b160196903a9" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">相信你在工作的时候，一定遇到过这样的项目：这个系统不管是功能实现和代码量上都过于庞大，甚至团队内没有一个人能够完全理解他，新增功能和修复bug都需要谨小慎微，每次更改都会让代码更加难懂和维护。而且当项目迭代功能件的时候也是一次软件工程的大爆炸，大部分开发者对同一个代码仓库修改，增加了代码冲突和意料不到的bug的出现次数，项目的交付周期也会被严重拖长。</span></span></p></div><ol class="NumberedListWrapper"><li id="https://www.notion.so/7a1ddc6a91b04b679c400c28c935fbe1" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString">应用过度复杂</span></span></li><li id="https://www.notion.so/53b3afa10b4443ff8784404dc604277f" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString">开发速度缓慢</span></span></li><li id="https://www.notion.so/7eb0768baaed4c00b03fdb854c69f318" class="NumberedList" value="3"><span class="SemanticStringArray"><span class="SemanticString">代码提交到实际部署的周期很长，容易出现问题</span></span></li><li id="https://www.notion.so/36868aa99e3a4cfe9a05282923834330" class="NumberedList" value="4"><span class="SemanticStringArray"><span class="SemanticString">横向扩展较难，不同模块对资源的需求不一致，有的需要大量内存，有的需要高性能的CPU资源</span></span></li><li id="https://www.notion.so/71fc59fd9bad4106833beea95d877386" class="NumberedList" value="5"><span class="SemanticStringArray"><span class="SemanticString">可靠性问题 (</span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorRed">完善的单测和e2e测试</mark></span><span class="SemanticString">)</span></span></li><li id="https://www.notion.so/06451c3017de4349b600d049f67c8ca4" class="NumberedList" value="6"><span class="SemanticStringArray"><span class="SemanticString">技术栈迭代。</span></span></li></ol><h3 id="https://www.notion.so/02b6979ff5c54b57b29cf50d2c8a6f05" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/02b6979ff5c54b57b29cf50d2c8a6f05"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">微服务架构</span></span></h3><div id="https://www.notion.so/b07d8ec892f543f28be80bcdbcf77479" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">软件架构对功能性需求影响不大，架构的重要性是他影响了应用的非功能需求，称为质量属性或者其他能力(单词通常以-ilities为结尾)。最显著的是软件交付的可维护性、可扩展性和可测试性。一个nb的团队可以通过代码模块化和编写全面的测试来保证应用的稳定性，但是在大型应用上的协同工作等问题还是无法避免。今天针对大型的复杂应用的开发，越来越多的共识趋向于考虑使用微服务架构。</span></span></p></div><div id="https://www.notion.so/40da6bb8109841f1ad4ff40f009fe0e9" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">如何给微服务下一个定义呢？很多文章给出的定义都局限在 “微” 这个字上，这是一个很不成熟的认知，Netflix的著名架构师Adrian把微服务定义为: 面向服务的架构，由松耦合和具有边界上下文的元素组成。这个定义也有些晦涩难懂。本文的作者通过一个简单的模型来描述微服务架构：</span></span></p></div><div id="https://www.notion.so/23b50ad9b99a4207a1986668631139be" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">一个微服务的架构能够符合上面描述的三维模型：</span></span></p></div><div id="https://www.notion.so/1e46b80ec37248cd92860b91852a7d49" class="Image Image--Normal"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fe55af596-b8fa-4fbd-a065-1f97410689ba%2FUntitled.png?width=1488&amp;table=block&amp;id=1e46b80e-c372-48cd-9286-0b91852a7d49"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fe55af596-b8fa-4fbd-a065-1f97410689ba%2FUntitled.png?width=1488&amp;table=block&amp;id=1e46b80e-c372-48cd-9286-0b91852a7d49" style="width:1488px"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><div id="https://www.notion.so/9b461579c9834715a7b0b05e376881a9" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">服务本质上是一个独立的应用程序，可以借助X或者Z轴进行扩展。作者给出的定义：把应用程序功能性分解为一组服务的架构风格，每个服务都是由一组专注的内聚的功能职责组成。</span></span></p></div><div id="https://www.notion.so/e27f51c0a53c495b8cefafb09d7ca18d" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">微服务架构能够带来的好处：</span></span></p></div><ol class="NumberedListWrapper"><li id="https://www.notion.so/f9ea392b0b824d239c1bb3c9fe9cd981" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString">CICD友好</span></span></li><li id="https://www.notion.so/e306cf67091442a9b09a212b2db0c764" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString">模块化管理服务，以为维护</span></span></li><li id="https://www.notion.so/26b82bc26a6446d394568f251838fa3e" class="NumberedList" value="3"><span class="SemanticStringArray"><span class="SemanticString">服务可以独立部署、独立扩展</span></span></li><li id="https://www.notion.so/0b97ad933b284acabd44fdf7095657f9" class="NumberedList" value="4"><span class="SemanticStringArray"><span class="SemanticString">实验和采样新技术</span></span></li><li id="https://www.notion.so/eb0ac56763594bf68980c04a3fd57342" class="NumberedList" value="5"><span class="SemanticStringArray"><span class="SemanticString">更好的容错性</span></span></li></ol><div id="https://www.notion.so/a415405450e24ddb87bbb04562c6fd9d" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">微服务架构带来的弊端：</span></span></p></div><ol class="NumberedListWrapper"><li id="https://www.notion.so/8e61a5f003b04f8e94c613e42b053f5c" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString">拆分和定义是一项挑战，现在微服务架构的拆分很多时候都会依据DDD模型，如果拆分不好的话，会构建出一个分布式的单体应用...</span></span></li><li id="https://www.notion.so/06ad06e02f9f4cb3898031ac7ed4ad18" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString">服务拆分成分布式系统后的各种复杂性也随之而来</span></span><ol class="NumberedListWrapper"><li id="https://www.notion.so/3bda9de7716643c2be9a30512ed86293" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString">多个服务之间的通信</span></span></li><li id="https://www.notion.so/ba70b9344682428cab3c5d3bc188d6b9" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString">服务之间的数据一致性</span></span></li><li id="https://www.notion.so/f165ed0d330b4221b71547700753b75a" class="NumberedList" value="3"><span class="SemanticStringArray"><span class="SemanticString">自动化测试</span></span></li><li id="https://www.notion.so/aa921cf08d754b0aa414faadf9e099aa" class="NumberedList" value="4"><span class="SemanticStringArray"><span class="SemanticString">运维复杂性，需要高度自动化的运维设施</span></span></li></ol></li></ol><h2 id="https://www.notion.so/0191d56f311c4bf78afb9e9065050824" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/0191d56f311c4bf78afb9e9065050824"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">如何拆分我的服务</span></span></h2><div id="https://www.notion.so/01223cd4c5ec413a95320b1051730837" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">拆分微服务的目标：最终设计的微服务能够由小团队开发，交付时间最短，和其他团队合作最少，如果你因为其他服务的变更不断修改更新自己负责的服务或者自己的服务会导致其他服务同步更新那表明你构建的可能是一个分布式的单体应用。</span></span></p></div><h3 id="https://www.notion.so/0f3aaa88006046f2bd17662e81c9ca4a" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/0f3aaa88006046f2bd17662e81c9ca4a"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">拆分策略和指导原则</span></span></h3><ol class="NumberedListWrapper"><li id="https://www.notion.so/27f1e235f67d4473942e3d13c880245b" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString">根据业务能力拆分服务</span></span></li><li id="https://www.notion.so/c689f8d07740477cb7472898181d4d6d" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString">依据领域模型拆分服务</span></span></li><li id="https://www.notion.so/e12fc9507f7340f680cdd9078d31ffef" class="NumberedList" value="3"><span class="SemanticStringArray"><span class="SemanticString">单一职责原则 一个服务只做一件事</span></span></li><li id="https://www.notion.so/3f05bb22495e4e52968b7175900cbd52" class="NumberedList" value="4"><span class="SemanticStringArray"><span class="SemanticString">闭包原则 一个包内的类相关联</span></span></li></ol><h3 id="https://www.notion.so/641392fb57d84c989e58509779539b0c" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/641392fb57d84c989e58509779539b0c"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">拆分微服务的难点</span></span></h3><ol class="NumberedListWrapper"><li id="https://www.notion.so/5f9bab9ca007414e905dbd904cf54ae4" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString">网络延迟，服务拆分之后，导致不同的应用之间会有大量的往返调用，合理的拆分能够避免这样的情况。</span></span></li><li id="https://www.notion.so/c655495888294a8088f6eca43781f551" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString">同步进程之间通信导致可用性降低，使用异步调用来提升可用性（使用消息队列）。</span></span></li><li id="https://www.notion.so/519aaf0aa52e4cd982d1c8a9ee4efbad" class="NumberedList" value="3"><span class="SemanticStringArray"><span class="SemanticString">服务之间维持数据一致性，需要使用分布式事务解决</span></span></li><li id="https://www.notion.so/25c965cb378148fa8c14910fcce0a1c4" class="NumberedList" value="4"><span class="SemanticStringArray"><span class="SemanticString">获取一致性视图</span></span></li><li id="https://www.notion.so/95a4b4cc5cb74c7b9190c7bf1f5e5f1c" class="NumberedList" value="5"><span class="SemanticStringArray"><span class="SemanticString">上帝类阻碍拆分，全局类，这个类包含了大部分业务行为相关的数据。</span></span></li></ol><h2 id="https://www.notion.so/164f20ab242b42c0a7734809833d3b53" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/164f20ab242b42c0a7734809833d3b53"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">微服务直接如何通信</span></span></h2><h3 id="https://www.notion.so/115ca47574bb4751bb3a14b9f47f9a31" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/115ca47574bb4751bb3a14b9f47f9a31"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">API兼容设计-以REST为例</span></span></h3><ol class="NumberedListWrapper"><li id="https://www.notion.so/d49e2c3d1cde4f85ab6bd219156ebcc7" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString">使用语义化版本控制规范设计API。</span></span><ol class="NumberedListWrapper"><li id="https://www.notion.so/19059530dc2a4648ac4900481ff3a69a" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString">把版本化作为前缀，处理不兼容性。</span></span></li><li id="https://www.notion.so/207837b1414443b880d1ff466b53cac0" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString">在HTTP请求头的 </span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Basics_of_HTTP/MIME_types">MIME类型</a></span><span class="SemanticString"> 中添加版本号。</span></span></li></ol></li></ol><h3 id="https://www.notion.so/72df47cb267d47228891717a1a20350c" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/72df47cb267d47228891717a1a20350c"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">消息的格式</span></span></h3><div id="https://www.notion.so/981b638341ec49ea824952bef064aded" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">消息格式影响API变更难易</span></span></p><div class="Text__Children"><ol class="NumberedListWrapper"><li id="https://www.notion.so/b83e4a6ac0a44bf584d1beec4f98f917" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString">基于文本的消息格式有：json(schema)、xml 这类格式可读性高，但是往往会过度冗长，网络传递开销大。</span></span></li><li id="https://www.notion.so/3773a54c657649d6a5667403883d57eb" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString">基于二进制的消息格式：pb、avro等，使用这样的传递方式会以特定的格式序列号消息，降低网络传输的开销，使用IDL(接口描述文件)描述接口。</span></span></li></ol></div></div><h3 id="https://www.notion.so/4dd6889b572c46c699534453797ed7fb" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/4dd6889b572c46c699534453797ed7fb"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">基于同步的远程过程调用模式的通信</span></span></h3><ol class="NumberedListWrapper"><li id="https://www.notion.so/b20db483e63e45c78c700ce19b1e7032" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString">RESTful风格的API，REST的关键概念是资源，它通常表示单个业务对象，REST使用HTTP动词来操作资源。</span></span><div id="https://www.notion.so/1465546e5a944a00a48db9d96f691eaf" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">REST有如下好处：</span></span></p></div><ol class="NumberedListWrapper"><li id="https://www.notion.so/26aca48578d8464bab63eddedda09a0a" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString">简单，容易理解和设计</span></span></li><li id="https://www.notion.so/76a90f2d48da427088fbb935ef8ee64b" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString">方便调试，直接使用curl之类的指令测试</span></span></li><li id="https://www.notion.so/424fd736ef494b7fa73e5eb59654cfcf" class="NumberedList" value="3"><span class="SemanticStringArray"><span class="SemanticString">http协议对防火墙友好</span></span></li><li id="https://www.notion.so/c720b840fd724c58b660932c0a55f7d4" class="NumberedList" value="4"><span class="SemanticStringArray"><span class="SemanticString">不需要中间代理</span></span></li></ol><div id="https://www.notion.so/9f66b01ddfbd41deb185d39479e8eb3b" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">REST有如下弊端：</span></span></p></div><ol class="NumberedListWrapper"><li id="https://www.notion.so/4b190220fdc1457db8d8b09682203556" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString">只支持请求/相应方式的通信</span></span></li><li id="https://www.notion.so/e9d4e76d63f7453e9d99ec4cd27f3ad5" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString">可能导致可用性降低，没有代理缓冲消息</span></span></li><li id="https://www.notion.so/339a7a058f594b30beb624522d9d3740" class="NumberedList" value="3"><span class="SemanticStringArray"><span class="SemanticString">需要服务发现机制</span></span></li><li id="https://www.notion.so/4a83b11e88db4a9cb05e212a95d8dd27" class="NumberedList" value="4"><span class="SemanticStringArray"><span class="SemanticString">单个请求中处理多个资源比较困难，描述能力差</span></span></li></ol></li><li id="https://www.notion.so/f77af4f529fe47b4ab547859863ee5ea" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString">GRPC风格</span></span><div id="https://www.notion.so/11fcda23c27a4e0097a75e329dfdf876" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">好处：</span></span></p></div><ol class="NumberedListWrapper"><li id="https://www.notion.so/c5bc766037fb4b93b793e551289c1dfd" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString">设计具有复杂更新操作的API非常简单。</span></span></li><li id="https://www.notion.so/0dd4a121fdea48acb8aa4b67e4006b7e" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString">消息传递高效</span></span></li><li id="https://www.notion.so/135b4a4b0bf24a66a08fb703262f98b1" class="NumberedList" value="3"><span class="SemanticStringArray"><span class="SemanticString">支持双向流式消息传递</span></span></li></ol><div id="https://www.notion.so/b8abee672efe4b93a4ad32e7a8d50939" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">弊端：</span></span></p></div><ol class="NumberedListWrapper"><li id="https://www.notion.so/7c2122f0cc1042b3a573713339e68a92" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString">基于HTTP2，旧式防火墙不支持</span></span></li></ol></li></ol><h3 id="https://www.notion.so/0d00d02f0384497e912c7aecc025fec3" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/0d00d02f0384497e912c7aecc025fec3"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorBlue">微服务模式一-熔断器</mark></span></span></h3><div id="https://www.notion.so/bf9a28cf3b8c41cd81298e209e50aaca" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">这里我们遇到了微服务架构设计模式中的第一个模式：熔断器模式，在分布式系统中一个服务向另一个系统发送请求的时候，永远会遇到局部故障的风险，客户端等待请求响应。为了应对这些问题，我们需要：</span></span></p></div><ol class="NumberedListWrapper"><li id="https://www.notion.so/0295a02fd23c45b384d720a75b8c28ce" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString">设置超时时间</span></span></li><li id="https://www.notion.so/2c217da850ee40b5acfca627902da867" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString">限制请求数量 </span></span></li><li id="https://www.notion.so/af6ae5ca6dbc41cabbb5edce2b8c3ef9" class="NumberedList" value="3"><span class="SemanticStringArray"><span class="SemanticString">熔断监控请求成功和失败的次数，失败过多就启动熔断器，设置静默期后续客户端需要重试自恢复。</span></span></li></ol><div id="https://www.notion.so/6f4c8a1af7f14b968bfb27bb6d3ad3fc" class="Image Image--Normal"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F73d534ca-2c70-4ecd-937c-2548b56dfd28%2FUntitled.png?width=450&amp;table=block&amp;id=6f4c8a1a-f7f1-4b96-8bfb-27bb6d3ad3fc"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F73d534ca-2c70-4ecd-937c-2548b56dfd28%2FUntitled.png?width=450&amp;table=block&amp;id=6f4c8a1a-f7f1-4b96-8bfb-27bb6d3ad3fc" style="width:450px"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><div id="https://www.notion.so/19518f8d4d3b430fbd11464bb89d2f20" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">Java生态：</span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://github.com/Netflix/Hystrix"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorRed"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">Hystrix</strong></mark></a></span></span></p></div><div id="https://www.notion.so/bbc906d172dc451dad9326ceac573bf9" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">K8s生态：</span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://istio.io/latest/zh/docs/tasks/traffic-management/circuit-breaking/">istio 熔断</a></span><span class="SemanticString">、</span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://blog.cong.moe/post/2022-04-08-dapr-resiliency/">dapr</a></span><span class="SemanticString"> </span></span></p></div><h3 id="https://www.notion.so/a750724dea3f4d739262a4a862403e48" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/a750724dea3f4d739262a4a862403e48"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorBlue">微服务模式二-服务发现</mark></span></span></h3><div id="https://www.notion.so/6a5debcf19ea4e3cb10dfa3c3696e1a4" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">当你调用其他服务的时候，需要知道其他服务提供方的网络位置，这里就出现了微服务架构中的另一个模式：服务发现。在微服务架构下，主要有三种角色：服务提供者（RPC Server）、服务消费者（RPC Client）和服务注册中心（Registry）。常见的服务发现模式有2种，基于应用层的服务发现和平台层提供的服务发现。</span></span></p><div class="Text__Children"><div id="https://www.notion.so/6350cc8de7cf4d23909f453e5472af6c" class="Image Image--Normal"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fc9e14584-ecf7-48b0-aa9f-6635068e3f13%2FUntitled.png?width=480&amp;table=block&amp;id=6350cc8d-e7cf-4d23-909f-453e5472af6c"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fc9e14584-ecf7-48b0-aa9f-6635068e3f13%2FUntitled.png?width=480&amp;table=block&amp;id=6350cc8d-e7cf-4d23-909f-453e5472af6c" style="width:480px"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div></div></div><ol class="NumberedListWrapper"><li id="https://www.notion.so/5f8f796ea9a14023a4c885ebaae9daed" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString">应用层服务发现(好处是平台无关，弊端是多语言支持)，直接和服务注册表交互 </span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorRed"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">Eureka 作为注册中心，Ribbon作为客户端发现服务，Spring Cloud可以很好的合Eureka交互，注册服务。</strong></mark></span></span></li><li id="https://www.notion.so/2c69bd10594d466fbbe47baa1c614221" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString">依赖基础设施 k8s的service 域名指向服务，dns负载均衡 。</span></span></li></ol><div id="https://www.notion.so/1c31a67a0a37495081da6a58076dce76" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">Java生态：Eureka</span></span></p></div><blockquote id="https://www.notion.so/ca61e4a9f3e64cf091d3348a39fb349e" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString">Eureka 与 Ribbon 都是 Netflix 提供的微服务组件，分别用于服务注册与发现、负载均衡。同时，这两者均属于 spring cloud netflix 体系，和 spring cloud 无缝集成，也正由于此被大家所熟知。Eureka 本身是服务注册发现组件，实现了完整的 Service Registry 和 Service Discovery。Ribbon 则是一款负载均衡组件，那它和服务发现又有什么关系呢？负载均衡在整个微服务的调用模型中是紧挨着服务发现的，而 Ribbon 这个框架它其实是起到了开发者服务消费行为与底层服务发现组件 Eureka 之间桥梁的作用。从严格概念上说 Ribbon 并不是做服务发现的，但是由于 Netflix 组件的松耦合，Ribbon 需要对 Eureka 的缓存服务列表进行类似&quot;服务发现&quot;的行为，从而构建自己的负载均衡列表并及时更新，也就是说 Ribbon 中的&quot;服务发现&quot;的宾语变成了 Eureka(或其他服务发现组件)。</span></span></blockquote><div id="https://www.notion.so/a0d640ffb5334a06b86882006682f7b9" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">K8s生态：svc</span></span></p></div><div id="https://www.notion.so/98705cd0923e4cd19de02f3e4e355bb0" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">语言无关：etcd、redis、</span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://www.consul.io/">consul</a></span></span></p></div><h3 id="https://www.notion.so/4c07e88d153e4e9fae9b2d2049098ad9" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/4c07e88d153e4e9fae9b2d2049098ad9"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">基于异步消息模式的通信</span></span></h3><ol class="NumberedListWrapper"><li id="https://www.notion.so/700e8427f1894eeb995dccf947a6bbd9" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString">无代理消息 zeromq：zeromq其实是一组协议</span></span></li><li id="https://www.notion.so/d08cd6a1346a4955b4ee634f7c0d6ff5" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString">基于代理的消息</span></span><div id="https://www.notion.so/b13c90f168ab4e0586c74fd37177a877" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">好处：</span></span></p></div><ol class="NumberedListWrapper"><li id="https://www.notion.so/a78af217d8994808b86014ded0643fc8" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString">松耦合</span></span></li><li id="https://www.notion.so/e63b073c3ec744e4bb0baadf39bca4ae" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString">消息缓存</span></span></li><li id="https://www.notion.so/ab8a0f7481e6412e930353c1b226d66e" class="NumberedList" value="3"><span class="SemanticStringArray"><span class="SemanticString">灵活通信</span></span></li></ol><div id="https://www.notion.so/532d4de7be3946f0ba48bd9c438b0fb3" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">弊端：</span></span></p></div><ol class="NumberedListWrapper"><li id="https://www.notion.so/81bac30d7ad944718cd016b970bc5ee8" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString">额外的运维操作</span></span></li></ol></li></ol><div id="https://www.notion.so/759e303b9b2c4bf298016505a037b595" class="Image Image--Normal"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fcd89a85e-c7d3-4b17-9fef-953e5a659fa1%2FUntitled.png?width=540&amp;table=block&amp;id=759e303b-9b2c-4bf2-9801-6505a037b595"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fcd89a85e-c7d3-4b17-9fef-953e5a659fa1%2FUntitled.png?width=540&amp;table=block&amp;id=759e303b-9b2c-4bf2-9801-6505a037b595" style="width:540px"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><div id="https://www.notion.so/ac5191680e3a4b95ba74e0fb9eaff76e" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">异步消息产品：kafka、rockmq、zeromq</span></span></p></div><h3 id="https://www.notion.so/8129c189c5644821ab95c2746efd967f" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/8129c189c5644821ab95c2746efd967f"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">事务性消息</span></span></h3><div id="https://www.notion.so/dc28c19065df44e9aeb90512af5171b9" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">服务通常需要在更新数据库的事务中发布消息。数据库更新和消息发送都必须在事务中进行。否则，服务可能会更新数据库，然后在发送消息之前崩溃。如果服务不以原子方式执行这两个操作，则类似的故障可能使系统处于不一致状态。</span></span></p></div><div id="https://www.notion.so/0bdda1b164054703b0406c16ff0c4c20" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">使用数据库表作为消息队列</strong></span></span></p></div><div id="https://www.notion.so/899457ea0b4f4359b8cd3869df6d0ae0" class="Image Image--Normal"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F586753e5-3475-4178-bfab-eaf237fb2594%2FUntitled.png?width=513&amp;table=block&amp;id=899457ea-0b4f-4359-b8cd-3869df6d0ae0"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F586753e5-3475-4178-bfab-eaf237fb2594%2FUntitled.png?width=513&amp;table=block&amp;id=899457ea-0b4f-4359-b8cd-3869df6d0ae0" style="width:513px"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><div id="https://www.notion.so/d78cc16ee38c45cfb9c433eed62b9623" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">使用事务日志拖尾模式发布事件</strong></span></span></p></div><div id="https://www.notion.so/e1283d27aa2d4178a020fffdfdacaf7a" class="Image Image--Normal"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F47fd587c-434b-48cc-b42c-6ea698e4f51c%2FUntitled.png?width=415&amp;table=block&amp;id=e1283d27-aa2d-4178-a020-fffdfdacaf7a"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F47fd587c-434b-48cc-b42c-6ea698e4f51c%2FUntitled.png?width=415&amp;table=block&amp;id=e1283d27-aa2d-4178-a020-fffdfdacaf7a" style="width:415px"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><h3 id="https://www.notion.so/dbaab7741337415a8542dcda9c7cd2fd" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/dbaab7741337415a8542dcda9c7cd2fd"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">使用异步消息提高可用性</strong></strong></span></span></h3><div id="https://www.notion.so/cd1daa77e3a84b199b87103b277d4d24" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">同步消息会降低可用性</strong></strong></span></span></p></div><div id="https://www.notion.so/61c8da3a99de451f8aaa87a27d5564ad" class="Image Image--Normal"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F4bc9383a-fb18-4cc3-8615-90efc2d4f5f8%2FUntitled.png?width=542&amp;table=block&amp;id=61c8da3a-99de-451f-8aaa-87a27d5564ad"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F4bc9383a-fb18-4cc3-8615-90efc2d4f5f8%2FUntitled.png?width=542&amp;table=block&amp;id=61c8da3a-99de-451f-8aaa-87a27d5564ad" style="width:542px"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><div id="https://www.notion.so/e7b3a64a7b5941f09c53140eb1a61c37" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">使用异步交互模式</strong></span></span></p></div><div id="https://www.notion.so/657925c141ce459c9fd6e45acf8f7aba" class="Image Image--Normal"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fc6354aaa-0eb1-406d-865c-076afe9e6075%2FUntitled.png?width=587&amp;table=block&amp;id=657925c1-41ce-459c-9fd6-e45acf8f7aba"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fc6354aaa-0eb1-406d-865c-076afe9e6075%2FUntitled.png?width=587&amp;table=block&amp;id=657925c1-41ce-459c-9fd6-e45acf8f7aba" style="width:587px"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><h2 id="https://www.notion.so/79ddfcb1b2d54c3d9f5baaee9315bcf8" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/79ddfcb1b2d54c3d9f5baaee9315bcf8"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">分布式事务-</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">Saga 分布式事务模式</strong></strong></span></span></h2><h3 id="https://www.notion.so/3829140377c042478163edfe0b15d987" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/3829140377c042478163edfe0b15d987"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">协同式</span></span></h3><div id="https://www.notion.so/2e4a621cb2ab445c836958a50b66099a" class="Image Image--Normal"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fe18f3b32-17a2-4212-a429-3706001783d2%2FUntitled.png?width=864&amp;table=block&amp;id=2e4a621c-b2ab-445c-8369-58a50b66099a"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fe18f3b32-17a2-4212-a429-3706001783d2%2FUntitled.png?width=864&amp;table=block&amp;id=2e4a621c-b2ab-445c-8369-58a50b66099a" style="width:864px"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><h3 id="https://www.notion.so/d9eba82ef8644ba2a1e518c49cfb9d26" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/d9eba82ef8644ba2a1e518c49cfb9d26"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">编排式</span></span></h3><div id="https://www.notion.so/f2b2928e03e5488db7616e7dfd27743e" class="Image Image--Normal"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F1743ff54-d461-4016-a1a3-b13f7e41cd59%2FUntitled.png?width=864&amp;table=block&amp;id=f2b2928e-03e5-488d-b761-6e7dfd27743e"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F1743ff54-d461-4016-a1a3-b13f7e41cd59%2FUntitled.png?width=864&amp;table=block&amp;id=f2b2928e-03e5-488d-b761-6e7dfd27743e" style="width:864px"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><div id="https://www.notion.so/688f035fe98f47fab6d1d5483b2652b1" class="Bookmark"><a href="https://lovexiaoe.github.io/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-4.sagas%E5%A4%84%E7%90%86%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1"><h5 class="Bookmark__Title">微服务设计模式-sagas处理分布式事务</h5><p class="Bookmark__Desc">saga：使用一系列通过异步消息通信的本地事务，维持数据的一致性。系统操作触发sage的第一步，一个本地事务完成后，接着执行下 一个本地事务。 sage在多个服务之间处理事务时，缺少了传统事务的隔离性（读未提交，读已提交，可重复度，序列化），会导致存在并发问题，和传统 的并发问题一样会导致数据不可预测。 下图是使用saga来创建订单，创建订单时，会牵扯到其他服务的事务。如下图： ...</p><p class="Bookmark__Link">https://lovexiaoe.github.io/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-4.sagas%E5%A4%84%E7%90%86%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1</p></a></div><div></div><div id="https://www.notion.so/9140fef645ac4d7bb1190c17e7dc6cdd" class="Bookmark"><a href="https://www.sofastack.tech/blog/sofa-meetup-3-seata-retrospect/"><h5 class="Bookmark__Title">分布式事务 Seata Saga 模式首秀以及三种模式详解 | Meetup#3 回顾</h5><p class="Bookmark__Desc">作者：屹远（陈龙），蚂蚁金服分布式事务核心研发 。 本文根据 8月11日 SOFA Meetup#3 广州站 《分布式事务 Seata 及其三种模式详解》主题分享整理，着重分享分布式事务产生的背景、理论基础，以及 Seata 分布式事务的原理以及三种模式（AT、TCC、Saga）的分布式事务实现。 本次分享的视频回顾以及 PPT 查看地址： https://tech.antfin.com/community/activities/779/review 蚂蚁金服的业务数据库起初是单库单表，但随着业务数据规模的快速发展，数据量越来越大，单库单表逐渐成为瓶颈。所以我们对数据库进行了水平拆分，将原单库单表拆分成数据库分片。 如下图所示，分库分表之后，原来在一个数据库上就能完成的写操作，可能就会跨多个数据库，这就产生了跨数据库事务问题。 在业务发展初期，&quot;一块大饼&quot;的单业务系统架构，能满足基本的业务需求。但是随着业务的快速发展，系统的访问量和业务复杂程度都在快速增长，单系统架构逐渐成为业务发展瓶颈，解决业务系统的高耦合、可伸缩问题的需求越来越强烈。 如下图所示，蚂蚁金服按照面向服务架构（SOA）的设计原则，将单业务系统拆分成多个业务系统，降低了各系统之间的耦合度，使不同的业务系统专注于自身业务，更有利于业务的发展和系统容量的伸缩。 业务系统按照服务拆分之后，一个完整的业务往往需要调用多个服务，如何保证多个服务间的数据一致性成为一个难题。 两阶段提交协议：事务管理器分两个阶段来协调资源管理器，第一阶段准备资源，也就是预留事务所需的资源，如果每个资源管理器都资源预留成功，则进行第二阶段资源提交，否则协调资源管理器回滚资源。 TCC（Try-Confirm-Cancel） 实际上是服务化的两阶段提交协议，业务开发者需要实现这三个服务接口，第一阶段服务由业务代码编排来调用 Try 接口进行资源预留，所有参与者的 Try 接口都成功了，事务管理器会提交事务，并调用每个参与者的 Confirm 接口真正提交业务操作，否则调用每个参与者的 Cancel 接口回滚事务。 Saga 是一种补偿协议，在 Saga 模式下，分布式事务内有多个参与者，每一个参与者都是一个冲正补偿服务，需要用户根据业务场景实现其正向操作和逆向回滚操作。 分布式事务执行过程中，依次执行各参与者的正向操作，如果所有正向操作均执行成功，那么分布式事务提交。如果任何一个正向操作执行失败，那么分布式事务会退回去执行前面各参与者的逆向回滚操作，回滚已提交的参与者，使分布式事务回到初始状态。 Saga 理论出自 Hector &amp; Kenneth 1987发表的论文 Sagas。 Saga 正向服务与补偿服务也需要业务开发者实现。 Seata（Simple Extensible Autonomous Transaction</p><p class="Bookmark__Link">https://www.sofastack.tech/blog/sofa-meetup-3-seata-retrospect/</p></a></div><h2 id="https://www.notion.so/4ec6212df76048e5b0310e899c594e4e" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/4ec6212df76048e5b0310e899c594e4e"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">在微服务架构中实现查询</span></span></h2><h2 id="https://www.notion.so/ac9e1c3afd504b6dbc45b0fb9b61d5fe" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/ac9e1c3afd504b6dbc45b0fb9b61d5fe"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">API GateWay</span></span></h2><div id="https://www.notion.so/a50baae9d8b0482fb2f6ad3d37321178" class="Bookmark"><a href="https://lovexiaoe.github.io/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-8.%E5%A4%96%E9%83%A8api%E6%A8%A1%E5%BC%8F"><h5 class="Bookmark__Title">微服务设计模式-外部api</h5><p class="Bookmark__Desc">一个微服务系统需要提供给外部调用的api，这些api可能有如下一些类型： web应用，例如，erp后台管理系统等。 运行在浏览器上的js应用。 手机端：app、小程序等。 第三方应用。 web应用通常运行在防火墙内，所以会在高宽带、低延迟的LAN上访问服务。其他运行在防护墙外，一般通过低宽带、高延迟的因特网或者移动 网络访问服务。 ...</p><p class="Bookmark__Link">https://lovexiaoe.github.io/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-8.%E5%A4%96%E9%83%A8api%E6%A8%A1%E5%BC%8F</p></a></div><div id="https://www.notion.so/c4c62395372743949bca45fbe170cf2e" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">ZUUL SPIRNG CLOUD GATEWAY</strong></span></span></p></div><h2 id="https://www.notion.so/c43c00b7d5e84c6a8b84ee0529a83177" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/c43c00b7d5e84c6a8b84ee0529a83177"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">开发面向生产环境的微服务应用</span></span></h2><ol class="NumberedListWrapper"><li id="https://www.notion.so/d3a8bc6dbf2d4247bcc3da3db6a3ad1f" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString">数据安全性 Oauth</span></span><div id="https://www.notion.so/e6e03a1f8f024bab955aab68177f948b" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">身份验证，ram 访问授权，分配多个角色</span></span></p></div></li><li id="https://www.notion.so/890c7b31e0044f109f3a2f1d728635ab" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString">服务可配置性 配置中心 消息队列和数据库配置</span></span><div id="https://www.notion.so/c5322e25e4684bf0af8bd2f5337f33bc" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">生产和测试环境</span></span></p></div></li><li id="https://www.notion.so/af4ce30d3a324cc3a16adabc6415e01f" class="NumberedList" value="3"><span class="SemanticStringArray"><span class="SemanticString">可观测性</span></span><div id="https://www.notion.so/39ab02c7f5014270866f32703ae6e709" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">trace log metrics audit</span></span></p></div><ol class="NumberedListWrapper"><li id="https://www.notion.so/8bcbd59eeae248fd86198676d4025032" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString">健康检查API</span></span></li></ol><div id="https://www.notion.so/a31f847c6d504880b6cc8f1e6790d749" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div></li></ol></article>
  <footer class="Footer">
  <div>&copy; yangsoon の 自嗨 2019-2021</div>
  <div>&centerdot;</div>
  <div>Powered by <a href="https://github.com/dragonman225/notablog" target="_blank"
      rel="noopener noreferrer">Notablog</a>.
  </div>
</footer>
</body>

</html>