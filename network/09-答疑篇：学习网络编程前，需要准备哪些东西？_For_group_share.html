<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>09-ç­”ç–‘ç¯‡ï¼šå­¦ä¹ ç½‘ç»œç¼–ç¨‹å‰ï¼Œéœ€è¦å‡†å¤‡å“ªäº›ä¸œè¥¿ï¼Ÿ</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <style>
        html {
            color: #333;
            -webkit-text-size-adjust: 100%;
            -ms-text-size-adjust: 100%;
            text-rendering: optimizelegibility;
            font-family: Helvetica Neue, PingFang SC, Verdana, Microsoft Yahei, Hiragino Sans GB, Microsoft Sans Serif, WenQuanYi Micro Hei, sans-serif
        }

        html.borderbox *,
        html.borderbox :after,
        html.borderbox :before {
            box-sizing: border-box
        }

        article,
        aside,
        blockquote,
        body,
        button,
        code,
        dd,
        details,
        dl,
        dt,
        fieldset,
        figcaption,
        figure,
        footer,
        form,
        h1,
        h2,
        h3,
        h4,
        h5,
        h6,
        header,
        hr,
        input,
        legend,
        li,
        menu,
        nav,
        ol,
        p,
        pre,
        section,
        td,
        textarea,
        th,
        ul {
            margin: 0;
            padding: 0
        }

        article,
        aside,
        details,
        figcaption,
        figure,
        footer,
        header,
        menu,
        nav,
        section {
            display: block
        }

        audio,
        canvas,
        video {
            display: inline-block
        }

        body,
        button,
        input,
        select,
        textarea {
            font: 300 1em/1.8 PingFang SC, Lantinghei SC, Microsoft Yahei, Hiragino Sans GB, Microsoft Sans Serif, WenQuanYi Micro Hei, Helvetica, sans-serif
        }

        button::-moz-focus-inner,
        input::-moz-focus-inner {
            padding: 0;
            border: 0
        }

        table {
            border-collapse: collapse;
            border-spacing: 0
        }

        fieldset,
        img {
            border: 0
        }

        blockquote {
            position: relative;
            color: #999;
            font-weight: 400;
            border-left: 1px solid #1abc9c;
            padding-left: 1em;
            margin: 1em 3em 1em 2em
        }

        @media only screen and (max-width: 640px) {
            blockquote {
                margin: 1em 0
            }
        }

        abbr,
        acronym {
            border-bottom: 1px dotted;
            font-variant: normal
        }

        abbr {
            cursor: help
        }

        del {
            text-decoration: line-through
        }

        address,
        caption,
        cite,
        code,
        dfn,
        em,
        th,
        var {
            font-style: normal;
            font-weight: 400
        }

        ol,
        ul {
            list-style: none
        }

        caption,
        th {
            text-align: left
        }

        q:after,
        q:before {
            content: ""
        }

        sub,
        sup {
            font-size: 75%;
            line-height: 0;
            position: relative
        }

        :root sub,
        :root sup {
            vertical-align: baseline
        }

        sup {
            top: -.5em
        }

        sub {
            bottom: -.25em
        }

        a {
            color: #1abc9c
        }

        a:hover {
            text-decoration: underline
        }

        .typo a {
            border-bottom: 1px solid #1abc9c
        }

        .typo a:hover {
            border-bottom-color: #555;
            color: #555
        }

        .typo a:hover,
        a,
        ins {
            text-decoration: none
        }

        .typo-u,
        u {
            text-decoration: underline
        }

        mark {
            background: #fffdd1;
            border-bottom: 1px solid #ffedce;
            padding: 2px;
            margin: 0 5px
        }

        code,
        pre,
        pre tt {
            font-family: Courier, Courier New, monospace
        }

        pre {
            background: hsla(0, 0%, 97%, .7);
            border: 1px solid #ddd;
            padding: 1em 1.5em;
            display: block;
            -webkit-overflow-scrolling: touch
        }

        hr {
            border: none;
            border-bottom: 1px solid #cfcfcf;
            margin-bottom: .8em;
            height: 10px
        }

        .typo-small,
        figcaption,
        small {
            font-size: .9em;
            color: #888
        }

        b,
        strong {
            font-weight: 700;
            color: #000
        }

        [draggable] {
            cursor: move
        }

        .clearfix:after,
        .clearfix:before {
            content: "";
            display: table
        }

        .clearfix:after {
            clear: both
        }

        .clearfix {
            zoom: 1
        }

        .textwrap,
        .textwrap td,
        .textwrap th {
            word-wrap: break-word;
            word-break: break-all
        }

        .textwrap-table {
            table-layout: fixed
        }

        .serif {
            font-family: Palatino, Optima, Georgia, serif
        }

        .typo-dl,
        .typo-form,
        .typo-hr,
        .typo-ol,
        .typo-p,
        .typo-pre,
        .typo-table,
        .typo-ul,
        .typo dl,
        .typo form,
        .typo hr,
        .typo ol,
        .typo p,
        .typo pre,
        .typo table,
        .typo ul,
        blockquote {
            margin-bottom: 1rem
        }

        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            font-family: PingFang SC, Helvetica Neue, Verdana, Microsoft Yahei, Hiragino Sans GB, Microsoft Sans Serif, WenQuanYi Micro Hei, sans-serif;
            color: #000;
            line-height: 1.35
        }

        .typo-h1,
        .typo-h2,
        .typo-h3,
        .typo-h4,
        .typo-h5,
        .typo-h6,
        .typo h1,
        .typo h2,
        .typo h3,
        .typo h4,
        .typo h5,
        .typo h6 {
            margin-top: 1.2em;
            margin-bottom: .6em;
            line-height: 1.35
        }

        .typo-h1,
        .typo h1 {
            font-size: 2em
        }

        .typo-h2,
        .typo h2 {
            font-size: 1.8em
        }

        .typo-h3,
        .typo h3 {
            font-size: 1.6em
        }

        .typo-h4,
        .typo h4 {
            font-size: 1.4em
        }

        .typo-h5,
        .typo-h6,
        .typo h5,
        .typo h6 {
            font-size: 1.2em
        }

        .typo-ul,
        .typo ul {
            margin-left: 1.3em;
            list-style: disc
        }

        .typo-ol,
        .typo ol {
            list-style: decimal;
            margin-left: 1.9em
        }

        .typo-ol ol,
        .typo-ol ul,
        .typo-ul ol,
        .typo-ul ul,
        .typo li ol,
        .typo li ul {
            margin-bottom: .8em;
            margin-left: 2em
        }

        .typo-ol ul,
        .typo-ul ul,
        .typo li ul {
            list-style: circle
        }

        .typo-table td,
        .typo-table th,
        .typo table caption,
        .typo table td,
        .typo table th {
            border: 1px solid #ddd;
            padding: .5em 1em;
            color: #666
        }

        .typo-table th,
        .typo table th {
            background: #fbfbfb
        }

        .typo-table thead th,
        .typo table thead th {
            background: hsla(0, 0%, 95%, .7)
        }

        .typo table caption {
            border-bottom: none
        }

        .typo-input,
        .typo-textarea {
            -webkit-appearance: none;
            border-radius: 0
        }

        .typo-em,
        .typo em,
        caption,
        legend {
            color: #000;
            font-weight: inherit
        }

        .typo-em {
            position: relative
        }

        .typo-em:after {
            position: absolute;
            top: .65em;
            left: 0;
            width: 100%;
            overflow: hidden;
            white-space: nowrap;
            content: "\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB"
        }

        .typo img {
            max-width: 100%
        }

        .common-content {
            font-weight: 400;
            color: #353535;
            line-height: 1.75rem;
            white-space: normal;
            word-break: normal;
            font-size: 1rem
        }

        .common-content img {
            display: block;
            max-width: 100%;
            background-color: #eee
        }

        .common-content audio,
        .common-content video {
            width: 100%;
            background-color: #eee
        }

        .common-content center,
        .common-content font {
            margin-top: 1rem;
            display: inline-block
        }

        .common-content center {
            width: 100%
        }

        .common-content pre {
            margin-top: 1rem;
            padding-left: 0;
            padding-right: 0;
            position: relative;
            overflow: hidden
        }

        .common-content pre code {
            font-size: .8rem;
            font-family: Consolas, Liberation Mono, Menlo, monospace, Courier;
            display: block;
            width: 100%;
            box-sizing: border-box;
            padding-left: 1rem;
            padding-right: 1rem;
            overflow-x: auto
        }

        .common-content hr {
            border: none;
            margin-top: 1.5rem;
            margin-bottom: 1.5rem;
            border-top: 1px solid #f5f5f5;
            height: 1px;
            background: none
        }

        .common-content b,
        .common-content h1,
        .common-content h2,
        .common-content h3,
        .common-content h4,
        .common-content h5,
        .common-content strong {
            font-weight: 700
        }

        .common-content h1,
        .common-content h2 {
            font-size: 1.125rem;
            margin-bottom: .45rem
        }

        .common-content h3,
        .common-content h4,
        .common-content h5 {
            font-size: 1rem;
            margin-bottom: .45rem
        }

        .common-content p {
            font-weight: 400;
            color: #353535;
            margin-top: .15rem
        }

        .common-content .orange {
            color: #ff5a05
        }

        .common-content .reference {
            font-size: 1rem;
            color: #888
        }

        .custom-rich-content h1 {
            margin-top: 0;
            font-weight: 400;
            font-size: 15.25px;
            border-bottom: 1px solid #eee;
            line-height: 2.8
        }

        .custom-rich-content li,
        .custom-rich-content p {
            font-size: 14px;
            color: #888;
            line-height: 1.6
        }

        table.hljs-ln {
            margin-bottom: 0;
            border-spacing: 0;
            border-collapse: collapse
        }

        table.hljs-ln,
        table.hljs-ln tbody,
        table.hljs-ln td,
        table.hljs-ln tr {
            box-sizing: border-box
        }

        table.hljs-ln td {
            padding: 0;
            border: 0
        }

        table.hljs-ln td.hljs-ln-numbers {
            min-width: 15px;
            color: rgba(27, 31, 35, .3);
            text-align: right;
            white-space: nowrap;
            cursor: pointer;
            user-select: none
        }

        table.hljs-ln td.hljs-ln-code,
        table.hljs-ln td.hljs-ln-numbers {
            font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace;
            font-size: 12px;
            line-height: 20px;
            vertical-align: top
        }

        table.hljs-ln td.hljs-ln-code {
            position: relative;
            padding-right: 10px;
            padding-left: 10px;
            overflow: visible;
            color: #24292e;
            word-wrap: normal;
            white-space: pre
        }

        video::-webkit-media-controls {
            overflow: hidden !important
        }

        video::-webkit-media-controls-enclosure {
            width: calc(100% + 32px);
            margin-left: auto
        }

        ._29HP61GA_0 {
            max-width:800px;
            margin:0 auto;
            margin-bottom: 20px;
            font-weight: 400;
            color: #353535;
            line-height: 1.76;
            white-space: normal;
            word-break: normal;
            font-size: 17px;
            -webkit-transition: background-color .3s ease;
            transition: background-color .3s ease
        }

        ._29HP61GA_0 .MathJax_Display {
            overflow: auto
        }

        ._29HP61GA_0 .poster {
            position: fixed;
            left: -10000px;
            top: -10000px;
            overflow: hidden;
            padding: 1rem;
            background: #ececec
        }

        ._29HP61GA_0 .richcontent-pre-copy {
            font-size: 13px;
            color: #888;
            position: absolute;
            right: 1em;
            top: .5em;
            cursor: pointer;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none
        }

        ._29HP61GA_0 .richcontent-pre-copy .iconfont {
            font-size: 12px;
            margin-right: .2em
        }

        ._29HP61GA_0 a {
            color: #fa8919;
            border-bottom: 1px solid #fa8919
        }

        ._29HP61GA_0 img {
            display: block;
            max-width: 100%;
            position: relative;
            left: 50%;
            -webkit-transform: translateX(-50%);
            transform: translateX(-50%);
            background-color: #eee;
            vertical-align: top;
            border-radius: 0
        }

        ._29HP61GA_0 audio,
        ._29HP61GA_0 video {
            width: 100%;
            background-color: #eee
        }

        ._29HP61GA_0 pre {
            margin-top: 16px;
            padding: 34px 0 0;
            margin-bottom: 30px;
            position: relative;
            border-radius: 6px;
            background: rgba(246, 247, 251, .749);
            border: 0
        }

        ._29HP61GA_0 pre code {
            font-size: 12px;
            font-family: Consolas, Liberation Mono, Menlo, monospace, Courier;
            display: block;
            -webkit-box-sizing: border-box;
            box-sizing: border-box;
            margin-left: 16px;
            margin-right: 16px;
            overflow-x: scroll
        }

        ._29HP61GA_0 pre code:after {
            content: "";
            height: 30px;
            width: 100%;
            display: block
        }

        ._29HP61GA_0 hr {
            border: none;
            margin-top: 1.5rem;
            margin-bottom: 1.5rem;
            border-top: 1px solid #f5f5f5;
            height: 1px;
            background: none
        }

        ._29HP61GA_0 h1,
        ._29HP61GA_0 h2,
        ._29HP61GA_0 h3,
        ._29HP61GA_0 h4,
        ._29HP61GA_0 h5 {
            margin-bottom: 20px;
            margin-top: 0;
            font-weight: 700
        }

        ._29HP61GA_0 b,
        ._29HP61GA_0 strong {
            font-weight: 700
        }

        ._29HP61GA_0 h1 {
            font-size: 21px
        }

        ._29HP61GA_0 h2 {
            font-size: 20px
        }

        ._29HP61GA_0 h3 {
            font-size: 19px
        }

        ._29HP61GA_0 h4 {
            font-size: 18px
        }

        ._29HP61GA_0 h5 {
            font-size: 17px
        }

        ._29HP61GA_0 center,
        ._29HP61GA_0 p {
            font-weight: 400;
            color: #353535;
            margin-top: 0;
            margin-bottom: 30px;
            word-break: break-word
        }

        ._29HP61GA_0 center {
            text-align: center
        }

        ._29HP61GA_0 blockquote {
            margin-top: 0;
            margin-bottom: 34px;
            border-left: 3px solid #e8e8e8;
            padding-left: 17px;
            color: #353535
        }

        ._29HP61GA_0 blockquote p {
            margin-top: 0;
            margin-bottom: 0
        }

        ._29HP61GA_0 ol,
        ._29HP61GA_0 ul {
            margin-bottom: 30px
        }

        ._29HP61GA_0 ol p,
        ._29HP61GA_0 ul p {
            margin-top: 0;
            margin-bottom: 0
        }

        ._29HP61GA_0 ol {
            list-style: decimal;
            margin-left: 20px
        }

        ._29HP61GA_0 ul li {
            padding-left: 17px;
            position: relative;
            margin-bottom: 10px
        }

        ._29HP61GA_0 ul li:after {
            content: "";
            height: 6px;
            width: 6px;
            border-radius: 50%;
            background: #353535;
            position: absolute;
            top: 10px;
            left: 0
        }

        ._29HP61GA_0 .orange {
            color: #fa8919
        }

        ._29HP61GA_0 .reference {
            color: #888
        }

        ._29HP61GA_0 .m-right {
            text-align: right
        }

        ._29HP61GA_0 .m-center {
            text-align: center;
            display: block
        }

        ._29HP61GA_0 .m-gray {
            color: #888
        }

        ._29HP61GA_0 .m-small {
            font-size: 15px
        }

        ._29HP61GA_0 table.hljs-ln {
            margin-bottom: 0;
            border-spacing: 0;
            border-collapse: collapse
        }

        ._29HP61GA_0 table.hljs-ln,
        ._29HP61GA_0 table.hljs-ln tbody,
        ._29HP61GA_0 table.hljs-ln td,
        ._29HP61GA_0 table.hljs-ln tr {
            -webkit-box-sizing: border-box;
            box-sizing: border-box
        }

        ._29HP61GA_0 table.hljs-ln td {
            padding: 0;
            border: 0
        }

        ._29HP61GA_0 table.hljs-ln td.hljs-ln-numbers {
            min-width: 15px;
            font-size: 12px;
            color: rgba(27, 31, 35, .3);
            text-align: right;
            white-space: nowrap;
            cursor: pointer;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none
        }

        ._29HP61GA_0 table.hljs-ln td.hljs-ln-code,
        ._29HP61GA_0 table.hljs-ln td.hljs-ln-numbers {
            font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace;
            line-height: 20px;
            vertical-align: top
        }

        ._29HP61GA_0 table.hljs-ln td.hljs-ln-code {
            position: relative;
            padding-right: 10px;
            padding-left: 10px;
            overflow: visible;
            font-size: 13px;
            color: #666;
            word-wrap: normal;
            white-space: pre
        }

    </style>
</head>
<body>
<div class="_29HP61GA_0">
<h1>09-ç­”ç–‘ç¯‡ï¼šå­¦ä¹ ç½‘ç»œç¼–ç¨‹å‰ï¼Œéœ€è¦å‡†å¤‡å“ªäº›ä¸œè¥¿ï¼Ÿ</h1>
<p>ä½ å¥½ï¼Œæˆ‘æ˜¯ç››å»¶æ•ï¼Œè¿™é‡Œæ˜¯ç½‘ç»œç¼–ç¨‹å®æˆ˜ç¬¬9è®²ï¼Œæ¬¢è¿å›æ¥ã€‚</p><p>ä»Šå¤©æ˜¯åŸºç¡€ç¯‡çš„æœ€åä¸€è®²ã€‚åœ¨è¿™ä¸€è®²ä¸­ï¼Œæˆ‘å°†ä¼šé’ˆå¯¹åŸºç¡€ç¯‡ä¸­å¤§å®¶æå‡ºçš„æ™®éé—®é¢˜è¿›è¡Œæ€»ç»“å’Œç­”ç–‘ï¼Œè®©æˆ‘ä»¬æ•´ç†ä¸€ä¸‹ï¼Œå†æ¥ç€å­¦ä¹ ä¸‹ä¸€ä¸ªæ¨¡å—çš„å†…å®¹ã€‚</p><h2>ä»£ç å’Œç¯å¢ƒ</h2><p>æ—¢ç„¶æˆ‘å¸Œæœ›é€šè¿‡å­¦ä¹ ï¼Œå¯ä»¥å¸¦ä½ è¿›è¡Œç½‘ç»œç¼–ç¨‹å®æˆ˜ï¼Œé‚£ä¹ˆå°±å¾—æœ‰ä¸€ä¸ªç¯å¢ƒï¼Œå¯ä»¥è¿è¡Œæ–‡ç« ä¸­çš„ä¾‹å­ï¼Œå¹¶åŠ ä»¥æ´»å­¦æ´»ç”¨ã€‚</p><p>æˆ‘å·²ç»å°†ä»£ç ä¸Šä¼ åˆ°GitHubä¸­ï¼Œä½ å¯ä»¥è®¿é—®ä»¥ä¸‹åœ°å€æ¥è·å¾—æœ€æ–°çš„ä»£ç ã€‚</p><p><a href="https://github.com/froghui/yolanda">https://github.com/froghui/yolanda</a></p><p>ä»£ç æŒ‰ç…§ç« èŠ‚ç»„ç»‡ï¼Œæ¯”å¦‚chap-7å°±å¯¹åº”ç¬¬ä¸ƒç¯‡æ–‡ç« ã€‚</p><p>ä»£ç æŒ‰ç…§CMakeç»„ç»‡ï¼ŒCMakeæ˜¯ä¸€ä¸ªè·¨å¹³å°çš„ç¼–è¯‘ç®¡ç†ç³»ç»Ÿï¼Œä½¿ç”¨CMakeå¯ä»¥æ–¹ä¾¿åœ°åœ¨Linuxç­‰ç±»UNIXç³»ç»Ÿä¸‹åŠ¨æ€ç”ŸæˆMakefileï¼Œå†ç”±makeå·¥å…·ç¼–è¯‘ã€é“¾æ¥ç”ŸæˆäºŒè¿›åˆ¶æ–‡ä»¶ã€‚å½“ç„¶ï¼ŒCMakeä¹Ÿå¯ä»¥æ”¯æŒWindowsç³»ç»Ÿä¸‹çš„C/C++ç¼–è¯‘ï¼Œè¿™é‡Œæˆ‘ä»¬å°±ä¸å±•å¼€äº†ã€‚</p><p>æ‰€æœ‰çš„ä»£ç æˆ‘éƒ½å·²ç»æµ‹è¯•è¿‡ï¼Œå¯ä»¥è¿è¡Œåœ¨Linuxå’ŒMacOSä¸Šã€‚</p><h3>Ubuntuç³»ç»Ÿ</h3><p>åœ¨Linuxä¸‹ï¼Œå¦‚æœä½ æ˜¯Ubuntuç³»ç»Ÿï¼Œéœ€è¦å®‰è£…Cmakeã€makeå’Œgcc/g++ç­‰ç¼–è¯‘ç³»ç»Ÿå’Œå·¥å…·ã€‚</p><pre><code>sudo apt-get install gcc g++ make cmake
</code></pre><p>å¦‚æœæ˜¯CentOSæˆ–Red Hatï¼Œéœ€è¦æ‰§è¡Œyum installå‘½ä»¤ï¼š</p><!-- [[[read_end]]] --><pre><code>sudo yum install gcc g++ make cmake
</code></pre><p>ä½¿ç”¨CMakeç¼–è¯‘ç¨‹åºéœ€è¦ä¸¤æ­¥ï¼Œç¬¬ä¸€æ­¥æ‰§è¡ŒCmakeç”Ÿæˆé…ç½®æ–‡ä»¶ï¼Œä¸»è¦æ˜¯Makefileï¼›å…·ä½“åšæ³•æ˜¯æ‰§è¡Œå¦‚ä¸‹çš„cmakeå‘½ä»¤ï¼Œä¹‹ååœ¨buildç›®å½•ä¸‹ï¼Œä¼šå‘ç°CMakeæ ¹æ®ç³»ç»Ÿç¯å¢ƒå¦‚ç¼–è¯‘å™¨ã€å¤´æ–‡ä»¶ç­‰è‡ªåŠ¨ç”Ÿæˆäº†ä¸€ä»½Makefileï¼š</p><pre><code>cd build &amp;&amp; cmake -f ../
</code></pre><p>æ¥ä¸‹æ¥æ‰§è¡Œç¬¬äºŒæ­¥ï¼Œåœ¨buildç›®å½•è¿è¡Œmakeï¼Œè®©makeé©±åŠ¨gccç¼–è¯‘ã€é“¾æ¥ç”ŸæˆäºŒè¿›åˆ¶å¯æ‰§è¡Œç¨‹åºï¼Œè¿™ä¸ªè¿‡ç¨‹å¯èƒ½ä¼šæŒç»­å‡ åˆ†é’Ÿã€‚æœ€ååœ¨build/binç›®å½•ä¸‹ï¼Œä¼šç”Ÿæˆæ‰€æœ‰å¯è¿è¡Œçš„äºŒè¿›åˆ¶ç¨‹åºã€‚</p><pre><code>-rwxr-xr-x 1 vagrant vagrant 13944 Aug 18 13:45 addressused*
-rwxr-xr-x 1 vagrant vagrant 14000 Aug 18 13:45 addressused02*
-rwxr-xr-x 1 vagrant vagrant 13848 Aug 18 13:45 batchwrite*
-rwxr-xr-x 1 vagrant vagrant 13800 Aug 18 13:45 bufferclient*
-rwxr-xr-x 1 vagrant vagrant 14192 Aug 18 13:45 graceclient*
-rwxr-xr-x 1 vagrant vagrant 14096 Aug 18 13:45 graceserver*
-rwxr-xr-x 1 vagrant vagrant  8960 Aug 18 13:45 make_socket*
-rwxr-xr-x 1 vagrant vagrant 13920 Aug 18 13:45 pingclient*
-rwxr-xr-x 1 vagrant vagrant 14176 Aug 18 13:45 pingserver*
-rwxr-xr-x 1 vagrant vagrant 13976 Aug 18 13:45 reliable_client01*
-rwxr-xr-x 1 vagrant vagrant 13832 Aug 18 13:45 reliable_client02*
-rwxr-xr-x 1 vagrant vagrant 14120 Aug 18 13:45 reliable_server01*
-rwxr-xr-x 1 vagrant vagrant 14040 Aug 18 13:45 reliable_server02*
-rwxr-xr-x 1 vagrant vagrant 14136 Aug 18 13:45 samplebuffer01*
-rwxr-xr-x 1 vagrant vagrant 13864 Aug 18 13:45 samplebuffer02*
-rwxr-xr-x 1 vagrant vagrant 14392 Aug 18 13:45 samplebuffer03*
-rwxr-xr-x 1 vagrant vagrant 13848 Aug 18 13:45 streamclient*
-rwxr-xr-x 1 vagrant vagrant 14392 Aug 18 13:45 streamserver*
-rwxr-xr-x 1 vagrant vagrant 13784 Aug 18 13:45 tcpclient*
-rwxr-xr-x 1 vagrant vagrant 13856 Aug 18 13:45 tcpserver*
-rwxr-xr-x 1 vagrant vagrant 13936 Aug 18 13:45 udpclient*
-rwxr-xr-x 1 vagrant vagrant 13320 Aug 18 13:45 udpserver*
-rwxr-xr-x 1 vagrant vagrant 13936 Aug 18 13:45 unixdataclient*
-rwxr-xr-x 1 vagrant vagrant 13896 Aug 18 13:45 unixdataserver*
-rwxr-xr-x 1 vagrant vagrant 13800 Aug 18 13:45 unixstreamclient*
-rwxr-xr-x 1 vagrant vagrant 13992 Aug 18 13:45 unixstreamserver*
</code></pre><h3>MacOS</h3><p>åœ¨MacOSä¸Šï¼ŒCmakeå’Œmakeéƒ½ä¼šæœ‰Macç‰¹å®šç‰ˆæœ¬ï¼Œå¹¶ä¸”å®ç°çš„åŸç†ä¹Ÿæ˜¯åŸºæœ¬ä¸€è‡´çš„ï¼Œæˆ‘ä»¬å¯ä»¥åƒä¸Šé¢Ubuntuç³»ç»Ÿä¸€æ ·æ‰‹åŠ¨å®‰è£…ã€é…ç½®è¿™äº›å·¥å…·ã€‚</p><p>å¦‚æœä½ çš„ç³»ç»Ÿä¸Šæ²¡æœ‰è¿™ä¸¤ä¸ªè½¯ä»¶ï¼Œå¯ä»¥ä½¿ç”¨brewå®‰è£…Cmakeå’Œmakeã€‚</p><pre><code>brew install cmake 
brew install make
</code></pre><p>MacOSä¸ŠC/C++è¯­è¨€çš„ç¼–è¯‘å™¨ä¸åŒäºGNU-GCCï¼Œæ˜¯ä¸€ä¸ªå«åšClangçš„ä¸œè¥¿ã€‚Clang èƒŒåçš„æŠ€æœ¯å«åšLLVMï¼ˆLow Level Virtual Machineï¼‰ã€‚LLVM æ˜¯ä»¥ BSD Licenseå¼€å‘çš„å¼€æºç¼–è¯‘å™¨æ¡†æ¶ç³»ç»Ÿï¼ŒåŸºäº C++ ç¼–å†™è€Œæˆï¼Œä¸ä»…å¯ä»¥æ”¯æŒC/C++ï¼Œè¿˜å¯ä»¥æ”¯æŒSwiftã€Rustç­‰è¯­è¨€ã€‚</p><p>å¦‚æœä½ åœ¨MaxOSä¸ŠæŸ¥çœ‹Clangçš„ç‰ˆæœ¬ä¿¡æ¯ï¼Œå¯ä»¥å¾ˆæ˜æ˜¾åœ°çœ‹åˆ°ï¼ŒClangæ˜¯åŸºäºLLVMå¼€å‘çš„ï¼Œå¹¶ä¸”å¯¹åº”çš„ç‰ˆæœ¬æ˜¯å¤šå°‘ã€‚åœ¨æˆ‘çš„æœºå™¨ä¸Šæ˜¾ç¤ºçš„LLVMç‰ˆæœ¬æ˜¯ 10.0.0ã€‚</p><pre><code>clang -v
Apple LLVM version 10.0.0 (clang-1000.10.44.4)
Target: x86_64-apple-darwin17.7.0
Thread model: posix
InstalledDir: /Library/Developer/CommandLineTools/usr/bin
</code></pre><p>ä¸‹é¢æ˜¯åœ¨MacOSä¸Šæ‰§è¡ŒCmakeå’Œmakeï¼Œä½¿ç”¨Clangå®Œæˆç¼–è¯‘å’Œé“¾æ¥çš„è¿‡ç¨‹ã€‚</p><pre><code>cd build &amp;&amp; cmake -f ../
-- The C compiler identification is AppleClang 10.0.0.10001044
-- The CXX compiler identification is AppleClang 10.0.0.10001044
-- Check for working C compiler: /Library/Developer/CommandLineTools/usr/bin/cc
-- Check for working C compiler: /Library/Developer/CommandLineTools/usr/bin/cc -- works
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Detecting C compile features
-- Detecting C compile features - done
-- Check for working CXX compiler: /Library/Developer/CommandLineTools/usr/bin/c++
-- Check for working CXX compiler: /Library/Developer/CommandLineTools/usr/bin/c++ -- works
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done
-- Generating done
-- Build files have been written to: /Users/shengym/Code/network/yolanda/test
</code></pre><pre><code>cd build &amp;&amp; make
</code></pre><p>å¯æ‰§è¡Œç¨‹åºä»ç„¶ä¿å­˜åœ¨ build/binç›®å½•ä¸‹é¢ã€‚</p><h3>CLion</h3><p>å¯¹äºæœ‰IDEæƒ…ç»“çš„åŒå­¦æ¥è¯´ï¼Œæ¨èä½¿ç”¨JetBrainså…¬å¸å‡ºå“çš„CLionè¿›è¡Œç¼–è¯‘å’Œè°ƒè¯•ã€‚</p><p>ä½ å¯ä»¥åœ¨è¿™é‡Œä¸‹è½½ <a href="https://www.jetbrains.com/clion/">https://www.jetbrains.com/clion/</a>ï¼Œ è·å¾—30å¤©çš„å…è´¹ä½¿ç”¨ã€‚</p><p>CLionè‡ªå¸¦äº†CMakeç­‰å·¥å…·ï¼Œå¯ä»¥å¼€ç®±å³ç”¨ã€‚å®ƒæœ€å¼ºå¤§çš„åœ°æ–¹ï¼Œæ˜¯å¯ä»¥ç›´æ¥è®¾ç½®æ–­ç‚¹ï¼Œæ–¹ä¾¿è¿›è¡Œè°ƒè¯•ã€‚æˆ‘ä»¬è¿›å…¥ä¸»èœå•ï¼Œé€‰æ‹©Runï¼Œå†é€‰æ‹©Debugï¼Œå°±å¯ä»¥å¯åŠ¨ç¨‹åºï¼Œè¿›è¡Œè°ƒè¯•ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/28/25/28c40e2422c01340a8ab8b368355f825.png" alt=""><br>
æœ‰äº›æƒ…å†µä¸‹ï¼Œå¯åŠ¨ç¨‹åºæ—¶éœ€è¦è¾“å…¥ä¸€äº›å‚æ•°ï¼Œè¿™ä¸ªæ—¶å€™éœ€è¦ä½¿ç”¨â€œEdit Configurationsâ€ä¸ºå¯æ‰§è¡Œç¨‹åºé…ç½®å‚æ•°ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ï¼š</p><p><img src="https://static001.geekbang.org/resource/image/61/5c/6191b86211dd13df6613bdb3481d8d5c.png" alt=""></p><h2>å­¦ä¹ è·¯å¾„</h2><p>ä¹Ÿè®¸ä½ åˆšåˆšå…¥é—¨ï¼Œä¸€ç›´å¯¹ç½‘ç»œç¼–ç¨‹çš„å­¦ä¹ è·¯å¾„æœ‰å¾ˆå¤§çš„å›°æƒ‘ï¼Œæˆ‘åœ¨è¿™é‡Œç»Ÿä¸€å›å¤ä¸€ä¸‹ã€‚</p><p>æˆ‘è§‰å¾—å­¦ä¹ ç½‘ç»œç¼–ç¨‹æŠ€æœ¯ï¼Œå¿…é¡»è¦è¿‡ä¸€é“è¯­è¨€å…³ï¼Œè¿™ä¸ªè¯­è¨€å°±æ˜¯Cè¯­è¨€ã€‚ä¸“æ æœ¬èº«ä¹Ÿæ˜¯åŸºäºCè¯­è¨€çš„ã€‚è™½ç„¶ç°ä»£å·¥ä¸šåŒ–è¯­è¨€å¦‚Javaã€Golangç­‰å·²ç»è¶³å¤Ÿå¼ºå¤§ï¼Œä½†æ˜¯ä½ è¦çŸ¥é“ï¼Œåœ¨è¿™äº›è¯­è¨€çš„èƒŒåï¼Œæ— ä¸€ä¾‹å¤–çš„æ€»æ˜¯æœ‰Cè¯­è¨€çš„å½±å­ã€‚Cè¯­è¨€æ˜¯å¯ä»¥å’Œç³»ç»Ÿç›´æ¥äº¤äº’çš„è¯­è¨€ï¼Œæ— è®ºæ˜¯ç³»ç»Ÿè°ƒç”¨ï¼Œè¿˜æ˜¯å†…æ ¸å®ç°ï¼Œéƒ½å’ŒCè¯­è¨€æœ‰éå¸¸ç›´æ¥çš„è”ç³»ï¼Œæ¯”å¦‚Javaæœ¬èº«å°±æ˜¯ç”¨C++å®ç°çš„ï¼ŒGolangè™½ç„¶ç°åœ¨å¯ä»¥è‡ªä¸¾ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥ä½¿ç”¨Golangå®ç°Golangæœ¬èº«ï¼Œä½†æ˜¯å®ƒçš„ç¬¬ä¸€ç‰ˆä¹Ÿæ˜¯ç”¨C/C++å®ç°çš„ã€‚</p><p>æˆ‘ä¸å»ºè®®ä¸€å¼€å§‹å°±å­¦ä¹ C++è¯­è¨€ï¼Œåœ¨æˆ‘çœ‹æ¥, C++è¯­è¨€åœ¨Cè¯­è¨€åŸæ¥çš„åŸºç¡€ä¸Šåšäº†å¾ˆå¤šè¯­è¨€å±‚é¢çš„å¢å¼ºï¼Œè€Œè¿™äº›å¢å¼ºçš„è¯­è¨€ç‰¹æ€§ï¼Œä¾‹å¦‚æ¨¡æ¿ã€ç»§æ‰¿ã€è™šå‡½æ•°ã€boostè¯­è¨€åº“ç­‰ï¼Œå¯¹äºåˆšå¼€å§‹æ¥è§¦åº•å±‚çš„äººæ˜¾å¾—æœ‰äº›è‰°æ·±ã€‚</p><p>å­¦ä¹ ä¸€é—¨ç¼–ç¨‹è¯­è¨€ï¼Œæ˜¾ç„¶ä¸æ˜¯å­¦ä¹ è¿™é—¨è¯­è¨€çš„æ§åˆ¶æµæˆ–è€…å˜é‡ç±»å‹ï¼Œè€Œæ˜¯æŠ“ä½è¿™é—¨è¯­è¨€çš„ç²¾é«“ã€‚æˆ‘è®¤ä¸ºCè¯­è¨€çš„ç²¾é«“åŒ…æ‹¬æ•°ç»„å’ŒæŒ‡é’ˆã€ç»“æ„ä½“å’Œå‡½æ•°ã€‚</p><p>Cè¯­è¨€çš„åœ°å€ã€æ•°ç»„ã€æŒ‡é’ˆå¯ä»¥å¸®åŠ©æˆ‘ä»¬è¯¦ç»†åœ°ç†è§£è®¡ç®—æœºçš„ä½“ç³»ç»“æ„ï¼Œä¸€æ®µæ•°æ®æ€æ ·åœ¨å†…å­˜ä¸­æ‘†æ”¾ï¼Œæ€ä¹ˆå»è®¿é—®ç­‰ï¼Œä½ å¯ä»¥åœ¨å­¦ä¹ å®ƒä»¬çš„è¿‡ç¨‹ä¸­å¾—åˆ°é”¤ç‚¼ï¼Œäº†è§£è¿™äº›åŸºç¡€çš„ç¼–ç¨‹ç†å¿µã€‚</p><p>æœ‰äº›åŒå­¦ä¸€ä¸Šæ¥å°±å•ƒâ€œTCP/IPåè®®â€ï¼Œæˆ‘è§‰å¾—å¯¹äºå®æˆ˜æ¥è¯´ï¼Œæ˜¾å¾—è¿‡äºç€æ€¥ã€‚æˆ‘ä»¬å¯ä»¥æŠŠâ€œTCP/IPåè®®â€å½“åšç¼–ç¨‹è¿‡ç¨‹ä¸­ç­”ç–‘è§£æƒ‘çš„å¥½å¸®æ‰‹ï¼Œæœ‰é—®é¢˜ä¹‹åå†ä»ä¸­å¯»æ‰¾ç­”æ¡ˆï¼Œè€Œä¸æ˜¯æ€¥æ€¥å¿™å¿™å°±æ¥å•ƒè¿™ç±»ä¹¦ç±ã€‚è¯´å®è¯ï¼Œè¿™ç±»ä¹¦ç±ç†è®ºæ€§åå¼ºï¼Œæœ‰æ—¶å€™å¤§æ®µè¯»ä¸‹æ¥ä¹Ÿå°‘æœ‰æ”¶è·ã€‚</p><p>æœ€å¥½çš„åŠæ³•ï¼Œè¿˜æ˜¯è‡ªå·±è·Ÿéšä¸€äº›å…¥é—¨ä¹¦ç±ï¼Œæˆ–è€…æˆ‘çš„è¿™ç¯‡å®æˆ˜ï¼Œå°è¯•åŠ¨æ‰‹å»å†™ã€å»è°ƒè¯•ä»£ç ï¼Œè¿™ä¸­é—´ä½ ä¼šä¸æ–­è·å¾—ä¸€äº›åé¦ˆï¼Œç„¶åå†å’Œå¤§å®¶ä¸€èµ·æ¢è®¨ï¼Œä¸æ–­åŠ æ·±äº†è§£ã€‚</p><p>å½“ä½ å­¦åˆ°äº†ä¸€å®šé˜¶æ®µï¼Œå°±å¯ä»¥ç»™è‡ªå·±å¼€ä¸€äº›å°çš„ä»»åŠ¡ï¼Œæ¯”å¦‚å†™ä¸€ä¸ªèŠå¤©å®¤ç¨‹åºï¼Œæˆ–è€…å†™ä¸€ä¸ªHTTPæœåŠ¡å™¨ç«¯ç¨‹åºï¼Œå¸¦ç€ä»»åŠ¡å»å­¦ä¹ ï¼Œè·å¾—æˆå°±æ„Ÿçš„åŒæ—¶ï¼Œå¯¹ç½‘ç»œç¼–ç¨‹çš„ç†è§£ä¹Ÿéšä¹‹æ›´ä¸Šä¸€å±‚æ¥¼äº†ã€‚</p><h2>ä¹¦ç±æ¨è</h2><p>æˆ‘å¸Œæœ›ä½ å¯ä»¥é€šè¿‡è¿™ä¸ªä¸“æ æ›´å¥½åœ°äº†è§£ç½‘ç»œç¼–ç¨‹ï¼Œä½†æ˜¯æ·±å…¥çš„å­¦ä¹ è¿˜éœ€è¦ä½ è‡ªè¡Œå»æ‰¾æ›´å¤šçš„èµ„æ–™ã€‚æˆ‘åœ¨è¿™é‡Œç»™ä½ æ¨èä¸€äº›ä¹¦ï¼Œè¿™äº›ä¹¦æ˜¯å„ä¸ªé¢†åŸŸçš„ç»å…¸ã€‚</p><p>Cè¯­è¨€å…¥é—¨æ–¹é¢ï¼Œæˆ‘æ¨è ã€ŠCç¨‹åºè®¾è®¡è¯­è¨€ã€‹ï¼Œæˆ‘åœ¨æ–‡ç¨¿é‡Œé™„ä¸Šäº†è±†ç“£é“¾æ¥ï¼Œä½ å¯ä»¥çœ‹ä¸‹å¤§å®¶çš„è¯„ä»·ä»¥åŠä»–ä»¬çš„å­¦ä¹ æ–¹å¼ï¼š  <a href="https://book.douban.com/subject/1139336/">https://book.douban.com/subject/1139336/</a></p><p>UNIXç½‘ç»œç¼–ç¨‹æ–¹é¢ï¼Œå¼ºçƒˆæ¨èStevenså¤§ç¥çš„ä¸¤å·æœ¬ã€ŠUNIXç½‘ç»œç¼–ç¨‹ã€‹ï¼Œå…¶ä¸­ç¬¬ä¸€å·æ˜¯è®²å¥—æ¥å­—çš„ï¼Œç¬¬äºŒå·æ˜¯è®²IPCè¿›ç¨‹é—´é€šä¿¡çš„ã€‚è¿™å¥—ä¹¦ä¹Ÿéšä¹¦é…å¤‡äº†æºä»£ç ï¼Œä½ å¦‚æœæœ‰å…´è¶£çš„è¯ï¼Œå¯ä»¥å¯¹ä»£ç è¿›è¡Œæ”¹å†™å’Œè°ƒè¯•ã€‚</p><p>è±†ç“£é“¾æ¥åœ¨æ­¤ï¼š <a href="https://book.douban.com/subject/1500149/">https://book.douban.com/subject/1500149/</a></p><p>è¿™å¥—ä¹¦çš„å·ä¸€åŸºæœ¬ä¸Šé¢é¢ä¿±åˆ°åœ°è®²è¿°äº†UNIXç½‘ç»œç¼–ç¨‹çš„æ–¹æ–¹é¢é¢ï¼Œä½†æœ‰æ—¶å€™ç¨æ˜¾å•°å—¦ï¼Œç‰¹åˆ«æ˜¯é«˜æ€§èƒ½é«˜å¹¶å‘è¿™å—ï¼Œå·²ç»è·Ÿä¸ä¸Šæ—¶ä»£ï¼Œä½†ä½ å¯ä»¥æŠŠæ³¨æ„åŠ›æ”¾åœ¨å·ä¸€çš„å‰åŠéƒ¨åˆ†ã€‚</p><p>è¿™å¥—ä¹¦ç¿»è¯‘äº†å¥½å‡ ç‰ˆï¼Œå°±æˆ‘çš„ä½“éªŒæ¥è¯´ï¼Œæ¯”è¾ƒæ¨èæ¨ç»§å¼ ç¿»è¯‘çš„ç‰ˆæœ¬ã€‚</p><p>TCP/IPåè®®æ–¹é¢ï¼Œå½“ç„¶æ˜¯æ¨èStevensçš„å¤§ä½œã€ŠTCP/IPè¯¦è§£ã€‹, è¿™å¥—ä¹¦æ€»å…±æœ‰ä¸‰å·ï¼Œç¬¬ä¸€å·è®²åè®®ï¼Œç¬¬äºŒå·è®²å®ç°ï¼Œç¬¬ä¸‰å·è®²TCPäº‹åŠ¡ã€‚æˆ‘åœ¨è¿™é‡Œæ¨èç¬¬ä¸€å·ï¼Œç¬¬äºŒå·çš„å®ç°æ˜¯åŸºäºBSDçš„ä»£ç è®²è§£çš„ï¼Œå°±ä¸æ¨èäº†ã€‚æˆ‘æƒ³å¦‚æœä½ æƒ³çœ‹æºç çš„è¯ï¼Œè¿˜æ˜¯æ¨èçœ‹Linuxçš„ï¼Œæ¯•ç«Ÿæˆ‘ä»¬ç”¨çš„æ¯”è¾ƒå¤šã€‚ç¬¬ä¸‰å·æ¶‰åŠçš„å†…å®¹æ¯”è¾ƒå°‘è§ï¼Œä¹Ÿä¸æ¨èäº†ã€‚</p><p>è¿™å¥—ä¹¦å„ä¸ªå‡ºç‰ˆç¤¾ç¿»è¯‘äº†å¥½å¤šç‰ˆæœ¬ï¼Œä½ å¯ä»¥å»è±†ç“£è‡ªè¡ŒæŸ¥çœ‹å“ªä¸ªç‰ˆæœ¬è¯„åˆ†æ¯”è¾ƒé«˜ã€‚</p><p>ã€ŠTCP/IPè¯¦è§£ å·1ï¼šåè®®ã€‹è±†ç“£é“¾æ¥å¦‚ä¸‹ï¼š</p><p><a href="https://book.douban.com/subject/1088054/">https://book.douban.com/subject/1088054/</a></p><p>æœ€åé™¤äº†ä¹¦ç±å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªéå¸¸å¥½çš„äº†è§£TCPçš„æ–¹æ³•ï¼Œé‚£å°±æ˜¯æŸ¥çœ‹RFCæ–‡æ¡£ï¼Œå¯¹äºæœ‰ä¸€å®šè‹±æ–‡èƒ½åŠ›çš„åŒå­¦æ¥è¯´ï¼Œå¯ä»¥è¯´æ˜¯ä¸€ä¸ªæ·å¾„ã€‚RFCæœ€å¤§çš„å¥½å¤„å¯ä»¥å¸®æˆ‘ä»¬äº†è§£TCPå‘å±•çš„èƒŒæ™¯å’Œè„‰ç»œã€‚</p><h2>ç–‘éš¾è§£ç­”</h2><p>å‰é¢çš„å†…å®¹ç®—æ˜¯æˆ‘å¯¹ä½ å­¦ä¹ ç½‘ç»œç¼–ç¨‹æä¾›çš„ä¸€äº›å°å»ºè®®æˆ–è€…å°å¸®åŠ©ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ­£å¼è¿›å…¥åˆ°æ–‡ç« æœ¬èº«çš„å†…å®¹ã€‚</p><p>åœ¨ç¬¬5è®²æ€è€ƒé¢˜éƒ¨åˆ†ä¸­ï¼Œæˆ‘å‡ºäº†è¿™ä¹ˆä¸€é“é¢˜ç›®â€œä¸€æ®µæ•°æ®æµä»åº”ç”¨ç¨‹åºå‘é€ç«¯ï¼Œä¸€ç›´åˆ°åº”ç”¨ç¨‹åºæ¥æ”¶ç«¯ï¼Œæ€»å…±ç»è¿‡äº†å¤šå°‘æ¬¡æ‹·è´ï¼Ÿâ€å¤§å®¶çš„å›ç­”äº”èŠ±å…«é—¨ã€‚</p><p>æˆ‘çš„æœ¬æ„å¯ä»¥ç”¨æ–‡ç¨¿ä¸­çš„ä¸€å¼ å›¾æ¥è¡¨ç¤ºï¼Œè¿˜è®°å¾—TCP/IPå±‚æ¬¡æ¨¡å‹ä¹ˆï¼Ÿæˆ‘æƒ³é€šè¿‡è¿™ä¹ˆä¸€ä¸ªé—®é¢˜ï¼Œæ¥å±•ç¤ºTCP/IPåˆ†å±‚çš„æ€æƒ³ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/50/8f/50c05c8509a1d8436273adbf8701bb8f.png" alt=""><br>
è®©æˆ‘ä»¬å…ˆçœ‹å‘é€ç«¯ï¼Œå½“åº”ç”¨ç¨‹åºå°†æ•°æ®é€åˆ°å‘é€ç¼“å†²åŒºæ—¶ï¼Œè°ƒç”¨çš„æ˜¯sendæˆ–writeæ–¹æ³•ï¼Œå¦‚æœç¼“å­˜ä¸­æ²¡æœ‰ç©ºé—´ï¼Œç³»ç»Ÿè°ƒç”¨å°±ä¼šå¤±è´¥æˆ–è€…é˜»å¡ã€‚æˆ‘ä»¬è¯´ï¼Œè¿™ä¸ªåŠ¨ä½œäº‹å®ä¸Šæ˜¯ä¸€æ¬¡â€æ˜¾å¼æ‹·è´â€œã€‚è€Œåœ¨è¿™ä¹‹åï¼Œæ•°æ®å°†ä¼šæŒ‰ç…§TCP/IPçš„åˆ†å±‚å†æ¬¡è¿›è¡Œæ‹·è´ï¼Œè¿™å±‚çš„æ‹·è´å¯¹æˆ‘ä»¬æ¥è¯´å°±ä¸æ˜¯æ˜¾å¼çš„äº†ã€‚</p><p>æ¥ä¸‹æ¥è½®åˆ°TCPåè®®æ ˆå·¥ä½œï¼Œåˆ›å»ºPacketæŠ¥æ–‡ï¼Œå¹¶æŠŠæŠ¥æ–‡å‘é€åˆ°ä¼ è¾“é˜Ÿåˆ—ä¸­ï¼ˆqdiscï¼‰ï¼Œä¼ è¾“é˜Ÿåˆ—æ˜¯ä¸€ä¸ªå…¸å‹çš„ FIFO é˜Ÿåˆ—ï¼Œé˜Ÿåˆ—çš„æœ€å¤§å€¼å¯ä»¥é€šè¿‡ ifocnfig å‘½ä»¤è¾“å‡ºçš„ txqueuelen æ¥æŸ¥çœ‹ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œè¿™ä¸ªå€¼æœ‰å‡ åƒæŠ¥æ–‡å¤§å°ã€‚</p><p>TX ring åœ¨ç½‘ç»œé©±åŠ¨å’Œç½‘å¡ä¹‹é—´ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªä¼ è¾“è¯·æ±‚çš„é˜Ÿåˆ—ã€‚</p><p>ç½‘å¡ä½œä¸ºç‰©ç†è®¾å¤‡å·¥ä½œåœ¨ç‰©ç†å±‚ï¼Œä¸»è¦å·¥ä½œæ˜¯æŠŠè¦å‘é€çš„æŠ¥æ–‡ä¿å­˜åˆ°å†…éƒ¨çš„ç¼“å­˜ä¸­ï¼Œå¹¶å‘é€å‡ºå»ã€‚</p><p>æ¥ä¸‹æ¥å†çœ‹æ¥æ”¶ç«¯ï¼ŒæŠ¥æ–‡é¦–å…ˆåˆ°è¾¾ç½‘å¡ï¼Œç”±ç½‘å¡ä¿å­˜åœ¨è‡ªå·±çš„æ¥æ”¶ç¼“å­˜ä¸­ï¼Œæ¥ä¸‹æ¥æŠ¥æ–‡è¢«å‘é€è‡³ç½‘ç»œé©±åŠ¨å’Œç½‘å¡ä¹‹é—´çš„ RX ringï¼Œç½‘ç»œé©±åŠ¨ä» RX ring è·å–æŠ¥æ–‡ ï¼Œç„¶åæŠŠæŠ¥æ–‡å‘é€åˆ°ä¸Šå±‚ã€‚</p><p>è¿™é‡Œå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œç½‘ç»œé©±åŠ¨å’Œä¸Šå±‚ä¹‹é—´æ²¡æœ‰ç¼“å­˜ï¼Œå› ä¸ºç½‘ç»œé©±åŠ¨ä½¿ç”¨ Napi è¿›è¡Œæ•°æ®ä¼ è¾“ã€‚å› æ­¤ï¼Œå¯ä»¥è®¤ä¸ºä¸Šå±‚ç›´æ¥ä» RX ring ä¸­è¯»å–æŠ¥æ–‡ã€‚</p><p>æœ€åï¼ŒæŠ¥æ–‡çš„æ•°æ®ä¿å­˜åœ¨å¥—æ¥å­—æ¥æ”¶ç¼“å­˜ä¸­ï¼Œåº”ç”¨ç¨‹åºä»å¥—æ¥å­—æ¥æ”¶ç¼“å­˜ä¸­è¯»å–æ•°æ®ã€‚</p><p>è¿™å°±æ˜¯æ•°æ®æµä»åº”ç”¨ç¨‹åºå‘é€ç«¯ï¼Œä¸€ç›´åˆ°åº”ç”¨ç¨‹åºæ¥æ”¶ç«¯çš„æ•´ä¸ªå†ç¨‹ï¼Œä½ çœ‹æ‡‚äº†å—ï¼Ÿ</p><p>ä¸Šé¢çš„ä»»ä½•ä¸€ä¸ªç¯èŠ‚ç¨æœ‰ç§¯å‹ï¼Œéƒ½ä¼šå¯¹ç¨‹åºæ€§èƒ½äº§ç”Ÿå½±å“ã€‚ä½†å¥½æ¶ˆæ¯æ˜¯ï¼Œå†…æ ¸å’Œç½‘ç»œè®¾å¤‡ä¾›åº”å•†å·²ç»å¸®æˆ‘ä»¬æŠŠä¸€åˆ‡éƒ½æ‰“ç‚¹å¥½äº†ï¼Œæˆ‘ä»¬çœ‹åˆ°å’Œç”¨åˆ°çš„ï¼Œå…¶å®åªæ˜¯å†°å±±ä¸Šçš„ä¸€è§’è€Œå·²ã€‚</p><p>è¿™å°±æ˜¯åŸºç¡€ç¯‡çš„æ€»ç»“ä¸ç­”ç–‘éƒ¨åˆ†ï¼Œæˆ‘å…ˆå¯¹ä¹‹å‰åŸºç¡€ç¯‡çš„å†…å®¹è¡¥å……äº†ä¸€äº›èµ„æ–™ï¼Œå°½å¯èƒ½åœ°ä¸ºä½ å­¦ä¹ ç½‘ç»œç¼–ç¨‹æä¾›æ–¹ä¾¿ï¼Œç„¶åé’ˆå¯¹å¤§å®¶æœ‰æ˜æ˜¾ç–‘æƒ‘çš„é—®é¢˜è¿›è¡Œäº†è§£ç­”ï¼Œå¸Œæœ›å¯¹ä½ æœ‰æ‰€å¸®åŠ©ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/bf/25/bfc96ae0d8f839919b9d9866cfb8b025.jpg" alt=""></p><h2>ç²¾é€‰ç•™è¨€ï¼š</h2>
        <ul>
        
<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            ly  2019-08-21 17:54:09
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            å“ˆå“ˆï¼Œå’Œè€å¸ˆçµé­‚ç¢°æ’äº†ï¼Œunixçš„ç½‘ç»œç¼–ç¨‹å·1å’Œ2æ˜¨å¤©ä¸‹å•çš„ã€‚<br>æŒ‰ç…§ç¬¬5ç« çš„ç›¸å…³é€»è¾‘è‡ªå·±ç”¨Javaå†™äº†ä¸€æ®µdemoç¨‹åºã€‚<br>ã€Javaä»£ç é€»è¾‘ã€‘<br>æœåŠ¡ç«¯æ¥æ”¶ 1024 å­—èŠ‚(read)å°±ä¼‘çœ 1ç§’é’Ÿï¼›<br>å®¢æˆ·ç«¯forå¾ªç¯50æ¬¡,æ¯1æ¬¡forå¾ªç¯å†™ 10 * 1024 å­—èŠ‚å‡ºå»(write&#47;flush)ã€‚<br>ã€ç°è±¡ã€‘<br>æœåŠ¡ç«¯é—´éš”1ç§’æ‰“å°å‡ºæ¥æ”¶åˆ°çš„1024å­—èŠ‚æ•°æ®ã€‚<br>å®¢æˆ·ç«¯å‘é€å®Œå‡ ä¹æ¯å‘é€1024*10å­—èŠ‚ä»¥åä¼šé˜»å¡ä¸€ä¼šï¼Œç„¶åæ¥ç€å†å‘é€1024*10å­—èŠ‚ï¼Œä½†æ˜¯å®¢æˆ·ç«¯å‘é€å®Œæ‰€æœ‰æ•°æ®é€€å‡ºæ—¶ï¼ŒæœåŠ¡ç«¯è¿˜åœ¨ä¸æ–­çš„æ¥æ”¶æ‰“å°ã€‚<br>ã€wiresharkæŠ“åŒ…ç‰‡æ®µã€‘<br>ï¼ˆ56725å®¢æˆ·ç«¯ç«¯å£ï¼Œ8888æœåŠ¡ç«¯ç«¯å£ï¼‰<br>------------------------------------------------------------<br>......<br>56725  &gt;  8888 [ACK] Seq=1 Ack=1 Win=8192 Len=1460<br>56725  &gt;  8888 [ACK] Seq=1461 Ack=1 Win=8192 Len=1460<br>8888  &gt;  56725 [ACK] Seq=1 Ack=2921 Win=8192 Len=0<br>56725  &gt;  8888 [ACK] Seq=2921 Ack=1 Win=8192 Len=1460<br>56725  &gt;  8888 [ACK] Seq=4381 Ack=1 Win=8192 Len=1460<br>56725  &gt;  8888 [ACK] Seq=5841 Ack=1 Win=8192 Len=1460<br>56725  &gt;  8888 [ACK] Seq=7301 Ack=1 Win=8192 Len=1460<br>8888  &gt;  56725 [ACK] Seq=1 Ack=8761 Win=8192 Len=0<br>......<br>------------------------------------------------------------<br>è§‚å¯Ÿçš„æœŸé—´ä¼šå‡ºç°ä¸€äº› TCP Window Full &#47; TCP window Update ç­‰æ ‡è®°ã€‚<br>ã€ä¸ªäººç†è§£ã€‘<br>å®¢æˆ·ç«¯ä¹‹æ‰€ä»¥å‘é€ 1024*10 å­—èŠ‚ä»¥åä¼šé˜»å¡ï¼Œåº”è¯¥æ˜¯å‘é€ç«¯çš„é€Ÿåº¦å¤§äºäº†æ¥æ”¶ç«¯çš„é€Ÿåº¦ï¼ŒTCPåè®®ä¼šè‡ªåŠ¨å¯¹å‘é€æ–¹é™æµï¼Œåˆæˆ–è€…æ˜¯å› ä¸ºæœ¬åœ°å‘é€ç¼“å†²åŒºæ»¡äº†ï¼Œéœ€è¦é˜»å¡å‘é€æ–¹ã€‚<br><br>ã€ç–‘é—®ã€‘<br>1. ä¸ºä»€ä¹ˆå®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€æ•°æ®çš„æ—¶å€™ï¼ŒwireSharkæ˜¾ç¤ºçš„æ˜¯ [ACK] åº”ç­”æ ‡è®°,æˆ‘è®°å¾—ä¹‹å‰å‘é€æ¯”è¾ƒå°‘çš„æ•°æ®æ—¶æ˜¾ç¤ºçš„æ˜¯ [PSH+ACK]æ ‡è®°ï¼Ÿ<br>2. TCP Window Full&#47;TCP window Update è¿™äº›æ ‡è®°ä»€ä¹ˆæ—¶å€™ä¼šå‡ºç°ï¼Œä»£è¡¨ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿ<br>è¯·è€å¸ˆç‚¹è¯„ã€‚ã€‚ã€‚ã€‚ [1èµ]
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            çŸ³å°†ä»  2019-08-21 23:57:15
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            [root@izm5eb4ves923h7tl63px4z build]# cmake -f ..&#47;<br>CMake Error: Could not find CMAKE_ROOT !!!<br>CMake has most likely not been installed correctly.<br>Modules directory not found in<br>&#47;app&#47;cmake&#47;share&#47;cmake-3.15<br>CMake Error: Error executing cmake::LoadCache(). Aborting.<br><br>[root@izm5eb4ves923h7tl63px4z build]# <br> 
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            çŸ³å°†ä»  2019-08-21 23:07:48
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            è€å¸ˆï¼Œä½ è¿™ä¸ªç¯å¢ƒçœç•¥äº†å¥½å¤šä¸œè¥¿å•Šï¼Œcd build &amp;&amp; cmake -f ..&#47;<br>å“ªé‡Œçš„Buildç›®å½•å‘€<br> 
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            ä¼ è¯´ä¸­çš„æˆå¤§å¤§  2019-08-21 20:45:51
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            æ‰€ä»¥æœ€ç»ˆæ˜¯æ‹·è´äº†å…­æ¬¡ï¼Ÿ 
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            ä¼ è¯´ä¸­çš„æˆå¤§å¤§  2019-08-21 20:03:29
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            é‚£ä¸ªbuildç›®å½•æ˜¯é‚£ä¸ªè·¯å¾„ä¸‹çš„å•Šï¼Ÿæˆ‘æ„Ÿè§‰éƒ½æ˜¯ç³»ç»Ÿè·¯å¾„ä¸‹å‘¢ 
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            å¼ ç«‹å  2019-08-21 19:41:46
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            cmakeçš„ -få‚æ•°ï¼Œå¹²ä»€ä¹ˆçš„ã€‚ è€å¸ˆï¼Œæˆ‘googleæŸ¥äº†ä¸‹ï¼Œéƒ½æ²¡æ‰¾åˆ°è¿™ä¸ªå‚æ•°å•Š 
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            è®¸ç«¥ç«¥  2019-08-21 11:15:09
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            ä¸€æ®µæ•°æ®æµä»åº”ç”¨ç¨‹åºå‘é€ç«¯ï¼Œä¸€ç›´åˆ°åº”ç”¨ç¨‹åºæ¥æ”¶ç«¯ï¼Œæ€»å…±ç»è¿‡äº†å¤šå°‘æ¬¡æ‹·è´ï¼Ÿ<br>è¿™é“æ€è€ƒé¢˜ç¡®å®å¾ˆéš¾ï¼Œç½‘ä¸Šæœåˆ°çš„ç»“æœä¹Ÿæ˜¯äº”èŠ±å…«é—¨ã€‚ 
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            é©¬ä»”  2019-08-21 10:39:06
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            æˆ‘æƒ³å­¦ä¹ Linuxä»£ç åœ¨windowä¸Šçš„portingï¼Œä½†æ˜¯ç½‘ä¸Šçš„èµ„æ–™éƒ½æ¯”è¾ƒæ•£ã€‚è€å¸ˆå¯ä»¥æ¨èä¸€äº›æ¯”è¾ƒå®Œæ•´çš„èµ„æ–™å—ã€‚ 
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            æ‘˜æ˜Ÿæ˜Ÿçš„äºº  2019-08-21 09:35:41
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            è¿è¡Œèµ·æ¥äº†ï¼Œå¥½å¤šè­¦å‘Šï¼Œæ˜¯ gcc ç‰ˆæœ¬é—®é¢˜å—ï¼Œgcc7.4ï¼Œ wsl Ubuntu18.04ã€‚æ ¹æ®æºç ï¼Œå¥½å¥½å­¦ä¹ ï¼Œè¿˜æ˜¯æœ‰ç‚¹æ‡µæ‡‚çš„ 
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            ğŸ˜Š  2019-08-21 08:29:10
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            transferToæ–¹æ³•æ˜¯èŠ‚çœäº†ä¸­é—´ä¸¤æ¬¡æ•°æ®çš„copyå—ï¼Ÿ 
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            ä¸šä½™çˆ±å¥½è€…  2019-08-21 08:04:03
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            æjavaçš„ï¼Œçœ‹äº†è¿™ç¯‡ï¼Œæ›´æœ‰ä¿¡å¿ƒå­¦å¥½cå’Œç½‘ç»œç¼–ç¨‹äº† 
        </div>
        
    </div>
</li>
            </ul>
</div>
</body>
</html>