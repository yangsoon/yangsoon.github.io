<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>12-è¿æ¥æ— æ•ˆï¼šä½¿ç”¨Keep-Aliveè¿˜æ˜¯åº”ç”¨å¿ƒè·³æ¥æ£€æµ‹ï¼Ÿ</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <style>
        html {
            color: #333;
            -webkit-text-size-adjust: 100%;
            -ms-text-size-adjust: 100%;
            text-rendering: optimizelegibility;
            font-family: Helvetica Neue, PingFang SC, Verdana, Microsoft Yahei, Hiragino Sans GB, Microsoft Sans Serif, WenQuanYi Micro Hei, sans-serif
        }

        html.borderbox *,
        html.borderbox :after,
        html.borderbox :before {
            box-sizing: border-box
        }

        article,
        aside,
        blockquote,
        body,
        button,
        code,
        dd,
        details,
        dl,
        dt,
        fieldset,
        figcaption,
        figure,
        footer,
        form,
        h1,
        h2,
        h3,
        h4,
        h5,
        h6,
        header,
        hr,
        input,
        legend,
        li,
        menu,
        nav,
        ol,
        p,
        pre,
        section,
        td,
        textarea,
        th,
        ul {
            margin: 0;
            padding: 0
        }

        article,
        aside,
        details,
        figcaption,
        figure,
        footer,
        header,
        menu,
        nav,
        section {
            display: block
        }

        audio,
        canvas,
        video {
            display: inline-block
        }

        body,
        button,
        input,
        select,
        textarea {
            font: 300 1em/1.8 PingFang SC, Lantinghei SC, Microsoft Yahei, Hiragino Sans GB, Microsoft Sans Serif, WenQuanYi Micro Hei, Helvetica, sans-serif
        }

        button::-moz-focus-inner,
        input::-moz-focus-inner {
            padding: 0;
            border: 0
        }

        table {
            border-collapse: collapse;
            border-spacing: 0
        }

        fieldset,
        img {
            border: 0
        }

        blockquote {
            position: relative;
            color: #999;
            font-weight: 400;
            border-left: 1px solid #1abc9c;
            padding-left: 1em;
            margin: 1em 3em 1em 2em
        }

        @media only screen and (max-width: 640px) {
            blockquote {
                margin: 1em 0
            }
        }

        abbr,
        acronym {
            border-bottom: 1px dotted;
            font-variant: normal
        }

        abbr {
            cursor: help
        }

        del {
            text-decoration: line-through
        }

        address,
        caption,
        cite,
        code,
        dfn,
        em,
        th,
        var {
            font-style: normal;
            font-weight: 400
        }

        ol,
        ul {
            list-style: none
        }

        caption,
        th {
            text-align: left
        }

        q:after,
        q:before {
            content: ""
        }

        sub,
        sup {
            font-size: 75%;
            line-height: 0;
            position: relative
        }

        :root sub,
        :root sup {
            vertical-align: baseline
        }

        sup {
            top: -.5em
        }

        sub {
            bottom: -.25em
        }

        a {
            color: #1abc9c
        }

        a:hover {
            text-decoration: underline
        }

        .typo a {
            border-bottom: 1px solid #1abc9c
        }

        .typo a:hover {
            border-bottom-color: #555;
            color: #555
        }

        .typo a:hover,
        a,
        ins {
            text-decoration: none
        }

        .typo-u,
        u {
            text-decoration: underline
        }

        mark {
            background: #fffdd1;
            border-bottom: 1px solid #ffedce;
            padding: 2px;
            margin: 0 5px
        }

        code,
        pre,
        pre tt {
            font-family: Courier, Courier New, monospace
        }

        pre {
            background: hsla(0, 0%, 97%, .7);
            border: 1px solid #ddd;
            padding: 1em 1.5em;
            display: block;
            -webkit-overflow-scrolling: touch
        }

        hr {
            border: none;
            border-bottom: 1px solid #cfcfcf;
            margin-bottom: .8em;
            height: 10px
        }

        .typo-small,
        figcaption,
        small {
            font-size: .9em;
            color: #888
        }

        b,
        strong {
            font-weight: 700;
            color: #000
        }

        [draggable] {
            cursor: move
        }

        .clearfix:after,
        .clearfix:before {
            content: "";
            display: table
        }

        .clearfix:after {
            clear: both
        }

        .clearfix {
            zoom: 1
        }

        .textwrap,
        .textwrap td,
        .textwrap th {
            word-wrap: break-word;
            word-break: break-all
        }

        .textwrap-table {
            table-layout: fixed
        }

        .serif {
            font-family: Palatino, Optima, Georgia, serif
        }

        .typo-dl,
        .typo-form,
        .typo-hr,
        .typo-ol,
        .typo-p,
        .typo-pre,
        .typo-table,
        .typo-ul,
        .typo dl,
        .typo form,
        .typo hr,
        .typo ol,
        .typo p,
        .typo pre,
        .typo table,
        .typo ul,
        blockquote {
            margin-bottom: 1rem
        }

        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            font-family: PingFang SC, Helvetica Neue, Verdana, Microsoft Yahei, Hiragino Sans GB, Microsoft Sans Serif, WenQuanYi Micro Hei, sans-serif;
            color: #000;
            line-height: 1.35
        }

        .typo-h1,
        .typo-h2,
        .typo-h3,
        .typo-h4,
        .typo-h5,
        .typo-h6,
        .typo h1,
        .typo h2,
        .typo h3,
        .typo h4,
        .typo h5,
        .typo h6 {
            margin-top: 1.2em;
            margin-bottom: .6em;
            line-height: 1.35
        }

        .typo-h1,
        .typo h1 {
            font-size: 2em
        }

        .typo-h2,
        .typo h2 {
            font-size: 1.8em
        }

        .typo-h3,
        .typo h3 {
            font-size: 1.6em
        }

        .typo-h4,
        .typo h4 {
            font-size: 1.4em
        }

        .typo-h5,
        .typo-h6,
        .typo h5,
        .typo h6 {
            font-size: 1.2em
        }

        .typo-ul,
        .typo ul {
            margin-left: 1.3em;
            list-style: disc
        }

        .typo-ol,
        .typo ol {
            list-style: decimal;
            margin-left: 1.9em
        }

        .typo-ol ol,
        .typo-ol ul,
        .typo-ul ol,
        .typo-ul ul,
        .typo li ol,
        .typo li ul {
            margin-bottom: .8em;
            margin-left: 2em
        }

        .typo-ol ul,
        .typo-ul ul,
        .typo li ul {
            list-style: circle
        }

        .typo-table td,
        .typo-table th,
        .typo table caption,
        .typo table td,
        .typo table th {
            border: 1px solid #ddd;
            padding: .5em 1em;
            color: #666
        }

        .typo-table th,
        .typo table th {
            background: #fbfbfb
        }

        .typo-table thead th,
        .typo table thead th {
            background: hsla(0, 0%, 95%, .7)
        }

        .typo table caption {
            border-bottom: none
        }

        .typo-input,
        .typo-textarea {
            -webkit-appearance: none;
            border-radius: 0
        }

        .typo-em,
        .typo em,
        caption,
        legend {
            color: #000;
            font-weight: inherit
        }

        .typo-em {
            position: relative
        }

        .typo-em:after {
            position: absolute;
            top: .65em;
            left: 0;
            width: 100%;
            overflow: hidden;
            white-space: nowrap;
            content: "\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB"
        }

        .typo img {
            max-width: 100%
        }

        .common-content {
            font-weight: 400;
            color: #353535;
            line-height: 1.75rem;
            white-space: normal;
            word-break: normal;
            font-size: 1rem
        }

        .common-content img {
            display: block;
            max-width: 100%;
            background-color: #eee
        }

        .common-content audio,
        .common-content video {
            width: 100%;
            background-color: #eee
        }

        .common-content center,
        .common-content font {
            margin-top: 1rem;
            display: inline-block
        }

        .common-content center {
            width: 100%
        }

        .common-content pre {
            margin-top: 1rem;
            padding-left: 0;
            padding-right: 0;
            position: relative;
            overflow: hidden
        }

        .common-content pre code {
            font-size: .8rem;
            font-family: Consolas, Liberation Mono, Menlo, monospace, Courier;
            display: block;
            width: 100%;
            box-sizing: border-box;
            padding-left: 1rem;
            padding-right: 1rem;
            overflow-x: auto
        }

        .common-content hr {
            border: none;
            margin-top: 1.5rem;
            margin-bottom: 1.5rem;
            border-top: 1px solid #f5f5f5;
            height: 1px;
            background: none
        }

        .common-content b,
        .common-content h1,
        .common-content h2,
        .common-content h3,
        .common-content h4,
        .common-content h5,
        .common-content strong {
            font-weight: 700
        }

        .common-content h1,
        .common-content h2 {
            font-size: 1.125rem;
            margin-bottom: .45rem
        }

        .common-content h3,
        .common-content h4,
        .common-content h5 {
            font-size: 1rem;
            margin-bottom: .45rem
        }

        .common-content p {
            font-weight: 400;
            color: #353535;
            margin-top: .15rem
        }

        .common-content .orange {
            color: #ff5a05
        }

        .common-content .reference {
            font-size: 1rem;
            color: #888
        }

        .custom-rich-content h1 {
            margin-top: 0;
            font-weight: 400;
            font-size: 15.25px;
            border-bottom: 1px solid #eee;
            line-height: 2.8
        }

        .custom-rich-content li,
        .custom-rich-content p {
            font-size: 14px;
            color: #888;
            line-height: 1.6
        }

        table.hljs-ln {
            margin-bottom: 0;
            border-spacing: 0;
            border-collapse: collapse
        }

        table.hljs-ln,
        table.hljs-ln tbody,
        table.hljs-ln td,
        table.hljs-ln tr {
            box-sizing: border-box
        }

        table.hljs-ln td {
            padding: 0;
            border: 0
        }

        table.hljs-ln td.hljs-ln-numbers {
            min-width: 15px;
            color: rgba(27, 31, 35, .3);
            text-align: right;
            white-space: nowrap;
            cursor: pointer;
            user-select: none
        }

        table.hljs-ln td.hljs-ln-code,
        table.hljs-ln td.hljs-ln-numbers {
            font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace;
            font-size: 12px;
            line-height: 20px;
            vertical-align: top
        }

        table.hljs-ln td.hljs-ln-code {
            position: relative;
            padding-right: 10px;
            padding-left: 10px;
            overflow: visible;
            color: #24292e;
            word-wrap: normal;
            white-space: pre
        }

        video::-webkit-media-controls {
            overflow: hidden !important
        }

        video::-webkit-media-controls-enclosure {
            width: calc(100% + 32px);
            margin-left: auto
        }

        ._29HP61GA_0 {
            max-width:800px;
            margin:0 auto;
            margin-bottom: 20px;
            font-weight: 400;
            color: #353535;
            line-height: 1.76;
            white-space: normal;
            word-break: normal;
            font-size: 17px;
            -webkit-transition: background-color .3s ease;
            transition: background-color .3s ease
        }

        ._29HP61GA_0 .MathJax_Display {
            overflow: auto
        }

        ._29HP61GA_0 .poster {
            position: fixed;
            left: -10000px;
            top: -10000px;
            overflow: hidden;
            padding: 1rem;
            background: #ececec
        }

        ._29HP61GA_0 .richcontent-pre-copy {
            font-size: 13px;
            color: #888;
            position: absolute;
            right: 1em;
            top: .5em;
            cursor: pointer;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none
        }

        ._29HP61GA_0 .richcontent-pre-copy .iconfont {
            font-size: 12px;
            margin-right: .2em
        }

        ._29HP61GA_0 a {
            color: #fa8919;
            border-bottom: 1px solid #fa8919
        }

        ._29HP61GA_0 img {
            display: block;
            max-width: 100%;
            position: relative;
            left: 50%;
            -webkit-transform: translateX(-50%);
            transform: translateX(-50%);
            background-color: #eee;
            vertical-align: top;
            border-radius: 0
        }

        ._29HP61GA_0 audio,
        ._29HP61GA_0 video {
            width: 100%;
            background-color: #eee
        }

        ._29HP61GA_0 pre {
            margin-top: 16px;
            padding: 34px 0 0;
            margin-bottom: 30px;
            position: relative;
            border-radius: 6px;
            background: rgba(246, 247, 251, .749);
            border: 0
        }

        ._29HP61GA_0 pre code {
            font-size: 12px;
            font-family: Consolas, Liberation Mono, Menlo, monospace, Courier;
            display: block;
            -webkit-box-sizing: border-box;
            box-sizing: border-box;
            margin-left: 16px;
            margin-right: 16px;
            overflow-x: scroll
        }

        ._29HP61GA_0 pre code:after {
            content: "";
            height: 30px;
            width: 100%;
            display: block
        }

        ._29HP61GA_0 hr {
            border: none;
            margin-top: 1.5rem;
            margin-bottom: 1.5rem;
            border-top: 1px solid #f5f5f5;
            height: 1px;
            background: none
        }

        ._29HP61GA_0 h1,
        ._29HP61GA_0 h2,
        ._29HP61GA_0 h3,
        ._29HP61GA_0 h4,
        ._29HP61GA_0 h5 {
            margin-bottom: 20px;
            margin-top: 0;
            font-weight: 700
        }

        ._29HP61GA_0 b,
        ._29HP61GA_0 strong {
            font-weight: 700
        }

        ._29HP61GA_0 h1 {
            font-size: 21px
        }

        ._29HP61GA_0 h2 {
            font-size: 20px
        }

        ._29HP61GA_0 h3 {
            font-size: 19px
        }

        ._29HP61GA_0 h4 {
            font-size: 18px
        }

        ._29HP61GA_0 h5 {
            font-size: 17px
        }

        ._29HP61GA_0 center,
        ._29HP61GA_0 p {
            font-weight: 400;
            color: #353535;
            margin-top: 0;
            margin-bottom: 30px;
            word-break: break-word
        }

        ._29HP61GA_0 center {
            text-align: center
        }

        ._29HP61GA_0 blockquote {
            margin-top: 0;
            margin-bottom: 34px;
            border-left: 3px solid #e8e8e8;
            padding-left: 17px;
            color: #353535
        }

        ._29HP61GA_0 blockquote p {
            margin-top: 0;
            margin-bottom: 0
        }

        ._29HP61GA_0 ol,
        ._29HP61GA_0 ul {
            margin-bottom: 30px
        }

        ._29HP61GA_0 ol p,
        ._29HP61GA_0 ul p {
            margin-top: 0;
            margin-bottom: 0
        }

        ._29HP61GA_0 ol {
            list-style: decimal;
            margin-left: 20px
        }

        ._29HP61GA_0 ul li {
            padding-left: 17px;
            position: relative;
            margin-bottom: 10px
        }

        ._29HP61GA_0 ul li:after {
            content: "";
            height: 6px;
            width: 6px;
            border-radius: 50%;
            background: #353535;
            position: absolute;
            top: 10px;
            left: 0
        }

        ._29HP61GA_0 .orange {
            color: #fa8919
        }

        ._29HP61GA_0 .reference {
            color: #888
        }

        ._29HP61GA_0 .m-right {
            text-align: right
        }

        ._29HP61GA_0 .m-center {
            text-align: center;
            display: block
        }

        ._29HP61GA_0 .m-gray {
            color: #888
        }

        ._29HP61GA_0 .m-small {
            font-size: 15px
        }

        ._29HP61GA_0 table.hljs-ln {
            margin-bottom: 0;
            border-spacing: 0;
            border-collapse: collapse
        }

        ._29HP61GA_0 table.hljs-ln,
        ._29HP61GA_0 table.hljs-ln tbody,
        ._29HP61GA_0 table.hljs-ln td,
        ._29HP61GA_0 table.hljs-ln tr {
            -webkit-box-sizing: border-box;
            box-sizing: border-box
        }

        ._29HP61GA_0 table.hljs-ln td {
            padding: 0;
            border: 0
        }

        ._29HP61GA_0 table.hljs-ln td.hljs-ln-numbers {
            min-width: 15px;
            font-size: 12px;
            color: rgba(27, 31, 35, .3);
            text-align: right;
            white-space: nowrap;
            cursor: pointer;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none
        }

        ._29HP61GA_0 table.hljs-ln td.hljs-ln-code,
        ._29HP61GA_0 table.hljs-ln td.hljs-ln-numbers {
            font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace;
            line-height: 20px;
            vertical-align: top
        }

        ._29HP61GA_0 table.hljs-ln td.hljs-ln-code {
            position: relative;
            padding-right: 10px;
            padding-left: 10px;
            overflow: visible;
            font-size: 13px;
            color: #666;
            word-wrap: normal;
            white-space: pre
        }

    </style>
</head>
<body>
<div class="_29HP61GA_0">
<h1>12-è¿æ¥æ— æ•ˆï¼šä½¿ç”¨Keep-Aliveè¿˜æ˜¯åº”ç”¨å¿ƒè·³æ¥æ£€æµ‹ï¼Ÿ</h1>
<p>ä½ å¥½ï¼Œæˆ‘æ˜¯ç››å»¶æ•ï¼Œè¿™é‡Œæ˜¯ç½‘ç»œç¼–ç¨‹å®æˆ˜ç¬¬12è®²ï¼Œæ¬¢è¿å›æ¥ã€‚</p><p>ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬è®²åˆ°äº†å¦‚ä½•ä½¿ç”¨closeå’Œshutdownæ¥å®Œæˆè¿æ¥çš„å…³é—­ï¼Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¼šä¼˜é€‰shutdownæ¥å®Œæˆå¯¹è¿æ¥ä¸€ä¸ªæ–¹å‘çš„å…³é—­ï¼Œå¾…å¯¹ç«¯å¤„ç†å®Œä¹‹åï¼Œå†å®Œæˆå¦å¤–ä¸€ä¸ªæ–¹å‘çš„å…³é—­ã€‚</p><p>åœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼Œè¿æ¥çš„ä¸€ç«¯éœ€è¦ä¸€ç›´æ„ŸçŸ¥è¿æ¥çš„çŠ¶æ€ï¼Œå¦‚æœè¿æ¥æ— æ•ˆäº†ï¼Œåº”ç”¨ç¨‹åºå¯èƒ½éœ€è¦æŠ¥é”™ï¼Œæˆ–è€…é‡æ–°å‘èµ·è¿æ¥ç­‰ã€‚</p><p>åœ¨è¿™ä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°†å¸¦ä½ ä½“éªŒä¸€ä¸‹å¯¹è¿æ¥çŠ¶æ€çš„æ£€æµ‹ï¼Œå¹¶æä¾›æ£€æµ‹è¿æ¥çŠ¶æ€çš„æœ€ä½³å®è·µã€‚</p><h2>ä»ä¸€ä¸ªä¾‹å­å¼€å§‹</h2><p>è®©æˆ‘ä»¬ç”¨ä¸€ä¸ªä¾‹å­å¼€å§‹ä»Šå¤©çš„è¯é¢˜ã€‚</p><p>æˆ‘ä¹‹å‰åšè¿‡ä¸€ä¸ªåŸºäºNATSæ¶ˆæ¯ç³»ç»Ÿçš„é¡¹ç›®ï¼Œå¤šä¸ªæ¶ˆæ¯çš„æä¾›è€… ï¼ˆpubï¼‰å’Œè®¢é˜…è€…ï¼ˆsubï¼‰éƒ½è¿åˆ°NATSæ¶ˆæ¯ç³»ç»Ÿï¼Œé€šè¿‡è¿™ä¸ªç³»ç»Ÿæ¥å®Œæˆæ¶ˆæ¯çš„æŠ•é€’å’Œè®¢é˜…å¤„ç†ã€‚</p><p>çªç„¶æœ‰ä¸€å¤©ï¼Œçº¿ä¸ŠæŠ¥äº†ä¸€ä¸ªæ•…éšœï¼Œä¸€ä¸ªæµç¨‹ä¸èƒ½æ­£å¸¸å¤„ç†ã€‚ç»æ’æŸ¥ï¼Œå‘ç°æ¶ˆæ¯æ­£ç¡®åœ°æŠ•é€’åˆ°äº†NATSæœåŠ¡ç«¯ï¼Œä½†æ˜¯æ¶ˆæ¯è®¢é˜…è€…æ²¡æœ‰æ”¶åˆ°è¯¥æ¶ˆæ¯ï¼Œä¹Ÿæ²¡èƒ½åšå‡ºå¤„ç†ï¼Œå¯¼è‡´æµç¨‹æ²¡èƒ½è¿›è¡Œä¸‹å»ã€‚</p><p>é€šè¿‡è§‚å¯Ÿæ¶ˆæ¯è®¢é˜…è€…åå‘ç°ï¼Œæ¶ˆæ¯è®¢é˜…è€…åˆ°NATSæœåŠ¡ç«¯çš„è¿æ¥è™½ç„¶æ˜¾ç¤ºæ˜¯â€œæ­£å¸¸â€çš„ï¼Œä½†å®é™…ä¸Šï¼Œè¿™ä¸ªè¿æ¥å·²ç»æ˜¯æ— æ•ˆçš„äº†ã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºNATSæœåŠ¡å™¨å´©æºƒè¿‡ï¼ŒNATSæœåŠ¡å™¨å’Œæ¶ˆæ¯è®¢é˜…è€…ä¹‹é—´çš„è¿æ¥ä¸­æ–­FINåŒ…ï¼Œç”±äºå¼‚å¸¸æƒ…å†µï¼Œæ²¡èƒ½å¤Ÿæ­£å¸¸åˆ°è¾¾æ¶ˆæ¯è®¢é˜…è€…ï¼Œè¿™æ ·é€ æˆçš„ç»“æœå°±æ˜¯æ¶ˆæ¯è®¢é˜…è€…ä¸€ç›´ç»´æŠ¤ç€ä¸€ä¸ªâ€œè¿‡æ—¶çš„â€è¿æ¥ï¼Œä¸ä¼šæ”¶åˆ°NATSæœåŠ¡å™¨å‘é€æ¥çš„æ¶ˆæ¯ã€‚</p><!-- [[[read_end]]] --><p>è¿™ä¸ªæ•…éšœçš„æ ¹æœ¬åŸå› åœ¨äºï¼Œä½œä¸ºNATSæœåŠ¡å™¨çš„å®¢æˆ·ç«¯ï¼Œæ¶ˆæ¯è®¢é˜…è€…æ²¡æœ‰åŠæ—¶å¯¹è¿æ¥çš„æœ‰æ•ˆæ€§è¿›è¡Œæ£€æµ‹ï¼Œè¿™æ ·å°±é€ æˆäº†é—®é¢˜ã€‚</p><p>ä¿æŒå¯¹è¿æ¥æœ‰æ•ˆæ€§çš„æ£€æµ‹ï¼Œæ˜¯æˆ‘ä»¬åœ¨å®æˆ˜ä¸­å¿…é¡»è¦æ³¨æ„çš„ä¸€ä¸ªç‚¹ã€‚</p><h2>TCP Keep-Aliveé€‰é¡¹</h2><p>å¾ˆå¤šåˆšæ¥è§¦TCPç¼–ç¨‹çš„äººä¼šæƒŠè®¶åœ°å‘ç°ï¼Œåœ¨æ²¡æœ‰æ•°æ®è¯»å†™çš„â€œé™é»˜â€çš„è¿æ¥ä¸Šï¼Œæ˜¯æ²¡æœ‰åŠæ³•å‘ç°TCPè¿æ¥æ˜¯æœ‰æ•ˆè¿˜æ˜¯æ— æ•ˆçš„ã€‚æ¯”å¦‚å®¢æˆ·ç«¯çªç„¶å´©æºƒï¼ŒæœåŠ¡å™¨ç«¯å¯èƒ½åœ¨å‡ å¤©å†…éƒ½ç»´æŠ¤ç€ä¸€ä¸ªæ— ç”¨çš„ TCPè¿æ¥ã€‚å‰é¢æåˆ°çš„ä¾‹å­å°±æ˜¯è¿™æ ·çš„ä¸€ä¸ªåœºæ™¯ã€‚</p><p>é‚£ä¹ˆæœ‰æ²¡æœ‰åŠæ³•å¼€å¯ç±»ä¼¼çš„â€œè½®è¯¢â€æœºåˆ¶ï¼Œè®©TCPå‘Šè¯‰æˆ‘ä»¬ï¼Œè¿æ¥æ˜¯ä¸æ˜¯â€œæ´»ç€â€çš„å‘¢ï¼Ÿ</p><p>è¿™å°±æ˜¯TCPä¿æŒæ´»è·ƒæœºåˆ¶æ‰€è¦è§£å†³çš„é—®é¢˜ã€‚å®é™…ä¸Šï¼ŒTCPæœ‰ä¸€ä¸ªä¿æŒæ´»è·ƒçš„æœºåˆ¶å«åšKeep-Aliveã€‚</p><p>è¿™ä¸ªæœºåˆ¶çš„åŸç†æ˜¯è¿™æ ·çš„ï¼š</p><p>å®šä¹‰ä¸€ä¸ªæ—¶é—´æ®µï¼Œåœ¨è¿™ä¸ªæ—¶é—´æ®µå†…ï¼Œå¦‚æœæ²¡æœ‰ä»»ä½•è¿æ¥ç›¸å…³çš„æ´»åŠ¨ï¼ŒTCPä¿æ´»æœºåˆ¶ä¼šå¼€å§‹ä½œç”¨ï¼Œæ¯éš”ä¸€ä¸ªæ—¶é—´é—´éš”ï¼Œå‘é€ä¸€ä¸ªæ¢æµ‹æŠ¥æ–‡ï¼Œè¯¥æ¢æµ‹æŠ¥æ–‡åŒ…å«çš„æ•°æ®éå¸¸å°‘ï¼Œå¦‚æœè¿ç»­å‡ ä¸ªæ¢æµ‹æŠ¥æ–‡éƒ½æ²¡æœ‰å¾—åˆ°å“åº”ï¼Œåˆ™è®¤ä¸ºå½“å‰çš„TCPè¿æ¥å·²ç»æ­»äº¡ï¼Œç³»ç»Ÿå†…æ ¸å°†é”™è¯¯ä¿¡æ¯é€šçŸ¥ç»™ä¸Šå±‚åº”ç”¨ç¨‹åºã€‚</p><p>ä¸Šè¿°çš„å¯å®šä¹‰å˜é‡ï¼Œåˆ†åˆ«è¢«ç§°ä¸ºä¿æ´»æ—¶é—´ã€ä¿æ´»æ—¶é—´é—´éš”å’Œä¿æ´»æ¢æµ‹æ¬¡æ•°ã€‚åœ¨Linuxç³»ç»Ÿä¸­ï¼Œè¿™äº›å˜é‡åˆ†åˆ«å¯¹åº”sysctlå˜é‡<code>net.ipv4.tcp_keepalive_time</code>ã€<code>net.ipv4.tcp_keepalive_intvl</code>ã€ <code>net.ipv4.tcp_keepalve_probes</code>ï¼Œé»˜è®¤è®¾ç½®æ˜¯7200ç§’ï¼ˆ2å°æ—¶ï¼‰ã€75ç§’å’Œ9æ¬¡æ¢æµ‹ã€‚</p><p>å¦‚æœå¼€å¯äº†TCPä¿æ´»ï¼Œéœ€è¦è€ƒè™‘ä»¥ä¸‹å‡ ç§æƒ…å†µï¼š</p><p>ç¬¬ä¸€ç§ï¼Œå¯¹ç«¯ç¨‹åºæ˜¯æ­£å¸¸å·¥ä½œçš„ã€‚å½“TCPä¿æ´»çš„æ¢æµ‹æŠ¥æ–‡å‘é€ç»™å¯¹ç«¯, å¯¹ç«¯ä¼šæ­£å¸¸å“åº”ï¼Œè¿™æ ·TCPä¿æ´»æ—¶é—´ä¼šè¢«é‡ç½®ï¼Œç­‰å¾…ä¸‹ä¸€ä¸ªTCPä¿æ´»æ—¶é—´çš„åˆ°æ¥ã€‚</p><p>ç¬¬äºŒç§ï¼Œå¯¹ç«¯ç¨‹åºå´©æºƒå¹¶é‡å¯ã€‚å½“TCPä¿æ´»çš„æ¢æµ‹æŠ¥æ–‡å‘é€ç»™å¯¹ç«¯åï¼Œå¯¹ç«¯æ˜¯å¯ä»¥å“åº”çš„ï¼Œä½†ç”±äºæ²¡æœ‰è¯¥è¿æ¥çš„æœ‰æ•ˆä¿¡æ¯ï¼Œä¼šäº§ç”Ÿä¸€ä¸ªRSTæŠ¥æ–‡ï¼Œè¿™æ ·å¾ˆå¿«å°±ä¼šå‘ç°TCPè¿æ¥å·²ç»è¢«é‡ç½®ã€‚</p><p>ç¬¬ä¸‰ç§ï¼Œæ˜¯å¯¹ç«¯ç¨‹åºå´©æºƒï¼Œæˆ–å¯¹ç«¯ç”±äºå…¶ä»–åŸå› å¯¼è‡´æŠ¥æ–‡ä¸å¯è¾¾ã€‚å½“TCPä¿æ´»çš„æ¢æµ‹æŠ¥æ–‡å‘é€ç»™å¯¹ç«¯åï¼ŒçŸ³æ²‰å¤§æµ·ï¼Œæ²¡æœ‰å“åº”ï¼Œè¿ç»­å‡ æ¬¡ï¼Œè¾¾åˆ°ä¿æ´»æ¢æµ‹æ¬¡æ•°åï¼ŒTCPä¼šæŠ¥å‘Šè¯¥TCPè¿æ¥å·²ç»æ­»äº¡ã€‚</p><p>TCPä¿æ´»æœºåˆ¶é»˜è®¤æ˜¯å…³é—­çš„ï¼Œå½“æˆ‘ä»¬é€‰æ‹©æ‰“å¼€æ—¶ï¼Œå¯ä»¥åˆ†åˆ«åœ¨è¿æ¥çš„ä¸¤ä¸ªæ–¹å‘ä¸Šå¼€å¯ï¼Œä¹Ÿå¯ä»¥å•ç‹¬åœ¨ä¸€ä¸ªæ–¹å‘ä¸Šå¼€å¯ã€‚å¦‚æœå¼€å¯æœåŠ¡å™¨ç«¯åˆ°å®¢æˆ·ç«¯çš„æ£€æµ‹ï¼Œå°±å¯ä»¥åœ¨å®¢æˆ·ç«¯éæ­£å¸¸æ–­è¿çš„æƒ…å†µä¸‹æ¸…é™¤åœ¨æœåŠ¡å™¨ç«¯ä¿ç•™çš„â€œè„æ•°æ®â€ï¼›è€Œå¼€å¯å®¢æˆ·ç«¯åˆ°æœåŠ¡å™¨ç«¯çš„æ£€æµ‹ï¼Œå°±å¯ä»¥åœ¨æœåŠ¡å™¨æ— å“åº”çš„æƒ…å†µä¸‹ï¼Œé‡æ–°å‘èµ·è¿æ¥ã€‚</p><p>ä¸ºä»€ä¹ˆTCPä¸æä¾›ä¸€ä¸ªé¢‘ç‡å¾ˆå¥½çš„ä¿æ´»æœºåˆ¶å‘¢ï¼Ÿæˆ‘çš„ç†è§£æ˜¯æ—©æœŸçš„ç½‘ç»œå¸¦å®½éå¸¸æœ‰é™ï¼Œå¦‚æœæä¾›ä¸€ä¸ªé¢‘ç‡å¾ˆé«˜çš„ä¿æ´»æœºåˆ¶ï¼Œå¯¹æœ‰é™çš„å¸¦å®½æ˜¯ä¸€ä¸ªæ¯”è¾ƒä¸¥é‡çš„æµªè´¹ã€‚</p><h2>åº”ç”¨å±‚æ¢æ´»</h2><p>å¦‚æœä½¿ç”¨TCPè‡ªèº«çš„keep-Aliveæœºåˆ¶ï¼Œåœ¨Linuxç³»ç»Ÿä¸­ï¼Œæœ€å°‘éœ€è¦ç»è¿‡2å°æ—¶11åˆ†15ç§’æ‰å¯ä»¥å‘ç°ä¸€ä¸ªâ€œæ­»äº¡â€è¿æ¥ã€‚è¿™ä¸ªæ—¶é—´æ˜¯æ€ä¹ˆè®¡ç®—å‡ºæ¥çš„å‘¢ï¼Ÿå…¶å®æ˜¯é€šè¿‡2å°æ—¶ï¼ŒåŠ ä¸Š75ç§’ä¹˜ä»¥9çš„æ€»å’Œã€‚å®é™…ä¸Šï¼Œå¯¹å¾ˆå¤šå¯¹æ—¶å»¶è¦æ±‚æ•æ„Ÿçš„ç³»ç»Ÿä¸­ï¼Œè¿™ä¸ªæ—¶é—´é—´éš”æ˜¯ä¸å¯æ¥å—çš„ã€‚</p><p>æ‰€ä»¥ï¼Œå¿…é¡»åœ¨åº”ç”¨ç¨‹åºè¿™ä¸€å±‚æ¥å¯»æ‰¾æ›´å¥½çš„è§£å†³æ–¹æ¡ˆã€‚</p><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨åº”ç”¨ç¨‹åºä¸­æ¨¡æ‹ŸTCP Keep-Aliveæœºåˆ¶ï¼Œæ¥å®Œæˆåœ¨åº”ç”¨å±‚çš„è¿æ¥æ¢æ´»ã€‚</p><p>æˆ‘ä»¬å¯ä»¥è®¾è®¡ä¸€ä¸ªPING-PONGçš„æœºåˆ¶ï¼Œéœ€è¦ä¿æ´»çš„ä¸€æ–¹ï¼Œæ¯”å¦‚å®¢æˆ·ç«¯ï¼Œåœ¨ä¿æ´»æ—¶é—´è¾¾åˆ°åï¼Œå‘èµ·å¯¹è¿æ¥çš„PINGæ“ä½œï¼Œå¦‚æœæœåŠ¡å™¨ç«¯å¯¹PINGæ“ä½œæœ‰å›åº”ï¼Œåˆ™é‡æ–°è®¾ç½®ä¿æ´»æ—¶é—´ï¼Œå¦åˆ™å¯¹æ¢æµ‹æ¬¡æ•°è¿›è¡Œè®¡æ•°ï¼Œå¦‚æœæœ€ç»ˆæ¢æµ‹æ¬¡æ•°è¾¾åˆ°äº†ä¿æ´»æ¢æµ‹æ¬¡æ•°é¢„å…ˆè®¾ç½®çš„å€¼ä¹‹åï¼Œåˆ™è®¤ä¸ºè¿æ¥å·²ç»æ— æ•ˆã€‚</p><p>è¿™é‡Œæœ‰ä¸¤ä¸ªæ¯”è¾ƒå…³é”®çš„ç‚¹ï¼š</p><p>ç¬¬ä¸€ä¸ªæ˜¯éœ€è¦ä½¿ç”¨å®šæ—¶å™¨ï¼Œè¿™å¯ä»¥é€šè¿‡ä½¿ç”¨I/Oå¤ç”¨è‡ªèº«çš„æœºåˆ¶æ¥å®ç°ï¼›ç¬¬äºŒä¸ªæ˜¯éœ€è¦è®¾è®¡ä¸€ä¸ªPING-PONGçš„åè®®ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬å°è¯•æ¥å®Œæˆè¿™æ ·çš„ä¸€ä¸ªè®¾è®¡ã€‚</p><h3>æ¶ˆæ¯æ ¼å¼è®¾è®¡</h3><p>æˆ‘ä»¬çš„ç¨‹åºæ˜¯å®¢æˆ·ç«¯æ¥å‘èµ·ä¿æ´»ï¼Œä¸ºæ­¤å®šä¹‰äº†ä¸€ä¸ªæ¶ˆæ¯å¯¹è±¡ã€‚ä½ å¯ä»¥åœ¨æ–‡ç¨¿ä¸­çœ‹åˆ°è¿™ä¸ªæ¶ˆæ¯å¯¹è±¡ï¼Œè¿™ä¸ªæ¶ˆæ¯å¯¹è±¡æ˜¯ä¸€ä¸ªç»“æ„ä½“ï¼Œå‰4ä¸ªå­—èŠ‚æ ‡è¯†äº†æ¶ˆæ¯ç±»å‹ï¼Œä¸ºäº†ç®€å•ï¼Œè¿™é‡Œè®¾è®¡äº†<code>MSG_PING</code>ã€<code>MSG_PONG</code>ã€<code>MSG_TYPE 1</code>å’Œ<code>MSG_TYPE 2</code>å››ç§æ¶ˆæ¯ç±»å‹ã€‚</p><pre><code>typedef struct {
    u_int32_t type;
    char data[1024];
} messageObject;

#define MSG_PING          1
#define MSG_PONG          2
#define MSG_TYPE1        11
#define MSG_TYPE2        21
</code></pre><h3>å®¢æˆ·ç«¯ç¨‹åºè®¾è®¡</h3><p>å®¢æˆ·ç«¯å®Œå…¨æ¨¡æ‹ŸTCP Keep-Aliveçš„æœºåˆ¶ï¼Œåœ¨ä¿æ´»æ—¶é—´è¾¾åˆ°åï¼Œæ¢æ´»æ¬¡æ•°å¢åŠ 1ï¼ŒåŒæ—¶å‘æœåŠ¡å™¨ç«¯å‘é€PINGæ ¼å¼çš„æ¶ˆæ¯ï¼Œæ­¤åä»¥é¢„è®¾çš„ä¿æ´»æ—¶é—´é—´éš”ï¼Œä¸æ–­åœ°å‘æœåŠ¡å™¨ç«¯å‘é€PINGæ ¼å¼çš„æ¶ˆæ¯ã€‚å¦‚æœèƒ½æ”¶åˆ°æœåŠ¡å™¨ç«¯çš„åº”ç­”ï¼Œåˆ™ç»“æŸä¿æ´»ï¼Œå°†ä¿æ´»æ—¶é—´ç½®ä¸º0ã€‚</p><p>è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨select I/Oå¤ç”¨å‡½æ•°è‡ªå¸¦çš„å®šæ—¶å™¨ï¼Œselectå‡½æ•°å°†åœ¨åé¢è¯¦ç»†ä»‹ç»ã€‚</p><pre><code>#include &quot;lib/common.h&quot;
#include &quot;message_objecte.h&quot;

#define    MAXLINE     4096
#define    KEEP_ALIVE_TIME  10
#define    KEEP_ALIVE_INTERVAL  3
#define    KEEP_ALIVE_PROBETIMES  3


int main(int argc, char **argv) {
    if (argc != 2) {
        error(1, 0, &quot;usage: tcpclient &lt;IPaddress&gt;&quot;);
    }

    int socket_fd;
    socket_fd = socket(AF_INET, SOCK_STREAM, 0);

    struct sockaddr_in server_addr;
    bzero(&amp;server_addr, sizeof(server_addr));
    server_addr.sin_family = AF_INET;
    server_addr.sin_port = htons(SERV_PORT);
    inet_pton(AF_INET, argv[1], &amp;server_addr.sin_addr);

    socklen_t server_len = sizeof(server_addr);
    int connect_rt = connect(socket_fd, (struct sockaddr *) &amp;server_addr, server_len);
    if (connect_rt &lt; 0) {
        error(1, errno, &quot;connect failed &quot;);
    }

    char recv_line[MAXLINE + 1];
    int n;

    fd_set readmask;
    fd_set allreads;

    struct timeval tv;
    int heartbeats = 0;

    tv.tv_sec = KEEP_ALIVE_TIME;
    tv.tv_usec = 0;

    messageObject messageObject;

    FD_ZERO(&amp;allreads);
    FD_SET(socket_fd, &amp;allreads);
    for (;;) {
        readmask = allreads;
        int rc = select(socket_fd + 1, &amp;readmask, NULL, NULL, &amp;tv);
        if (rc &lt; 0) {
            error(1, errno, &quot;select failed&quot;);
        }
        if (rc == 0) {
            if (++heartbeats &gt; KEEP_ALIVE_PROBETIMES) {
                error(1, 0, &quot;connection dead\n&quot;);
            }
            printf(&quot;sending heartbeat #%d\n&quot;, heartbeats);
            messageObject.type = htonl(MSG_PING);
            rc = send(socket_fd, (char *) &amp;messageObject, sizeof(messageObject), 0);
            if (rc &lt; 0) {
                error(1, errno, &quot;send failure&quot;);
            }
            tv.tv_sec = KEEP_ALIVE_INTERVAL;
            continue;
        }
        if (FD_ISSET(socket_fd, &amp;readmask)) {
            n = read(socket_fd, recv_line, MAXLINE);
            if (n &lt; 0) {
                error(1, errno, &quot;read error&quot;);
            } else if (n == 0) {
                error(1, 0, &quot;server terminated \n&quot;);
            }
            printf(&quot;received heartbeat, make heartbeats to 0 \n&quot;);
            heartbeats = 0;
            tv.tv_sec = KEEP_ALIVE_TIME;
        }
    }
}
</code></pre><p>è¿™ä¸ªç¨‹åºä¸»è¦åˆ†æˆä¸‰å¤§éƒ¨åˆ†ï¼š</p><p>ç¬¬ä¸€éƒ¨åˆ†ä¸ºå¥—æ¥å­—çš„åˆ›å»ºå’Œè¿æ¥å»ºç«‹ï¼š</p><ul>
<li>15-16è¡Œï¼Œåˆ›å»ºäº†TCPå¥—æ¥å­—ï¼›</li>
<li>18-22è¡Œï¼Œåˆ›å»ºäº†IPv4ç›®æ ‡åœ°å€ï¼Œå…¶å®å°±æ˜¯æœåŠ¡å™¨ç«¯åœ°å€ï¼Œæ³¨æ„è¿™é‡Œä½¿ç”¨çš„æ˜¯ä¼ å…¥å‚æ•°ä½œä¸ºæœåŠ¡å™¨åœ°å€ï¼›</li>
<li>24-28è¡Œï¼Œå‘æœåŠ¡å™¨ç«¯å‘èµ·è¿æ¥ã€‚</li>
</ul><p>ç¬¬äºŒéƒ¨åˆ†ä¸ºselectå®šæ—¶å™¨å‡†å¤‡ï¼š</p><ul>
<li>39-40è¡Œï¼Œè®¾ç½®äº†è¶…æ—¶æ—¶é—´ä¸ºKEEP_ALIVE_TIMEï¼Œè¿™ç›¸å½“äºä¿æ´»æ—¶é—´ï¼›</li>
<li>44-45è¡Œï¼Œåˆå§‹åŒ–selectå‡½æ•°çš„å¥—æ¥å­—ã€‚</li>
</ul><p>æœ€é‡è¦çš„ä¸ºç¬¬ä¸‰éƒ¨åˆ†ï¼Œè¿™ä¸€éƒ¨åˆ†éœ€è¦å¤„ç†å¿ƒè·³æŠ¥æ–‡ï¼š</p><ul>
<li>48è¡Œè°ƒç”¨selectå‡½æ•°ï¼Œæ„ŸçŸ¥I/Oäº‹ä»¶ã€‚è¿™é‡Œçš„I/Oäº‹ä»¶ï¼Œé™¤äº†å¥—æ¥å­—ä¸Šçš„è¯»æ“ä½œä¹‹å¤–ï¼Œè¿˜æœ‰åœ¨39-40è¡Œè®¾ç½®çš„è¶…æ—¶äº‹ä»¶ã€‚å½“KEEP_ALIVE_TIMEè¿™æ®µæ—¶é—´åˆ°è¾¾ä¹‹åï¼Œselectå‡½æ•°ä¼šè¿”å›0ï¼Œäºæ˜¯è¿›å…¥53-63è¡Œçš„å¤„ç†ï¼›</li>
<li>åœ¨53-63è¡Œï¼Œå®¢æˆ·ç«¯å·²ç»åœ¨KEEP_ALIVE_TIMEè¿™æ®µæ—¶é—´å†…æ²¡æœ‰æ”¶åˆ°ä»»ä½•å¯¹å½“å‰è¿æ¥çš„åé¦ˆï¼Œäºæ˜¯å‘èµ·PINGæ¶ˆæ¯ï¼Œå°è¯•é—®æœåŠ¡å™¨ç«¯ï¼šâ€å–‚ï¼Œä½ è¿˜æ´»ç€å—ï¼Ÿâ€œè¿™é‡Œæˆ‘ä»¬é€šè¿‡ä¼ é€ä¸€ä¸ªç±»å‹ä¸ºMSG_PINGçš„æ¶ˆæ¯å¯¹è±¡æ¥å®ŒæˆPINGæ“ä½œï¼Œä¹‹åæˆ‘ä»¬ä¼šçœ‹åˆ°æœåŠ¡å™¨ç«¯ç¨‹åºå¦‚ä½•å“åº”è¿™ä¸ªPINGæ“ä½œï¼›</li>
<li>ç¬¬65-74è¡Œæ˜¯å®¢æˆ·ç«¯åœ¨æ¥æ”¶åˆ°æœåŠ¡å™¨ç«¯ç¨‹åºä¹‹åçš„å¤„ç†ã€‚ä¸ºäº†ç®€å•ï¼Œè¿™é‡Œå°±æ²¡æœ‰å†è¿›è¡ŒæŠ¥æ–‡æ ¼å¼çš„è½¬æ¢å’Œåˆ†æã€‚åœ¨å®é™…çš„å·¥ä½œä¸­ï¼Œè¿™é‡Œå…¶å®æ˜¯éœ€è¦å¯¹æŠ¥æ–‡è¿›è¡Œè§£æåå¤„ç†çš„ï¼Œåªæœ‰æ˜¯PONGç±»å‹çš„å›åº”ï¼Œæˆ‘ä»¬æ‰è®¤ä¸ºæ˜¯PINGæ¢æ´»çš„ç»“æœã€‚è¿™é‡Œè®¤ä¸ºæ—¢ç„¶æ”¶åˆ°æœåŠ¡å™¨ç«¯çš„æŠ¥æ–‡ï¼Œé‚£ä¹ˆè¿æ¥å°±æ˜¯æ­£å¸¸çš„ï¼Œæ‰€ä»¥ä¼šå¯¹æ¢æ´»è®¡æ•°å™¨å’Œæ¢æ´»æ—¶é—´éƒ½ç½®é›¶ï¼Œç­‰å¾…ä¸‹ä¸€æ¬¡æ¢æ´»æ—¶é—´çš„æ¥ä¸´ã€‚</li>
</ul><h3>æœåŠ¡å™¨ç«¯ç¨‹åºè®¾è®¡</h3><p>æœåŠ¡å™¨ç«¯çš„ç¨‹åºæ¥å—ä¸€ä¸ªå‚æ•°ï¼Œè¿™ä¸ªå‚æ•°è®¾ç½®çš„æ¯”è¾ƒå¤§ï¼Œå¯ä»¥æ¨¡æ‹Ÿè¿æ¥æ²¡æœ‰å“åº”çš„æƒ…å†µã€‚æœåŠ¡å™¨ç«¯ç¨‹åºåœ¨æ¥æ”¶åˆ°å®¢æˆ·ç«¯å‘é€æ¥çš„å„ç§æ¶ˆæ¯åï¼Œè¿›è¡Œå¤„ç†ï¼Œå…¶ä¸­å¦‚æœå‘ç°æ˜¯PINGç±»å‹çš„æ¶ˆæ¯ï¼Œåœ¨ä¼‘çœ ä¸€æ®µæ—¶é—´åå›å¤ä¸€ä¸ªPONGæ¶ˆæ¯ï¼Œå‘Šè¯‰å®¢æˆ·ç«¯ï¼šâ€å—¯ï¼Œæˆ‘è¿˜æ´»ç€ã€‚â€œå½“ç„¶ï¼Œå¦‚æœè¿™ä¸ªä¼‘çœ æ—¶é—´å¾ˆé•¿çš„è¯ï¼Œé‚£ä¹ˆå®¢æˆ·ç«¯å°±æ— æ³•å¿«é€ŸçŸ¥é“æœåŠ¡å™¨ç«¯æ˜¯å¦å­˜æ´»ï¼Œè¿™æ˜¯æˆ‘ä»¬æ¨¡æ‹Ÿè¿æ¥æ— å“åº”çš„ä¸€ä¸ªæ‰‹æ®µè€Œå·²ï¼Œå®é™…æƒ…å†µä¸‹ï¼Œåº”è¯¥æ˜¯ç³»ç»Ÿå´©æºƒï¼Œæˆ–è€…ç½‘ç»œå¼‚å¸¸ã€‚</p><pre><code>#include &quot;lib/common.h&quot;
#include &quot;message_objecte.h&quot;

static int count;

int main(int argc, char **argv) {
    if (argc != 2) {
        error(1, 0, &quot;usage: tcpsever &lt;sleepingtime&gt;&quot;);
    }

    int sleepingTime = atoi(argv[1]);

    int listenfd;
    listenfd = socket(AF_INET, SOCK_STREAM, 0);

    struct sockaddr_in server_addr;
    bzero(&amp;server_addr, sizeof(server_addr));
    server_addr.sin_family = AF_INET;
    server_addr.sin_addr.s_addr = htonl(INADDR_ANY);
    server_addr.sin_port = htons(SERV_PORT);

    int rt1 = bind(listenfd, (struct sockaddr *) &amp;server_addr, sizeof(server_addr));
    if (rt1 &lt; 0) {
        error(1, errno, &quot;bind failed &quot;);
    }

    int rt2 = listen(listenfd, LISTENQ);
    if (rt2 &lt; 0) {
        error(1, errno, &quot;listen failed &quot;);
    }

    int connfd;
    struct sockaddr_in client_addr;
    socklen_t client_len = sizeof(client_addr);

    if ((connfd = accept(listenfd, (struct sockaddr *) &amp;client_addr, &amp;client_len)) &lt; 0) {
        error(1, errno, &quot;bind failed &quot;);
    }

    messageObject message;
    count = 0;

    for (;;) {
        int n = read(connfd, (char *) &amp;message, sizeof(messageObject));
        if (n &lt; 0) {
            error(1, errno, &quot;error read&quot;);
        } else if (n == 0) {
            error(1, 0, &quot;client closed \n&quot;);
        }

        printf(&quot;received %d bytes\n&quot;, n);
        count++;

        switch (ntohl(message.type)) {
            case MSG_TYPE1 :
                printf(&quot;process  MSG_TYPE1 \n&quot;);
                break;

            case MSG_TYPE2 :
                printf(&quot;process  MSG_TYPE2 \n&quot;);
                break;

            case MSG_PING: {
                messageObject pong_message;
                pong_message.type = MSG_PONG;
                sleep(sleepingTime);
                ssize_t rc = send(connfd, (char *) &amp;pong_message, sizeof(pong_message), 0);
                if (rc &lt; 0)
                    error(1, errno, &quot;send failure&quot;);
                break;
            }

            default :
                error(1, 0, &quot;unknown message type (%d)\n&quot;, ntohl(message.type));
        }

    }

}
</code></pre><p>æœåŠ¡å™¨ç«¯ç¨‹åºä¸»è¦åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ã€‚</p><p>ç¬¬ä¸€éƒ¨åˆ†ä¸ºç›‘å¬è¿‡ç¨‹çš„å»ºç«‹ï¼ŒåŒ…æ‹¬7-38è¡Œï¼› ç¬¬13-14è¡Œå…ˆåˆ›å»ºä¸€ä¸ªæœ¬åœ°TCPç›‘å¬å¥—æ¥å­—ï¼›16-20è¡Œç»‘å®šè¯¥å¥—æ¥å­—åˆ°æœ¬åœ°ç«¯å£å’ŒANYåœ°å€ä¸Šï¼›ç¬¬27-38è¡Œåˆ†åˆ«è°ƒç”¨listenå’Œacceptå®Œæˆè¢«åŠ¨å¥—æ¥å­—è½¬æ¢å’Œç›‘å¬ã€‚</p><p>ç¬¬äºŒéƒ¨åˆ†ä¸º43è¡Œåˆ°77è¡Œï¼Œä»å»ºç«‹çš„è¿æ¥å¥—æ¥å­—ä¸Šè¯»å–æ•°æ®ï¼Œè§£ææŠ¥æ–‡ï¼Œæ ¹æ®æ¶ˆæ¯ç±»å‹è¿›è¡Œä¸åŒçš„å¤„ç†ã€‚</p><ul>
<li>55-57è¡Œä¸ºå¤„ç†MSG_TYPE1çš„æ¶ˆæ¯ï¼›</li>
<li>59-61è¡Œä¸ºå¤„ç†MSG_TYPE2çš„æ¶ˆæ¯ï¼›</li>
<li>é‡ç‚¹æ˜¯64-72è¡Œå¤„ç†MSG_PINGç±»å‹çš„æ¶ˆæ¯ã€‚é€šè¿‡ä¼‘çœ æ¥æ¨¡æ‹Ÿå“åº”æ˜¯å¦åŠæ—¶ï¼Œç„¶åè°ƒç”¨sendå‡½æ•°å‘é€ä¸€ä¸ªPONGæŠ¥æ–‡ï¼Œå‘å®¢æˆ·ç«¯è¡¨ç¤ºâ€è¿˜æ´»ç€â€œçš„æ„æ€ï¼›</li>
<li>74è¡Œä¸ºå¼‚å¸¸å¤„ç†ï¼Œå› ä¸ºæ¶ˆæ¯æ ¼å¼ä¸è®¤è¯†ï¼Œæ‰€ä»¥ç¨‹åºå‡ºé”™é€€å‡ºã€‚</li>
</ul><h2>å®éªŒ</h2><p>åŸºäºä¸Šé¢çš„ç¨‹åºè®¾è®¡ï¼Œè®©æˆ‘ä»¬åˆ†åˆ«åšä¸¤ä¸ªä¸åŒçš„å®éªŒï¼š</p><p>ç¬¬ä¸€æ¬¡å®éªŒï¼ŒæœåŠ¡å™¨ç«¯ä¼‘çœ æ—¶é—´ä¸º60ç§’ã€‚</p><p>æˆ‘ä»¬çœ‹åˆ°ï¼Œå®¢æˆ·ç«¯åœ¨å‘é€äº†ä¸‰æ¬¡å¿ƒè·³æ£€æµ‹æŠ¥æ–‡PINGæŠ¥æ–‡åï¼Œåˆ¤æ–­å‡ºè¿æ¥æ— æ•ˆï¼Œç›´æ¥é€€å‡ºäº†ã€‚ä¹‹æ‰€ä»¥é€ æˆè¿™æ ·çš„ç»“æœï¼Œæ˜¯å› ä¸ºåœ¨è¿™æ®µæ—¶é—´å†…æ²¡æœ‰æ¥æ”¶åˆ°æ¥è‡ªæœåŠ¡å™¨ç«¯çš„ä»»ä½•PONGæŠ¥æ–‡ã€‚å½“ç„¶ï¼Œå®é™…å·¥ä½œçš„ç¨‹åºï¼Œå¯èƒ½éœ€è¦ä¸ä¸€æ ·çš„å¤„ç†ï¼Œæ¯”å¦‚é‡æ–°å‘èµ·è¿æ¥ã€‚</p><pre><code>$./pingclient 127.0.0.1
sending heartbeat #1
sending heartbeat #2
sending heartbeat #3
connection dead
</code></pre><pre><code>$./pingserver 60
received 1028 bytes
received 1028 bytes
</code></pre><p>ç¬¬äºŒæ¬¡å®éªŒï¼Œæˆ‘ä»¬è®©æœåŠ¡å™¨ç«¯ä¼‘çœ æ—¶é—´ä¸º5ç§’ã€‚</p><p>æˆ‘ä»¬çœ‹åˆ°ï¼Œç”±äºè¿™ä¸€æ¬¡æœåŠ¡å™¨ç«¯åœ¨å¿ƒè·³æ£€æµ‹è¿‡ç¨‹ä¸­ï¼ŒåŠæ—¶åœ°è¿›è¡Œäº†å“åº”ï¼Œå®¢æˆ·ç«¯ä¸€ç›´éƒ½ä¼šè®¤ä¸ºè¿æ¥æ˜¯æ­£å¸¸çš„ã€‚</p><pre><code>$./pingclient 127.0.0.1
sending heartbeat #1
sending heartbeat #2
received heartbeat, make heartbeats to 0
received heartbeat, make heartbeats to 0
sending heartbeat #1
sending heartbeat #2
received heartbeat, make heartbeats to 0
received heartbeat, make heartbeats to 0
</code></pre><pre><code>$./pingserver 5
received 1028 bytes
received 1028 bytes
received 1028 bytes
received 1028 bytes
</code></pre><h2>æ€»ç»“</h2><p>é€šè¿‡ä»Šå¤©çš„æ–‡ç« ï¼Œæˆ‘ä»¬èƒ½çœ‹åˆ°è™½ç„¶TCPæ²¡æœ‰æä¾›ç³»ç»Ÿçš„ä¿æ´»èƒ½åŠ›ï¼Œè®©åº”ç”¨ç¨‹åºå¯ä»¥æ–¹ä¾¿åœ°æ„ŸçŸ¥è¿æ¥çš„å­˜æ´»ï¼Œä½†æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨åº”ç”¨ç¨‹åºé‡Œçµæ´»åœ°å»ºç«‹è¿™ç§æœºåˆ¶ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œè¿™ç§æœºåˆ¶çš„å»ºç«‹ä¾èµ–äºç³»ç»Ÿå®šæ—¶å™¨ï¼Œä»¥åŠæ°å½“çš„åº”ç”¨å±‚æŠ¥æ–‡åè®®ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>å’Œå¾€å¸¸ä¸€æ ·ï¼Œæˆ‘ç•™ä¸¤é“æ€è€ƒé¢˜ç»™å¤§å®¶ï¼š</p><p>ä½ å¯ä»¥çœ‹åˆ°ä»Šå¤©çš„å†…å®¹ä¸»è¦æ˜¯é’ˆå¯¹TCPçš„æ¢æ´»ï¼Œé‚£ä¹ˆä½ è§‰å¾—è¿™æ ·çš„æ–¹æ³•æ˜¯å¦åŒæ ·é€‚ç”¨äºUDPå‘¢ï¼Ÿ</p><p>ç¬¬äºŒé“é¢˜æ˜¯ï¼Œæœ‰äººè¯´é¢å¤–çš„æ¢æ´»æŠ¥æ–‡å ç”¨äº†æœ‰é™çš„å¸¦å®½ï¼Œå¯¹æ­¤ä½ æ˜¯æ€ä¹ˆæƒ³çš„å‘¢ï¼Ÿè€Œä¸”ï¼Œä¸ºä»€ä¹ˆéœ€è¦å¤šæ¬¡æ¢æ´»æ‰èƒ½å†³å®šä¸€ä¸ªTCPè¿æ¥æ˜¯å¦å·²ç»æ­»äº¡å‘¢ï¼Ÿ</p><p>æ¬¢è¿ä½ åœ¨è¯„è®ºåŒºå†™ä¸‹ä½ çš„æ€è€ƒï¼Œæˆ‘ä¼šå’Œä½ ä¸€èµ·äº¤æµã€‚ä¹Ÿæ¬¢è¿æŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«ç»™ä½ çš„æœ‹å‹æˆ–è€…åŒäº‹ï¼Œä¸ä»–ä»¬ä¸€èµ·è®¨è®ºä¸€ä¸‹è¿™ä¸¤ä¸ªé—®é¢˜å§ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/bf/25/bfc96ae0d8f839919b9d9866cfb8b025.jpg" alt=""></p><h2>ç²¾é€‰ç•™è¨€ï¼š</h2>
        <ul>
        
<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            fjpcode  2019-08-28 12:51:23
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            1.UDPé‡Œé¢å„æ–¹å¹¶ä¸ä¼šç»´æŠ¤ä¸€ä¸ªsocketä¸Šä¸‹æ–‡çŠ¶æ€æ˜¯æ— è¿æ¥çš„ï¼Œå¦‚æœä¸ºäº†è¿æ¥è€Œä¿æ´»æ˜¯ä¸å¿…è¦çš„ï¼Œå¦‚æœä¸ºäº†æ¢æµ‹å¯¹ç«¯æ˜¯å¦æ­£å¸¸å·¥ä½œè€Œåšping-pongä¹Ÿæ˜¯å¯è¡Œçš„ã€‚<br>2.é¢å¤–çš„æ¢æ´»æŠ¥æ–‡æ˜¯ä¼šå ç”¨ä¸€äº›å¸¦å®½èµ„æºï¼Œå¯æ ¹æ®å®é™…ä¸šåŠ¡åœºæ™¯ï¼Œé€‚å½“å¢åŠ ä¿æ´»æ—¶é—´ï¼Œé™ä½æ¢æ´»é¢‘ç‡ï¼Œç®€åŒ–ping-pongåè®®ã€‚ <br>3.å¤šæ¬¡æ¢æ´»æ˜¯ä¸ºäº†é˜²æ­¢è¯¯ä¼¤ï¼Œé¿å…pingåŒ…åœ¨ç½‘ç»œä¸­ä¸¢å¤±æ‰äº†ï¼Œè€Œè¯¯è®¤ä¸ºå¯¹ç«¯æ­»äº¡ã€‚ [4èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-08-28 23:01:51</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">ğŸ‘</div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            ä¼ è¯´ä¸­çš„æˆå¤§å¤§  2019-08-28 15:34:07
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            æ€è€ƒé¢˜<br>1. udpä¸éœ€è¦è¿æ¥ æ‰€ä»¥æ²¡æœ‰å¿…è¦å¿ƒè·³åŒ…<br>2. æˆ‘è§‰å¾—è¿˜æ˜¯å¾ˆæœ‰å¿…è¦åˆ¤å®šå­˜æ´» åƒä»¥å‰ç½‘å§æ‰“æ¸¸æˆ æœ‹å‹çš„ç”µè„‘çªç„¶è“å±æ­»æœº æœ‹å‹çš„è§’è‰²è¿˜æ®‹ç•™äºæ¸¸æˆä¸­,æ‰€ä»¥æœåŠ¡å™¨ä¸ºäº†åˆ¤å®šä»–æ˜¯å¦çœŸçš„å­˜æ´»è¿˜æ˜¯éœ€è¦ä¸€ä¸ªå¿ƒè·³åŒ… éš”äº†ä¸€æ®µæ—¶é—´è¿‡åæŠŠæœ‹å‹è§’è‰²è¸¢ä¸‹çº¿ 
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-08-28 23:01:10</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">2æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­ã€‚</div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            å¾å‡¯  2019-08-29 16:04:07
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            æˆ‘çœ‹åˆ°å¤§å®¶å¯¹äºç¬¬äºŒä¸ªé—®é¢˜çš„ç­”æ¡ˆéƒ½æåˆ°äº†ä¸ºäº†é¿å…æ¢æ´»åŒ…ä¸¢åŒ… æ‰€ä»¥è¦å‘å¤šä¸ªæ¢æ´»åŒ…ã€‚ä½†æ˜¯æˆ‘è§‰å¾—åªè¦å‘äº†æ¢æ´»åŒ…å¯¹æ–¹å°±ä¸€å®šèƒ½æ”¶åˆ°ï¼Œå°±ç®—ä¸¢äº† å‘é€ç«¯ä¹Ÿä¼šé‡ä¼ ã€‚è€Œå¤§å®¶è¯´çš„å‘é€å¤šä¸ªæ¢æ´»åŒ…çš„åŸå›  æ˜¯å› ä¸ºé‡ä¼ éœ€è¦ç­‰åˆ°è®¡æ—¶å™¨è¶…æ—¶æ‰ä¼ ï¼Œè€Œå¦‚æœç½‘ç»œå µå¡çš„è¯å¯èƒ½ä¼šå‡ºç°é¢‘ç¹ä¸¢åŒ… é‚£ä¹ˆæœåŠ¡ç«¯å¯èƒ½éœ€è¦å¾ˆä¹…æ‰èƒ½çŸ¥é“å¯¹æ–¹å·²ç»ç¦»å¼€ å‘å¤šä¸ªæ¢æ´»åŒ…çš„è¯ å°±å‡å°‘äº†è¿™ä¸ªç­‰å¾…çš„æ—¶é—´ è¿™æ ·ç†è§£å¯¹ä¹ˆ 
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-08-30 10:10:47</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">æ¢æ´»åŒ…çš„å¤šæ¬¡å‘é€ï¼Œè¿˜æ˜¯ä¸ºäº†å‡å°‘è¯¯åˆ¤çš„æ¦‚ç‡ï¼Œä½ è¯´çš„æ˜¯ä¸€ç§æƒ…å†µï¼Œä½†æˆ‘è§‰å¾—å¤šæ­¤æ¢æ´»è‚¯å®šä¼šæ‹‰é•¿å¯¹ä¸€ä¸ª&quot;æ— æ•ˆ&quot;è¿æ¥çš„åˆ¤æ–­æ—¶é—´çš„ã€‚è¿™ä¸ªæ˜¯ä¸€ä¸ªtradeoffï¼Œæ‰€ä»¥å¤§å¤šæ•°ç¨‹åºéƒ½æŠŠè¿™ä¸ªä½œä¸ºé€‰é¡¹è®©ä½¿ç”¨è€…è‡ªå·±é…ç½®ã€‚</div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            çŸ³å°†ä»  2019-08-29 00:34:01
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            ä¸ºå•¥è¿™å¥å¥—æ¥å­—è¦åŠ 1å‘¢ï¼Ÿint rc = select(socket_fd + 1, &amp;readmask, NULL, NULL, &amp;tv); 
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-08-30 10:23:38</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">è¿™æ˜¯å› ä¸ºï¼Œå—¯ï¼Œè·Ÿselectå®ç°æœ‰å…³ï¼Œæˆ‘å†åé¢è®²selectæ—¶è¯¦ç»†å‰–æï¼Œç°åœ¨å…ˆè®°ä½å§ã€‚</div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            å¼ ç«‹å  2019-08-28 15:42:22
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            è¯·é—®ä¸‹ä½œè€…ï¼Œä½ æåˆ°çš„natså®¢æˆ·ç«¯çš„é—®é¢˜ï¼Œæ˜¯natså®¢æˆ·ç«¯çš„é‚£ä¸ªç‰ˆæœ¬çš„bug 
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-08-28 22:59:59</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">å¾ˆè€çš„ä¸€ä¸ªç‰ˆæœ¬ï¼Œå¤§æ¦‚åœ¨2014-1015å¹´çš„java-nats clientç‰ˆæœ¬å§ã€‚</div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            ä¼ è¯´ä¸­çš„æˆå¤§å¤§  2019-08-28 15:37:20
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            å…¶å®æˆ‘ä¹Ÿåœ¨æƒ³æ¯”å¦‚å®¢æˆ·ç«¯å´©æºƒé‡å¯è¿‡å ç„¶åé‡æ–°å»ºç«‹è¿æ¥ åˆ›å»ºsocket é‚£ä¹‹å‰é‚£ä¸ªè¿æ¥æ˜¯æ€ä¹ˆå¤„ç†çš„ï¼Ÿå› ä¸ºä¹‹å‰é‚£ä¸ªæœåŠ¡å™¨é‚£ä¸ªè¿æ¥å‘å¾€çš„è¿˜æ˜¯æˆ‘ æ‰€ä»¥å°±æƒ³çŸ¥é“è¿™ä¸ªæ—¶å€™æ˜¯æ€ä¹ˆå¤„ç†çš„ 
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-08-28 23:00:47</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">é‚£æ˜¯ä¸€ä¸ªè¿‡æ—¶çš„è¿æ¥ï¼Œæ˜¾ç„¶åº”è¯¥è¢«æœåŠ¡å™¨ç«¯æ£€æµ‹åˆ°ï¼Œå¹¶æ‘˜æ‰è¿™ä¸ªè¿‡æ—¶çš„å ç”¨ç³»ç»Ÿèµ„æºçš„è¿æ¥ã€‚</div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            QQæ€ª  2019-08-28 12:41:47
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            1.udpæœ¬æ¥æ— è¿æ¥ï¼Œä¸éœ€è¦æ¢æ´»<br>2.å¤šæ¬¡æ¢æ´»çš„åŸå› å¯èƒ½ä¼šå‘ç”Ÿæ¢æ´»ä¸¢åŒ… 
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            è®¸ç«¥ç«¥  2019-08-28 11:34:18
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            æ€è€ƒé¢˜:<br>1.é€‚ç”¨ä¹Ÿä¸é€‚ç”¨ï¼Œå…·ä½“çœ‹åº”ç”¨åœºæ™¯ï¼ŒUDPæœ¬èº«æ— è¿æ¥ï¼Œæ ¹æœ¬æ²¡æœ‰å¿…è¦ä¿æ´»ï¼Œå¦‚æœæ˜¯åŸºäºUDPåšä¸€äº›å…¶å®ƒåè®®å¦‚HTTP&#47;3ï¼Œå°±æ˜¯åœ¨UDPå±‚åšçš„æ¢æ´»ã€‚<br>2.æ¢æ´»æŠ¥æ–‡å¾ˆå°ï¼Œä½†å¦‚æœæ¯å°æœºå™¨ï¼Œæ¯ä¸ªåº”ç”¨ï¼Œæ¯ä¸ªè¿æ¥éƒ½å¤§é‡å­˜åœ¨æ¢æ´»ï¼Œé‚£æ•´ä¸ªç½‘ç»œç¯å¢ƒå°±éƒ½æ˜¯æ¢æ´»æŠ¥æ–‡äº†ï¼Œå¸¦å®½ç¡®å®ä¼šè¢«å¤§é‡å ç”¨ã€‚ä¸ºä»€ä¹ˆè¦å¤šæ¬¡æ¢æ´»ï¼Œå› ä¸ºæ¢æ´»æŠ¥æ–‡ä¹Ÿå¯èƒ½å‘ç”Ÿä¸¢åŒ…ã€‚ 
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            é”¦  2019-08-28 09:29:35
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            1,æˆ‘è§‰å¾—åŒæ ·é€‚åˆudpåè®®ï¼Œè™½ç„¶udpæ˜¯æ— è¿æ¥çš„ï¼Œä½†æ˜¯ä¸ºäº†æ›´å¥½çš„åˆ©ç”¨ç½‘ç»œèµ„æºï¼Œè¿˜æ˜¯éœ€è¦æ¢æ´»æœºåˆ¶<br>2,æ¢æ´»æœºåˆ¶è®¾ç½®åˆç†çš„æƒ…å†µä¸‹å¯¹å¸¦å®½å½±å“ä¸å¤§ï¼Œèµ„æºæ¶ˆè€—ä¸å¤šï¼Œåˆ°ä½œç”¨å¾ˆå¤§ï¼Œæ€§ä»·æ¯”å¾ˆé«˜<br>éœ€è¦å¤šæ¬¡æ¢æ´»æ˜¯ä¸ºäº†double checkï¼Œå¯èƒ½æœ‰äº›å›åŒ…è¿˜æ²¡æ‰¾åˆ°å›å®¶çš„è·¯ï¼Œä¹Ÿæœ‰å¯èƒ½å¯¹ç«¯æ­£åœ¨æ•…éšœæ¢å¤ï¼Œéœ€è¦ä¸€äº›æ—¶é—´ã€‚ 
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            webmin  2019-08-28 08:44:36
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            é•¿è¿æ¥çš„æƒ…å†µä¸‹ï¼Œæœ€å¥½è¦åšåŒå‘æ¢æµ‹ã€‚<br>UDPä¹Ÿé€‚ç”¨ï¼ŒUPDä¸‹çš„æ¢æµ‹å¯ä»¥çŸ¥é“æ˜¯å¦ç½‘ç»œå‘ç”Ÿæ•…éšœã€‚<br>å•æ¬¡çœ‹æ¯”è¾ƒå°ï¼Œè¿æ¥æ•°çš„é‡çº§å¾ˆå¤§çš„è¯ï¼ŒåŠ èµ·æ¥æ¢æµ‹å ç”¨çš„å¸¦å®½å°±ä¼šå¾ˆå¤§ã€‚<br>ä¸€æ¬¡é€šä¿¡åœ¨ç½‘ç»œä¸­æœ‰å¯èƒ½è¦ç»è¿‡å¤šä¸ªè®¾å¤‡ï¼Œå…¶ä¸­æœ‰è®¾å¤‡å¯èƒ½å‡ºç°ç¬æ—¶æ•…éšœï¼Œä¹Ÿå¯èƒ½ä¼šå¤šæ¡é€šè·¯ï¼Œå…¶ä¸­ä¸€æ¡è·¯æœ‰é—®é¢˜ã€‚ 
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            LDxy  2019-08-28 08:34:39
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            TCPæœ¬èº«çš„keep-aliveçš„æ—¶é—´æ˜¯å¯ä»¥è‡ªå·±è®¾ç½®çš„å—ï¼Ÿå¦‚æœæ˜¯å¯ä»¥è‡ªå·±è®¾ç½®çš„ï¼Œä¸ºä½•è¿˜éœ€è¦è‡ªå·±å®ç°è¿™ä¸ªæœºåˆ¶ï¼Ÿ 
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-08-28 23:06:26</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">å¯ä»¥è®¾ç½®çš„ï¼Œä½†æ˜¯æœ‰æ—¶å€™åº”ç”¨å±‚éœ€è¦æ„ŸçŸ¥å¤„ç†è¿™æ ·çš„å¼‚å¸¸</div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            æ¨é¢†well  2019-08-28 08:15:25
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            èƒ½å¤šæ¬¡æ¢æµ‹ï¼Œè¯´æ˜å¯¹ç«¯ææœ‰å¯èƒ½è¿˜å­˜åœ¨ï¼Œåªæ˜¯å› ä¸ºå„ç§åŸå› å¯¼è‡´æ²¡æ”¶åˆ°å›å¤çš„åŒ…ã€‚å› ä¸ºå¦‚æœå¯¹ç«¯ä¸å­˜åœ¨äº†ï¼Œåº”è¯¥ä¼šæ”¶åˆ° RSTï¼Œå¯¼è‡´é“¾æ¥å…³é—­ã€‚ 
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            xindoo  2019-08-28 08:02:00
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘è§‰å¾—ä¸é€‚åˆudpï¼Œudpæœ¬èº«æ˜¯æ— è¿æ¥çš„ï¼Œæ‰€ä»¥å°±æ²¡å¿…è¦æ¢æ´»æ¥ä¿æŒè¿æ¥ã€‚ <br>ç¬¬äºŒä¸ªé—®é¢˜ï¼Œä»¥ç°ä»Šç½‘ç»œä¼ è¾“æ•°æ®é‡çœ‹ï¼Œæ¢æ´»æŠ¥æ–‡åªä¼šå æ‰€æœ‰ä¼ è¾“æ•°æ®é‡æå°éƒ¨åˆ†ï¼Œç”šè‡³å¯ä»¥å¿½ç•¥ä¸è®¡ï¼Œæ‰€ä»¥å æœ‰é™è´·æ¬¾ä¸€è¯´å°±æ˜¯ä¼ªå‘½é¢˜ã€‚ è‡³äºéœ€è¦å¤šæ¬¡æ¢æ´»ï¼Œè¿˜æ˜¯ä¸ºäº†é¿å…å› ä¸ºç½‘ç»œä¸¢åŒ…çš„é—®é¢˜å¯¼è‡´çš„è¯¯åˆ¤ã€‚ 
        </div>
        
    </div>
</li>
            </ul>
</div>
</body>
</html>