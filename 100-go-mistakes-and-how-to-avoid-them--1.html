<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="robots" content="index,follow"/><meta property="og:type" content="website"/><meta name="google-site-verification" content="_OJuJrMAK0_lxr0--eH6RZyMOn2Mg_zY1hDyBBKU8fI"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-Y4TMBBH2RZ"></script><script>
              window.dataLayer = window.dataLayer || [];
              function gtag(){dataLayer.push(arguments);}
              gtag('js', new Date());
              gtag('config', 'G-Y4TMBBH2RZ', {
                page_path: window.location.pathname,
              });
          </script><meta property="og:site_name" content="YangSoon"/><meta property="twitter:domain" content="yangsoon.github.io"/><meta name="twitter:creator" content="@yangsoonlx"/><meta name="description" content="YangSoon, Cloud Native Developer"/><meta property="og:description" content="YangSoon, Cloud Native Developer"/><meta name="twitter:description" content="YangSoon, Cloud Native Developer"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:image" content="https://yangsoon.github.io/api/social-image?id=db80f497-e22c-4bff-bdcb-0ac06b5c4528"/><meta property="og:image" content="https://yangsoon.github.io/api/social-image?id=db80f497-e22c-4bff-bdcb-0ac06b5c4528"/><link rel="canonical" href="https://yangsoon.github.io/100-go-mistakes-and-how-to-avoid-them--1"/><meta property="og:url" content="https://yangsoon.github.io/100-go-mistakes-and-how-to-avoid-them--1"/><meta property="twitter:url" content="https://yangsoon.github.io/100-go-mistakes-and-how-to-avoid-them--1"/><link rel="alternate" type="application/rss+xml" href="https://yangsoon.github.io/feed" title="YangSoon"/><meta property="og:title" content="100 Go Mistakes and How to Avoid Them - 1"/><meta name="twitter:title" content="100 Go Mistakes and How to Avoid Them - 1"/><title>100 Go Mistakes and How to Avoid Them - 1</title><link rel="preload" as="image" href="https://www.notion.so/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F47263733-11bc-4ae7-9e1e-c3401a49c171%2FManning.100.Go.Mistakes.and.How.to.Avoid.Them.2022-1%25EF%25BC%2588%25E6%258B%2596%25E7%25A7%25BB%25E9%25A1%25B9%25E7%259B%25AE%25EF%25BC%2589.png?table=block&amp;id=db80f497-e22c-4bff-bdcb-0ac06b5c4528&amp;cache=v2"/><meta name="next-head-count" content="25"/><link rel="shortcut icon" href="/favicon.ico"/><link rel="icon" type="image/png" sizes="32x32" href="favicon.png"/><link rel="manifest" href="/manifest.json"/><link rel="preload" href="/_next/static/css/836d11bb8e359ad4.css" as="style"/><link rel="stylesheet" href="/_next/static/css/836d11bb8e359ad4.css" data-n-g=""/><link rel="preload" href="/_next/static/css/1d993c1b8c3f1e3a.css" as="style"/><link rel="stylesheet" href="/_next/static/css/1d993c1b8c3f1e3a.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script defer="" src="/_next/static/chunks/3607272e.d338bf53926ee7c2.js"></script><script defer="" src="/_next/static/chunks/853.526a4df21aef109c.js"></script><script defer="" src="/_next/static/chunks/358.0027340467b29549.js"></script><script src="/_next/static/chunks/webpack-d0f6f9fb604748c4.js" defer=""></script><script src="/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/_next/static/chunks/main-f08b69bdcc7bbb61.js" defer=""></script><script src="/_next/static/chunks/pages/_app-e341ab6855f9c9f4.js" defer=""></script><script src="/_next/static/chunks/446-7f8c1bd499453c43.js" defer=""></script><script src="/_next/static/chunks/642-47a19f0a55eb6073.js" defer=""></script><script src="/_next/static/chunks/pages/%5BpageId%5D-69b62fc61f7d7f72.js" defer=""></script><script src="/_next/static/tahmo-tEqlshjl7M9UE27/_buildManifest.js" defer=""></script><script src="/_next/static/tahmo-tEqlshjl7M9UE27/_ssgManifest.js" defer=""></script></head><body><script>
/** Inlined version of noflash.js from use-dark-mode */
;(function () {
  var storageKey = 'darkMode'
  var classNameDark = 'dark-mode'
  var classNameLight = 'light-mode'
  function setClassOnDocumentBody(darkMode) {
    document.body.classList.add(darkMode ? classNameDark : classNameLight)
    document.body.classList.remove(darkMode ? classNameLight : classNameDark)
  }
  var preferDarkQuery = '(prefers-color-scheme: dark)'
  var mql = window.matchMedia(preferDarkQuery)
  var supportsColorSchemeQuery = mql.media === preferDarkQuery
  var localStorageTheme = null
  try {
    localStorageTheme = localStorage.getItem(storageKey)
  } catch (err) {}
  var localStorageExists = localStorageTheme !== null
  if (localStorageExists) {
    localStorageTheme = JSON.parse(localStorageTheme)
  }
  // Determine the source of truth
  if (localStorageExists) {
    // source of truth from localStorage
    setClassOnDocumentBody(localStorageTheme)
  } else if (supportsColorSchemeQuery) {
    // source of truth from system
    setClassOnDocumentBody(mql.matches)
    localStorage.setItem(storageKey, mql.matches)
  } else {
    // source of truth from document.body
    var isDarkMode = document.body.classList.contains(classNameDark)
    localStorage.setItem(storageKey, JSON.stringify(isDarkMode))
  }
})();
</script><div id="__next"><div class="notion notion-app light-mode notion-block-db80f497e22c4bffbdcb0ac06b5c4528"><div class="notion-viewport"></div><div class="notion-frame"><header class="notion-header"><div class="notion-nav-header"><div class="breadcrumbs"><a class="breadcrumb" href="/"><div class="notion-page-icon-inline notion-page-icon-image"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%272000%27%20height=%272003%27/%3e"/></span><img alt="流心家的羊" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" class="icon notion-page-icon" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;background-size:cover;background-position:0% 0%;filter:blur(20px);background-image:url(&quot;data:image/webp;base64,UklGRmoAAABXRUJQVlA4IF4AAADQAQCdASoQABAABUB8JbACdAERATxWoAD+0Vlxx+kOh3kDC0Z3s4OjUZzRpnTiXUiN5qtuCLGbw3Q3meKHmbJDj3X9KoWlb/kas/KasMX31nkEcPwD09TPGVsO8AAA&quot;)"/><noscript><img alt="流心家的羊" src="https://www.notion.so/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F37907dd5-3c76-4966-a419-daa027a84972%2FIMG_2189.jpg?table=block&amp;id=72a66971-7cf6-42c2-a252-4439d99d8f44&amp;cache=v2" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" class="icon notion-page-icon" loading="lazy"/></noscript></span></div><span class="title">流心家的羊</span></a></div><div class="notion-nav-header-rhs breadcrumbs"><a href="/about" class="breadcrumb button">About</a><div class="breadcrumb button styles_hidden__7gYve"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="32" d="M256 48v48m0 320v48m147.08-355.08l-33.94 33.94M142.86 369.14l-33.94 33.94M464 256h-48m-320 0H48m355.08 147.08l-33.94-33.94M142.86 142.86l-33.94-33.94"></path><circle cx="256" cy="256" r="80" fill="none" stroke-linecap="round" stroke-miterlimit="10" stroke-width="32"></circle></svg></div></div></div></header><div class="notion-page-scroller"><div class="notion-page-cover-wrapper"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%272000%27%20height=%272508%27/%3e"/></span><img alt="100 Go Mistakes and How to Avoid Them - 1" src="https://www.notion.so/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F47263733-11bc-4ae7-9e1e-c3401a49c171%2FManning.100.Go.Mistakes.and.How.to.Avoid.Them.2022-1%25EF%25BC%2588%25E6%258B%2596%25E7%25A7%25BB%25E9%25A1%25B9%25E7%259B%25AE%25EF%25BC%2589.png?table=block&amp;id=db80f497-e22c-4bff-bdcb-0ac06b5c4528&amp;cache=v2" decoding="async" data-nimg="intrinsic" class="notion-page-cover" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-position:center 32.86%;background-size:cover;background-position:center 32.86%;filter:blur(20px);background-image:url(&quot;data:image/webp;base64,UklGRkoAAABXRUJQVlA4ID4AAACQAQCdASoNABAABUB8JZQAAUJYnCAA/i3sgO0Yegdb+5LvlWhw/psHDLyVDpX8zYYcjaZB/BXtD4y71SAAAA==&quot;)"/><noscript><img alt="100 Go Mistakes and How to Avoid Them - 1" src="https://www.notion.so/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F47263733-11bc-4ae7-9e1e-c3401a49c171%2FManning.100.Go.Mistakes.and.How.to.Avoid.Them.2022-1%25EF%25BC%2588%25E6%258B%2596%25E7%25A7%25BB%25E9%25A1%25B9%25E7%259B%25AE%25EF%25BC%2589.png?table=block&amp;id=db80f497-e22c-4bff-bdcb-0ac06b5c4528&amp;cache=v2" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-position:center 32.86%" class="notion-page-cover"/></noscript></span></div><main class="notion-page notion-page-has-cover notion-page-has-icon notion-page-has-image-icon notion-full-page"><div class="notion-page-icon-hero notion-page-icon-image"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%272000%27%20height=%272000%27/%3e"/></span><img alt="100 Go Mistakes and How to Avoid Them - 1" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" class="notion-page-icon" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;background-size:cover;background-position:0% 0%;filter:blur(20px);background-image:url(&quot;data:image/webp;base64,UklGRq4AAABXRUJQVlA4WAoAAAAQAAAADwAADwAAQUxQSEcAAAARL6CobSM2VyZF0P+4ERGBN3VgFUlyqqnEADqAf3wCUEDIv58oiOh/clAtpz6pdL++8f3aTO1/JnqlHZkwwr/KBWnLewuOAQBWUDggQAAAABACAJ0BKhAAEAAFQHwlsAJ0ugDUM/X/BIAA/hMYaKC879Rlyz46bow1vD8/yvn/lXfaU8coFRx9f9Y0KIVnwAA=&quot;)"/><noscript><img alt="100 Go Mistakes and How to Avoid Them - 1" src="https://www.notion.so/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F425f0231-9af0-4f62-a9f7-f9f567cfe460%2Fgolang_logo_icon_171073.png?table=block&amp;id=db80f497-e22c-4bff-bdcb-0ac06b5c4528&amp;cache=v2" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" class="notion-page-icon" loading="lazy"/></noscript></span></div><h1 class="notion-title">100 Go Mistakes and How to Avoid Them - 1</h1><div class="notion-collection-page-properties"><div class="notion-collection-row"><div class="notion-collection-row-body"><div class="notion-collection-row-property"><div class="notion-collection-column-title"><svg viewBox="0 0 14 14" class="notion-collection-column-title-icon"><path d="M6.986 14c-1.79 0-3.582-.69-4.944-2.068-2.723-2.72-2.723-7.172 0-9.892 2.725-2.72 7.182-2.72 9.906 0A6.972 6.972 0 0114 6.996c0 1.88-.728 3.633-2.052 4.955A7.058 7.058 0 016.986 14zm3.285-6.99v1.645H5.526v-5.47h1.841v3.63h2.904v.194zm1.89-.014c0-1.379-.542-2.67-1.522-3.648-2.006-2.005-5.287-2.007-7.297-.009l-.009.009a5.168 5.168 0 000 7.295c2.01 2.007 5.297 2.007 7.306 0a5.119 5.119 0 001.521-3.647z"></path></svg><div class="notion-collection-column-title-body">Created</div></div><div class="notion-collection-row-value"><span class="notion-property notion-property-created_time">Nov 5, 2022 08:24 PM</span></div></div><div class="notion-collection-row-property"><div class="notion-collection-column-title"><svg viewBox="0 0 14 14" class="notion-collection-column-title-icon"><path d="M4 3a1 1 0 011-1h7a1 1 0 110 2H5a1 1 0 01-1-1zm0 4a1 1 0 011-1h7a1 1 0 110 2H5a1 1 0 01-1-1zm0 4a1 1 0 011-1h7a1 1 0 110 2H5a1 1 0 01-1-1zM2 4a1 1 0 110-2 1 1 0 010 2zm0 4a1 1 0 110-2 1 1 0 010 2zm0 4a1 1 0 110-2 1 1 0 010 2z"></path></svg><div class="notion-collection-column-title-body">Tags</div></div><div class="notion-collection-row-value"><span class="notion-property notion-property-multi_select"><div class="notion-property-multi_select-item notion-item-brown">golang</div></span></div></div><div class="notion-collection-row-property"><div class="notion-collection-column-title"><svg viewBox="0 0 14 14" class="notion-collection-column-title-icon"><path d="M7 4.568a.5.5 0 00-.5-.5h-6a.5.5 0 00-.5.5v1.046a.5.5 0 00.5.5h6a.5.5 0 00.5-.5V4.568zM.5 1a.5.5 0 00-.5.5v1.045a.5.5 0 00.5.5h12a.5.5 0 00.5-.5V1.5a.5.5 0 00-.5-.5H.5zM0 8.682a.5.5 0 00.5.5h11a.5.5 0 00.5-.5V7.636a.5.5 0 00-.5-.5H.5a.5.5 0 00-.5.5v1.046zm0 3.068a.5.5 0 00.5.5h9a.5.5 0 00.5-.5v-1.045a.5.5 0 00-.5-.5h-9a.5.5 0 00-.5.5v1.045z"></path></svg><div class="notion-collection-column-title-body">Text</div></div><div class="notion-collection-row-value"><span class="notion-property notion-property-text"></span></div></div></div></div></div><div class="notion-page-content notion-page-content-has-aside notion-page-content-has-toc"><article class="notion-page-content-inner"><h3 class="notion-h notion-h2 notion-h-indent-0 notion-block-ed844a2247fe449db716e380549c489f" data-id="ed844a2247fe449db716e380549c489f"><span><div id="ed844a2247fe449db716e380549c489f" class="notion-header-anchor"></div><a class="notion-hash-link" href="#ed844a2247fe449db716e380549c489f" title="关于本书"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">关于本书</span></span></h3><div class="notion-row"><a target="_blank" rel="noopener noreferrer" class="notion-bookmark notion-block-50c109cb7b014be787e99cee7c62c61a" href="https://book.douban.com/subject/36084407/"><div><div class="notion-bookmark-title">100 Go Mistakes and How to Avoid Them</div><div class="notion-bookmark-description">Spot errors in your Go code you didn’t even know you were making and boost your productivity by avoi...</div><div class="notion-bookmark-link"><div class="notion-bookmark-link-icon"><img src="https://www.notion.so/image/https%3A%2F%2Fimg1.doubanio.com%2Ffavicon.ico?table=block&amp;id=50c109cb-7b01-4be7-87e9-9cee7c62c61a&amp;cache=v2" alt="100 Go Mistakes and How to Avoid Them" loading="lazy" decoding="async"/></div><div class="notion-bookmark-link-text">https://book.douban.com/subject/36084407/</div></div></div><div class="notion-bookmark-image"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%272000%27%20height=%272507%27/%3e"/></span><img alt="100 Go Mistakes and How to Avoid Them" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover;background-size:cover;background-position:0% 0%;filter:blur(20px);background-image:url(&quot;data:image/webp;base64,UklGRk4AAABXRUJQVlA4IEIAAACwAQCdASoNABAABUB8JZQAAcCzMdgAAP1pPb5smyxoh54e7LDGK8Yk2gEHbh/20RBmhShKjfB1bjvvEl7pU7XAAAA=&quot;)"/><noscript><img alt="100 Go Mistakes and How to Avoid Them" src="https://www.notion.so/image/https%3A%2F%2Fimg2.doubanio.com%2Fview%2Fsubject%2Fl%2Fpublic%2Fs34311243.jpg?table=block&amp;id=50c109cb-7b01-4be7-87e9-9cee7c62c61a&amp;cache=v2" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover" loading="lazy"/></noscript></span></div></a></div><h3 class="notion-h notion-h2 notion-h-indent-0 notion-block-c09840e248f948188db13883f5db1ff0" data-id="c09840e248f948188db13883f5db1ff0"><span><div id="c09840e248f948188db13883f5db1ff0" class="notion-header-anchor"></div><a class="notion-hash-link" href="#c09840e248f948188db13883f5db1ff0" title="2. Code and Project organization"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">2. Code and Project organization</span></span></h3><div class="notion-text notion-block-b58b16be26d84b5d81f680a630f44e0e">本节主要讲解代码和项目的结构组织，目的是教会大家 ：</div><ul class="notion-list notion-list-disc notion-block-3381720f1fac49969c13daceb413394c"><li>以符合go语言习惯的组织代码 </li></ul><ul class="notion-list notion-list-disc notion-block-f1b01222efae4667aee1ba2282e17059"><li>代码能高效的处理抽象：接口和泛型</li></ul><ul class="notion-list notion-list-disc notion-block-716c8d0fdeeb4c25925e3bc48f09622f"><li>提供构建项目的最佳实践</li></ul><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-e0a8cd8ca281437a994af50d4b6dd01d" data-id="e0a8cd8ca281437a994af50d4b6dd01d"><span><div id="e0a8cd8ca281437a994af50d4b6dd01d" class="notion-header-anchor"></div><a class="notion-hash-link" href="#e0a8cd8ca281437a994af50d4b6dd01d" title="2.1 #1 Unintended variable shadowing（变量遮蔽带来的意外行为 ）"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">2.1 #1 Unintended variable shadowing（变量遮蔽带来的意外行为 ）</span></span></h4><div class="notion-text notion-block-ea523e78a4f247d684fda79eb4dfceca"><b>Bad Code</b></div><pre class="notion-code"><div class="notion-code-copy"><div class="notion-code-copy-button"><svg fill="currentColor" viewBox="0 0 16 16" width="1em" version="1.1"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg></div></div><code class="language-go">// 这种场景在if语句中使用 := 声明了和最外层client同名的变量，这样会出现内部变量覆盖外层变量的
// 情况，编写这样错误代码的原因是没有了解go中声明新变量的用法
var client *http.Client
if tracing {
	client, err := createClientWithTracing()
	if err != nil {
		return err
	}
	log.Println(client)
} else {
	client, err := createDefaultClient()
	if err != nil {
		return err
	}
	log.Println(client)
}</code></pre><div class="notion-text notion-block-667ba7dcd0ec4b2c813ede53718f6094"><b>Good Code</b></div><pre class="notion-code"><div class="notion-code-copy"><div class="notion-code-copy-button"><svg fill="currentColor" viewBox="0 0 16 16" width="1em" version="1.1"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg></div></div><code class="language-go">// 把判断语句中的声明语法换成赋值语法，同样在最外层声明err，可以做到减少代码量的效果
var client *http.Client
var err error
if tracing {
	client, err = createClientWithTracing()
} else {
	client, err = createDefaultClient()
}
if err != nil {
		return err
}
log.Println(client)</code></pre><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-46fffdc7fd79489d8bae57c56540f464" data-id="46fffdc7fd79489d8bae57c56540f464"><span><div id="46fffdc7fd79489d8bae57c56540f464" class="notion-header-anchor"></div><a class="notion-hash-link" href="#46fffdc7fd79489d8bae57c56540f464" title="2.2 #2 Unnecessary nested code （没有必要的代码嵌套 ）"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">2.2 #2 Unnecessary nested code （没有必要的代码嵌套 ）</span></span></h4><div class="notion-text notion-block-a75d0f9668354a64958d59682ddd914c">代码的嵌套层数可以用来评价代码的可读性</div><div class="notion-text notion-block-89de5eb9f72c43438ae742525d8b94fd"><b>Bad Code</b></div><pre class="notion-code"><div class="notion-code-copy"><div class="notion-code-copy-button"><svg fill="currentColor" viewBox="0 0 16 16" width="1em" version="1.1"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg></div></div><code class="language-go">func join(s1, s2 string, max int) (string, error) {
	if s1 == &quot;&quot; {
		return &quot;&quot;, errors.New(&quot;s1 is empty&quot;)
	} else {
		if s2 == &quot;&quot; {
			return &quot;&quot;, errors.New(&quot;s2 is empty&quot;)
		} else {
			concat, err := concatenate(s1, s2)
			if err != nil {
				return &quot;&quot;, errors
			} else {
				if len(concat) &gt; max {
					return concat[:max], nil
				} else {
					return concat, nil
				}
			}
		}
	}
}</code></pre><div class="notion-text notion-block-380c108884194dbdb6cb9bba2e9672a7">上面的代码因为夹杂了多种判断导致代码嵌套层数太多，代码可读性大大降低，并且维护性也变差。我们使用下面的代码代替上面的写法。</div><div class="notion-text notion-block-82b2f078b0324950ae2041100cc1308a"><b>Good Code</b></div><pre class="notion-code"><div class="notion-code-copy"><div class="notion-code-copy-button"><svg fill="currentColor" viewBox="0 0 16 16" width="1em" version="1.1"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg></div></div><code class="language-go">func join(s1, s2 string, max int) (string, error) {
	if s1 == &quot;&quot; {
		return &quot;&quot;, errors.New(&quot;s1 is empty&quot;)
	}
	if s2 == &quot;&quot; {
		return &quot;&quot;, errors.New(&quot;s2 is empty&quot;)
	}
	concat, err := concatenate(s1, s2)
	if err != nil {
		return &quot;&quot;, err
	}
	if len(concat) &gt; max {
		return concat[:max], nil
	}
	return concat, nil
}</code></pre><div class="notion-text notion-block-3e0e20b44815438a9351acada3e14511">经过修改后的代码，我们只需要简单的心智负担就能阅读和理解代码。</div><div class="notion-callout notion-gray_background_co notion-block-accc59b4c43340b3a4b9dccd21760e44"><div class="notion-page-icon-inline notion-page-icon-span"><span class="notion-page-icon" role="img" aria-label="💡">💡</span></div><div class="notion-callout-text">Align the happy path to the left; you should quickly be able to scan down one column to
see the expected execution flow.</div></div><div class="notion-text notion-block-9378d7968fb246c1b17ba4a03e467d30">把代码逻辑靠最左边实现，能够让代码可读性增强，这里最左边的路径被Gopher成为 Happy Path,阅读代码时候，第一层级的逻辑是预期代码行为的执行流程，第二层级为Error Handler，具体处理边缘情况。</div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-efca4439835541a4931eb2fe1a54b904"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:816px;max-width:100%;flex-direction:column"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%272000%27%20height=%271020%27/%3e"/></span><img alt="notion image" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover;background-size:cover;background-position:0% 0%;filter:blur(20px);background-image:url(&quot;data:image/webp;base64,UklGRi4AAABXRUJQVlA4ICIAAABwAQCdASoQAAgABUB8JaWM+AGIAAD+8E0IL0R79HrNokAA&quot;)"/><noscript><img alt="notion image" src="https://www.notion.so/image/http%3A%2F%2Ftva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbgs8tjrc2j30nx0c7n0m.jpg?table=block&amp;id=efca4439-8355-41a4-931e-b2fe1a54b904&amp;cache=v2" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover" loading="lazy"/></noscript></span></div></figure><div class="notion-text notion-block-a2aca5a6281747a3bc39a2437aff8b3a">下面列出几个优化代码的规则</div><div class="notion-callout notion-gray_background_co notion-block-d8cf60a1ffdf4d0cabc906b56f6e7021"><div class="notion-page-icon-inline notion-page-icon-span"><span class="notion-page-icon" role="img" aria-label="💡">💡</span></div><div class="notion-callout-text">1. 如果if块会直接执行return返回，请不要再写else块，这样else里的逻辑会被放在Happy Path，便于后面的阅读</div></div><div class="notion-row notion-block-e35e1247da644302941d95849024ddfd"><div class="notion-column notion-block-072c79088f8c4b68a65f569042acf307" style="width:calc((100% - (1 * min(32px, 4vw))) * 0.5)"><pre class="notion-code"><div class="notion-code-copy"><div class="notion-code-copy-button"><svg fill="currentColor" viewBox="0 0 16 16" width="1em" version="1.1"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg></div></div><code class="language-go">if foo() {
	// ...
	return true
} else {
	// ...
}</code></pre><figcaption class="notion-asset-caption">Bad Code ⇒ </figcaption></div><div class="notion-spacer"></div><div class="notion-column notion-block-e4d8824e7da04fcba9453086c3c11398" style="width:calc((100% - (1 * min(32px, 4vw))) * 0.5)"><pre class="notion-code"><div class="notion-code-copy"><div class="notion-code-copy-button"><svg fill="currentColor" viewBox="0 0 16 16" width="1em" version="1.1"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg></div></div><code class="language-go">if foo() {
	// ...
	return true
}
// ...
</code></pre><figcaption class="notion-asset-caption">Good Code</figcaption></div><div class="notion-spacer"></div></div><div class="notion-callout notion-gray_background_co notion-block-19560b4f87c04f08acfd29b322440e00"><div class="notion-page-icon-inline notion-page-icon-span"><span class="notion-page-icon" role="img" aria-label="💡">💡</span></div><div class="notion-callout-text">2. 遇到错误及时抛出，让主要逻辑放在 Happy Path 上</div></div><div class="notion-row notion-block-cc507eafd03042daa50f2d748bf5009d"><div class="notion-column notion-block-b2f6a55e7b7844c1b53c50eb086a127c" style="width:calc((100% - (1 * min(32px, 4vw))) * 0.5)"><pre class="notion-code"><div class="notion-code-copy"><div class="notion-code-copy-button"><svg fill="currentColor" viewBox="0 0 16 16" width="1em" version="1.1"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg></div></div><code class="language-go">if s != &quot;&quot; {
	// ...
} else {
	return errors.New(&quot;empty string&quot;)
}</code></pre><figcaption class="notion-asset-caption">Bad Code ⇒ </figcaption></div><div class="notion-spacer"></div><div class="notion-column notion-block-d8b65ea0778248269e65906663714236" style="width:calc((100% - (1 * min(32px, 4vw))) * 0.5)"><pre class="notion-code"><div class="notion-code-copy"><div class="notion-code-copy-button"><svg fill="currentColor" viewBox="0 0 16 16" width="1em" version="1.1"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg></div></div><code class="language-go">if s == &quot;&quot; {
		return errors.New(&quot;empty string&quot;)
}
// ...
</code></pre><figcaption class="notion-asset-caption">Good Code</figcaption></div><div class="notion-spacer"></div></div><div class="notion-callout notion-gray_background_co notion-block-00f36e76430e4a08a2f73bf9972f453b"><div class="notion-page-icon-inline notion-page-icon-span"><span class="notion-page-icon" role="img" aria-label="💡">💡</span></div><div class="notion-callout-text">个人建议：不要为了路径在第一层而写代码，主要还是要代码可读性，以及在for循环的场景下，要考虑到cpu分支预测的场景</div></div><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-2de22f1ec26342a8a24b8934886ee4d3" data-id="2de22f1ec26342a8a24b8934886ee4d3"><span><div id="2de22f1ec26342a8a24b8934886ee4d3" class="notion-header-anchor"></div><a class="notion-hash-link" href="#2de22f1ec26342a8a24b8934886ee4d3" title="2.3 #3 Misusing init functions（错误使用和理解 init 函数）"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">2.3 #3 Misusing init functions（错误使用和理解 init 函数）</span></span></h4><div class="notion-callout notion-gray_background_co notion-block-75312713bdeb43dab1c3b63b438c8955"><div class="notion-page-icon-inline notion-page-icon-span"><span class="notion-page-icon" role="img" aria-label="💡">💡</span></div><div class="notion-callout-text">一个包内有多个init函数，执行顺序按照包内文件名的字典序执行</div></div><div class="notion-text notion-block-a07f4142bb014cb9a176bb53d8c02c9e">init函数有3个缺点：</div><ol start="1" class="notion-list notion-list-numbered notion-block-d919c7ec36504c9f9c3d1a5192bed396"><li>init函数无法抛出异常，错误处理有限制，极端情况只能panic</li></ol><ol start="2" class="notion-list notion-list-numbered notion-block-179d05ab90c6463485a9c53a44bba621"><li>增加了测试的复杂性，因为在测试代码执行前，包内的init函数</li></ol><ol start="3" class="notion-list notion-list-numbered notion-block-2203bc7d520b4f4a841dae5d677eadec"><li>如果init函数需要设置状态，往往需要一个全局变量存储。</li></ol><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-968dbfe1f3b3456f8cb055c7a5460eb5"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%272000%27%20height=%27930%27/%3e"/></span><img alt="notion image" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover;background-size:cover;background-position:0% 0%;filter:blur(20px);background-image:url(&quot;data:image/webp;base64,UklGRiwAAABXRUJQVlA4ICAAAABwAQCdASoQAAcABUB8JaWZAAGIAAD+8HyRurtV5poAAA==&quot;)"/><noscript><img alt="notion image" src="https://www.notion.so/image/http%3A%2F%2Ftva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbgs8kjr79j30gk07pwg1.jpg?table=block&amp;id=968dbfe1-f3b3-456f-8cb0-55c7a5460eb5&amp;cache=v2" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover" loading="lazy"/></noscript></span></div></figure><div class="notion-text notion-block-1731b54084764572b675c5105de7d33e">init函数适用的场景：</div><ol start="1" class="notion-list notion-list-numbered notion-block-5f8a357b75a24a00a94ecfa5b77abce9"><li>定义静态配置, go的官方博客使用 init 函数定义静态配置</li></ol><pre class="notion-code"><div class="notion-code-copy"><div class="notion-code-copy-button"><svg fill="currentColor" viewBox="0 0 16 16" width="1em" version="1.1"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg></div></div><code class="language-go">// Copyright 2013 The Go Authors.  All rights reserved.
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.

// Command blog is a web server for the Go blog that can run on App Engine or
// as a stand-alone HTTP server.
package main

import (
	&quot;net/http&quot;
	&quot;strings&quot;
	&quot;time&quot;

	&quot;golang.org/x/tools/blog&quot;
	&quot;golang.org/x/website/content/static&quot;

	_ &quot;golang.org/x/tools/playground&quot;
)

const hostname = &quot;blog.golang.org&quot; // default hostname for blog server

var config = blog.Config{
	Hostname:     hostname,
	BaseURL:      &quot;https://&quot; + hostname,
	GodocURL:     &quot;https://golang.org&quot;,
	HomeArticles: 5,  // articles to display on the home page
	FeedArticles: 10, // articles to include in Atom and JSON feeds
	PlayEnabled:  true,
	FeedTitle:    &quot;The Go Programming Language Blog&quot;,
}
// here
func init() {
	// Redirect &quot;/blog/&quot; to &quot;/&quot;, because the menu bar link is to &quot;/blog/&quot;
	// but we&#x27;re serving from the root.
	redirect := func(w http.ResponseWriter, r *http.Request) {
		http.Redirect(w, r, &quot;/&quot;, http.StatusFound)
	}
	http.HandleFunc(&quot;/blog&quot;, redirect)
	http.HandleFunc(&quot;/blog/&quot;, redirect)

	// Keep these static file handlers in sync with app.yaml.
	static := http.FileServer(http.Dir(&quot;static&quot;))
	http.Handle(&quot;/favicon.ico&quot;, static)
	http.Handle(&quot;/fonts.css&quot;, static)
	http.Handle(&quot;/fonts/&quot;, static)

	http.Handle(&quot;/lib/godoc/&quot;, http.StripPrefix(&quot;/lib/godoc/&quot;, http.HandlerFunc(staticHandler)))
}

func staticHandler(w http.ResponseWriter, r *http.Request) {
	name := r.URL.Path
	b, ok := static.Files[name]
	if !ok {
		http.NotFound(w, r)
		return
	}
	http.ServeContent(w, r, name, time.Time{}, strings.NewReader(b))
}</code></pre><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-31919d1e65314b0cbdabfb2f7610dacc" data-id="31919d1e65314b0cbdabfb2f7610dacc"><span><div id="31919d1e65314b0cbdabfb2f7610dacc" class="notion-header-anchor"></div><a class="notion-hash-link" href="#31919d1e65314b0cbdabfb2f7610dacc" title=" 2.4 #4 Overusing getters and setters（过度使用 getters 和 setters）"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title"> 2.4 #4 Overusing getters and setters（过度使用 getters 和 setters）</span></span></h4><div class="notion-text notion-block-2eb5e2a8f65e413f9396770c0c55fd1b">在Go中 setter 和 getter 并不是惯用的方式，标准库的代码也没有非得使用这种方式获取结构体字段。</div><pre class="notion-code"><div class="notion-code-copy"><div class="notion-code-copy-button"><svg fill="currentColor" viewBox="0 0 16 16" width="1em" version="1.1"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg></div></div><code class="language-go">timer := time.NewTimer(time.Second)
&lt;-timer.C</code></pre><div class="notion-text notion-block-d3abc66076744bbc82d4d6db2e41101f">使用 getters 和 setters的好处：</div><ol start="1" class="notion-list notion-list-numbered notion-block-c117f0fe52234ad5872c3b69d4d5cb1b"><li>They encapsulate a behavior associated with getting or setting a field, allowing new functionality to be added later (for example, validating a field, returning a computed value, or wrapping the access to a field around a mutex).</li></ol><ol start="2" class="notion-list notion-list-numbered notion-block-987432dd4a684ed3b5522e61d1be8422"><li>They hide the internal representation, giving us more flexibility in what we expose.</li></ol><ol start="3" class="notion-list notion-list-numbered notion-block-b33ab2934877471fa254b67531f3231e"><li>They provide a debugging interception point for when the property changes at
run time, making debugging easier.</li></ol><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-b8c6ac44733149a382b9c7b0c0a2a941" data-id="b8c6ac44733149a382b9c7b0c0a2a941"><span><div id="b8c6ac44733149a382b9c7b0c0a2a941" class="notion-header-anchor"></div><a class="notion-hash-link" href="#b8c6ac44733149a382b9c7b0c0a2a941" title="2.5 #5 Interface pollution （接口污染）"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">2.5 #5 Interface pollution （接口污染）</span></span></h4><div class="notion-text notion-block-44bd4fb8da454486bb3d48ae78914eaa">接口污染的概念是代码里存在大量的抽象导致代码难以理解</div><div class="notion-callout notion-gray_background_co notion-block-d2e36cae64f84ea68bc646ca9105dcfb"><div class="notion-page-icon-inline notion-page-icon-span"><span class="notion-page-icon" role="img" aria-label="💡">💡</span></div><div class="notion-callout-text"><b>It’s a common mistake made by devel- opers coming from another language with different habits.</b></div></div><div class="notion-text notion-block-2eafac0ea4e74825bf3809653986a5f6">在公司经常看到这样的代码，我也是头皮发麻，有些人经常高举着语言不重要的大旗，依赖自己已有编程语言的领域知识，四处污染代码…，看到推上的一个吐槽，只能说我也头皮发麻。（不用杠，杠就是你对）。</div><figure class="notion-asset-wrapper notion-asset-wrapper-tweet notion-block-279673a51ca042b29304f0826196942e"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column"><div style="max-width:420px;width:100%;margin-left:auto;margin-right:auto"><div></div></div></div></figure><div class="notion-text notion-block-d86d41b8839544f0b0824b5ddb1e1dcd"><b>接口的抽象力度</b></div><div class="notion-text notion-block-2193418d1e294c75b2cf1a9e541f340d">越少的接口抽象程度越高，而且接口是要被发现而不是自己创建出来的，没有必要一上来就定义一堆接口，然后再实现。</div><div class="notion-callout notion-gray_background_co notion-block-e781ed43f235474ea4c017b4fa34c83a"><div class="notion-page-icon-inline notion-page-icon-span"><span class="notion-page-icon" role="img" aria-label="💡">💡</span></div><div class="notion-callout-text">The bigger the interface, the weaker the abstraction.  —Rob Pike</div></div><div class="notion-callout notion-gray_background_co notion-block-6763d338aff44abe8f492a92d479d231"><div class="notion-page-icon-inline notion-page-icon-span"><span class="notion-page-icon" role="img" aria-label="💡">💡</span></div><div class="notion-callout-text">Don’t design with interfaces, discover them.  —Rob Pike</div></div><div class="notion-text notion-block-ebba10a98a9e4fefbc170e1bd2aab18f">此外，我们还可以组合细粒度接口来创建更高级别的抽象</div><pre class="notion-code"><div class="notion-code-copy"><div class="notion-code-copy-button"><svg fill="currentColor" viewBox="0 0 16 16" width="1em" version="1.1"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg></div></div><code class="language-go">type ReadWriter interface {
    Reader
    Writer 
}</code></pre><div class="notion-text notion-block-7cbfc99074eb4ab39f3e2d711975a91d"><b>何时使用接口</b></div><ol start="1" class="notion-list notion-list-numbered notion-block-a32a3e73962d41b5a5c73b4878e5625b"><li>多种类型有相同的行为，像sort包提供的sort方法只需要类型实现下面的接口就可以被排序</li><ol class="notion-list notion-list-numbered notion-block-a32a3e73962d41b5a5c73b4878e5625b"><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-431573b6c67843b6b669ec9d7b76f98c"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%272000%27%20height=%27389%27/%3e"/></span><img alt="notion image" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover;background-size:cover;background-position:0% 0%;filter:blur(20px);background-image:url(&quot;data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoQAAMABUB8JaQAA3AA/vBdAAA=&quot;)"/><noscript><img alt="notion image" src="https://www.notion.so/image/http%3A%2F%2Ftva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbgs7y27gwj30jl03tq3s.jpg?table=block&amp;id=431573b6-c678-43b6-b669-ec9d7b76f98c&amp;cache=v2" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover" loading="lazy"/></noscript></span></div></figure></ol></ol><ol start="2" class="notion-list notion-list-numbered notion-block-ba8887322ef3406d910167aa9c1fe779"><li> 代码解耦，结构体中包含接口成员而不是具体的结构体，能够帮助我们更好的解耦，不需要做大量的代码修改就能切换其他成员。</li></ol><div class="notion-row notion-block-286f8e951c4d461298c71b31601436e6"><div class="notion-column notion-block-d3cdeab43747401a8d07f601f1502513" style="width:calc((100% - (1 * min(32px, 4vw))) * 0.5)"><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-35bc0ca7ec034e15ae3827ff1ad1326e"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column;height:100%"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%272000%27%20height=%27544%27/%3e"/></span><img alt="Bad Code" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover;background-size:cover;background-position:0% 0%;filter:blur(20px);background-image:url(&quot;data:image/webp;base64,UklGRiwAAABXRUJQVlA4ICAAAAAwAQCdASoQAAQABUB8JaQAA3AA/vCAarNdBqSUpgAAAA==&quot;)"/><noscript><img alt="Bad Code" src="https://www.notion.so/image/http%3A%2F%2Ftva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbgs75cj9mj30jt05e3zy.jpg?table=block&amp;id=35bc0ca7-ec03-4e15-ae38-27ff1ad1326e&amp;cache=v2" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover" loading="lazy"/></noscript></span><figcaption class="notion-asset-caption">Bad Code</figcaption></div></figure><div class="notion-blank notion-block-427c10e4f64b4dec98cfa8b2aac7c70b"> </div></div><div class="notion-spacer"></div><div class="notion-column notion-block-029e417f154d4a4eac9b45e6862e956d" style="width:calc((100% - (1 * min(32px, 4vw))) * 0.5)"><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-50ec760d027c4f4d8685fa97d504960c"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:650px;max-width:100%;flex-direction:column"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%272000%27%20height=%27806%27/%3e"/></span><img alt="Good Code" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover;background-size:cover;background-position:0% 0%;filter:blur(20px);background-image:url(&quot;data:image/webp;base64,UklGRioAAABXRUJQVlA4IB4AAAAwAQCdASoQAAYABUB8JaQAA3AA/vBN55jFL5/ogAA=&quot;)"/><noscript><img alt="Good Code" src="https://www.notion.so/image/http%3A%2F%2Ftva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbgs7fp17lj30i207awgk.jpg?table=block&amp;id=50ec760d-027c-4f4d-8685-fa97d504960c&amp;cache=v2" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover" loading="lazy"/></noscript></span><figcaption class="notion-asset-caption">Good Code</figcaption></div></figure></div><div class="notion-spacer"></div></div><ol start="1" class="notion-list notion-list-numbered notion-block-199a5130f9dc4bc1aa0d2ed40ac76de5"><li> 可以代码限制行为，在这个例子里，调用Foo的代码，只能获取到阈值，却不能修改阈值，这就达到了限制行为的作</li></ol><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-a57c3dbacc4a4d2784b3a9dc4413a9b4"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column;height:100%"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%272000%27%20height=%27744%27/%3e"/></span><img alt="notion image" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover;background-size:cover;background-position:0% 0%;filter:blur(20px);background-image:url(&quot;data:image/webp;base64,UklGRi4AAABXRUJQVlA4ICIAAADQAQCdASoQAAYABUB8JaQAAveHlveWAAD+78stLqsAAAAA&quot;)"/><noscript><img alt="notion image" src="https://www.notion.so/image/http%3A%2F%2Ftva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbgs6lmsygj30ke07ldho.jpg?table=block&amp;id=a57c3dba-cc4a-4d27-84b3-a9dc4413a9b4&amp;cache=v2" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover" loading="lazy"/></noscript></span></div></figure><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-bb6f68272a654a52a5c57ae5ce5db014" data-id="bb6f68272a654a52a5c57ae5ce5db014"><span><div id="bb6f68272a654a52a5c57ae5ce5db014" class="notion-header-anchor"></div><a class="notion-hash-link" href="#bb6f68272a654a52a5c57ae5ce5db014" title="2.6 #6 Interface on the producer side （错误的把接口定义在实现端）"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">2.6 #6 Interface on the producer side （错误的把接口定义在实现端）</span></span></h4><div class="notion-row notion-block-5232f2f138a9458fa6e49f328f335da8"><div class="notion-column notion-block-a778e85c4c074d3bb4af0225e189f154" style="width:calc((100% - (1 * min(32px, 4vw))) * 0.5)"><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-a47de96b2289412fb77b72bb6570c724"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%272000%27%20height=%271714%27/%3e"/></span><img alt="notion image" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover;background-size:cover;background-position:0% 0%;filter:blur(20px);background-image:url(&quot;data:image/webp;base64,UklGRkIAAABXRUJQVlA4IDYAAACwAQCdASoQAA4ABUB8JZQAApe1xY4AAP7oZl5rOjFMQT/TLYoOcMhNRVNVM1+t0cB7eUH5AAA=&quot;)"/><noscript><img alt="notion image" src="https://www.notion.so/image/http%3A%2F%2Ftva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbgs5e3i9kj30b309ign7.jpg?table=block&amp;id=a47de96b-2289-412f-b77b-72bb6570c724&amp;cache=v2" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover" loading="lazy"/></noscript></span></div></figure></div><div class="notion-spacer"></div><div class="notion-column notion-block-8c271c37bc04410cb5cb185b2ea9716c" style="width:calc((100% - (1 * min(32px, 4vw))) * 0.5)"><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-453a54e6751b425eadea5e5e424d5bfd"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%272000%27%20height=%271753%27/%3e"/></span><img alt="notion image" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover;background-size:cover;background-position:0% 0%;filter:blur(20px);background-image:url(&quot;data:image/webp;base64,UklGRj4AAABXRUJQVlA4IDIAAACwAQCdASoQAA4ABUB8JZQAAsel6k4AAP7h4OulSKiYK3llj/zFaSO+yTYGGeVYAANIAA==&quot;)"/><noscript><img alt="notion image" src="https://www.notion.so/image/http%3A%2F%2Ftva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbgs5hpt95j30al09ata7.jpg?table=block&amp;id=453a54e6-751b-425e-adea-5e5e424d5bfd&amp;cache=v2" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover" loading="lazy"/></noscript></span></div></figure></div><div class="notion-spacer"></div></div><div class="notion-text notion-block-077ccb01e80a4046a31dd90f5a2400f2">默认情况下，我们会把接口定义在接口的实现侧(包)里，但是<b>本文建议把接口定义在客户(调用)侧(包)</b>，这样建议的原则还是：</div><div class="notion-callout notion-gray_background_co notion-block-0ec99a5f23b74dbcae7471d984e1d2c1"><div class="notion-page-icon-inline notion-page-icon-span"><span class="notion-page-icon" role="img" aria-label="💡">💡</span></div><div class="notion-callout-text">Don’t design with interfaces, discover them.  —Rob Pike</div></div><div class="notion-text notion-block-db349756ebcb40e78344381303805881">因为接口是被发现，而不是创建出来的，只有在客户端的程序才知道自己需要什么样的接口，这样抽象程度更高，不会出现一个接口出现了很多冗余的方法。如果放在实现侧定义的话，受到开发者自己的主观影响，往往没法定义出一个由较好抽象的接口。PS: 这种规则在标准库里不适用,原因自行体会。</div><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-b23d574302364ec496b3ce0ec09f6bf2" data-id="b23d574302364ec496b3ce0ec09f6bf2"><span><div id="b23d574302364ec496b3ce0ec09f6bf2" class="notion-header-anchor"></div><a class="notion-hash-link" href="#b23d574302364ec496b3ce0ec09f6bf2" title="2.7 #7 Returning interfaces  (返回接口)"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">2.7 #7 Returning interfaces  (返回接口)</span></span></h4><div class="notion-text notion-block-e9db0a94341d4064aa5be056f2caca70">这条规则要配合上一条一起食用，如果在实现端，创建一个返回接口的函数，会因为引用循环的原因导致无法实现。</div><div class="notion-text notion-block-689134f04be84fb1aa3ef3d4be533bf3">本文在坚持2.6观点的前提下，提出了2点最佳实践：</div><ol start="1" class="notion-list notion-list-numbered notion-block-76b6a3db486847dba698f533625825ab"><li>返回结构体，而不是接口</li></ol><ol start="2" class="notion-list notion-list-numbered notion-block-75e1db824b5f4f999485794b1d9ac083"><li>函数或者结构体尽量接受接口</li></ol><div class="notion-text notion-block-745f86ffabac4dc0aa5934dcd91ec019">当然这2点提出也是引经据典引申出来的。</div><div class="notion-callout notion-gray_background_co notion-block-261d4ee9580942a49a4568b93eb42e5c"><div class="notion-page-icon-inline notion-page-icon-span"><span class="notion-page-icon" role="img" aria-label="💡">💡</span></div><div class="notion-callout-text">Be conservative in what you do, be liberal in what you accept from others. - Transmission Control Protocol</div></div><div class="notion-text notion-block-7d5fd87940e04a52b7286c4c4fdd6f89">当然，规则不是100%准确的，比如 Error 类型经常被函数返回，标准库 io 包里也经常有返回接口的函数。</div><pre class="notion-code"><div class="notion-code-copy"><div class="notion-code-copy-button"><svg fill="currentColor" viewBox="0 0 16 16" width="1em" version="1.1"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg></div></div><code class="language-go">func LimitReader(r Reader, n int64) Reader {
    return &amp;LimitedReader{r, n}
}</code></pre><div class="notion-text notion-block-2d1f81e81dda475cb2dbda4336d20e6e">如果我们知道(不是预见)一个抽象将对调用方有帮助，我们可以考虑返回一个接口</div><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-1f28517b9a5947098d374c4115d23076" data-id="1f28517b9a5947098d374c4115d23076"><span><div id="1f28517b9a5947098d374c4115d23076" class="notion-header-anchor"></div><a class="notion-hash-link" href="#1f28517b9a5947098d374c4115d23076" title="2.8  #8 any says nothing （any 类型表达性很弱）"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">2.8  #8 any says nothing （any 类型表达性很弱）</span></span></h4><div class="notion-text notion-block-356490def3664725a0cd2f60174e386e">从Go,1.18出现了any类型其实底层代码就是interface{}, 本节提出了不能随意使用any作为类型，不然会丢失重要的类型信息，代码可读性降低。</div><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-2dcfb4c707654c54b3fd111fdf46c6b9" data-id="2dcfb4c707654c54b3fd111fdf46c6b9"><span><div id="2dcfb4c707654c54b3fd111fdf46c6b9" class="notion-header-anchor"></div><a class="notion-hash-link" href="#2dcfb4c707654c54b3fd111fdf46c6b9" title="2.9 #9: Being confused about when to use generics （不知道何时使用泛型）"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">2.9 #9: Being confused about when to use generics （不知道何时使用泛型）</span></span></h4><div class="notion-text notion-block-eca8585364274c0e9e99f8b3202ba13e">本节讲解了泛型的知识点，其中有一个例子显示，泛型可以限制类型范围，如下语法表示。</div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-225a6224d5f4406e9637b83a42461120"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%272000%27%20height=%27580%27/%3e"/></span><img alt="notion image" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover;background-size:cover;background-position:0% 0%;filter:blur(20px);background-image:url(&quot;data:image/webp;base64,UklGRjAAAABXRUJQVlA4ICQAAAAwAQCdASoQAAUABUB8JZwAA3AA/vBn8OOYluXUP+vtKB5WAAA=&quot;)"/><noscript><img alt="notion image" src="https://www.notion.so/image/http%3A%2F%2Ftva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbgs4b4dcjj30jd05mwgh.jpg?table=block&amp;id=225a6224-d5f4-406e-9637-b83a42461120&amp;cache=v2" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover" loading="lazy"/></noscript></span></div></figure><pre class="notion-code"><div class="notion-code-copy"><div class="notion-code-copy-button"><svg fill="currentColor" viewBox="0 0 16 16" width="1em" version="1.1"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg></div></div><code class="language-go">// customConstraint 接口要求实现类型的底层类型是int就可以了，并且可以实现String方法
// 如果 ~int 改为 int，编译就会报错，int类型没有实现String方法
type customConstraint interface {
    ~int
    String() string
}

// customInt 满足 customConstraint 的要求，并且实现了 String 方法
type customInt int
func (i customInt) String() string {
    return strconv.Itoa(int(i))
}</code></pre><div class="notion-text notion-block-9bfff5a2b613484cae12504898ba4417">泛型可以用在函数参数中，也可以用在数据结构中。</div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-897cf90e31b648abb06ea5e406bbbdd9"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%272000%27%20height=%27642%27/%3e"/></span><img alt="notion image" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover;background-size:cover;background-position:0% 0%;filter:blur(20px);background-image:url(&quot;data:image/webp;base64,UklGRioAAABXRUJQVlA4IB4AAAAwAQCdASoQAAUABUB8JaQAA3AA/vB+pxrYjSx0AAA=&quot;)"/><noscript><img alt="notion image" src="https://www.notion.so/image/http%3A%2F%2Ftva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbgs3v7b8lj30gp05dwfi.jpg?table=block&amp;id=897cf90e-31b6-48ab-b06e-a5e406bbbdd9&amp;cache=v2" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover" loading="lazy"/></noscript></span></div></figure><div class="notion-text notion-block-49afa39aa4014f7a89d3524bd7d6c96a"><b>何时使用泛型</b></div><ol start="1" class="notion-list notion-list-numbered notion-block-97c53b1700844396b349dec208a815ff"><li>构建数据结构，例如，如果我们实现二叉树、链表或堆，我们可以使用泛型来分解出元素类型。</li></ol><ol start="2" class="notion-list notion-list-numbered notion-block-b4f5a2cb746749d0b505126c905ab7dc"><li>处理任何类型的slice、map和channel的函数-例如，合并两个channel的函数适用于任何通道类型。</li><ol class="notion-list notion-list-numbered notion-block-b4f5a2cb746749d0b505126c905ab7dc"><pre class="notion-code"><div class="notion-code-copy"><div class="notion-code-copy-button"><svg fill="currentColor" viewBox="0 0 16 16" width="1em" version="1.1"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg></div></div><code class="language-go">func merge[T any](ch1, ch2 &lt;-chan T) &lt;-chan T {
	// ...
}</code></pre></ol></ol><ol start="3" class="notion-list notion-list-numbered notion-block-a8d5c02437c044cfb0cd2d1bdfee0529"><li>众多类型在实现接口方法时候拥有相似的处理逻辑，例如调用sort包方法对数组排序，需要数组元素类型实现Interface接口，没有泛型的时候，int,int32,int64,float都要实现一遍接口，而这些类型的实际方法的逻辑都是一样的，用泛型能够减少大量冗余代码</li><ol class="notion-list notion-list-numbered notion-block-a8d5c02437c044cfb0cd2d1bdfee0529"><pre class="notion-code"><div class="notion-code-copy"><div class="notion-code-copy-button"><svg fill="currentColor" viewBox="0 0 16 16" width="1em" version="1.1"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg></div></div><code class="language-go">// sort package
// This interface is used by different functions such as sort.Ints or 
// sort .Float64s. Using type parameters, we could factor out the sorting 
// behavior (for example, by defining a struct holding a slice and a comparison function):
type Interface interface {
     Len() int
     Less(i, j int) bool
     Swap(i, j int)
}</code></pre><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-5e4633228bd8469aad912db63cbd7b0a"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column;height:100%"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%27818%27%20height=%27206%27/%3e"/></span><img alt="notion image" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover;background-size:cover;background-position:0% 0%;filter:blur(20px);background-image:url(&quot;data:image/webp;base64,UklGRigAAABXRUJQVlA4IBwAAAAwAQCdASoQAAQABUB8JaQAA3AA/u/yOtBODuAA&quot;)"/><noscript><img alt="notion image" src="https://s3.us-west-2.amazonaws.com/secure.notion-static.com/43f8d294-32ae-4674-8aff-be89bff7af16/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&amp;X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&amp;X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20230227%2Fus-west-2%2Fs3%2Faws4_request&amp;X-Amz-Date=20230227T152323Z&amp;X-Amz-Expires=86400&amp;X-Amz-Signature=7c550bc15a34376cda746cebc47caf1409cfe05f4c825e5dc7f2f46fc10535c1&amp;X-Amz-SignedHeaders=host&amp;x-id=GetObject" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover" loading="lazy"/></noscript></span></div></figure><pre class="notion-code"><div class="notion-code-copy"><div class="notion-code-copy-button"><svg fill="currentColor" viewBox="0 0 16 16" width="1em" version="1.1"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg></div></div><code class="language-go">s := SliceFn[int]{
	S: []int{3, 2, 1},
	Compare: func(a, b int) bool {
		return a &lt; b
	}
}
sort.Sort(s)
fmt.Println(s.S)</code></pre></ol></ol><div class="notion-text notion-block-30b3e19e5a3449d1a93519ffd889331f"><b>何时不使用泛型</b></div><ol start="1" class="notion-list notion-list-numbered notion-block-68028f348e6d4814ac6bbd8a9bcdc24d"><li>下面的例子我们调用了接口的方法，使用泛型没有带来任何好处</li><ol class="notion-list notion-list-numbered notion-block-68028f348e6d4814ac6bbd8a9bcdc24d"><pre class="notion-code"><div class="notion-code-copy"><div class="notion-code-copy-button"><svg fill="currentColor" viewBox="0 0 16 16" width="1em" version="1.1"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg></div></div><code class="language-go">func foo[T io.Writer](w T) {
	b := getBytes()
	_, _ = w.Write(b)
}</code></pre></ol></ol><ol start="2" class="notion-list notion-list-numbered notion-block-a230f488c92e4ed4926b092e3df7c061"><li>当使用泛型会带来更多复杂度</li></ol><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-a085e89c8fc646d4850051f20db77691" data-id="a085e89c8fc646d4850051f20db77691"><span><div id="a085e89c8fc646d4850051f20db77691" class="notion-header-anchor"></div><a class="notion-hash-link" href="#a085e89c8fc646d4850051f20db77691" title="2.10 #10: Not being aware of the possible problems with type embedding （对类型嵌入的使用场景不熟悉）"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">2.10 #10: Not being aware of the possible problems with type embedding （对类型嵌入的使用场景不熟悉）</span></span></h4><ol start="1" class="notion-list notion-list-numbered notion-block-5e3ec5ede79f4a2ea71cddd222c731a4"><li>简单来说，类型嵌入可以避免编写大量的模板代码，使用嵌入类型的原则是，如果不想暴露成员的访问权，就尽量不使用类型嵌入。</li></ol><ol start="2" class="notion-list notion-list-numbered notion-block-101a15a9cb96493fbaaca8554a066029"><li>嵌入接口的话，嵌入类型还能够默认实现嵌入接口。</li></ol><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-7b034d7ef85845928fbae40e263bdac9" data-id="7b034d7ef85845928fbae40e263bdac9"><span><div id="7b034d7ef85845928fbae40e263bdac9" class="notion-header-anchor"></div><a class="notion-hash-link" href="#7b034d7ef85845928fbae40e263bdac9" title="2.11 #11: Not using the functional options pattern（编写构造函数的时候，使用option模式）"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">2.11 #11: Not using the functional options pattern（编写构造函数的时候，使用option模式）</span></span></h4><div class="notion-text notion-block-687b1372ba494717b4430cece509c35f">在很多场景下下，我们需要对对象的成员进行配置化，往往我们会在NewXXX函数中的参数中罗列配置化的值，这样就出现很多问题。</div><div class="notion-text notion-block-29eb9559b6a34841aa470aa955977f34"><b>Bad Code</b></div><pre class="notion-code"><div class="notion-code-copy"><div class="notion-code-copy-button"><svg fill="currentColor" viewBox="0 0 16 16" width="1em" version="1.1"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg></div></div><code class="language-go">func NewServer(addr string, port int) (*http.Server, error) { 
	// ...
}</code></pre><ol start="1" class="notion-list notion-list-numbered notion-block-e29240e40c0a4ae9896dc20a88fd6987"><li>如果不传递port的时候，我们希望使用默认值，但是这里port又必须要填写一个值</li></ol><ol start="2" class="notion-list notion-list-numbered notion-block-a1949e3b26904b588c93eee956520e01"><li>额外增加参数的时候，会对函数签名有不兼容的修改。</li></ol><div class="notion-text notion-block-0d6c8f7defe145009fbe5884a71cdd84">我们期望配置*http.Server的时候，可以做到下面几点：</div><ol start="1" class="notion-list notion-list-numbered notion-block-2363de2c05cc44ab9def44e215fcbb21"><li>如果port没有设置，我们使用默认值</li></ol><ol start="2" class="notion-list notion-list-numbered notion-block-7eb5dca6dda84bdcbcc674063ebd43e5"><li>如果port是负数，抛出错误，这很重要</li></ol><ol start="3" class="notion-list notion-list-numbered notion-block-3d2bc34b1e1945efb7a8337817df896e"><li>如果port是0，那我们就随机生成端口</li></ol><ol start="4" class="notion-list notion-list-numbered notion-block-b0dcbae693404206ab30efcc66f2c133"><li>其他场景，我们使用默认值</li></ol><div class="notion-text notion-block-cd0cef2a46744d77a16643a3de853b04"><b>解决方案一</b>：<b>Config struct</b></div><div class="notion-text notion-block-f88bc03a930c4628a40b77c3749f2698">第一种解决方案是，使用一个Config对象存储配置。</div><div class="notion-callout notion-gray_background_co notion-block-64ca2bf0c9c94102b315424d95d397d2"><div class="notion-page-icon-inline notion-page-icon-span"><span class="notion-page-icon" role="img" aria-label="💡">💡</span></div><div class="notion-callout-text">这里遇到第一个点，配置字段为指针类型，判断用户是否配置了该值</div></div><div class="notion-row notion-block-f259513532e843f6b5713b3890799865"><div class="notion-column notion-block-2847d5ac6a2b41f3b0ad60bcee197875" style="width:calc((100% - (1 * min(32px, 4vw))) * 0.5)"><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-8fc7b341c7e8428b86038f5781bda6b6"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%272000%27%20height=%27686%27/%3e"/></span><img alt="notion image" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover;background-size:cover;background-position:0% 0%;filter:blur(20px);background-image:url(&quot;data:image/webp;base64,UklGRjYAAABXRUJQVlA4ICoAAACwAQCdASoQAAUABUB8JYwAAp1XppjqAP7tYQKUNHedgI/DdAhOU3AUQAA=&quot;)"/><noscript><img alt="notion image" src="https://www.notion.so/image/http%3A%2F%2Ftva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbgs2q252pj30c5046jsd.jpg?table=block&amp;id=8fc7b341-c7e8-428b-8603-8f5781bda6b6&amp;cache=v2" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover" loading="lazy"/></noscript></span></div></figure></div><div class="notion-spacer"></div><div class="notion-column notion-block-5342c807ad16458fbf0328fd3feec059" style="width:calc((100% - (1 * min(32px, 4vw))) * 0.5)"><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-2c4954203b0543b7956936f11d7a250e"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%272000%27%20height=%27429%27/%3e"/></span><img alt="notion image" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover;background-size:cover;background-position:0% 0%;filter:blur(20px);background-image:url(&quot;data:image/webp;base64,UklGRjYAAABXRUJQVlA4ICoAAACQAQCdASoQAAMABUB8JagAAltQJwAA/vAKiBuEkLGBJYkLMr/+HbWgAAA=&quot;)"/><noscript><img alt="notion image" src="https://www.notion.so/image/http%3A%2F%2Ftva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbgs2tuaotj30dc02vwfa.jpg?table=block&amp;id=2c495420-3b05-43b7-9569-36f11d7a250e&amp;cache=v2" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover" loading="lazy"/></noscript></span></div></figure></div><div class="notion-spacer"></div></div><pre class="notion-code"><div class="notion-code-copy"><div class="notion-code-copy-button"><svg fill="currentColor" viewBox="0 0 16 16" width="1em" version="1.1"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg></div></div><code class="language-go">port := 0
// 但是用户使用的时候需要传递指针类型给Config结构体，会给人造成困惑，
// 配置一个端口需要传递一个int指针，所以这种设计并不API友好
config := httplib.Config{
	Port: &amp;port,
}
// 当我们不想传递配置的时候，也不行，必要给一个空的结构提
httplib.NewServer(&quot;localhost&quot;, httplib.Config{})</code></pre><div class="notion-text notion-block-4732007d9b874515b1037ee0c00d8521"><b>解决方案二</b>：<b>Builder pattern</b></div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-9cf144370959416989ab2ce44e135eae"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%272000%27%20height=%271463%27/%3e"/></span><img alt="notion image" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover;background-size:cover;background-position:0% 0%;filter:blur(20px);background-image:url(&quot;data:image/webp;base64,UklGRj4AAABXRUJQVlA4IDIAAACwAQCdASoQAAwABUB8JZQAAuP6P7TgAP7v0iugBDOVzmhVy59JqYcE8gs34BM+SAAAAA==&quot;)"/><noscript><img alt="notion image" src="https://www.notion.so/image/http%3A%2F%2Ftva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbgs17zv73j30n70gzah9.jpg?table=block&amp;id=9cf14437-0959-4169-89ab-2ce44e135eae&amp;cache=v2" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover" loading="lazy"/></noscript></span></div></figure><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-529346abee484618832378a45a8823b4"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%272000%27%20height=%27722%27/%3e"/></span><img alt="notion image" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover;background-size:cover;background-position:0% 0%;filter:blur(20px);background-image:url(&quot;data:image/webp;base64,UklGRjAAAABXRUJQVlA4ICQAAADQAQCdASoQAAYABUB8JaQAAxZr4vVGAAD+7+JpoMIZWxgAAAA=&quot;)"/><noscript><img alt="notion image" src="https://www.notion.so/image/http%3A%2F%2Ftva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbgs0pztq1j30nh08h419.jpg?table=block&amp;id=529346ab-ee48-4618-8323-78a45a8823b4&amp;cache=v2" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover" loading="lazy"/></noscript></span></div></figure><div class="notion-text notion-block-7b03da77c12f4f5baa9247e0be234934"><b>解决方案三</b>：<b>Functional options pattern</b></div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-a90512ecc9224f5da22fab714a41fd8f"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%272000%27%20height=%27784%27/%3e"/></span><img alt="notion image" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover;background-size:cover;background-position:0% 0%;filter:blur(20px);background-image:url(&quot;data:image/webp;base64,UklGRjgAAABXRUJQVlA4ICwAAACwAQCdASoQAAYABUB8JZQAAudVfYKAAP7v4se31ds2YDKiDwSCrUkQFHIAAA==&quot;)"/><noscript><img alt="notion image" src="https://www.notion.so/image/http%3A%2F%2Ftva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbgs05ff03j30lu08k0v0.jpg?table=block&amp;id=a90512ec-c922-4f5d-a22f-ab714a41fd8f&amp;cache=v2" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover" loading="lazy"/></noscript></span></div></figure><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-8bda39546b7e426b86a41a11a7ade791"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%272000%27%20height=%27829%27/%3e"/></span><img alt="notion image" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover;background-size:cover;background-position:0% 0%;filter:blur(20px);background-image:url(&quot;data:image/webp;base64,UklGRi4AAABXRUJQVlA4ICIAAAAwAQCdASoQAAcABUB8JZwAA3AA/vBKH3pYZvk0KroPAAAA&quot;)"/><noscript><img alt="notion image" src="https://www.notion.so/image/http%3A%2F%2Ftva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbgrzkhnpuj30me09an0m.jpg?table=block&amp;id=8bda3954-6b7e-426b-86a4-1a11a7ade791&amp;cache=v2" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover" loading="lazy"/></noscript></span></div></figure><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-3d14694ccc234a3989771c475be6c3f1"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%272000%27%20height=%271275%27/%3e"/></span><img alt="notion image" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover;background-size:cover;background-position:0% 0%;filter:blur(20px);background-image:url(&quot;data:image/webp;base64,UklGRjwAAABXRUJQVlA4IDAAAADwAQCdASoQAAoABUB8JYwAAujdUQfX+AAA/u/SFeWM6AREJFNY1PJydpEbEd0+AAA=&quot;)"/><noscript><img alt="notion image" src="https://www.notion.so/image/http%3A%2F%2Ftva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbgrxfm0cjj30o00fbjyj.jpg?table=block&amp;id=3d14694c-cc23-4a39-8977-1c475be6c3f1&amp;cache=v2" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover" loading="lazy"/></noscript></span></div></figure><pre class="notion-code"><div class="notion-code-copy"><div class="notion-code-copy-button"><svg fill="currentColor" viewBox="0 0 16 16" width="1em" version="1.1"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg></div></div><code class="language-go">// 构造函数，可以传递多个配置项
server, err := httplib.NewServer(&quot;localhost&quot;,
        httplib.WithPort(8080),
        httplib.WithTimeout(time.Second))
// 因为是可变参数，之前必填的cfg对象，可以省略
server, err := httplib.NewServer(&quot;localhost&quot;)</code></pre><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-c2de3f726e40492aaff5671c585b19ce" data-id="c2de3f726e40492aaff5671c585b19ce"><span><div id="c2de3f726e40492aaff5671c585b19ce" class="notion-header-anchor"></div><a class="notion-hash-link" href="#c2de3f726e40492aaff5671c585b19ce" title="2.12 #12: Project misorganization（推荐的项目组织结构）"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">2.12 #12: Project misorganization（推荐的项目组织结构）</span></span></h4><div class="notion-row"><a target="_blank" rel="noopener noreferrer" class="notion-bookmark notion-block-1d5e5afe60374e1394dc2da679391a66" href="https://github.com/golang-standards/project-layout/blob/master/README_zh-CN.md"><div><div class="notion-bookmark-title">project-layout/README_zh-CN.md at master · golang-standards/project-layout</div><div class="notion-bookmark-description">Standard Go Project Layout. Contribute to golang-standards/project-layout development by creating an account on GitHub.</div><div class="notion-bookmark-link"><div class="notion-bookmark-link-icon"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%272000%27%20height=%272000%27/%3e"/></span><img alt="project-layout/README_zh-CN.md at master · golang-standards/project-layout" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;background-size:cover;background-position:0% 0%;filter:blur(20px);background-image:url(&quot;data:image/webp;base64,UklGRvAAAABXRUJQVlA4WAoAAAAQAAAADwAADwAAQUxQSFQAAAARL0AmbZusm7J/zMEiIljjwSiSJEW9IIAVXKyBgz8LWGj/Ym7WQ0T/JwBw66IAuEF+CqgkmeEoqlOyVcpNKl06Zm1SpXxK1kkK7VcAN8hPAXDPrgBWUDggdgAAALACAJ0BKhAAEAAFQHwlpAAPiy4AHjU65ecof+2RAAD+xGswCIhSkhS6JfNcCW/805WZrrDGLKz5cfb0NnXkvm0HViG9PTcLpWomr4Mdh7YWdpmJZ29nvCdguIfRS6U8v5t9dDxAblZTQIuLW1uV9wjG4UKAAAA=&quot;)"/><noscript><img alt="project-layout/README_zh-CN.md at master · golang-standards/project-layout" src="https://www.notion.so/image/https%3A%2F%2Fgithub.com%2Ffluidicon.png?table=block&amp;id=1d5e5afe-6037-4e13-94dc-2da679391a66&amp;cache=v2" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></span></div><div class="notion-bookmark-link-text">https://github.com/golang-standards/project-layout/blob/master/README_zh-CN.md</div></div></div><div class="notion-bookmark-image"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%272000%27%20height=%271000%27/%3e"/></span><img alt="project-layout/README_zh-CN.md at master · golang-standards/project-layout" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover;background-size:cover;background-position:0% 0%;filter:blur(20px);background-image:url(&quot;data:image/webp;base64,UklGRjYAAABXRUJQVlA4ICoAAACwAQCdASoQAAgABUB8JZQAAubLWB0QAP7tiz3IbZfx5vGEznGTQFYAAAA=&quot;)"/><noscript><img alt="project-layout/README_zh-CN.md at master · golang-standards/project-layout" src="https://www.notion.so/image/https%3A%2F%2Fopengraph.githubassets.com%2Ffd02d14603e11c05bdb114b0a9a7447975debdf60c1b3aebb46ab7284bdcb866%2Fgolang-standards%2Fproject-layout?table=block&amp;id=1d5e5afe-6037-4e13-94dc-2da679391a66&amp;cache=v2" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover" loading="lazy"/></noscript></span></div></a></div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-c230c158c3264a479e00b7138d74b096"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%272000%27%20height=%271240%27/%3e"/></span><img alt="notion image" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover;background-size:cover;background-position:0% 0%;filter:blur(20px);background-image:url(&quot;data:image/webp;base64,UklGRi4AAABXRUJQVlA4ICIAAABwAQCdASoQAAoABUB8JaV/2AGIAAD+79kcrY+X1AHPR4AA&quot;)"/><noscript><img alt="notion image" src="https://www.notion.so/image/http%3A%2F%2Ftva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbfrrr9exgj31fm0w07iq.jpg?table=block&amp;id=c230c158-c326-4a47-9e00-b7138d74b096&amp;cache=v2" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover" loading="lazy"/></noscript></span></div></figure><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-4acd42d3adff494499d2f5bc52956959" data-id="4acd42d3adff494499d2f5bc52956959"><span><div id="4acd42d3adff494499d2f5bc52956959" class="notion-header-anchor"></div><a class="notion-hash-link" href="#4acd42d3adff494499d2f5bc52956959" title="2.13 #13: Creating utility packages（不推荐使用utility包）"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">2.13 #13: Creating utility packages（不推荐使用utility包）</span></span></h4><div class="notion-text notion-block-387067a68916477eb183be6c3475ffff">util、common、shared这类包名会抹去很多信息，不如直接使用有意义的包名来替代一些工具包</div><pre class="notion-code"><div class="notion-code-copy"><div class="notion-code-copy-button"><svg fill="currentColor" viewBox="0 0 16 16" width="1em" version="1.1"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg></div></div><code class="language-go">// bad
set := util.NewStringSet(&quot;c&quot;, &quot;a&quot;, &quot;b&quot;)
fmt.Println(util.SortStringSet(set))

// good
set := stringset.New(&quot;c&quot;, &quot;a&quot;, &quot;b&quot;)
fmt.Println(stringset.Sort(set))</code></pre><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-5d6cc20f8cf54e4f817885c030f21af2" data-id="5d6cc20f8cf54e4f817885c030f21af2"><span><div id="5d6cc20f8cf54e4f817885c030f21af2" class="notion-header-anchor"></div><a class="notion-hash-link" href="#5d6cc20f8cf54e4f817885c030f21af2" title="2.14 #14: Ignoring package name collisions（忽略包命名冲突）"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">2.14 #14: Ignoring package name collisions（忽略包命名冲突）</span></span></h4><div class="notion-text notion-block-f5d2f0970f1e498aa685d4c1261b2c1e">一般IDE都会有冲突提醒</div><pre class="notion-code"><div class="notion-code-copy"><div class="notion-code-copy-button"><svg fill="currentColor" viewBox="0 0 16 16" width="1em" version="1.1"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg></div></div><code class="language-go">import &quot;xxx/redis&quot;

// bad
redis := redis.NewClient()
v, err := redis.Get(&quot;foo&quot;)</code></pre><div class="notion-text notion-block-f804aa2a0103496aa8b94fb17c489a44">方案一</div><pre class="notion-code"><div class="notion-code-copy"><div class="notion-code-copy-button"><svg fill="currentColor" viewBox="0 0 16 16" width="1em" version="1.1"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg></div></div><code class="language-go">redisClient := redis.NewClient()
v, err := redisClient.Get(&quot;foo&quot;)</code></pre><div class="notion-text notion-block-12b6de2eb15844a5a304f59f10b04143">方案二</div><pre class="notion-code"><div class="notion-code-copy"><div class="notion-code-copy-button"><svg fill="currentColor" viewBox="0 0 16 16" width="1em" version="1.1"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg></div></div><code class="language-go">import redisapi &quot;mylib/redis&quot;

redis := redisapi.NewClient()
v, err := redis.Get(&quot;foo&quot;)</code></pre><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-ac6ccfad09e745f49e1b746904705c93" data-id="ac6ccfad09e745f49e1b746904705c93"><span><div id="ac6ccfad09e745f49e1b746904705c93" class="notion-header-anchor"></div><a class="notion-hash-link" href="#ac6ccfad09e745f49e1b746904705c93" title="2.15 #15: Missing code documentation（完善代码文档）"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">2.15 #15: Missing code documentation（完善代码文档）</span></span></h4><div class="notion-text notion-block-6c1001d5dfde43ac92d8e5d19f682e59">省略</div><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-8a8d6c2e323a447f8ea9ed86272f6540" data-id="8a8d6c2e323a447f8ea9ed86272f6540"><span><div id="8a8d6c2e323a447f8ea9ed86272f6540" class="notion-header-anchor"></div><a class="notion-hash-link" href="#8a8d6c2e323a447f8ea9ed86272f6540" title="2.16 #16: Not using linters（不使用linters）"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">2.16 #16: Not using linters（不使用linters）</span></span></h4><a target="_blank" rel="noopener noreferrer" href="https://github.com/golangci/golangci-lint" class="notion-external notion-external-block notion-row notion-block-ff1a2b2492e54586a06c2cf3d8879ed2"><div class="notion-external-image"><svg viewBox="0 0 260 260"><g><path d="M128.00106,0 C57.3172926,0 0,57.3066942 0,128.00106 C0,184.555281 36.6761997,232.535542 87.534937,249.460899 C93.9320223,250.645779 96.280588,246.684165 96.280588,243.303333 C96.280588,240.251045 96.1618878,230.167899 96.106777,219.472176 C60.4967585,227.215235 52.9826207,204.369712 52.9826207,204.369712 C47.1599584,189.574598 38.770408,185.640538 38.770408,185.640538 C27.1568785,177.696113 39.6458206,177.859325 39.6458206,177.859325 C52.4993419,178.762293 59.267365,191.04987 59.267365,191.04987 C70.6837675,210.618423 89.2115753,204.961093 96.5158685,201.690482 C97.6647155,193.417512 100.981959,187.77078 104.642583,184.574357 C76.211799,181.33766 46.324819,170.362144 46.324819,121.315702 C46.324819,107.340889 51.3250588,95.9223682 59.5132437,86.9583937 C58.1842268,83.7344152 53.8029229,70.715562 60.7532354,53.0843636 C60.7532354,53.0843636 71.5019501,49.6441813 95.9626412,66.2049595 C106.172967,63.368876 117.123047,61.9465949 128.00106,61.8978432 C138.879073,61.9465949 149.837632,63.368876 160.067033,66.2049595 C184.49805,49.6441813 195.231926,53.0843636 195.231926,53.0843636 C202.199197,70.715562 197.815773,83.7344152 196.486756,86.9583937 C204.694018,95.9223682 209.660343,107.340889 209.660343,121.315702 C209.660343,170.478725 179.716133,181.303747 151.213281,184.472614 C155.80443,188.444828 159.895342,196.234518 159.895342,208.176593 C159.895342,225.303317 159.746968,239.087361 159.746968,243.303333 C159.746968,246.709601 162.05102,250.70089 168.53925,249.443941 C219.370432,232.499507 256,184.536204 256,128.00106 C256,57.3066942 198.691187,0 128.00106,0 Z M47.9405593,182.340212 C47.6586465,182.976105 46.6581745,183.166873 45.7467277,182.730227 C44.8183235,182.312656 44.2968914,181.445722 44.5978808,180.80771 C44.8734344,180.152739 45.876026,179.97045 46.8023103,180.409216 C47.7328342,180.826786 48.2627451,181.702199 47.9405593,182.340212 Z M54.2367892,187.958254 C53.6263318,188.524199 52.4329723,188.261363 51.6232682,187.366874 C50.7860088,186.474504 50.6291553,185.281144 51.2480912,184.70672 C51.8776254,184.140775 53.0349512,184.405731 53.8743302,185.298101 C54.7115892,186.201069 54.8748019,187.38595 54.2367892,187.958254 Z M58.5562413,195.146347 C57.7719732,195.691096 56.4895886,195.180261 55.6968417,194.042013 C54.9125733,192.903764 54.9125733,191.538713 55.713799,190.991845 C56.5086651,190.444977 57.7719732,190.936735 58.5753181,192.066505 C59.3574669,193.22383 59.3574669,194.58888 58.5562413,195.146347 Z M65.8613592,203.471174 C65.1597571,204.244846 63.6654083,204.03712 62.5716717,202.981538 C61.4524999,201.94927 61.1409122,200.484596 61.8446341,199.710926 C62.5547146,198.935137 64.0575422,199.15346 65.1597571,200.200564 C66.2704506,201.230712 66.6095936,202.705984 65.8613592,203.471174 Z M75.3025151,206.281542 C74.9930474,207.284134 73.553809,207.739857 72.1039724,207.313809 C70.6562556,206.875043 69.7087748,205.700761 70.0012857,204.687571 C70.302275,203.678621 71.7478721,203.20382 73.2083069,203.659543 C74.6539041,204.09619 75.6035048,205.261994 75.3025151,206.281542 Z M86.046947,207.473627 C86.0829806,208.529209 84.8535871,209.404622 83.3316829,209.4237 C81.8013,209.457614 80.563428,208.603398 80.5464708,207.564772 C80.5464708,206.498591 81.7483088,205.631657 83.2786917,205.606221 C84.8005962,205.576546 86.046947,206.424403 86.046947,207.473627 Z M96.6021471,207.069023 C96.7844366,208.099171 95.7267341,209.156872 94.215428,209.438785 C92.7295577,209.710099 91.3539086,209.074206 91.1652603,208.052538 C90.9808515,206.996955 92.0576306,205.939253 93.5413813,205.66582 C95.054807,205.402984 96.4092596,206.021919 96.6021471,207.069023 Z" fill="#161614"></path></g></svg></div><div class="notion-external-description"><div class="notion-external-title">golangci-lint</div><div class="notion-external-subtitle"><span>golangci</span><span> • </span><span>Updated <!-- -->Feb 27, 2023</span></div></div></a><h3 class="notion-h notion-h2 notion-h-indent-0 notion-block-ba2d26c542004a8c8284231f1fd990c8" data-id="ba2d26c542004a8c8284231f1fd990c8"><span><div id="ba2d26c542004a8c8284231f1fd990c8" class="notion-header-anchor"></div><a class="notion-hash-link" href="#ba2d26c542004a8c8284231f1fd990c8" title="3 Data types"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">3 Data types</span></span></h3><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-e8b2f3c0be404fbebfede6eb3a6e7676" data-id="e8b2f3c0be404fbebfede6eb3a6e7676"><span><div id="e8b2f3c0be404fbebfede6eb3a6e7676" class="notion-header-anchor"></div><a class="notion-hash-link" href="#e8b2f3c0be404fbebfede6eb3a6e7676" title="3.1 #17: Creating confusion with octal literals（混淆八进制）"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">3.1 #17: Creating confusion with octal literals（混淆八进制）</span></span></h4><div class="notion-text notion-block-7c3ae5b0c459473e8a87e8e6962ed3c8">在GO中以0或者0o开头的数字被认为是8进制数</div><pre class="notion-code"><div class="notion-code-copy"><div class="notion-code-copy-button"><svg fill="currentColor" viewBox="0 0 16 16" width="1em" version="1.1"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg></div></div><code class="language-go">sum := 100 + 010
fmt.Println(sum)

// output
// 108</code></pre><div class="notion-text notion-block-e93a484eae2147b389f0ed91637307fe">在一些特殊场景，比较读取文件的时候使用八进制描述可以方便的指定权限</div><pre class="notion-code"><div class="notion-code-copy"><div class="notion-code-copy-button"><svg fill="currentColor" viewBox="0 0 16 16" width="1em" version="1.1"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg></div></div><code class="language-go">file, err := os.OpenFile(&quot;foo&quot;, os.O_RDONLY, 0o644)</code></pre><ul class="notion-list notion-list-disc notion-block-d1720e0e0f36482b998f684f40120ada"><li>二进制-使用0b或者0B作为前缀（0b100代表4）</li></ul><ul class="notion-list notion-list-disc notion-block-fcd9efcf783c4f5d9d68bedf778e1741"><li>16进制-使用0x或者0X前缀（0xF代表15）</li></ul><ul class="notion-list notion-list-disc notion-block-9ea7be3935284d0f8c370f049f8290cc"><li>虚数-使用i作为后缀（3i）</li></ul><div class="notion-text notion-block-ea240d20f3744cedbe2571db0a86d13e">除此之外我们可以在数字中穿插下划线提升可读性：1_000_000_000</div><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-0c7a19f6a54b48638cf51878afdd6c72" data-id="0c7a19f6a54b48638cf51878afdd6c72"><span><div id="0c7a19f6a54b48638cf51878afdd6c72" class="notion-header-anchor"></div><a class="notion-hash-link" href="#0c7a19f6a54b48638cf51878afdd6c72" title="3.2 #18 Neglecting integer overflows（忽略整数溢出）"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">3.2 #18 Neglecting integer overflows（忽略整数溢出）</span></span></h4><div class="notion-text notion-block-d0c9d9f148c74d4e938b793ec0712844">GO有专门处理大数的包：math/big</div><pre class="notion-code"><div class="notion-code-copy"><div class="notion-code-copy-button"><svg fill="currentColor" viewBox="0 0 16 16" width="1em" version="1.1"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg></div></div><code class="language-go">// 当对整数进行+1操作时，对溢出判断
func Inc32(counter int32) int32 {
	if counter == math.MaxInt32 {
		panic(&quot;int32 overflow&quot;)
	}
	return counter + 1
}

func IncInt(counter int) int {
	if counter == math.MaxInt {
		panic(&quot;int overflow&quot;)
	}
	return counter + 1
}

func IncUint(counter uint) uint {
	if counter == math.MaxUint {
		panic(&quot;uint overflow&quot;)
	}
	return counter + 1
}

// 当两个整数相加时，提前做溢出判断
func AddInt(a, b int) int {
	if a &gt; math.MaxInt-b {
		panic(&quot;int overflow&quot;)
	}

	return a + b
}

// 两数相乘时提前做溢出判断
func MultiplyInt(a, b int) int {
	if a == 0 || b == 0 {
		return 0
	}

	result := a * b
	if a == 1 || b == 1 {
		return result
	}
	if a == math.MinInt || b == math.MinInt {
		panic(&quot;integer overflow&quot;)
	}
	if result/b != a {
		panic(&quot;integer overflow&quot;)
	}
	return result
}</code></pre><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-617d6e24d3a245d2a02e8d93a962f37e" data-id="617d6e24d3a245d2a02e8d93a962f37e"><span><div id="617d6e24d3a245d2a02e8d93a962f37e" class="notion-header-anchor"></div><a class="notion-hash-link" href="#617d6e24d3a245d2a02e8d93a962f37e" title="3.3 #19: Not understanding floating points（对浮点数理解欠缺）"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">3.3 #19: Not understanding floating points（对浮点数理解欠缺）</span></span></h4><div class="notion-text notion-block-c02382ca3519447b9c3561ed422c2b43">浮点数的表示方式，可以阅读下面的参考文章：</div><div class="notion-row"><a target="_blank" rel="noopener noreferrer" class="notion-bookmark notion-block-7395c8c03d1d4449a45c301f9f3e47f2" href="https://zhuanlan.zhihu.com/p/144697348"><div><div class="notion-bookmark-title">浮点数的二进制表示(IEEE 754标准)</div><div class="notion-bookmark-description">浮点数是我们在程序里常用的数据类型，它在内存中到底是怎么样的形式存在，是我了解之前是觉得好神奇，以此记录，作为学习笔记并分享。 现代计算机中，一般都以IEEE 754标准存储浮点数，这个标准的在内存中存储的…</div><div class="notion-bookmark-link"><div class="notion-bookmark-link-icon"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%272000%27%20height=%272000%27/%3e"/></span><img alt="浮点数的二进制表示(IEEE 754标准)" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;background-size:cover;background-position:0% 0%;filter:blur(20px);background-image:url(&quot;data:image/webp;base64,UklGRrYAAABXRUJQVlA4WAoAAAAQAAAADwAADwAAQUxQSDgAAAARD9D/iAiwqa29yZe2RlM8ZOpZYwCUsLaJtXcc4AQT6Ijof2j0JOARpfxMNeSk/q5WBwq8WJExAlZQOCBYAAAAMAIAnQEqEAAQAAVAfCWwAnS6ABCSD7Rp2IAA/Rq9d/8IprfV7WTm9aip9ilUb3xYIZJjsRUozTXvOQ8J1LIspl6/6D5nunMzyQ0H8jfeZ9M97aFyegAAAA==&quot;)"/><noscript><img alt="浮点数的二进制表示(IEEE 754标准)" src="https://www.notion.so/image/https%3A%2F%2Fstatic.zhihu.com%2Fheifetz%2Fassets%2Fapple-touch-icon-152.81060cab.png?table=block&amp;id=7395c8c0-3d1d-4449-a45c-301f9f3e47f2&amp;cache=v2" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></span></div><div class="notion-bookmark-link-text">https://zhuanlan.zhihu.com/p/144697348</div></div></div></a></div><ol start="1" class="notion-list notion-list-numbered notion-block-17d0eed278da48c69fe4877c0bb97c7e"><li>float32和float64存储精度有限，可能会导致存储出现偏差。因此也会对使用方式产生影响：首先就是对2个浮点数进行比较大小，<b>因此对2个浮点数对比的时候，我们保证误差在可接受范围内</b>即可：</li></ol><a target="_blank" rel="noopener noreferrer" href="https://github.com/stretchr/testify" class="notion-external notion-external-block notion-row notion-block-384369522d354bf2afefae872fc393b6"><div class="notion-external-image"><svg viewBox="0 0 260 260"><g><path d="M128.00106,0 C57.3172926,0 0,57.3066942 0,128.00106 C0,184.555281 36.6761997,232.535542 87.534937,249.460899 C93.9320223,250.645779 96.280588,246.684165 96.280588,243.303333 C96.280588,240.251045 96.1618878,230.167899 96.106777,219.472176 C60.4967585,227.215235 52.9826207,204.369712 52.9826207,204.369712 C47.1599584,189.574598 38.770408,185.640538 38.770408,185.640538 C27.1568785,177.696113 39.6458206,177.859325 39.6458206,177.859325 C52.4993419,178.762293 59.267365,191.04987 59.267365,191.04987 C70.6837675,210.618423 89.2115753,204.961093 96.5158685,201.690482 C97.6647155,193.417512 100.981959,187.77078 104.642583,184.574357 C76.211799,181.33766 46.324819,170.362144 46.324819,121.315702 C46.324819,107.340889 51.3250588,95.9223682 59.5132437,86.9583937 C58.1842268,83.7344152 53.8029229,70.715562 60.7532354,53.0843636 C60.7532354,53.0843636 71.5019501,49.6441813 95.9626412,66.2049595 C106.172967,63.368876 117.123047,61.9465949 128.00106,61.8978432 C138.879073,61.9465949 149.837632,63.368876 160.067033,66.2049595 C184.49805,49.6441813 195.231926,53.0843636 195.231926,53.0843636 C202.199197,70.715562 197.815773,83.7344152 196.486756,86.9583937 C204.694018,95.9223682 209.660343,107.340889 209.660343,121.315702 C209.660343,170.478725 179.716133,181.303747 151.213281,184.472614 C155.80443,188.444828 159.895342,196.234518 159.895342,208.176593 C159.895342,225.303317 159.746968,239.087361 159.746968,243.303333 C159.746968,246.709601 162.05102,250.70089 168.53925,249.443941 C219.370432,232.499507 256,184.536204 256,128.00106 C256,57.3066942 198.691187,0 128.00106,0 Z M47.9405593,182.340212 C47.6586465,182.976105 46.6581745,183.166873 45.7467277,182.730227 C44.8183235,182.312656 44.2968914,181.445722 44.5978808,180.80771 C44.8734344,180.152739 45.876026,179.97045 46.8023103,180.409216 C47.7328342,180.826786 48.2627451,181.702199 47.9405593,182.340212 Z M54.2367892,187.958254 C53.6263318,188.524199 52.4329723,188.261363 51.6232682,187.366874 C50.7860088,186.474504 50.6291553,185.281144 51.2480912,184.70672 C51.8776254,184.140775 53.0349512,184.405731 53.8743302,185.298101 C54.7115892,186.201069 54.8748019,187.38595 54.2367892,187.958254 Z M58.5562413,195.146347 C57.7719732,195.691096 56.4895886,195.180261 55.6968417,194.042013 C54.9125733,192.903764 54.9125733,191.538713 55.713799,190.991845 C56.5086651,190.444977 57.7719732,190.936735 58.5753181,192.066505 C59.3574669,193.22383 59.3574669,194.58888 58.5562413,195.146347 Z M65.8613592,203.471174 C65.1597571,204.244846 63.6654083,204.03712 62.5716717,202.981538 C61.4524999,201.94927 61.1409122,200.484596 61.8446341,199.710926 C62.5547146,198.935137 64.0575422,199.15346 65.1597571,200.200564 C66.2704506,201.230712 66.6095936,202.705984 65.8613592,203.471174 Z M75.3025151,206.281542 C74.9930474,207.284134 73.553809,207.739857 72.1039724,207.313809 C70.6562556,206.875043 69.7087748,205.700761 70.0012857,204.687571 C70.302275,203.678621 71.7478721,203.20382 73.2083069,203.659543 C74.6539041,204.09619 75.6035048,205.261994 75.3025151,206.281542 Z M86.046947,207.473627 C86.0829806,208.529209 84.8535871,209.404622 83.3316829,209.4237 C81.8013,209.457614 80.563428,208.603398 80.5464708,207.564772 C80.5464708,206.498591 81.7483088,205.631657 83.2786917,205.606221 C84.8005962,205.576546 86.046947,206.424403 86.046947,207.473627 Z M96.6021471,207.069023 C96.7844366,208.099171 95.7267341,209.156872 94.215428,209.438785 C92.7295577,209.710099 91.3539086,209.074206 91.1652603,208.052538 C90.9808515,206.996955 92.0576306,205.939253 93.5413813,205.66582 C95.054807,205.402984 96.4092596,206.021919 96.6021471,207.069023 Z" fill="#161614"></path></g></svg></div><div class="notion-external-description"><div class="notion-external-title">testify</div><div class="notion-external-subtitle"><span>stretchr</span><span> • </span><span>Updated <!-- -->Feb 27, 2023</span></div></div></a><div class="notion-text notion-block-1954be76b44149678ae864ace383fb24">仓库 <b>testify</b> 就提供了 <b>InDelta</b> 函数来断言两个值的误差在可接受范围内，因为不同机器的FPU(浮点单元)不一致，导致浮点数计算的精度也不一样，使用 InDelta 来对比2个数值也适用于使用不同机器运行的场景。</div><ol start="1" class="notion-list notion-list-numbered notion-block-f556ec3c6418424ca51c1ee5c2484352"><li>浮点运算的误差会随着执行次数累积：f2和f1的执行顺序不一致，导致f2的误差更低</li></ol><pre class="notion-code"><div class="notion-code-copy"><div class="notion-code-copy-button"><svg fill="currentColor" viewBox="0 0 16 16" width="1em" version="1.1"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg></div></div><code class="language-go">func f1(n int) float64 {
	result := 10_000.
	for i := 0; i &lt; n; i++ {
		result += 1.0001
	}
	return result
}

func f2(n int) float64 {
	result := 0.
	for i := 0; i &lt; n; i++ {
		result += 1.0001
	}
	return result + 10_000.
}</code></pre><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-9a3209f0b2934c5399e82a05e4c51591"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%272000%27%20height=%27464%27/%3e"/></span><img alt="notion image" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover;background-size:cover;background-position:0% 0%;filter:blur(20px);background-image:url(&quot;data:image/webp;base64,UklGRiwAAABXRUJQVlA4ICAAAACQAQCdASoQAAQABUB8JZwAAudVMbgA/uDZOq2MJ5YAAA==&quot;)"/><noscript><img alt="notion image" src="https://www.notion.so/image/http%3A%2F%2Ftva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbg0ncuieej316m09wgo9.jpg?table=block&amp;id=9a3209f0-b293-4c53-99e8-2a05e4c51591&amp;cache=v2" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover" loading="lazy"/></noscript></span></div></figure><div class="notion-text notion-block-736ceb664f7f4f61b5d7b0501df5bedf"><b>注意，浮点计算的顺序会影响结果的准确性</b>。当执行加减法链时，我们应该将操作分组，以添加或减去具有相似数量级的值，然后再添加或减去那些大小不接近的值。因为f2在最后加了10000，最终它产生的结果比f1更准确</div><pre class="notion-code"><div class="notion-code-copy"><div class="notion-code-copy-button"><svg fill="currentColor" viewBox="0 0 16 16" width="1em" version="1.1"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg></div></div><code class="language-go">a := 100000.001
b := 1.0001
c := 1.0002

fmt.Println(a * (b + c))
// 方式2精度更高，优先计算乘除，但是执行效率低
fmt.Println(a*b + a*c)

// output
// 200030.00200030004
// 200030.0020003</code></pre><div class="notion-text notion-block-e977b3337ac54566b5b4da25ca627f8c">在进行浮点数操作的时候，记住下面几点：</div><ul class="notion-list notion-list-disc notion-block-73e7c28844ad40e7b912686a5197f9df"><li><b>浮点数比较大小的时候，检查2数误差在可接受范围内即可</b></li></ul><ul class="notion-list notion-list-disc notion-block-c2be26164eee474383d9a288f2f52672"><li><b>为了提升结果的精度，在进行加减操作时，把具有相似数量级的数进行分组操作</b></li></ul><ul class="notion-list notion-list-disc notion-block-e5be9e62168a499682f90dedb586db6e"><li><b>为了提高准确性，如果一系列操作需要加法、减法、乘法或除法，请先执行乘法和除法操作</b></li></ul><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-e059e418961648c8950d8a4670a838b2" data-id="e059e418961648c8950d8a4670a838b2"><span><div id="e059e418961648c8950d8a4670a838b2" class="notion-header-anchor"></div><a class="notion-hash-link" href="#e059e418961648c8950d8a4670a838b2" title="3.4 #20: Not understanding slice length and capacity（不理解切片len和cap）"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">3.4 #20: Not understanding slice length and <b>capacity</b>（不理解切片len和cap）</span></span></h4><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-93c758f02d9d47739d924a89f61d1563"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:528px;max-width:100%;flex-direction:column"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%272000%27%20height=%271375%27/%3e"/></span><img alt="notion image" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover;background-size:cover;background-position:0% 0%;filter:blur(20px);background-image:url(&quot;data:image/webp;base64,UklGRkAAAABXRUJQVlA4IDQAAACwAQCdASoQAAsABUB8JaQAAxf3/5RAAP7rJqpLrgMztl46zhkQWsRX581QCC/9FnPAlfAA&quot;)"/><noscript><img alt="notion image" src="https://www.notion.so/image/http%3A%2F%2Ftva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbg1o2dzpqj318y0uwq8j.jpg?table=block&amp;id=93c758f0-2d9d-4773-9d92-4a89f61d1563&amp;cache=v2" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover" loading="lazy"/></noscript></span></div></figure><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-ca26df1aa2d84b19bb42a06295625c9a"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%272000%27%20height=%271022%27/%3e"/></span><img alt="notion image" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover;background-size:cover;background-position:0% 0%;filter:blur(20px);background-image:url(&quot;data:image/webp;base64,UklGRkIAAABXRUJQVlA4IDYAAADQAQCdASoQAAgABUB8JaQAAl1lPZqkAAD+6xzBdAp11qvvvD6X1yYkfv1ax7Xhkh+A0QcAAAA=&quot;)"/><noscript><img alt="notion image" src="https://www.notion.so/image/http%3A%2F%2Ftva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbg25iwbs4j31si0wyk1o.jpg?table=block&amp;id=ca26df1a-a2d8-4b19-bb42-a06295625c9a&amp;cache=v2" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover" loading="lazy"/></noscript></span></div></figure><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-352a530d4326416690afe968cb0e2a09" data-id="352a530d4326416690afe968cb0e2a09"><span><div id="352a530d4326416690afe968cb0e2a09" class="notion-header-anchor"></div><a class="notion-hash-link" href="#352a530d4326416690afe968cb0e2a09" title="3.5 #21: Inefficient slice initialization（低效的切片初始化）"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">3.5 #21: Inefficient slice initialization（低效的切片初始化）</span></span></h4><pre class="notion-code"><div class="notion-code-copy"><div class="notion-code-copy-button"><svg fill="currentColor" viewBox="0 0 16 16" width="1em" version="1.1"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg></div></div><code class="language-go">func convertEmptySlice(foos []Foo) []Bar {
	bars := make([]Bar, 0)
	// 如果foos过长，导致bars频繁申请内存，拷贝数组对执行效率和GC产生影响
	for _, foo := range foos {
		bars = append(bars, fooToBar(foo))
	}
	return bars
}

func convertGivenCapacity(foos []Foo) []Bar {
	n := len(foos)
  // 预先指定 cap
	bars := make([]Bar, 0, n)
	
	for _, foo := range foos {
		bars = append(bars, fooToBar(foo))
	}
	return bars
}

func convertGivenLength(foos []Foo) []Bar {
	n := len(foos)
	// 预先指定len，通过下标赋值，比使用append内置函数效率更高一些
	bars := make([]Bar, n)

	for i, foo := range foos {
		bars[i] = fooToBar(foo)
	}
	return bars
}</code></pre><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-28c39cfd83ed428a9468717ac1296f10"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%272000%27%20height=%27406%27/%3e"/></span><img alt="notion image" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover;background-size:cover;background-position:0% 0%;filter:blur(20px);background-image:url(&quot;data:image/webp;base64,UklGRjAAAABXRUJQVlA4ICQAAAAwAQCdASoQAAMABUB8JaQAA3AA/vAO4dy6C5I4y/0LQ9epOAA=&quot;)"/><noscript><img alt="notion image" src="https://www.notion.so/image/http%3A%2F%2Ftva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbg2fo3kslj31c609sdiq.jpg?table=block&amp;id=28c39cfd-83ed-428a-9468-717ac1296f10&amp;cache=v2" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover" loading="lazy"/></noscript></span></div></figure><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-75ea9e9acc0b4aab9054b0152cb9b967" data-id="75ea9e9acc0b4aab9054b0152cb9b967"><span><div id="75ea9e9acc0b4aab9054b0152cb9b967" class="notion-header-anchor"></div><a class="notion-hash-link" href="#75ea9e9acc0b4aab9054b0152cb9b967" title="3.6 #22: Being confused about nil vs. empty slices（区分nil和empty切片）"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">3.6 #22: Being confused about nil vs. empty slices（区分nil和empty切片）</span></span></h4><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-5cb4a6bbac474c9cb9ce408efceef4e8"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%272000%27%20height=%271004%27/%3e"/></span><img alt="notion image" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover;background-size:cover;background-position:0% 0%;filter:blur(20px);background-image:url(&quot;data:image/webp;base64,UklGRjQAAABXRUJQVlA4ICgAAACwAQCdASoQAAgABUB8JYwAAtq5Z/gAAP7vw5B6y6j/niKXLEuT5wAA&quot;)"/><noscript><img alt="notion image" src="https://www.notion.so/image/http%3A%2F%2Ftva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbg2x05784j311m0iw43u.jpg?table=block&amp;id=5cb4a6bb-ac47-4c9c-b9ce-408efceef4e8&amp;cache=v2" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover" loading="lazy"/></noscript></span></div></figure><div class="notion-text notion-block-cd4f2b90c3914808a9dd94c686cd705d"><b>nil 切片和 empty 切片的区别是 nil切片不占用空间，可以依次来判断是否使用nil 切片, 在json解析场景下，nil和empty的切片也不同</b></div><pre class="notion-code"><div class="notion-code-copy"><div class="notion-code-copy-button"><svg fill="currentColor" viewBox="0 0 16 16" width="1em" version="1.1"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg></div></div><code class="language-go">func main() {
	var s1 []float32
	customer1 := customer{
		ID:         &quot;foo&quot;,
		Operations: s1,
	}
	b, _ := json.Marshal(customer1)
	// {&quot;ID&quot;:&quot;foo&quot;,&quot;Operations&quot;:null} nil 的切片被解析为 null
	fmt.Println(string(b))

	s2 := make([]float32, 0)
	customer2 := customer{
		ID:         &quot;bar&quot;,
		Operations: s2,
	}
	b, _ = json.Marshal(customer2)
  // {&quot;ID&quot;:&quot;bar&quot;,&quot;Operations&quot;:[]} empty 的切片被解析为 []
	fmt.Println(string(b))
}

type customer struct {
	ID         string
	Operations []float32
}</code></pre><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-a73519eb2d01415b94c6470feee97f66" data-id="a73519eb2d01415b94c6470feee97f66"><span><div id="a73519eb2d01415b94c6470feee97f66" class="notion-header-anchor"></div><a class="notion-hash-link" href="#a73519eb2d01415b94c6470feee97f66" title="3.7 #23: Not properly checking if a slice is empty（判断切片为空）"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">3.7 #23: Not properly checking if a slice is empty（判断切片为空）</span></span></h4><pre class="notion-code"><div class="notion-code-copy"><div class="notion-code-copy-button"><svg fill="currentColor" viewBox="0 0 16 16" width="1em" version="1.1"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg></div></div><code class="language-go">len(s) == 0</code></pre><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-c12f5559af37470ebf1c7975658e8fda" data-id="c12f5559af37470ebf1c7975658e8fda"><span><div id="c12f5559af37470ebf1c7975658e8fda" class="notion-header-anchor"></div><a class="notion-hash-link" href="#c12f5559af37470ebf1c7975658e8fda" title="3.8 #24: Not making slice copies correctly（没有正确的复制切片）"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">3.8 #24: Not making slice copies correctly（没有正确的复制切片）</span></span></h4><div class="notion-text notion-block-75b8938a8cd244f995b3c5cf431d2b13">copy函数会复制元素的个数为2个切片长度最小值</div><pre class="notion-code"><div class="notion-code-copy"><div class="notion-code-copy-button"><svg fill="currentColor" viewBox="0 0 16 16" width="1em" version="1.1"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg></div></div><code class="language-go">func bad() {
	src := []int{0, 1, 2}
	var dst []int
	copy(dst, src)
	fmt.Println(dst)

	_ = src
	_ = dst
}

func correct() {
	src := []int{0, 1, 2}
	dst := make([]int, len(src))
	copy(dst, src)
	fmt.Println(dst)

	_ = src
	_ = dst
}</code></pre><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-ea0f537e7bae4efb9231bc9a8da00ff5" data-id="ea0f537e7bae4efb9231bc9a8da00ff5"><span><div id="ea0f537e7bae4efb9231bc9a8da00ff5" class="notion-header-anchor"></div><a class="notion-hash-link" href="#ea0f537e7bae4efb9231bc9a8da00ff5" title="3.9 #25: Unexpected side effects using slice append（使用切片append时产生的副作用-s[low:high:max]用法）"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">3.9 #25: Unexpected side effects using slice append（使用切片append时产生的副作用-s[low:high:max]用法）</span></span></h4><div class="notion-text notion-block-768162d1b71d417da694742245852ba6">s2和s1共享底层数组，当s2的cap大于len，对s2 append会影响s1的结果</div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-1103f1d0cde44546a6f7d011e2a8f05b"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%272000%27%20height=%27778%27/%3e"/></span><img alt="notion image" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover;background-size:cover;background-position:0% 0%;filter:blur(20px);background-image:url(&quot;data:image/webp;base64,UklGRiwAAABXRUJQVlA4ICAAAAAwAQCdASoQAAYABUB8JZQAA3AA/vBjpypP5YEtAFLAAA==&quot;)"/><noscript><img alt="notion image" src="https://www.notion.so/image/http%3A%2F%2Ftva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbg51twz57j314k0fsadn.jpg?table=block&amp;id=1103f1d0-cde4-4546-a6f7-d011e2a8f05b&amp;cache=v2" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover" loading="lazy"/></noscript></span></div></figure><pre class="notion-code"><div class="notion-code-copy"><div class="notion-code-copy-button"><svg fill="currentColor" viewBox="0 0 16 16" width="1em" version="1.1"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg></div></div><code class="language-go">// 当调用f函数的时候，对s入参做的修改都会反应到上层函数中的s
func listing1() {
	s := []int{1, 2, 3}

	f(s[:2])
	fmt.Println(s)
}

// 解决方案一：对s进行深拷贝
func listing2() {
	s := []int{1, 2, 3}
	sCopy := make([]int, 2)
	copy(sCopy, s)

	f(sCopy)
	result := append(sCopy, s[2])
	fmt.Println(result)
}

// 解决方案二：使用 full slice expression: s[low:high:max]，这样就限制了切片的cap
// cap = max-low = 2-0 = 2
// 这样f函数对切片进行append操作就不用影响其他共享底层存储的切片了
func listing3() {
	s := []int{1, 2, 3}
	f(s[:2:2])
	fmt.Println(s)
}

func f(s []int) {
	_ = append(s, 10)
}</code></pre><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-e2ff524807c24bc3aaa4be0a7662234a" data-id="e2ff524807c24bc3aaa4be0a7662234a"><span><div id="e2ff524807c24bc3aaa4be0a7662234a" class="notion-header-anchor"></div><a class="notion-hash-link" href="#e2ff524807c24bc3aaa4be0a7662234a" title="3.10 #26: Slices and memory leaks（切片的内存泄露）"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">3.10 #26: Slices and memory leaks（切片的内存泄露）</span></span></h4><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-57ce84a66a8d499493978909a017c078"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column;height:100%"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%271220%27%20height=%27620%27/%3e"/></span><img alt="notion image" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover;background-size:cover;background-position:0% 0%;filter:blur(20px);background-image:url(&quot;data:image/webp;base64,UklGRkgAAABXRUJQVlA4IDwAAADwAQCdASoQAAgABUB8JaAC7AEN+rDzTqAA/u/D9G3aZXpwnPcss23/Np9ZkAHZutvZqSIptmFejOAAAAA=&quot;)"/><noscript><img alt="notion image" src="https://s3.us-west-2.amazonaws.com/secure.notion-static.com/610d8fa8-5bbe-43c4-a6c5-ed72b8b90fe1/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&amp;X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&amp;X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20230227%2Fus-west-2%2Fs3%2Faws4_request&amp;X-Amz-Date=20230227T152323Z&amp;X-Amz-Expires=86400&amp;X-Amz-Signature=6f720f82e57d23a2b7674d0fd9dc812e09d813c7c671bbc6c3e263f4c6549bee&amp;X-Amz-SignedHeaders=host&amp;x-id=GetObject" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover" loading="lazy"/></noscript></span></div></figure><pre class="notion-code"><div class="notion-code-copy"><div class="notion-code-copy-button"><svg fill="currentColor" viewBox="0 0 16 16" width="1em" version="1.1"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg></div></div><code class="language-go">func main() {
	foos := make([]Foo, 1_000)
	printAlloc()

	for i := 0; i &lt; len(foos); i++ {
		foos[i] = Foo{
			v: make([]byte, 1024*1024),
		}
	}
	printAlloc()
	
  // 和上面类似不会回收剩下998个元素
	two := keepFirstTwoElementsOnly(foos)
	runtime.GC()
	printAlloc()
	runtime.KeepAlive(two)
}

func keepFirstTwoElementsOnly(foos []Foo) []Foo {
	return foos[:2]
}

// keepFirstTwoElementsOnlyCopy 和 keepFirstTwoElementsOnlyMarkNil
// 都能保证剩下的资源被回收，但是如果想留下的元素不是2，我们想保留500个元素，
// 使用 keepFirstTwoElementsOnlyMarkNil 会有更高的效率，不用额外拷贝资源
func keepFirstTwoElementsOnlyCopy(foos []Foo) []Foo {
	res := make([]Foo, 2)
	copy(res, foos)
	return res
}

// keepFirstTwoElementsOnlyMarkNil 给元素中的指针成员置为nil，能够让GC自动回收
func keepFirstTwoElementsOnlyMarkNil(foos []Foo) []Foo {
	for i := 2; i &lt; len(foos); i++ {
		foos[i].v = nil
	}
	return foos[:2]
}

func printAlloc() {
	var m runtime.MemStats
	runtime.ReadMemStats(&amp;m)
	fmt.Printf(&quot;%d KB\n&quot;, m.Alloc/1024)
}</code></pre><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-769b6782f5284aeea4ced4db1a34ef90" data-id="769b6782f5284aeea4ced4db1a34ef90"><span><div id="769b6782f5284aeea4ced4db1a34ef90" class="notion-header-anchor"></div><a class="notion-hash-link" href="#769b6782f5284aeea4ced4db1a34ef90" title="3.11 #27: Inefficient map initialization（低效的map初始化）"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">3.11 #27: Inefficient map initialization（低效的map初始化）</span></span></h4><div class="notion-row"><a target="_blank" rel="noopener noreferrer" class="notion-bookmark notion-block-faaf32bb82944233b9db5026e7696a98" href="https://golang.design/go-questions/map/principal/"><div><div class="notion-bookmark-title">map 的实现原理</div><div class="notion-bookmark-description">什么是 map #  维基百科里这样定义 map：  In computer science, an associative array, map, symbol table, or dictionary is an abstract data type composed of a collection of (key, value) pairs, such that each possible key appears at most once in the collection.  简单说明一下：在计算机科学里，被称为相关数组、map、符号表或者字典，是由一组 &lt;key, value&gt; 对组成的抽象数据结构，，并且同一个 key 只会出现一次。 有两个关键点：map 是由 key-value 对组成的；key 只会出现一次。 和 map 相关的操作主要是：  增加一个 k-v 对 —— Add or insert； 删除一个 k-v 对 —— Remove or delete； 修改某个 k 对应的 v —— Reassign； 查询某个 k 对应的 v —— Lookup；  简单说就是最基本的 增删查改。</div><div class="notion-bookmark-link"><div class="notion-bookmark-link-icon"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%272000%27%20height=%272000%27/%3e"/></span><img alt="map 的实现原理" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;background-size:cover;background-position:0% 0%;filter:blur(20px);background-image:url(&quot;data:image/webp;base64,UklGRnwAAABXRUJQVlA4WAoAAAAQAAAADwAADwAAQUxQSD0AAAARL0AWYJocyO4IEugqIgK/FAohSXLmEE5hFR4hGPz6w3w2iOj/BPB/2HYPtOSwLIPa5mAvSdOwHUBmJj8BAFZQOCAYAAAAMAEAnQEqEAAQAAVAfCWkAANwAP7w5sAA&quot;)"/><noscript><img alt="map 的实现原理" src="https://www.notion.so/image/https%3A%2F%2Fgolang.design%2Fgo-questions%2Ffavicon.png?table=block&amp;id=faaf32bb-8294-4233-b9db-5026e7696a98&amp;cache=v2" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></span></div><div class="notion-bookmark-link-text">https://golang.design/go-questions/map/principal/</div></div></div></a></div><div class="notion-callout notion-gray_background_co notion-block-150426989bdb44b5b6e1c89b1df18f1b"><div class="notion-page-icon-inline notion-page-icon-span"><span class="notion-page-icon" role="img" aria-label="💡">💡</span></div><div class="notion-callout-text"><code class="notion-inline-code">bmap</code>就是我们常说的“桶”，桶里面会最多装 8 个 key，这些 key 之所以会落入同一个桶，是因为它们经过哈希计算后，哈希结果是“一类”的。在桶内，又会根据 key 计算出来的 hash 值的高 8 位来决定 key 到底落入桶内的哪个位置（一个桶内最多有8个位置）</div></div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-62e7b5ffdb7d4e99b559ed5fdf209377"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%272000%27%20height=%271358%27/%3e"/></span><img alt="notion image" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover;background-size:cover;background-position:0% 0%;filter:blur(20px);background-image:url(&quot;data:image/webp;base64,UklGRj4AAABXRUJQVlA4IDIAAABQAQCdASoQAAsABUB8JSvPgDEAAP7wM31S7KlYK+9/0EmNLF5EZzJbgq4dhszQxnfAAA==&quot;)"/><noscript><img alt="notion image" src="https://www.notion.so/image/http%3A%2F%2Ftva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbgllsfsmhj315k0s847g.jpg?table=block&amp;id=62e7b5ff-db7d-4e99-b559-ed5fdf209377&amp;cache=v2" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover" loading="lazy"/></noscript></span></div></figure><div class="notion-text notion-block-5302d8007df6453d9329206eff1f7eb3">触发 map 扩容的时机：在向 map 插入新 key 的时候，会进行条件检测，符合下面这 2 个条件，就会触发扩容：</div><ol start="1" class="notion-list notion-list-numbered notion-block-4e710b133da94ad2a20819734e7a3dc2"><li>装载因子超过阈值，源码里定义的阈值是 6.5。(<code class="notion-inline-code">loadFactor := count / (2^B)</code>) count 就是 map 的元素个数，2^B 表示 bucket 数量。</li></ol><ol start="2" class="notion-list notion-list-numbered notion-block-86548953b93e423f8e3ba7277e4a75fd"><li>overflow 的 bucket 数量过多：当 B 小于 15，也就是 bucket 总数 2^B 小于 2^15 时，如果 overflow 的 bucket 数量超过 2^B；当 B &gt;= 15，也就是 bucket 总数 2^B 大于等于 2^15，如果 overflow 的 bucket 数量超过 2^15。</li></ol><div class="notion-text notion-block-7148b04fa2a24c42bc953bcc235a9d66"><b>因此，就像切片一样，如果我们预先知道map将包含的元素数量，我们应该通过提供初始大小来创建它。这样做可以避免潜在的map增长，这是相当繁重的计算，因为它需要重新分配足够的空间并重新平衡所有元素。</b></div><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-dbd9077de8df4546abacad3aa22c6477" data-id="dbd9077de8df4546abacad3aa22c6477"><span><div id="dbd9077de8df4546abacad3aa22c6477" class="notion-header-anchor"></div><a class="notion-hash-link" href="#dbd9077de8df4546abacad3aa22c6477" title="3.12 #28: Maps and memory leaks（map类型的内存泄露，map中的值建议使用指针类型）"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">3.12 #28: Maps and memory leaks（map类型的内存泄露，map中的值建议使用指针类型）</span></span></h4><div class="notion-row"><a target="_blank" rel="noopener noreferrer" class="notion-bookmark notion-block-d0fe65f331b547d78f6f0678b9c1242b" href="https://mp.weixin.qq.com/s/Slvgl3KZax2jsy2xGDdFKw"><div><div class="notion-bookmark-title">Go map 如何缩容？</div><div class="notion-bookmark-description">快速了解 map 缩容机制</div><div class="notion-bookmark-link"><div class="notion-bookmark-link-icon"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%2732%27%20height=%2732%27/%3e"/></span><img alt="Go map 如何缩容？" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;background-size:cover;background-position:0% 0%;filter:blur(20px);background-image:url(&quot;data:image/webp;base64,UklGRqIAAABXRUJQVlA4WAoAAAAQAAAADwAADwAAQUxQSFYAAAARL6CobSM2VEDzfSMiAuw8wSqyrTYXFKT+dwNABFQBlONfTIqGiP5PgH66cs+SdoBOFa8mEuCkz9i8DWyFACc3n+Xtzm9bfOuHN6v0WKV4QzCSM3Wtv1ZQOCAmAAAAkAEAnQEqEAAQAAVAfCWgAnS6AAOYAP7E7+vgCn7P+N5vNasQAAA=&quot;)"/><noscript><img alt="Go map 如何缩容？" src="https://www.notion.so/image/https%3A%2F%2Fres.wx.qq.com%2Fa%2Fwx_fed%2Fassets%2Fres%2FNTI4MWU5.ico?table=block&amp;id=d0fe65f3-31b5-47d7-8f6f-0678b9c1242b&amp;cache=v2" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" loading="lazy"/></noscript></span></div><div class="notion-bookmark-link-text">https://mp.weixin.qq.com/s/Slvgl3KZax2jsy2xGDdFKw</div></div></div><div class="notion-bookmark-image"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%272000%27%20height=%27850%27/%3e"/></span><img alt="Go map 如何缩容？" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover;background-size:cover;background-position:0% 0%;filter:blur(20px);background-image:url(&quot;data:image/webp;base64,UklGRkoAAABXRUJQVlA4ID4AAADwAQCdASoQAAcABUB8JYgCdH8AEaUqS0wA/okWhEisfNZ+c7nyMCDmzuSBWKc0tiVAUIz1fsXY9IlxqAAAAA==&quot;)"/><noscript><img alt="Go map 如何缩容？" src="https://www.notion.so/image/http%3A%2F%2Fmmbiz.qpic.cn%2Fmmbiz_jpg%2FKVl0giak5ib4hc7SL6H3h78GQv9jTbOnUasjE3al0ereICricRTh8dPHDS7QWMbVl27RgiajGRpUo2A25WJ0dOAGCg%2F0%3Fwx_fmt%3Djpeg?table=block&amp;id=d0fe65f3-31b5-47d7-8f6f-0678b9c1242b&amp;cache=v2" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover" loading="lazy"/></noscript></span></div></a></div><div class="notion-callout notion-gray_background_co notion-block-a0a71e190be747f79ca0c0402acecce9"><div class="notion-page-icon-inline notion-page-icon-span"><span class="notion-page-icon" role="img" aria-label="💡">💡</span></div><div class="notion-callout-text">GO的缩容操作就是不增长内存，并没有实际上的缩容，所以创建一个较大的map之后，需要自己手动处理缩容的问题</div></div><pre class="notion-code"><div class="notion-code-copy"><div class="notion-code-copy-button"><svg fill="currentColor" viewBox="0 0 16 16" width="1em" version="1.1"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg></div></div><code class="language-go">func main() {
	// Init
	n := 1_000_000
	m := make(map[int][128]byte)
	printAlloc()

	// Add elements
	for i := 0; i &lt; n; i++ {
		m[i] = randBytes()
	}
	printAlloc()

	// Remove elements
	for i := 0; i &lt; n; i++ {
		delete(m, i)
	}

	// End
	runtime.GC()
	printAlloc()
	runtime.KeepAlive(m)
}
// output
// 0 MB
// 461 MB
// 293 MB

func randBytes() [128]byte {
	return [128]byte{}
}

func printAlloc() {
	var m runtime.MemStats
	runtime.ReadMemStats(&amp;m)
	fmt.Printf(&quot;%d MB\n&quot;, m.Alloc/1024/1024)
}</code></pre><div class="notion-text notion-block-81de24b25e9a4f0eb4606d3ff759d0ff">事例代码创建1000,000个元素的map后调用delete方法删除了每个元素，但是内存占用并没有明显的降低，因为GO的map没有真正意义上的缩容，删除了所有元素之后，降低的内存应该是bmap中overflow指向的bucket，map[int][128]byte中的数组[128]byte空值就占用128byte。</div><ul class="notion-list notion-list-disc notion-block-a86b4b41c58340b58ec1bc6a437b07d8"><li>解决方案一是不断的拷贝新的map，但是在下个gc周期前，内存会翻倍；</li></ul><ul class="notion-list notion-list-disc notion-block-0f97c85b92f34ab5a412293e12d70823"><li>解决方案二<b>修改map中value的类型为指针，减少value空值占用的空间</b>；</li></ul><div class="notion-text notion-block-96e7f28b4eee4dc7b30c60b7b18760d9">对于方案二,可以看到扩缩容场景的内存占用更小：</div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-1c046974a92a4b97b1b98d3fd57a8160"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%272000%27%20height=%27476%27/%3e"/></span><img alt="notion image" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover;background-size:cover;background-position:0% 0%;filter:blur(20px);background-image:url(&quot;data:image/webp;base64,UklGRi4AAABXRUJQVlA4ICIAAACQAQCdASoQAAQABUB8JZwAAveS6/AA/tUTVarna0AAAAAA&quot;)"/><noscript><img alt="notion image" src="https://www.notion.so/image/http%3A%2F%2Ftva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbgnbhers4j316y0a8q5j.jpg?table=block&amp;id=1c046974-a92a-4b97-b1b9-8d3fd57a8160&amp;cache=v2" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover" loading="lazy"/></noscript></span></div></figure><div class="notion-callout notion-gray_background_co notion-block-d95a1b1e610044f89e5d2e4d5314fd7f"><div class="notion-page-icon-inline notion-page-icon-span"><span class="notion-page-icon" role="img" aria-label="💡">💡</span></div><div class="notion-callout-text">如果键或值超过128字节，Go不会将其直接存储在映射存储桶中。相反，Go存储一个指针来引用键或值。</div></div><div class="notion-text notion-block-dfd75c6b7aa24d9585907550720dfd52">所以当你可以估算value或者key大于128的时候可以不用关心value是采用指针或者值。</div><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-85f163fea8e6422a9ad0614404297b56" data-id="85f163fea8e6422a9ad0614404297b56"><span><div id="85f163fea8e6422a9ad0614404297b56" class="notion-header-anchor"></div><a class="notion-hash-link" href="#85f163fea8e6422a9ad0614404297b56" title="3.13 #29: Comparing values incorrectly（错误的对比值）"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">3.13 #29: Comparing values incorrectly（错误的对比值）</span></span></h4><ul class="notion-list notion-list-disc notion-block-e29bbc9738ba44bda8074fe7adb6d43e"><li>对与一些不可比较的类型：slice不能直接使用 == 来比较</li><ul class="notion-list notion-list-disc notion-block-e29bbc9738ba44bda8074fe7adb6d43e"><pre class="notion-code"><div class="notion-code-copy"><div class="notion-code-copy-button"><svg fill="currentColor" viewBox="0 0 16 16" width="1em" version="1.1"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg></div></div><code class="language-go">var cust1 any = customer{id: &quot;x&quot;, operations: []float64{1.}}
var cust2 any = customer{id: &quot;x&quot;, operations: []float64{1.}}
fmt.Println(cust1 == cust2)

// panic: runtime error: comparing uncomparable type main.customer</code></pre></ul></ul><ul class="notion-list notion-list-disc notion-block-ec026dd4dbce438a9eb4794e8b8a1b77"><li>使用 reflect.DeepEqual 方法可以根据类型不同进行不同的比较，但是运行时间是 == 的100倍，因此在对性能有需要的场景，建议自行编写对比函数。</li><ul class="notion-list notion-list-disc notion-block-ec026dd4dbce438a9eb4794e8b8a1b77"><pre class="notion-code"><div class="notion-code-copy"><div class="notion-code-copy-button"><svg fill="currentColor" viewBox="0 0 16 16" width="1em" version="1.1"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg></div></div><code class="language-go">cust1 := customer{id: &quot;x&quot;, operations: []float64{1.}} 
cust2 := customer{id: &quot;x&quot;, operations: []float64{1.}} 
// 1. reflect.DeepEqual 执行效率低
fmt.Println(reflect.DeepEqual(cust1, cust2))
// 2. equal 执行效率是 reflect.DeepEqual 的 96 倍
fmt.Println(cust1.equal(cust2))

func (a customer) equal(b customer) bool {
	if a.id != b.id {
		return false
	}
	if len(a.operations) != len(b.operations) {
		return false
	}
	for i := 0; i &lt; len(a.operations); i++ {
		if a.operations[i] != b.operations[i] {
			return false
		}
	}
	return true
}</code></pre></ul></ul><h3 class="notion-h notion-h2 notion-h-indent-0 notion-block-f5e7e9d1a8b84914b75ba07824222c18" data-id="f5e7e9d1a8b84914b75ba07824222c18"><span><div id="f5e7e9d1a8b84914b75ba07824222c18" class="notion-header-anchor"></div><a class="notion-hash-link" href="#f5e7e9d1a8b84914b75ba07824222c18" title="4 Control structures"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">4 Control structures</span></span></h3><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-f78ef2507ea64ebda88578bfb188720c" data-id="f78ef2507ea64ebda88578bfb188720c"><span><div id="f78ef2507ea64ebda88578bfb188720c" class="notion-header-anchor"></div><a class="notion-hash-link" href="#f78ef2507ea64ebda88578bfb188720c" title="4.1 #30: Ignoring the fact that elements are copied in range loops（range loop中的值为副本）"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">4.1 #30: Ignoring the fact that elements are copied in range loops（range loop中的值为副本）</span></span></h4><div class="notion-callout notion-gray_background_co notion-block-de537daff654488c932cd8117ac58f29"><div class="notion-page-icon-inline notion-page-icon-span"><span class="notion-page-icon" role="img" aria-label="💡">💡</span></div><div class="notion-callout-text">我们应该记住，range loops 中的 value 元素是一个副本。</div></div><pre class="notion-code"><div class="notion-code-copy"><div class="notion-code-copy-button"><svg fill="currentColor" viewBox="0 0 16 16" width="1em" version="1.1"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg></div></div><code class="language-go">func main() {
	accounts := createAccounts()
	for _, a := range accounts {
		a.balance += 1000
	}
  // [{100} {200} {300}]
	fmt.Println(accounts)
	
	// 方案一：直接使用下标访问到特定的值，仍然使用 range loop
	accounts = createAccounts()
	for i := range accounts {
		accounts[i].balance += 1000
	}
  // [{1100} {1200} {1300}]
	fmt.Println(accounts)

	// 方案二：直接使用下标访问到特定的值，自己计算下标值
	accounts = createAccounts()
	for i := 0; i &lt; len(accounts); i++ {
		accounts[i].balance += 1000
	}
  // [{1100} {1200} {1300}]
	fmt.Println(accounts)
	
	// 方案三：迭代指针类型，及时a为副本但是仍然指向同一个内存地址
	accountsPtr := createAccountsPtr()
	for _, a := range accountsPtr {
		a.balance += 1000
	}
}

func createAccounts() []account {
	return []account{
		{balance: 100.},
		{balance: 200.},
		{balance: 300.},
	}
}

func createAccountsPtr() []*account {
	return []*account{
		{balance: 100.},
		{balance: 200.},
		{balance: 300.},
	}
}</code></pre><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-0ec49291cf7741b3984d1eebb74f911e" data-id="0ec49291cf7741b3984d1eebb74f911e"><span><div id="0ec49291cf7741b3984d1eebb74f911e" class="notion-header-anchor"></div><a class="notion-hash-link" href="#0ec49291cf7741b3984d1eebb74f911e" title="4.2 #31: Ignoring how arguments are evaluated in range loops（忽略rang的对象是何时被计算）"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">4.2 #31: Ignoring how arguments are evaluated in range loops（忽略rang的对象是何时被计算）</span></span></h4><div class="notion-text notion-block-af867877d1964b9997f4ee96778e83d1"><b>slice</b></div><pre class="notion-code"><div class="notion-code-copy"><div class="notion-code-copy-button"><svg fill="currentColor" viewBox="0 0 16 16" width="1em" version="1.1"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg></div></div><code class="language-go">// range loop 的对象是一个表达式，这个表达式可以是 string, slice等，当执行
// 循环的时候，exp只会被计算一次，对原始迭代值进行拷贝生成一个副本
for i, v := range exp

// 迭代对象只计算一次，迭代3次就结束，不会无限循环
s := []int{0, 1, 2}
for range s {
    s = append(s, 10)
}

// 但是下面这种写法就会无限循环
s := []int{0, 1, 2}
for i := 0; i &lt; len(s); i++ {
    s = append(s, 10)
}</code></pre><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-d88435b1013e4ebbaa0f1e611888dc56"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%272000%27%20height=%27816%27/%3e"/></span><img alt="notion image" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover;background-size:cover;background-position:0% 0%;filter:blur(20px);background-image:url(&quot;data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAADQAQCdASoQAAcABUB8JZQAAuguiuyBAAD+77+Q1KtW11k7JyKCu8wwmUzF8AAA&quot;)"/><noscript><img alt="notion image" src="https://www.notion.so/image/http%3A%2F%2Ftva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbgpbma14pj316m0hewjo.jpg?table=block&amp;id=d88435b1-013e-4ebb-aa0f-1e611888dc56&amp;cache=v2" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover" loading="lazy"/></noscript></span></div></figure><div class="notion-text notion-block-bb48638e4b2247008006b5169145562c"><b>channel</b></div><pre class="notion-code"><div class="notion-code-copy"><div class="notion-code-copy-button"><svg fill="currentColor" viewBox="0 0 16 16" width="1em" version="1.1"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg></div></div><code class="language-go">func main() {
	ch1 := make(chan int, 3)
	go func() {
		ch1 &lt;- 0
		ch1 &lt;- 1
		ch1 &lt;- 2
		close(ch1)
	}()

	ch2 := make(chan int, 3)
	go func() {
		ch2 &lt;- 10
		ch2 &lt;- 11
		ch2 &lt;- 12
		close(ch2)
	}()

	ch := ch1
	// rang loop里的ch一直指向ch1，只会迭代3次
	for v := range ch {
		fmt.Println(v)
		ch = ch2
	}
}
// output
// 0 1 2</code></pre><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-256122a4f4fa4bd3af846eac1e3323a2" data-id="256122a4f4fa4bd3af846eac1e3323a2"><span><div id="256122a4f4fa4bd3af846eac1e3323a2" class="notion-header-anchor"></div><a class="notion-hash-link" href="#256122a4f4fa4bd3af846eac1e3323a2" title="4.3 #32: Ignoring the impact of using pointer elements in range loops （错误的引用range loop的生成值）"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">4.3 #32: Ignoring the impact of using pointer elements in range loops （错误的引用range loop的生成值）</span></span></h4><div class="notion-text notion-block-f949c026933a4971a0be88796a580e55">当在迭代对象的时候，把range loop生成元素的指针赋值给其他对象，会产生问题！</div><pre class="notion-code"><div class="notion-code-copy"><div class="notion-code-copy-button"><svg fill="currentColor" viewBox="0 0 16 16" width="1em" version="1.1"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg></div></div><code class="language-go">type Customer struct {
	ID      string
	Balance float64
}

type Store struct {
	m map[string]*Customer
}

func main() {
	s := Store{
		m: make(map[string]*Customer),
	}
	s.storeCustomers([]Customer{
		{ID: &quot;1&quot;, Balance: 10},
		{ID: &quot;2&quot;, Balance: -10},
		{ID: &quot;3&quot;, Balance: 0},
	})
	print(s.m)
}

// 问题来源：
func (s *Store) storeCustomers(customers []Customer) {
	for _, customer := range customers {
		// 每次迭代的时候 customer 都是同一个对象，只是 customer 的值会不断被新的值覆盖
		fmt.Printf(&quot;%p\n&quot;, &amp;customer)
		// 最终map中的每个key都指向了同一个内存地址
		s.m[customer.ID] = &amp;customer
	}
}

// 解决方案一：把每次迭代的值copy到一个新的临时变量
func (s *Store) storeCustomers2(customers []Customer) {
	for _, customer := range customers {
		current := customer
		s.m[current.ID] = &amp;current
	}
}

// 解决方案二：直接引用切片的元素
// 问题：如果slice出现扩容的时候，那原本地址还是被引用，可能出现内存泄露
func (s *Store) storeCustomers3(customers []Customer) {
	for i := range customers {
		customer := &amp;customers[i]
		s.m[customer.ID] = customer
	}
}

func print(m map[string]*Customer) {
	for k, v := range m {
		fmt.Printf(&quot;key=%s, value=%#v\n&quot;, k, v)
	}
}</code></pre><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-85e2bdbe87d9408287bd9e1c9b8b00c5"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%272000%27%20height=%27512%27/%3e"/></span><img alt="notion image" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover;background-size:cover;background-position:0% 0%;filter:blur(20px);background-image:url(&quot;data:image/webp;base64,UklGRjQAAABXRUJQVlA4ICgAAACwAQCdASoQAAQABUB8JaQAAuRlW5AAAP7wOZFHbXDuuvvfZyF+AAAA&quot;)"/><noscript><img alt="notion image" src="https://www.notion.so/image/http%3A%2F%2Ftva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbgq6uyv0xj319c0bm77n.jpg?table=block&amp;id=85e2bdbe-87d9-4082-87bd-9e1c9b8b00c5&amp;cache=v2" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover" loading="lazy"/></noscript></span></div></figure><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-fae14f22a6ec483c9cb5ac66f8c4ce71" data-id="fae14f22a6ec483c9cb5ac66f8c4ce71"><span><div id="fae14f22a6ec483c9cb5ac66f8c4ce71" class="notion-header-anchor"></div><a class="notion-hash-link" href="#fae14f22a6ec483c9cb5ac66f8c4ce71" title="4.4 #33: Making wrong assumptions during map iterations（在迭代map的时候做出了错误的假设）"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">4.4 #33: Making wrong assumptions during map iterations（在迭代map的时候做出了错误的假设）</span></span></h4><ul class="notion-list notion-list-disc notion-block-eb4d7c7acf40454ca1a1d268bc56ed22"><li>迭代map的时候，GO不保证有序，甚至还估计打乱迭代顺序。如果想要按顺序迭代map，可以使用第三方库</li><ul class="notion-list notion-list-disc notion-block-eb4d7c7acf40454ca1a1d268bc56ed22"><a target="_blank" rel="noopener noreferrer" href="https://github.com/emirpasic/gods" class="notion-external notion-external-block notion-row notion-block-83a5908e22eb46209c02d37821858ae3"><div class="notion-external-image"><svg viewBox="0 0 260 260"><g><path d="M128.00106,0 C57.3172926,0 0,57.3066942 0,128.00106 C0,184.555281 36.6761997,232.535542 87.534937,249.460899 C93.9320223,250.645779 96.280588,246.684165 96.280588,243.303333 C96.280588,240.251045 96.1618878,230.167899 96.106777,219.472176 C60.4967585,227.215235 52.9826207,204.369712 52.9826207,204.369712 C47.1599584,189.574598 38.770408,185.640538 38.770408,185.640538 C27.1568785,177.696113 39.6458206,177.859325 39.6458206,177.859325 C52.4993419,178.762293 59.267365,191.04987 59.267365,191.04987 C70.6837675,210.618423 89.2115753,204.961093 96.5158685,201.690482 C97.6647155,193.417512 100.981959,187.77078 104.642583,184.574357 C76.211799,181.33766 46.324819,170.362144 46.324819,121.315702 C46.324819,107.340889 51.3250588,95.9223682 59.5132437,86.9583937 C58.1842268,83.7344152 53.8029229,70.715562 60.7532354,53.0843636 C60.7532354,53.0843636 71.5019501,49.6441813 95.9626412,66.2049595 C106.172967,63.368876 117.123047,61.9465949 128.00106,61.8978432 C138.879073,61.9465949 149.837632,63.368876 160.067033,66.2049595 C184.49805,49.6441813 195.231926,53.0843636 195.231926,53.0843636 C202.199197,70.715562 197.815773,83.7344152 196.486756,86.9583937 C204.694018,95.9223682 209.660343,107.340889 209.660343,121.315702 C209.660343,170.478725 179.716133,181.303747 151.213281,184.472614 C155.80443,188.444828 159.895342,196.234518 159.895342,208.176593 C159.895342,225.303317 159.746968,239.087361 159.746968,243.303333 C159.746968,246.709601 162.05102,250.70089 168.53925,249.443941 C219.370432,232.499507 256,184.536204 256,128.00106 C256,57.3066942 198.691187,0 128.00106,0 Z M47.9405593,182.340212 C47.6586465,182.976105 46.6581745,183.166873 45.7467277,182.730227 C44.8183235,182.312656 44.2968914,181.445722 44.5978808,180.80771 C44.8734344,180.152739 45.876026,179.97045 46.8023103,180.409216 C47.7328342,180.826786 48.2627451,181.702199 47.9405593,182.340212 Z M54.2367892,187.958254 C53.6263318,188.524199 52.4329723,188.261363 51.6232682,187.366874 C50.7860088,186.474504 50.6291553,185.281144 51.2480912,184.70672 C51.8776254,184.140775 53.0349512,184.405731 53.8743302,185.298101 C54.7115892,186.201069 54.8748019,187.38595 54.2367892,187.958254 Z M58.5562413,195.146347 C57.7719732,195.691096 56.4895886,195.180261 55.6968417,194.042013 C54.9125733,192.903764 54.9125733,191.538713 55.713799,190.991845 C56.5086651,190.444977 57.7719732,190.936735 58.5753181,192.066505 C59.3574669,193.22383 59.3574669,194.58888 58.5562413,195.146347 Z M65.8613592,203.471174 C65.1597571,204.244846 63.6654083,204.03712 62.5716717,202.981538 C61.4524999,201.94927 61.1409122,200.484596 61.8446341,199.710926 C62.5547146,198.935137 64.0575422,199.15346 65.1597571,200.200564 C66.2704506,201.230712 66.6095936,202.705984 65.8613592,203.471174 Z M75.3025151,206.281542 C74.9930474,207.284134 73.553809,207.739857 72.1039724,207.313809 C70.6562556,206.875043 69.7087748,205.700761 70.0012857,204.687571 C70.302275,203.678621 71.7478721,203.20382 73.2083069,203.659543 C74.6539041,204.09619 75.6035048,205.261994 75.3025151,206.281542 Z M86.046947,207.473627 C86.0829806,208.529209 84.8535871,209.404622 83.3316829,209.4237 C81.8013,209.457614 80.563428,208.603398 80.5464708,207.564772 C80.5464708,206.498591 81.7483088,205.631657 83.2786917,205.606221 C84.8005962,205.576546 86.046947,206.424403 86.046947,207.473627 Z M96.6021471,207.069023 C96.7844366,208.099171 95.7267341,209.156872 94.215428,209.438785 C92.7295577,209.710099 91.3539086,209.074206 91.1652603,208.052538 C90.9808515,206.996955 92.0576306,205.939253 93.5413813,205.66582 C95.054807,205.402984 96.4092596,206.021919 96.6021471,207.069023 Z" fill="#161614"></path></g></svg></div><div class="notion-external-description"><div class="notion-external-title">gods</div><div class="notion-external-subtitle"><span>emirpasic</span><span> • </span><span>Updated <!-- -->Feb 27, 2023</span></div></div></a></ul></ul><ul class="notion-list notion-list-disc notion-block-11e26bf98f154ac7aa81d5d0887e0b96"><li>边迭代map边增加map的值，GO的行为不可预测，有可能迭代到新加入的值有可能迭代不到</li></ul><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-a37d28ed50364587aad0ca8cfd70ef57" data-id="a37d28ed50364587aad0ca8cfd70ef57"><span><div id="a37d28ed50364587aad0ca8cfd70ef57" class="notion-header-anchor"></div><a class="notion-hash-link" href="#a37d28ed50364587aad0ca8cfd70ef57" title="4.5 #34: Ignoring how the break statement works（不明确break语句是如何工作-break label的使用）"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">4.5 #34: Ignoring how the break statement works（不明确break语句是如何工作-break label的使用）</span></span></h4><div class="notion-text notion-block-c76ed8ef97e04f40bc55025a8c5becd1">在switch和select语句中使用break只会跳出switch和select的作用域，如果这2个语句被for循环包裹是不会跳出for循环的,可以在break的时候指定label标签来跳出循环</div><pre class="notion-code"><div class="notion-code-copy"><div class="notion-code-copy-button"><svg fill="currentColor" viewBox="0 0 16 16" width="1em" version="1.1"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg></div></div><code class="language-go">func listing() {
loop:
	for i := 0; i &lt; 5; i++ {
		fmt.Printf(&quot;%d &quot;, i)
		switch i {
		default:
		case 2:
			break loop
		}
	}
}</code></pre><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-9609fee749354b738f3eb4d50e02443f" data-id="9609fee749354b738f3eb4d50e02443f"><span><div id="9609fee749354b738f3eb4d50e02443f" class="notion-header-anchor"></div><a class="notion-hash-link" href="#9609fee749354b738f3eb4d50e02443f" title="4.6 #35: Using defer inside a loop（在loop循环中使用defer语句）"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">4.6 #35: Using defer inside a loop（在loop循环中使用defer语句）</span></span></h4><div class="notion-text notion-block-bb4199a9e309488994c97668a56185de">在每个for循环的迭代作用域中调用defer是不会在迭代结束的时候执行，只有最内层函数调用返回的时候才会执行defer，如果每次迭代都打开了一个文件描述符，想要及时关闭：</div><ul class="notion-list notion-list-disc notion-block-5be3e127fbc949bdb19f99e2f58e628e"><li>每次迭代之后就主动关闭，不借助于defer的能力</li></ul><ul class="notion-list notion-list-disc notion-block-b06a79cecd5546b68c528ece057207d5"><li>放在一个函数闭包内，当闭包执行完之后执行defer</li></ul><pre class="notion-code"><div class="notion-code-copy"><div class="notion-code-copy-button"><svg fill="currentColor" viewBox="0 0 16 16" width="1em" version="1.1"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg></div></div><code class="language-go">func readFiles(ch &lt;-chan string) error {
	for path := range ch {
		
		err := func() error {
			file, err := os.Open(path)
			if err != nil {
				return err
			}

			defer file.Close()

			// Do something with file
			return nil
		}() // 放在闭包内并及时调用
		if err != nil {
			return err
		}
	}
	return nil
}</code></pre><h3 class="notion-h notion-h2 notion-h-indent-0 notion-block-0ac3c7e80693424bb7b6e7b7028418f1" data-id="0ac3c7e80693424bb7b6e7b7028418f1"><span><div id="0ac3c7e80693424bb7b6e7b7028418f1" class="notion-header-anchor"></div><a class="notion-hash-link" href="#0ac3c7e80693424bb7b6e7b7028418f1" title="5 Strings"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">5 Strings</span></span></h3><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-e5a1574ebfd04d30b8343e3a52ed0661" data-id="e5a1574ebfd04d30b8343e3a52ed0661"><span><div id="e5a1574ebfd04d30b8343e3a52ed0661" class="notion-header-anchor"></div><a class="notion-hash-link" href="#e5a1574ebfd04d30b8343e3a52ed0661" title="5.1 #36: Not understanding the concept of a rune（不理解rune的概念）"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">5.1 #36: Not understanding the concept of a rune（不理解rune的概念）</span></span></h4><ul class="notion-list notion-list-disc notion-block-f52fa7c877dd4028bd3fc695034589ce"><li>Go源代码使用UTF-8进行编码。因此，所有字符串都是UTF-8字符串。但是，由于字符串可以包含任意字节，如果它来自其他地方（而不是源代码），则不能保证基于UTF-8编码</li></ul><ul class="notion-list notion-list-disc notion-block-bde7509b5f50467d8f033ccc8389cafc"><li>rune对应着Unicode中的码点的概念，一个rune代表Unicode中的一个字符</li></ul><ul class="notion-list notion-list-disc notion-block-b19c1702adf543eea3dd66683e23d32a"><li>使用UTF-8编码，Unicode码点可以编码为1到4个字节</li></ul><ul class="notion-list notion-list-disc notion-block-c5d10ace19814c7fa6871144b7995555"><li>len函数返回的是字节长度，而不是rune的长度</li></ul><pre class="notion-code"><div class="notion-code-copy"><div class="notion-code-copy-button"><svg fill="currentColor" viewBox="0 0 16 16" width="1em" version="1.1"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg></div></div><code class="language-go">func main() {
	s := &quot;hello&quot;
	// output: 5
	fmt.Println(len(s))

	s = &quot;汉&quot;
  // output: 3
	fmt.Println(len(s))
	
  // 汉 被编码为3个字节
	s = string([]byte{0xE6, 0xB1, 0x89})
	fmt.Printf(&quot;%s\n&quot;, s)
}</code></pre><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-953e1180dc6f403887c25f69437920da" data-id="953e1180dc6f403887c25f69437920da"><span><div id="953e1180dc6f403887c25f69437920da" class="notion-header-anchor"></div><a class="notion-hash-link" href="#953e1180dc6f403887c25f69437920da" title="5.2 #37: Inaccurate string iteration（错误的迭代string-当string中的字符并非单字节Utf-8编码时）"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">5.2 #37: Inaccurate string iteration（错误的迭代string-当string中的字符并非单字节Utf-8编码时）</span></span></h4><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-29e66b77b9244bf589433cb9fabba638"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%272000%27%20height=%271047%27/%3e"/></span><img alt="notion image" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover;background-size:cover;background-position:0% 0%;filter:blur(20px);background-image:url(&quot;data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACQAQCdASoQAAgABUB8JZQAAudZtgAA/u/Dbj5UHJFcpy2/VvgK9EInYwAAGoAA&quot;)"/><noscript><img alt="notion image" src="https://www.notion.so/image/http%3A%2F%2Ftva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbgvwhko0uj31cm0pgn88.jpg?table=block&amp;id=29e66b77-b924-4bf5-8943-3cb9fabba638&amp;cache=v2" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover" loading="lazy"/></noscript></span></div></figure><div class="notion-text notion-block-fd653c884f1947f98f5e25ac7190e8bc">如果想要按照rune为单位返回下标和长度,把string转为[]rune，但是这种作为会有O(n)的时间复杂度和内存拷贝开销，一般情况迭代字符串使用 range loop的方式迭代</div><pre class="notion-code"><div class="notion-code-copy"><div class="notion-code-copy-button"><svg fill="currentColor" viewBox="0 0 16 16" width="1em" version="1.1"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg></div></div><code class="language-go">runes := []rune(s)
for i, r := range runes {
	fmt.Printf(&quot;position %d: %c\n&quot;, i, r)
}
// output
// position 0: h
// position 1: ê
// position 2: l
// position 3: l
// position 4: o</code></pre><div class="notion-text notion-block-555f2471b8154f9093d07d48de751dbf"><code class="notion-inline-code">fmt.Println(utf8.RuneCountInString(s)) // 5</code> 方法可以计算string中rune的个数</div><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-c0419f58e4c24e799750d05a19e86791" data-id="c0419f58e4c24e799750d05a19e86791"><span><div id="c0419f58e4c24e799750d05a19e86791" class="notion-header-anchor"></div><a class="notion-hash-link" href="#c0419f58e4c24e799750d05a19e86791" title="5.3 #38: Misusing trim functions（错误使用 trim 函数）"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">5.3 #38: Misusing trim functions（错误使用 trim 函数）</span></span></h4><pre class="notion-code"><div class="notion-code-copy"><div class="notion-code-copy-button"><svg fill="currentColor" viewBox="0 0 16 16" width="1em" version="1.1"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg></div></div><code class="language-go">func main() {
	// output: 123
	// TrimRight removes all the trailing runes contained in a given set
	fmt.Println(strings.TrimRight(&quot;123oxo&quot;, &quot;xo&quot;))
	
	// output: 123o
	// TrimSuffix returns a string without a provided trailing suffix
	fmt.Println(strings.TrimSuffix(&quot;123oxo&quot;, &quot;xo&quot;))
	
	// output: 123
	// TrimLeft like TrimRight
	fmt.Println(strings.TrimLeft(&quot;oxo123&quot;, &quot;ox&quot;))

	// output: o123
	// TrimPrefix like TrimSuffix
	fmt.Println(strings.TrimPrefix(&quot;oxo123&quot;, &quot;ox&quot;))
	
	// output: 123
	fmt.Println(strings.Trim(&quot;oxo123oxo&quot;, &quot;ox&quot;))
}</code></pre><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-1e2ca2f38db1402d8ea160ad3d73a3e9" data-id="1e2ca2f38db1402d8ea160ad3d73a3e9"><span><div id="1e2ca2f38db1402d8ea160ad3d73a3e9" class="notion-header-anchor"></div><a class="notion-hash-link" href="#1e2ca2f38db1402d8ea160ad3d73a3e9" title="5.4 #39: Under-optimized string concatenation（如何高效的字符串拼接-strings.Builder）"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">5.4 #39: Under-optimized string concatenation（如何高效的字符串拼接-strings.Builder）</span></span></h4><pre class="notion-code"><div class="notion-code-copy"><div class="notion-code-copy-button"><svg fill="currentColor" viewBox="0 0 16 16" width="1em" version="1.1"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg></div></div><code class="language-go">func concatV1(values []string) string {
	s := &quot;&quot;
	for _, value := range values {
		s += value
	}
	return s
}

func concatV2(values []string) string {
	sb := strings.Builder{}
	for _, value := range values {
		_, _ = sb.WriteString(value)
	}
	return sb.String()
}

func concatV3(values []string) string {
	total := 0
	for i := 0; i &lt; len(values); i++ {
		total += len(values[i])
	}

	sb := strings.Builder{}
	sb.Grow(total)
	for _, value := range values {
		_, _ = sb.WriteString(value)
	}
	return sb.String()
}</code></pre><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-9409d7223bd44592bb37da8eb627ef24"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%272000%27%20height=%27235%27/%3e"/></span><img alt="notion image" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover;background-size:cover;background-position:0% 0%;filter:blur(20px);background-image:url(&quot;data:image/webp;base64,UklGRjwAAABXRUJQVlA4IDAAAADQAQCdASoQAAIABUB8JQAR4ACkYwD7AAD+6pFOMynbsBHGrbEiDmUf0RxdRLAAAAA=&quot;)"/><noscript><img alt="notion image" src="https://www.notion.so/image/http%3A%2F%2Ftva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbgwnhm8f8j315o04w0vb.jpg?table=block&amp;id=9409d722-3bd4-4592-bb37-da8eb627ef24&amp;cache=v2" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover" loading="lazy"/></noscript></span></div></figure><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-84dfa1f12f634fcbb96ac0ac62955f50" data-id="84dfa1f12f634fcbb96ac0ac62955f50"><span><div id="84dfa1f12f634fcbb96ac0ac62955f50" class="notion-header-anchor"></div><a class="notion-hash-link" href="#84dfa1f12f634fcbb96ac0ac62955f50" title="5.5 #40: Useless string conversions（无用的字符串转换）"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">5.5 #40: Useless string conversions（无用的字符串转换）</span></span></h4><ul class="notion-list notion-list-disc notion-block-1a706965a7014cfa8dc8219b6730b670"><li>bytes 包支持很多和strings包类似的方法，很多时候没有必要一定要把[]byte转化为string：比如<b>bytes.TrimSpace </b>方法</li></ul><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-154068f6cadf483c9f1661d556177b44" data-id="154068f6cadf483c9f1661d556177b44"><span><div id="154068f6cadf483c9f1661d556177b44" class="notion-header-anchor"></div><a class="notion-hash-link" href="#154068f6cadf483c9f1661d556177b44" title="5.6 #41: Substrings and memory leaks（子字符串和内存泄露-Consistent with #26）"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">5.6 #41: Substrings and memory leaks（子字符串和内存泄露-Consistent with #26）</span></span></h4><div class="notion-text notion-block-6356e40e131e4d969a5f3dee0881691f">和 #26 条类似，子字符串引用了一个较长父字符串的部分内容，导致父字符串不能被GC，导致内存暴增</div><pre class="notion-code"><div class="notion-code-copy"><div class="notion-code-copy-button"><svg fill="currentColor" viewBox="0 0 16 16" width="1em" version="1.1"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg></div></div><code class="language-go">func main() {
	s1 := &quot;Hello, World!&quot;
	s2 := s1[:5]
	fmt.Println(s2)

	s1 = &quot;Hêllo, World!&quot;
	s2 = string([]rune(s1)[:5])
	fmt.Println(s2)
}

type store struct{}

func (s store) handleLog1(log string) error {
	if len(log) &lt; 36 {
		return errors.New(&quot;log is not correctly formatted&quot;)
	}
	uuid := log[:36]
	s.store(uuid)
	// Do something
	return nil
}

func (s store) handleLog2(log string) error {
	if len(log) &lt; 36 {
		return errors.New(&quot;log is not correctly formatted&quot;)
	}
	uuid := string([]byte(log[:36]))
	s.store(uuid)
	// Do something
	return nil
}

func (s store) handleLog3(log string) error {
	if len(log) &lt; 36 {
		return errors.New(&quot;log is not correctly formatted&quot;)
	}
	uuid := string(strings.Clone(log[:36]))
	s.store(uuid)
	// Do something
	return nil
}</code></pre><h3 class="notion-h notion-h2 notion-h-indent-0 notion-block-c4ca192b03ed4bde926d3820dcf9f3c4" data-id="c4ca192b03ed4bde926d3820dcf9f3c4"><span><div id="c4ca192b03ed4bde926d3820dcf9f3c4" class="notion-header-anchor"></div><a class="notion-hash-link" href="#c4ca192b03ed4bde926d3820dcf9f3c4" title="6 Functions and methods"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">6 Functions and methods</span></span></h3><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-11fc98b59f9941b8bfbd791bbc25ecb2" data-id="11fc98b59f9941b8bfbd791bbc25ecb2"><span><div id="11fc98b59f9941b8bfbd791bbc25ecb2" class="notion-header-anchor"></div><a class="notion-hash-link" href="#11fc98b59f9941b8bfbd791bbc25ecb2" title="6.1 #42: Not knowing which type of receiver to use（不知道receiver应该使用什么样的类型）"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">6.1 #42: Not knowing which type of receiver to use（不知道receiver应该使用什么样的类型）</span></span></h4><div class="notion-row notion-block-2849d07281ed46dd9d6990d7919929e8"><div class="notion-column notion-block-2fd4e3ee0d844d69b0633db26b3493e0" style="width:calc((100% - (1 * min(32px, 4vw))) * 0.5)"><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-41cf54b715d24abda5f6bd498116759c"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%272000%27%20height=%27720%27/%3e"/></span><img alt="notion image" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover;background-size:cover;background-position:0% 0%;filter:blur(20px);background-image:url(&quot;data:image/webp;base64,UklGRjYAAABXRUJQVlA4ICoAAAAwAQCdASoQAAYABUB8JYwAA3AA/vBKAw+t41SSIeO5h5jAJwmtDoAF0AA=&quot;)"/><noscript><img alt="notion image" src="https://www.notion.so/image/http%3A%2F%2Ftva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbdtxxe05ij31f80ig44e.jpg?table=block&amp;id=41cf54b7-15d2-4abd-a5f6-bd498116759c&amp;cache=v2" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover" loading="lazy"/></noscript></span></div></figure><div class="notion-blank notion-block-4f77e5557a444f9bbe2c0b6ca3875904"> </div></div><div class="notion-spacer"></div><div class="notion-column notion-block-1119521ef9354cf9a146e6f457236a0c" style="width:calc((100% - (1 * min(32px, 4vw))) * 0.5)"><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-18f349cdcfa44bf9b6eefb04d1d65252"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%272000%27%20height=%27756%27/%3e"/></span><img alt="notion image" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover;background-size:cover;background-position:0% 0%;filter:blur(20px);background-image:url(&quot;data:image/webp;base64,UklGRioAAABXRUJQVlA4IB4AAAAwAQCdASoQAAYABUB8JZwAA3AA/vCAX+s29I4AAAA=&quot;)"/><noscript><img alt="notion image" src="https://www.notion.so/image/http%3A%2F%2Ftva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbdu8fcbeoj31de0io791.jpg?table=block&amp;id=18f349cd-cfa4-4bf9-b6ee-fb04d1d65252&amp;cache=v2" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover" loading="lazy"/></noscript></span></div></figure></div><div class="notion-spacer"></div></div><div class="notion-text notion-block-402c93ffd0a345e7b154451d85baaa95">提供几个场景供我们决定选择receiver的类型：</div><div class="notion-text notion-block-54c48b4d85b44412bbe4fd2fc48600f9"><b>一定要用指针类型的场景</b></div><ul class="notion-list notion-list-disc notion-block-f401b0cc750b4a53b09f0a7f556a7e71"><li>方法需要修改receiver的值</li></ul><ul class="notion-list notion-list-disc notion-block-4b57a03026f343ee95f03fae8e921799"><li>如果receiver的成员不能被拷贝</li></ul><div class="notion-text notion-block-2de9bef515b949fe81f6c132fa703c36"><b>应该使用指针类型的场景</b></div><ul class="notion-list notion-list-disc notion-block-01fe8c815d8e4875896e50c273841001"><li>如果receiver是一个大的对象，使用指针类型可以更高效的处理程序，这里大的具体数值不好界定，需要看实际的场景，这里可以使用benchmark来估计。</li></ul><div class="notion-text notion-block-d3afb4c7fd134bd69a18421d1cb5c79c"><b>一定要使用值类型的场景</b></div><ul class="notion-list notion-list-disc notion-block-b949f0effae54a03bf5fae1edbf6a6a2"><li>如果强制要求receiver是不可变的</li></ul><ul class="notion-list notion-list-disc notion-block-9477946e75e94232b34be5269f6874e7"><li>如果receiver是一个map、function、channel类型，否则会有编译错误</li></ul><div class="notion-text notion-block-53fe7fc41d274417ab7dc7ba6071e1aa"><b>应该使用值类型的场景</b></div><ul class="notion-list notion-list-disc notion-block-6cd64a515a4d4db6ae43886088baedad"><li>receiver是一个slice，并且一定需要修改</li></ul><ul class="notion-list notion-list-disc notion-block-9590d5e3b8a84752a2f24079264d28b2"><li>receiver是一个array或者是一个没有可变字段的struct，如time.Time</li></ul><ul class="notion-list notion-list-disc notion-block-2b37c979b118414eb6e0b8bb644eb989"><li>receiver是基本类型，例如int、float64或string。</li></ul><div class="notion-text notion-block-55cc7616514447a78ab1323453d72555"><b>结构体组成复杂的场景</b></div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-64759c04adff43e296eede5ea6027ed1"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:528px;max-width:100%;flex-direction:column"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%272000%27%20height=%27492%27/%3e"/></span><img alt="notion image" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover;background-size:cover;background-position:0% 0%;filter:blur(20px);background-image:url(&quot;data:image/webp;base64,UklGRiwAAABXRUJQVlA4ICAAAAAwAQCdASoQAAQABUB8JaQAA3AA/vCAayOdlTuACwAAAA==&quot;)"/><noscript><img alt="notion image" src="https://www.notion.so/image/http%3A%2F%2Ftva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbdv5mjrvoj317s0asac3.jpg?table=block&amp;id=64759c04-adff-43e2-96ee-de5ea6027ed1&amp;cache=v2" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover" loading="lazy"/></noscript></span></div></figure><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-b9f20bad1efd45eb924109f322a37dd2"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:528px;max-width:100%;flex-direction:column"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%272000%27%20height=%27784%27/%3e"/></span><img alt="notion image" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover;background-size:cover;background-position:0% 0%;filter:blur(20px);background-image:url(&quot;data:image/webp;base64,UklGRi4AAABXRUJQVlA4ICIAAACQAQCdASoQAAYABUB8JZwAAqHyA7AA/u/XjG3lsZ7cAAAA&quot;)"/><noscript><img alt="notion image" src="https://www.notion.so/image/http%3A%2F%2Ftva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbeukpyoqpj316y0guafu.jpg?table=block&amp;id=b9f20bad-1efd-45eb-9241-09f322a37dd2&amp;cache=v2" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover" loading="lazy"/></noscript></span></div></figure><ul class="notion-list notion-list-disc notion-block-9370b8ad5e7f469cbb0ccf16866fbc9d"><li>这种场景建议receiver的类型设为指针类型，能明确的告诉使用者这个方法会修改成员的值</li></ul><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-cc710adf680443e48075603ce11d1f60"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%272000%27%20height=%27910%27/%3e"/></span><img alt="notion image" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover;background-size:cover;background-position:0% 0%;filter:blur(20px);background-image:url(&quot;data:image/webp;base64,UklGRjIAAABXRUJQVlA4ICYAAAAwAQCdASoQAAcABUB8JZQAA3AA/u7LcguQ1aGrNwWkrwvBjQ+AAA==&quot;)"/><noscript><img alt="notion image" src="https://www.notion.so/image/http%3A%2F%2Ftva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbdvbzn08cj31fi0ng1du.jpg?table=block&amp;id=cc710adf-6804-43e4-8075-603ce11d1f60&amp;cache=v2" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover" loading="lazy"/></noscript></span></div></figure><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-1798d9f181864c11a088407a5e612a35" data-id="1798d9f181864c11a088407a5e612a35"><span><div id="1798d9f181864c11a088407a5e612a35" class="notion-header-anchor"></div><a class="notion-hash-link" href="#1798d9f181864c11a088407a5e612a35" title="6.2 #43: Never using named result parameters （“永远”不要使用命名结果参数）"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">6.2 #43: Never using named result parameters （“永远”不要使用命名结果参数）</span></span></h4><div class="notion-text notion-block-59ffc07d97774c9ca3e7b5a4f49d4490">这里永远要加引号，因为这一节都大部分内容都在说使用命名结果参数的好处。</div><div class="notion-text notion-block-0738c673eb2040fe9c87be60dff3df6b"><b>接口定义的函数使用命名结果参数，可以提升可读性</b>，但是实现接口的方法没有强制要求返回值有命名</div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-aed780b23d2a41888b915563dba2e602"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column;height:100%"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%271572%27%20height=%27238%27/%3e"/></span><img alt="notion image" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover;background-size:cover;background-position:0% 0%;filter:blur(20px);background-image:url(&quot;data:image/webp;base64,UklGRjQAAABXRUJQVlA4ICgAAACwAQCdASoQAAIABUB8JZQAApMJG8kAAP7v15OyyXBJ2AQk9XDlU5AA&quot;)"/><noscript><img alt="notion image" src="https://s3.us-west-2.amazonaws.com/secure.notion-static.com/0e169106-d7be-4ec7-8f95-199e4ffc41ec/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&amp;X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&amp;X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20230227%2Fus-west-2%2Fs3%2Faws4_request&amp;X-Amz-Date=20230227T152323Z&amp;X-Amz-Expires=86400&amp;X-Amz-Signature=11209f04719db7a90e8e62e5ae9c51409c824de053dfc9362c1df13657ca9b58&amp;X-Amz-SignedHeaders=host&amp;x-id=GetObject" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover" loading="lazy"/></noscript></span></div></figure><div class="notion-text notion-block-14be64d8c89743f9bff16c77f779ead7"><b>以标准库的函数为例，返回值使用命名参数，可以减少代码行数 </b>，但是这种裸返回（不指定返回值）比较适合实现行数比较短的函数，因为代码行数太长会导致可读性大大降低。</div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-07826ba2d6d94249a2cf33d4a74492d7"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%272000%27%20height=%27625%27/%3e"/></span><img alt="notion image" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover;background-size:cover;background-position:0% 0%;filter:blur(20px);background-image:url(&quot;data:image/webp;base64,UklGRjYAAABXRUJQVlA4ICoAAADQAQCdASoQAAUABUB8JQApgAeiF/HhAAD+8ChMLyDKy10QKypz0T2gAAA=&quot;)"/><noscript><img alt="notion image" src="https://www.notion.so/image/http%3A%2F%2Ftva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbew5l36m2j31820ds0wg.jpg?table=block&amp;id=07826ba2-d6d9-4249-a2cf-33d4a74492d7&amp;cache=v2" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover" loading="lazy"/></noscript></span></div></figure><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-a3b6e59751234c97b772f11ae6dbce42" data-id="a3b6e59751234c97b772f11ae6dbce42"><span><div id="a3b6e59751234c97b772f11ae6dbce42" class="notion-header-anchor"></div><a class="notion-hash-link" href="#a3b6e59751234c97b772f11ae6dbce42" title="6.3  #44: Unintended side effects with named result parameters （使用命名参数可能会出现意向不到的副作用）"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">6.3  #44: Unintended side effects with named result parameters （使用命名参数可能会出现意向不到的副作用）</span></span></h4><div class="notion-text notion-block-ad06a59beb3d432fa540ae81b29afe7c">按照编程惯性，遇到错误就直接返回err，但是这里err因为初始化为空值，直接返回就会有问题。</div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-dace75624fe14ef5aa8332021727c384"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column;height:100%"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%271750%27%20height=%27690%27/%3e"/></span><img alt="notion image" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover;background-size:cover;background-position:0% 0%;filter:blur(20px);background-image:url(&quot;data:image/webp;base64,UklGRiwAAABXRUJQVlA4ICAAAAAwAQCdASoQAAYABUB8JZwAA3AA/vBo0Weoy8NuWgAAAA==&quot;)"/><noscript><img alt="notion image" src="https://s3.us-west-2.amazonaws.com/secure.notion-static.com/e102136f-1e34-44a3-a799-b61eacba81e9/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&amp;X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&amp;X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20230227%2Fus-west-2%2Fs3%2Faws4_request&amp;X-Amz-Date=20230227T152323Z&amp;X-Amz-Expires=86400&amp;X-Amz-Signature=9d68b0660139ff89184e53819d37fd06a2ebc312a647f51822b3bf16f7362245&amp;X-Amz-SignedHeaders=host&amp;x-id=GetObject" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover" loading="lazy"/></noscript></span></div></figure><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-3bff938459694c3ea2a7b654a8926c06" data-id="3bff938459694c3ea2a7b654a8926c06"><span><div id="3bff938459694c3ea2a7b654a8926c06" class="notion-header-anchor"></div><a class="notion-hash-link" href="#3bff938459694c3ea2a7b654a8926c06" title="6.4 ⚠️ #45: Returning a nil receiver（返回了一个nil的值，该值的指针类型实现了某一接口）"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">6.4 ⚠️ #45: Returning a nil receiver（返回了一个nil的值，该值的指针类型实现了某一接口）</span></span></h4><pre class="notion-code"><div class="notion-code-copy"><div class="notion-code-copy-button"><svg fill="currentColor" viewBox="0 0 16 16" width="1em" version="1.1"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg></div></div><code class="language-go">// MultiError 实现了 Error 接口
type MultiError struct {
    errs []string
}
func (m *MultiError) Add(err error) {
    m.errs = append(m.errs, err.Error())
}
func (m *MultiError) Error() string {
    return strings.Join(m.errs, &quot;;&quot;)
}

func (c Customer) Validate() error {
    var m *MultiError
    if c.Age &lt; 0 {
        m = &amp;MultiError{}
        m.Add(errors.New(&quot;age is negative&quot;))
    }
    if c.Name == &quot;&quot; {
        if m == nil {
            m = &amp;MultiError{}
				}
        m.Add(errors.New(&quot;name is nil&quot;))
    }
    // 按照惯性思维，如果校验通过m也就是个nil，直接返回nil表示没有错误
		return m 
}</code></pre><div class="notion-text notion-block-bf76494c9d83449ab9e40855ff1453ca">执行下面的测试代码会发现，及时满足校验条件返回的error也还是非空的</div><pre class="notion-code"><div class="notion-code-copy"><div class="notion-code-copy-button"><svg fill="currentColor" viewBox="0 0 16 16" width="1em" version="1.1"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg></div></div><code class="language-go">customer := Customer{Age: 33, Name: &quot;John&quot;}
if err := customer.Validate(); err != nil {
    log.Fatalf(&quot;customer is invalid: %v&quot;, err)
}
// output
// 2021/05/08 13:47:28 customer is invalid: &lt;nil&gt;</code></pre><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-800b0b9b7a934b278ba7172676ae6336"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:528px;max-width:100%;flex-direction:column"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%272000%27%20height=%271014%27/%3e"/></span><img alt="notion image" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover;background-size:cover;background-position:0% 0%;filter:blur(20px);background-image:url(&quot;data:image/webp;base64,UklGRjwAAABXRUJQVlA4IDAAAADwAQCdASoQAAgABUB8JaQAAurgKD9x3AAA/u3NQ209sd7kobEFzLnGQKqrhS0EAAA=&quot;)"/><noscript><img alt="notion image" src="https://www.notion.so/image/http%3A%2F%2Ftva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbeyji5l91j31380jwq79.jpg?table=block&amp;id=800b0b9b-7a93-4b27-8ba7-172676ae6336&amp;cache=v2" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover" loading="lazy"/></noscript></span></div></figure><div class="notion-text notion-block-d97623c5ea20420da7968df2bf69cb04"><b>这类属于常见的错误</b>，和for循环中的临时变量的错误差不多，当返回值指针实现了一个接口，即使这个指针为nil，函数返回的时候转化为接口也会被当成非nil的值。</div><div class="notion-text notion-block-10efc21976cd4cb49852e7dba2f6850c">上面的例子可以这样改为正确的：</div><pre class="notion-code"><div class="notion-code-copy"><div class="notion-code-copy-button"><svg fill="currentColor" viewBox="0 0 16 16" width="1em" version="1.1"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg></div></div><code class="language-go">if c.Age &lt; 0 {
    // ...
}
if c.Name == &quot;&quot; {
	// ... 
}
if m != nil {
    return m
}
return nil</code></pre><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-7b984dc8dc024272ada94c52f379e19e" data-id="7b984dc8dc024272ada94c52f379e19e"><span><div id="7b984dc8dc024272ada94c52f379e19e" class="notion-header-anchor"></div><a class="notion-hash-link" href="#7b984dc8dc024272ada94c52f379e19e" title="6.5 #46: Using a filename as a function input（没有考虑好函数参数抽象）"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">6.5 #46: Using a filename as a function input（没有考虑好函数参数抽象）</span></span></h4><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-95aa817477974fda9754b011798d03dc"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%272000%27%20height=%27602%27/%3e"/></span><img alt="notion image" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover;background-size:cover;background-position:0% 0%;filter:blur(20px);background-image:url(&quot;data:image/webp;base64,UklGRj4AAABXRUJQVlA4IDIAAADQAQCdASoQAAUABUB8JaAAAvafQfoV0AD+78sWDrLyYmkRxrzgE4NpKvx72KOV7EugAA==&quot;)"/><noscript><img alt="notion image" src="https://www.notion.so/image/http%3A%2F%2Ftva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbfgp35mn4j31ok0i8qe3.jpg?table=block&amp;id=95aa8174-7797-4fda-9754-b011798d03dc&amp;cache=v2" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover" loading="lazy"/></noscript></span></div></figure><div class="notion-text notion-block-1202634af24f437196b6d5eab1ad9e5e">这一节主要是提醒我们定义函数的时候，要考虑可扩展性，使用一个统一的接口类型作为参数不仅能方便代码测试，也可以提升代码的抽象能力，把所有的数据源(file, http, string) 使用 i<b>o.Reader </b>类型代替，会是一个更好的解决方案。</div><pre class="notion-code"><div class="notion-code-copy"><div class="notion-code-copy-button"><svg fill="currentColor" viewBox="0 0 16 16" width="1em" version="1.1"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg></div></div><code class="language-go">func countEmptyLines(reader io.Reader) (int, error) {
    scanner := bufio.NewScanner(reader)
    for scanner.Scan() {
			// ... 
		}
}</code></pre><h4 class="notion-h notion-h3 notion-h-indent-1 notion-block-9125490b0c7a45d38c3d859ed5fe5852" data-id="9125490b0c7a45d38c3d859ed5fe5852"><span><div id="9125490b0c7a45d38c3d859ed5fe5852" class="notion-header-anchor"></div><a class="notion-hash-link" href="#9125490b0c7a45d38c3d859ed5fe5852" title="6.6 ⚠️ #47: Ignoring how defer arguments and receivers are evaluated（认清defer是如何以及何时计算函数参数）"><svg viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><span class="notion-h-title">6.6 ⚠️ #47: Ignoring how defer arguments and receivers are evaluated（认清defer是如何以及何时计算函数参数）</span></span></h4><ol start="1" class="notion-list notion-list-numbered notion-block-2cafbe04a26849f3b361082f5af80a1f"><li><b>defer调用函数时候常犯的错误</b></li></ol><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-fa2ff6352a884dfb957d2afa862ce8c5"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:576px;max-width:100%;flex-direction:column"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%272000%27%20height=%271123%27/%3e"/></span><img alt="notion image" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover;background-size:cover;background-position:0% 0%;filter:blur(20px);background-image:url(&quot;data:image/webp;base64,UklGRi4AAABXRUJQVlA4ICIAAACwAQCdASoQAAkABUB8JZwAAqy7HuGAAP7v15AMHwVVeAAA&quot;)"/><noscript><img alt="notion image" src="https://www.notion.so/image/http%3A%2F%2Ftva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbfhpe5h8qj31bm0qqk08.jpg?table=block&amp;id=fa2ff635-2a88-4dfb-957d-2afa862ce8c5&amp;cache=v2" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover" loading="lazy"/></noscript></span></div></figure><div class="notion-text notion-block-f503eb280fb14e1889bb7a85be32e039">defer调用函数的时候函数参数使用指针类型</div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-2e5d878fa78c4fccb464479aa86d1b16"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%272000%27%20height=%27561%27/%3e"/></span><img alt="notion image" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover;background-size:cover;background-position:0% 0%;filter:blur(20px);background-image:url(&quot;data:image/webp;base64,UklGRkIAAABXRUJQVlA4IDYAAABwAQCdASoQAAQABUB8JYjcAAATQAD+77jyuQMP2jbYTveq50AuY6N1Q3GZwD/3ZrnyOjSgAAA=&quot;)"/><noscript><img alt="notion image" src="https://www.notion.so/image/http%3A%2F%2Ftva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbfhrmpgepj31jg0fkdnn.jpg?table=block&amp;id=2e5d878f-a78c-4fcc-b464-479aa86d1b16&amp;cache=v2" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover" loading="lazy"/></noscript></span></div></figure><div class="notion-text notion-block-82ae11e5dcf149d9b20fd41ce1864e5c">defer调用函数的时候，把函数放在闭包内，利用闭包引用环境变量的能力。</div><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-bbe2e2d94461458a87f92362931c4382"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%272000%27%20height=%27584%27/%3e"/></span><img alt="notion image" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover;background-size:cover;background-position:0% 0%;filter:blur(20px);background-image:url(&quot;data:image/webp;base64,UklGRj4AAABXRUJQVlA4IDIAAADQAQCdASoQAAUABUB8JYgBTAA8NeXIQAD+78OU52wW6YmUH7YwV9RDqKXA7RgNsAAAAA==&quot;)"/><noscript><img alt="notion image" src="https://www.notion.so/image/http%3A%2F%2Ftva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbfhtu2i9yj31gq0fetg4.jpg?table=block&amp;id=bbe2e2d9-4461-458a-87f9-2362931c4382&amp;cache=v2" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover" loading="lazy"/></noscript></span></div></figure><ol start="1" class="notion-list notion-list-numbered notion-block-1f4535bfdf9e48649eca151098018af8"><li><b>defer执行的是一个方法时，执行结果和receiver的类型有关</b></li></ol><div class="notion-row notion-block-cc4f85775569455ca7affff728834265"><div class="notion-column notion-block-974f9f3a63c142d4999ea9d617649596" style="width:calc((100% - (1 * min(32px, 4vw))) * 0.375)"><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-187dc049a76d495f88f181644f7b7b9c"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%272000%27%20height=%271337%27/%3e"/></span><img alt="notion image" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover;background-size:cover;background-position:0% 0%;filter:blur(20px);background-image:url(&quot;data:image/webp;base64,UklGRjIAAABXRUJQVlA4ICYAAADQAQCdASoQAAsABUB8JaQAAudN9l3YAAD+78PydgI8ckT6lk5AAA==&quot;)"/><noscript><img alt="notion image" src="https://www.notion.so/image/http%3A%2F%2Ftva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbfi4ymcb7j30t60jitbc.jpg?table=block&amp;id=187dc049-a76d-495f-88f1-81644f7b7b9c&amp;cache=v2" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover" loading="lazy"/></noscript></span></div></figure></div><div class="notion-spacer"></div><div class="notion-column notion-block-cb20580c889b4a54b53be39aced5b5f6" style="width:calc((100% - (1 * min(32px, 4vw))) * 0.625)"><figure class="notion-asset-wrapper notion-asset-wrapper-image notion-block-02e5df4e5f5f4df19ac1c9606f17bdf4"><div style="position:relative;display:flex;justify-content:center;align-self:center;width:100%;max-width:100%;flex-direction:column"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%272000%27%20height=%27886%27/%3e"/></span><img alt="notion image" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover;background-size:cover;background-position:0% 0%;filter:blur(20px);background-image:url(&quot;data:image/webp;base64,UklGRioAAABXRUJQVlA4IB4AAAAwAQCdASoQAAcABUB8JaQAA3AA/vCAanqE+6QAAAA=&quot;)"/><noscript><img alt="notion image" src="https://www.notion.so/image/http%3A%2F%2Ftva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbfi59d76cj316w0j0tc9.jpg?table=block&amp;id=02e5df4e-5f5f-4df1-9ac1-c9606f17bdf4&amp;cache=v2" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover" loading="lazy"/></noscript></span></div></figure></div><div class="notion-spacer"></div></div><pre class="notion-code"><div class="notion-code-copy"><div class="notion-code-copy-button"><svg fill="currentColor" viewBox="0 0 16 16" width="1em" version="1.1"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg></div></div><code class="language-go">// 可以把方法转化为下面的形式，会帮助你理解
print(s Struct) vs print(s &amp;Struct)</code></pre><div class="notion-blank notion-block-8ca4e5d930824a64b0856518f422db57"> </div></article><aside class="notion-aside"><div class="notion-aside-table-of-contents"><div class="notion-aside-table-of-contents-header">Table of Contents</div><nav class="notion-table-of-contents"><a href="#ed844a2247fe449db716e380549c489f" class="notion-table-of-contents-item notion-table-of-contents-item-indent-level-0"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:0">关于本书</span></a><a href="#c09840e248f948188db13883f5db1ff0" class="notion-table-of-contents-item notion-table-of-contents-item-indent-level-0"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:0">2. Code and Project organization</span></a><a href="#e0a8cd8ca281437a994af50d4b6dd01d" class="notion-table-of-contents-item notion-table-of-contents-item-indent-level-1"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:16px">2.1 #1 Unintended variable shadowing（变量遮蔽带来的意外行为 ）</span></a><a href="#46fffdc7fd79489d8bae57c56540f464" class="notion-table-of-contents-item notion-table-of-contents-item-indent-level-1"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:16px">2.2 #2 Unnecessary nested code （没有必要的代码嵌套 ）</span></a><a href="#2de22f1ec26342a8a24b8934886ee4d3" class="notion-table-of-contents-item notion-table-of-contents-item-indent-level-1"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:16px">2.3 #3 Misusing init functions（错误使用和理解 init 函数）</span></a><a href="#31919d1e65314b0cbdabfb2f7610dacc" class="notion-table-of-contents-item notion-table-of-contents-item-indent-level-1"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:16px"> 2.4 #4 Overusing getters and setters（过度使用 getters 和 setters）</span></a><a href="#b8c6ac44733149a382b9c7b0c0a2a941" class="notion-table-of-contents-item notion-table-of-contents-item-indent-level-1"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:16px">2.5 #5 Interface pollution （接口污染）</span></a><a href="#bb6f68272a654a52a5c57ae5ce5db014" class="notion-table-of-contents-item notion-table-of-contents-item-indent-level-1"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:16px">2.6 #6 Interface on the producer side （错误的把接口定义在实现端）</span></a><a href="#b23d574302364ec496b3ce0ec09f6bf2" class="notion-table-of-contents-item notion-table-of-contents-item-indent-level-1"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:16px">2.7 #7 Returning interfaces  (返回接口)</span></a><a href="#1f28517b9a5947098d374c4115d23076" class="notion-table-of-contents-item notion-table-of-contents-item-indent-level-1"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:16px">2.8  #8 any says nothing （any 类型表达性很弱）</span></a><a href="#2dcfb4c707654c54b3fd111fdf46c6b9" class="notion-table-of-contents-item notion-table-of-contents-item-indent-level-1"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:16px">2.9 #9: Being confused about when to use generics （不知道何时使用泛型）</span></a><a href="#a085e89c8fc646d4850051f20db77691" class="notion-table-of-contents-item notion-table-of-contents-item-indent-level-1"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:16px">2.10 #10: Not being aware of the possible problems with type embedding （对类型嵌入的使用场景不熟悉）</span></a><a href="#7b034d7ef85845928fbae40e263bdac9" class="notion-table-of-contents-item notion-table-of-contents-item-indent-level-1"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:16px">2.11 #11: Not using the functional options pattern（编写构造函数的时候，使用option模式）</span></a><a href="#c2de3f726e40492aaff5671c585b19ce" class="notion-table-of-contents-item notion-table-of-contents-item-indent-level-1"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:16px">2.12 #12: Project misorganization（推荐的项目组织结构）</span></a><a href="#4acd42d3adff494499d2f5bc52956959" class="notion-table-of-contents-item notion-table-of-contents-item-indent-level-1"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:16px">2.13 #13: Creating utility packages（不推荐使用utility包）</span></a><a href="#5d6cc20f8cf54e4f817885c030f21af2" class="notion-table-of-contents-item notion-table-of-contents-item-indent-level-1"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:16px">2.14 #14: Ignoring package name collisions（忽略包命名冲突）</span></a><a href="#ac6ccfad09e745f49e1b746904705c93" class="notion-table-of-contents-item notion-table-of-contents-item-indent-level-1"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:16px">2.15 #15: Missing code documentation（完善代码文档）</span></a><a href="#8a8d6c2e323a447f8ea9ed86272f6540" class="notion-table-of-contents-item notion-table-of-contents-item-indent-level-1"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:16px">2.16 #16: Not using linters（不使用linters）</span></a><a href="#ba2d26c542004a8c8284231f1fd990c8" class="notion-table-of-contents-item notion-table-of-contents-item-indent-level-0"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:0">3 Data types</span></a><a href="#e8b2f3c0be404fbebfede6eb3a6e7676" class="notion-table-of-contents-item notion-table-of-contents-item-indent-level-1"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:16px">3.1 #17: Creating confusion with octal literals（混淆八进制）</span></a><a href="#0c7a19f6a54b48638cf51878afdd6c72" class="notion-table-of-contents-item notion-table-of-contents-item-indent-level-1"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:16px">3.2 #18 Neglecting integer overflows（忽略整数溢出）</span></a><a href="#617d6e24d3a245d2a02e8d93a962f37e" class="notion-table-of-contents-item notion-table-of-contents-item-indent-level-1"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:16px">3.3 #19: Not understanding floating points（对浮点数理解欠缺）</span></a><a href="#e059e418961648c8950d8a4670a838b2" class="notion-table-of-contents-item notion-table-of-contents-item-indent-level-1"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:16px">3.4 #20: Not understanding slice length and capacity（不理解切片len和cap）</span></a><a href="#352a530d4326416690afe968cb0e2a09" class="notion-table-of-contents-item notion-table-of-contents-item-indent-level-1"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:16px">3.5 #21: Inefficient slice initialization（低效的切片初始化）</span></a><a href="#75ea9e9acc0b4aab9054b0152cb9b967" class="notion-table-of-contents-item notion-table-of-contents-item-indent-level-1"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:16px">3.6 #22: Being confused about nil vs. empty slices（区分nil和empty切片）</span></a><a href="#a73519eb2d01415b94c6470feee97f66" class="notion-table-of-contents-item notion-table-of-contents-item-indent-level-1"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:16px">3.7 #23: Not properly checking if a slice is empty（判断切片为空）</span></a><a href="#c12f5559af37470ebf1c7975658e8fda" class="notion-table-of-contents-item notion-table-of-contents-item-indent-level-1"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:16px">3.8 #24: Not making slice copies correctly（没有正确的复制切片）</span></a><a href="#ea0f537e7bae4efb9231bc9a8da00ff5" class="notion-table-of-contents-item notion-table-of-contents-item-indent-level-1"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:16px">3.9 #25: Unexpected side effects using slice append（使用切片append时产生的副作用-s[low:high:max]用法）</span></a><a href="#e2ff524807c24bc3aaa4be0a7662234a" class="notion-table-of-contents-item notion-table-of-contents-item-indent-level-1"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:16px">3.10 #26: Slices and memory leaks（切片的内存泄露）</span></a><a href="#769b6782f5284aeea4ced4db1a34ef90" class="notion-table-of-contents-item notion-table-of-contents-item-indent-level-1"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:16px">3.11 #27: Inefficient map initialization（低效的map初始化）</span></a><a href="#dbd9077de8df4546abacad3aa22c6477" class="notion-table-of-contents-item notion-table-of-contents-item-indent-level-1"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:16px">3.12 #28: Maps and memory leaks（map类型的内存泄露，map中的值建议使用指针类型）</span></a><a href="#85f163fea8e6422a9ad0614404297b56" class="notion-table-of-contents-item notion-table-of-contents-item-indent-level-1"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:16px">3.13 #29: Comparing values incorrectly（错误的对比值）</span></a><a href="#f5e7e9d1a8b84914b75ba07824222c18" class="notion-table-of-contents-item notion-table-of-contents-item-indent-level-0"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:0">4 Control structures</span></a><a href="#f78ef2507ea64ebda88578bfb188720c" class="notion-table-of-contents-item notion-table-of-contents-item-indent-level-1"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:16px">4.1 #30: Ignoring the fact that elements are copied in range loops（range loop中的值为副本）</span></a><a href="#0ec49291cf7741b3984d1eebb74f911e" class="notion-table-of-contents-item notion-table-of-contents-item-indent-level-1"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:16px">4.2 #31: Ignoring how arguments are evaluated in range loops（忽略rang的对象是何时被计算）</span></a><a href="#256122a4f4fa4bd3af846eac1e3323a2" class="notion-table-of-contents-item notion-table-of-contents-item-indent-level-1"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:16px">4.3 #32: Ignoring the impact of using pointer elements in range loops （错误的引用range loop的生成值）</span></a><a href="#fae14f22a6ec483c9cb5ac66f8c4ce71" class="notion-table-of-contents-item notion-table-of-contents-item-indent-level-1"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:16px">4.4 #33: Making wrong assumptions during map iterations（在迭代map的时候做出了错误的假设）</span></a><a href="#a37d28ed50364587aad0ca8cfd70ef57" class="notion-table-of-contents-item notion-table-of-contents-item-indent-level-1"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:16px">4.5 #34: Ignoring how the break statement works（不明确break语句是如何工作-break label的使用）</span></a><a href="#9609fee749354b738f3eb4d50e02443f" class="notion-table-of-contents-item notion-table-of-contents-item-indent-level-1"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:16px">4.6 #35: Using defer inside a loop（在loop循环中使用defer语句）</span></a><a href="#0ac3c7e80693424bb7b6e7b7028418f1" class="notion-table-of-contents-item notion-table-of-contents-item-indent-level-0"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:0">5 Strings</span></a><a href="#e5a1574ebfd04d30b8343e3a52ed0661" class="notion-table-of-contents-item notion-table-of-contents-item-indent-level-1"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:16px">5.1 #36: Not understanding the concept of a rune（不理解rune的概念）</span></a><a href="#953e1180dc6f403887c25f69437920da" class="notion-table-of-contents-item notion-table-of-contents-item-indent-level-1"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:16px">5.2 #37: Inaccurate string iteration（错误的迭代string-当string中的字符并非单字节Utf-8编码时）</span></a><a href="#c0419f58e4c24e799750d05a19e86791" class="notion-table-of-contents-item notion-table-of-contents-item-indent-level-1"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:16px">5.3 #38: Misusing trim functions（错误使用 trim 函数）</span></a><a href="#1e2ca2f38db1402d8ea160ad3d73a3e9" class="notion-table-of-contents-item notion-table-of-contents-item-indent-level-1"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:16px">5.4 #39: Under-optimized string concatenation（如何高效的字符串拼接-strings.Builder）</span></a><a href="#84dfa1f12f634fcbb96ac0ac62955f50" class="notion-table-of-contents-item notion-table-of-contents-item-indent-level-1"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:16px">5.5 #40: Useless string conversions（无用的字符串转换）</span></a><a href="#154068f6cadf483c9f1661d556177b44" class="notion-table-of-contents-item notion-table-of-contents-item-indent-level-1"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:16px">5.6 #41: Substrings and memory leaks（子字符串和内存泄露-Consistent with #26）</span></a><a href="#c4ca192b03ed4bde926d3820dcf9f3c4" class="notion-table-of-contents-item notion-table-of-contents-item-indent-level-0"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:0">6 Functions and methods</span></a><a href="#11fc98b59f9941b8bfbd791bbc25ecb2" class="notion-table-of-contents-item notion-table-of-contents-item-indent-level-1"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:16px">6.1 #42: Not knowing which type of receiver to use（不知道receiver应该使用什么样的类型）</span></a><a href="#1798d9f181864c11a088407a5e612a35" class="notion-table-of-contents-item notion-table-of-contents-item-indent-level-1"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:16px">6.2 #43: Never using named result parameters （“永远”不要使用命名结果参数）</span></a><a href="#a3b6e59751234c97b772f11ae6dbce42" class="notion-table-of-contents-item notion-table-of-contents-item-indent-level-1"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:16px">6.3  #44: Unintended side effects with named result parameters （使用命名参数可能会出现意向不到的副作用）</span></a><a href="#3bff938459694c3ea2a7b654a8926c06" class="notion-table-of-contents-item notion-table-of-contents-item-indent-level-1"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:16px">6.4 ⚠️ #45: Returning a nil receiver（返回了一个nil的值，该值的指针类型实现了某一接口）</span></a><a href="#7b984dc8dc024272ada94c52f379e19e" class="notion-table-of-contents-item notion-table-of-contents-item-indent-level-1"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:16px">6.5 #46: Using a filename as a function input（没有考虑好函数参数抽象）</span></a><a href="#9125490b0c7a45d38c3d859ed5fe5852" class="notion-table-of-contents-item notion-table-of-contents-item-indent-level-1"><span class="notion-table-of-contents-item-body" style="display:inline-block;margin-left:16px">6.6 ⚠️ #47: Ignoring how defer arguments and receivers are evaluated（认清defer是如何以及何时计算函数参数）</span></a></nav></div></aside></div><div class="styles_comments__YEupF"><div><p>Loading Comments...</p></div></div></main><footer class="styles_footer__RBpyk"><div class="styles_copyright__nhL_k">Copyright 2022 <!-- -->yangsoon</div><div class="styles_settings__GyEhi"></div><div class="styles_social__ptL3p"><a class="styles_github__0JN7a" href="https://yangsoon.github.io" title="YangSoon @yangsoon.github.io" rel="noopener noreferrer"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M8 3.293l6 6V13.5a1.5 1.5 0 01-1.5 1.5h-9A1.5 1.5 0 012 13.5V9.293l6-6zm5-.793V6l-2-2V2.5a.5.5 0 01.5-.5h1a.5.5 0 01.5.5z" clip-rule="evenodd"></path><path fill-rule="evenodd" d="M7.293 1.5a1 1 0 011.414 0l6.647 6.646a.5.5 0 01-.708.708L8 2.207 1.354 8.854a.5.5 0 11-.708-.708L7.293 1.5z" clip-rule="evenodd"></path></svg></a><a class="styles_github__0JN7a" href="https://github.com/yangsoon" title="GitHub @yangsoon" target="_blank" rel="noopener noreferrer"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 496 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></a><a class="styles_zhihu__Z7IC7" href="https://zhihu.com/people/yangsoon" title="Zhihu @yangsoon" target="_blank" rel="noopener noreferrer"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 640 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M170.54 148.13v217.54l23.43.01 7.71 26.37 42.01-26.37h49.53V148.13H170.54zm97.75 193.93h-27.94l-27.9 17.51-5.08-17.47-11.9-.04V171.75h72.82v170.31zm-118.46-94.39H97.5c1.74-27.1 2.2-51.59 2.2-73.46h51.16s1.97-22.56-8.58-22.31h-88.5c3.49-13.12 7.87-26.66 13.12-40.67 0 0-24.07 0-32.27 21.57-3.39 8.9-13.21 43.14-30.7 78.12 5.89-.64 25.37-1.18 36.84-22.21 2.11-5.89 2.51-6.66 5.14-14.53h28.87c0 10.5-1.2 66.88-1.68 73.44H20.83c-11.74 0-15.56 23.62-15.56 23.62h65.58C66.45 321.1 42.83 363.12 0 396.34c20.49 5.85 40.91-.93 51-9.9 0 0 22.98-20.9 35.59-69.25l53.96 64.94s7.91-26.89-1.24-39.99c-7.58-8.92-28.06-33.06-36.79-41.81L87.9 311.95c4.36-13.98 6.99-27.55 7.87-40.67h61.65s-.09-23.62-7.59-23.62v.01zm412.02-1.6c20.83-25.64 44.98-58.57 44.98-58.57s-18.65-14.8-27.38-4.06c-6 8.15-36.83 48.2-36.83 48.2l19.23 14.43zm-150.09-59.09c-9.01-8.25-25.91 2.13-25.91 2.13s39.52 55.04 41.12 57.45l19.46-13.73s-25.67-37.61-34.66-45.86h-.01zM640 258.35c-19.78 0-130.91.93-131.06.93v-101c4.81 0 12.42-.4 22.85-1.2 40.88-2.41 70.13-4 87.77-4.81 0 0 12.22-27.19-.59-33.44-3.07-1.18-23.17 4.58-23.17 4.58s-165.22 16.49-232.36 18.05c1.6 8.82 7.62 17.08 15.78 19.55 13.31 3.48 22.69 1.7 49.15.89 24.83-1.6 43.68-2.43 56.51-2.43v99.81H351.41s2.82 22.31 25.51 22.85h107.94v70.92c0 13.97-11.19 21.99-24.48 21.12-14.08.11-26.08-1.15-41.69-1.81 1.99 3.97 6.33 14.39 19.31 21.84 9.88 4.81 16.17 6.57 26.02 6.57 29.56 0 45.67-17.28 44.89-45.31v-73.32h122.36c9.68 0 8.7-23.78 8.7-23.78l.03-.01z"></path></svg></a><a class="styles_twitter__3YoqL" href="https://twitter.com/yangsoonlx" title="Twitter @yangsoonlx" target="_blank" rel="noopener noreferrer"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg></a></div></footer></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"site":{"domain":"yangsoon.github.io","name":"YangSoon","rootNotionPageId":"72a669717cf642c2a2524439d99d8f44","rootNotionSpaceId":null,"description":"YangSoon, Cloud Native Developer"},"recordMap":{"block":{"db80f497-e22c-4bff-bdcb-0ac06b5c4528":{"role":"reader","value":{"id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","version":1808,"type":"page","properties":{"Zr\u003cq":[["golang"]],"title":[["100 Go Mistakes and How to Avoid Them - 1"]]},"content":["ed844a22-47fe-449d-b716-e380549c489f","50c109cb-7b01-4be7-87e9-9cee7c62c61a","c09840e2-48f9-4818-8db1-3883f5db1ff0","b58b16be-26d8-4b5d-81f6-80a630f44e0e","3381720f-1fac-4996-9c13-daceb413394c","f1b01222-efae-4667-aee1-ba2282e17059","716c8d0f-deeb-4c25-925e-3bc48f09622f","e0a8cd8c-a281-437a-994a-f50d4b6dd01d","ea523e78-a4f2-47d6-84fd-a79eb4dfceca","590ae368-eec1-48db-83c4-30a0116582ef","667ba7dc-d0ec-4b2c-813e-de53718f6094","6375a534-b72a-4f0d-82cb-4f86a2f8cc62","46fffdc7-fd79-489d-8bae-57c56540f464","a75d0f96-6835-4a64-958d-59682ddd914c","89de5eb9-f72c-4343-8ae7-42525d8b94fd","5d7fbbb8-2987-4f5b-9248-3322384045e3","380c1088-8419-4dbd-b6cb-9bba2e9672a7","82b2f078-b032-4950-ae20-41100cc1308a","51914de0-b4c6-4fcd-b3bb-8d73e95493ef","3e0e20b4-4815-438a-9351-acada3e14511","accc59b4-c433-40b3-a4b9-dccd21760e44","9378d796-8fb2-46c1-b17b-a4a03e467d30","efca4439-8355-41a4-931e-b2fe1a54b904","a2aca5a6-2817-47a3-bc39-a2437aff8b3a","d8cf60a1-ffdf-4d0c-abc9-06b56f6e7021","e35e1247-da64-4302-941d-95849024ddfd","19560b4f-87c0-4f08-acfd-29b322440e00","cc507eaf-d030-42da-a50f-2d748bf5009d","00f36e76-430e-4a08-a2f7-3bf9972f453b","2de22f1e-c263-42a8-a24b-8934886ee4d3","75312713-bdeb-43da-b1c3-b63b438c8955","a07f4142-bb01-4cb9-a176-bb53d8c02c9e","d919c7ec-3650-4c9f-9c3d-1a5192bed396","179d05ab-90c6-4634-85a9-c53a44bba621","2203bc7d-520b-4f4a-841d-ae5d677eadec","968dbfe1-f3b3-456f-8cb0-55c7a5460eb5","1731b540-8476-4572-b675-c5105de7d33e","5f8a357b-75a2-4a00-a94e-cfa5b77abce9","c3451800-03c8-42d4-b438-8ced8e4baf18","31919d1e-6531-4b0c-bdab-fb2f7610dacc","2eb5e2a8-f65e-413f-9396-770c0c55fd1b","0e302893-a0d2-4f97-aacc-2efc6f8e8bc2","d3abc660-7674-4bbc-82d4-d6db2e41101f","c117f0fe-5223-4ad5-872c-3b69d4d5cb1b","987432dd-4a68-4ed3-b552-2e61d1be8422","b33ab293-4877-471f-a254-b67531f3231e","b8c6ac44-7331-49a3-82b9-c7b0c0a2a941","44bd4fb8-da45-4486-bb3d-48ae78914eaa","d2e36cae-64f8-4ea6-8bc6-46ca9105dcfb","2eafac0e-a4e7-4825-bf38-09653986a5f6","279673a5-1ca0-42b2-9304-f0826196942e","d86d41b8-8395-44f0-b082-4b5ddb1e1dcd","2193418d-1e29-4c75-b2cf-1a9e541f340d","e781ed43-f235-474e-a4c0-17b4fa34c83a","6763d338-aff4-4abe-8f49-2a92d479d231","ebba10a9-8a9e-4fef-bc17-0e1bd2aab18f","63946b3a-0a2e-41bf-848e-4f6987dee9a3","7cbfc990-74eb-4ab3-9f3e-2d711975a91d","a32a3e73-962d-41b5-a5c7-3b4878e5625b","ba888732-2ef3-406d-9101-67aa9c1fe779","286f8e95-1c4d-4612-98c7-1b31601436e6","199a5130-f9dc-4bc1-aa0d-2ed40ac76de5","a57c3dba-cc4a-4d27-84b3-a9dc4413a9b4","bb6f6827-2a65-4a52-a5c5-7ae5ce5db014","5232f2f1-38a9-458f-a6e4-9f328f335da8","077ccb01-e80a-4046-a31d-d90f5a2400f2","0ec99a5f-23b7-4dbc-ae74-71d984e1d2c1","db349756-ebcb-40e7-8344-381303805881","b23d5743-0236-4ec4-96b3-ce0ec09f6bf2","e9db0a94-341d-4064-aa5b-e056f2caca70","689134f0-4be8-4fb1-aa3e-f3d4be533bf3","76b6a3db-4868-47db-a698-f533625825ab","75e1db82-4b5f-4f99-9485-794b1d9ac083","745f86ff-abac-4dc0-aa59-34dcd91ec019","261d4ee9-5809-42a4-9a45-68b93eb42e5c","7d5fd879-40e0-4a52-b728-6c4c4fdd6f89","0f2574e8-e836-4047-853e-e22ac77b1ad7","2d1f81e8-1dda-475c-b2db-da4336d20e6e","1f28517b-9a59-4709-8d37-4c4115d23076","356490de-f366-4725-a0cd-2f60174e386e","2dcfb4c7-0765-4c54-b3fd-111fdf46c6b9","eca85853-6427-4c0e-9e99-f8b3202ba13e","225a6224-d5f4-406e-9637-b83a42461120","233c9bfc-98cf-4f4d-a8dc-38f9587c3682","9bfff5a2-b613-484c-ae12-504898ba4417","897cf90e-31b6-48ab-b06e-a5e406bbbdd9","49afa39a-a401-4f7a-89d3-524bd7d6c96a","97c53b17-0084-4396-b349-dec208a815ff","b4f5a2cb-7467-49d0-b505-126c905ab7dc","a8d5c024-37c0-44cf-b0cd-2d1bdfee0529","30b3e19e-5a34-49d1-a935-19ffd889331f","68028f34-8e6d-4814-ac6b-bd8a9bcdc24d","a230f488-c92e-4ed4-926b-092e3df7c061","a085e89c-8fc6-46d4-8500-51f20db77691","5e3ec5ed-e79f-4a2e-a71c-ddd222c731a4","101a15a9-cb96-493f-baac-a8554a066029","7b034d7e-f858-4592-8fba-e40e263bdac9","687b1372-ba49-4717-b443-0cece509c35f","29eb9559-b6a3-4841-aa47-0aa955977f34","ffb64d53-0d19-499e-9c53-92c42e2cfcc7","e29240e4-0c0a-4ae9-896d-c20a88fd6987","a1949e3b-2690-4b58-8c93-eee956520e01","0d6c8f7d-efe1-4500-9fbe-5884a71cdd84","2363de2c-05cc-44ab-9def-44e215fcbb21","7eb5dca6-dda8-4bdc-bcc6-74063ebd43e5","3d2bc34b-1e19-45ef-b7a8-337817df896e","b0dcbae6-9340-4206-ab30-efcc66f2c133","cd0cef2a-4674-4d77-a166-43a3de853b04","f88bc03a-930c-4628-a40b-77c3749f2698","64ca2bf0-c9c9-4102-b315-424d95d397d2","f2595135-32e8-43f6-b571-3b3890799865","e39eeb25-a658-47b9-8bc8-5e2f019f7383","4732007d-9b87-4515-b103-7ee0c00d8521","9cf14437-0959-4169-89ab-2ce44e135eae","529346ab-ee48-4618-8323-78a45a8823b4","7b03da77-c12f-4f5b-aa92-47e0be234934","a90512ec-c922-4f5d-a22f-ab714a41fd8f","8bda3954-6b7e-426b-86a4-1a11a7ade791","3d14694c-cc23-4a39-8977-1c475be6c3f1","9570a370-c6af-4c42-b058-f01cc96bf734","c2de3f72-6e40-492a-aff5-671c585b19ce","1d5e5afe-6037-4e13-94dc-2da679391a66","c230c158-c326-4a47-9e00-b7138d74b096","4acd42d3-adff-4944-99d2-f5bc52956959","387067a6-8916-477e-b183-be6c3475ffff","f30c7126-9626-4799-a8b0-0fd7895e6c7e","5d6cc20f-8cf5-4e4f-8178-85c030f21af2","f5d2f097-0f1e-498a-a685-d4c1261b2c1e","7aae9a0f-5fc7-4af8-becb-1d841ff857c2","f804aa2a-0103-496a-a8b9-4fb17c489a44","aaed1069-5667-477e-8848-9060b9cfad0c","12b6de2e-b158-44a5-a304-f59f10b04143","e8115cf1-682a-4bce-8cbf-e61781596389","ac6ccfad-09e7-45f4-9e1b-746904705c93","6c1001d5-dfde-43ac-92d8-e5d19f682e59","8a8d6c2e-323a-447f-8ea9-ed86272f6540","ff1a2b24-92e5-4586-a06c-2cf3d8879ed2","ba2d26c5-4200-4a8c-8284-231f1fd990c8","e8b2f3c0-be40-4fbe-bfed-e6eb3a6e7676","7c3ae5b0-c459-473e-8a87-e8e6962ed3c8","99247f40-1346-4c0b-81a0-9ef5c76fe9a6","e93a484e-ae21-47b3-89f0-ed91637307fe","77e494a1-82bc-48ab-9634-323077398c25","d1720e0e-0f36-482b-998f-684f40120ada","fcd9efcf-783c-4f5d-9d68-bedf778e1741","9ea7be39-3528-4d0f-8c37-0f049f8290cc","ea240d20-f374-4ced-be25-71db0a86d13e","0c7a19f6-a54b-4863-8cf5-1878afdd6c72","d0c9d9f1-48c7-4d4e-938b-793ec0712844","7718176b-4cbe-43e0-a7c3-8442b6e18bd6","617d6e24-d3a2-45d2-a02e-8d93a962f37e","c02382ca-3519-447b-9c35-61ed422c2b43","7395c8c0-3d1d-4449-a45c-301f9f3e47f2","17d0eed2-78da-48c6-9fe4-877c0bb97c7e","38436952-2d35-4bf2-afef-ae872fc393b6","1954be76-b441-4967-8ae8-64ace383fb24","f556ec3c-6418-424c-a51c-1ee5c2484352","c5946f5e-b732-4ef7-bc7f-6e94f3da5bed","9a3209f0-b293-4c53-99e8-2a05e4c51591","736ceb66-4f7f-4f61-b5d7-b0501df5bedf","5c759594-d836-418f-892e-d3e7fd5b2170","e977b333-7ac5-4566-b5b4-da25ca627f8c","73e7c288-44ad-40e7-b912-686a5197f9df","c2be2616-4eee-4743-83d9-a288f2f52672","e5be9e62-168a-4996-82f9-0dedb586db6e","e059e418-9616-48c8-950d-8a4670a838b2","93c758f0-2d9d-4773-9d92-4a89f61d1563","ca26df1a-a2d8-4b19-bb42-a06295625c9a","352a530d-4326-4166-90af-e968cb0e2a09","36f23040-dd44-41c0-b76d-192112cc6531","28c39cfd-83ed-428a-9468-717ac1296f10","75ea9e9a-cc0b-4aab-9054-b0152cb9b967","5cb4a6bb-ac47-4c9c-b9ce-408efceef4e8","cd4f2b90-c391-4808-a9dd-94c686cd705d","c58b397d-ef2f-4489-9172-e12b3150e165","a73519eb-2d01-415b-94c6-470feee97f66","2a321e34-25dd-4ea7-b13c-e35b57254f22","c12f5559-af37-470e-bf1c-7975658e8fda","75b8938a-8cd2-44f9-95b3-c5cf431d2b13","b524da49-ebe5-467c-ab72-8d2d706b2cb7","ea0f537e-7bae-4efb-9231-bc9a8da00ff5","768162d1-b71d-417d-a694-742245852ba6","1103f1d0-cde4-4546-a6f7-d011e2a8f05b","1f95b6f1-ff97-4a54-89dd-7395119f65f0","e2ff5248-07c2-4bc3-aaa4-be0a7662234a","57ce84a6-6a8d-4994-9397-8909a017c078","98c47f40-fde2-4a2d-b9e7-52f47b94f70c","769b6782-f528-4aee-a4ce-d4db1a34ef90","faaf32bb-8294-4233-b9db-5026e7696a98","15042698-9bdb-44b5-b6e1-c89b1df18f1b","62e7b5ff-db7d-4e99-b559-ed5fdf209377","5302d800-7df6-453d-9329-206eff1f7eb3","4e710b13-3da9-4ad2-a208-19734e7a3dc2","86548953-b93e-423f-8e3b-a7277e4a75fd","7148b04f-a2a2-4c42-bc95-3bcc235a9d66","dbd9077d-e8df-4546-abac-ad3aa22c6477","d0fe65f3-31b5-47d7-8f6f-0678b9c1242b","a0a71e19-0be7-47f7-9ca0-c0402acecce9","8864a47d-c49e-49ff-8b06-40f593d6619e","81de24b2-5e9a-4f0e-b460-6d3ff759d0ff","a86b4b41-c583-40b5-8ec1-bc6a437b07d8","0f97c85b-92f3-4ab5-a412-293e12d70823","96e7f28b-4eee-4dc7-b30c-60b7b18760d9","1c046974-a92a-4b97-b1b9-8d3fd57a8160","d95a1b1e-6100-44f8-9e5d-2e4d5314fd7f","dfd75c6b-7aa2-4d95-8590-7550720dfd52","85f163fe-a8e6-422a-9ad0-614404297b56","e29bbc97-38ba-44bd-a807-4fe7adb6d43e","ec026dd4-dbce-438a-9eb4-794e8b8a1b77","f5e7e9d1-a8b8-4914-b75b-a07824222c18","f78ef250-7ea6-4ebd-a885-78bfb188720c","de537daf-f654-488c-932c-d8117ac58f29","273461ce-81fc-4893-a0e6-38e99ac6f396","0ec49291-cf77-41b3-984d-1eebb74f911e","af867877-d196-4b99-97f4-ee96778e83d1","6fe82d12-380a-4fe0-a7fa-f48322e68255","d88435b1-013e-4ebb-aa0f-1e611888dc56","bb48638e-4b22-4700-8006-b5169145562c","6c7c0ad4-7e41-4c56-8714-6391d3727965","256122a4-f4fa-4bd3-af84-6eac1e3323a2","f949c026-933a-4971-a0be-88796a580e55","9a8d1ef1-9f61-4351-919c-4b6413764fe2","85e2bdbe-87d9-4082-87bd-9e1c9b8b00c5","fae14f22-a6ec-483c-9cb5-ac66f8c4ce71","eb4d7c7a-cf40-454c-a1a1-d268bc56ed22","11e26bf9-8f15-4ac7-aa81-d5d0887e0b96","a37d28ed-5036-4587-aad0-ca8cfd70ef57","c76ed8ef-97e0-4f40-bc55-025a8c5becd1","96ee4d97-a382-497f-b1f0-87a7ef5c99eb","9609fee7-4935-4b73-8f3e-b4d50e02443f","bb4199a9-e309-4889-94c9-7668a56185de","5be3e127-fbc9-49bd-b19f-99e2f58e628e","b06a79ce-cd55-46b6-8c52-8ece057207d5","9d04ad07-e867-411c-88a6-dec1001ad0bd","0ac3c7e8-0693-424b-b7b6-e7b7028418f1","e5a1574e-bfd0-4d30-b834-3e3a52ed0661","f52fa7c8-77dd-4028-bd3f-c695034589ce","bde7509b-5f50-467d-8f03-3ccc8389cafc","b19c1702-adf5-43ee-a3dd-66683e23d32a","c5d10ace-1981-4c7f-a687-1144b7995555","0621e0e9-d8dc-480d-8e71-1dc7be50459d","953e1180-dc6f-4038-87c2-5f69437920da","29e66b77-b924-4bf5-8943-3cb9fabba638","fd653c88-4f19-47f9-8f5e-25ac7190e8bc","6ba2d867-315c-4bfa-aec2-40c58205301b","555f2471-b815-4f90-93d0-7d48de751dbf","c0419f58-e4c2-4e79-9750-d05a19e86791","2c745b4b-64e9-4372-b79d-106c226bbe3c","1e2ca2f3-8db1-402d-8ea1-60ad3d73a3e9","25ed213b-e543-4528-af90-8a26b9779bde","9409d722-3bd4-4592-bb37-da8eb627ef24","84dfa1f1-2f63-4fcb-b96a-c0ac62955f50","1a706965-a701-4cfa-8dc8-219b6730b670","154068f6-cadf-483c-9f16-61d556177b44","6356e40e-131e-4d96-9a5f-3dee0881691f","5d4bffd9-193f-48ed-8ae2-9878c6daf396","c4ca192b-03ed-4bde-926d-3820dcf9f3c4","11fc98b5-9f99-41b8-bfbd-791bbc25ecb2","2849d072-81ed-46dd-9d69-90d7919929e8","402c93ff-d0a3-45e7-b154-451d85baaa95","54c48b4d-85b4-4412-bbe4-fd2fc48600f9","f401b0cc-750b-4a53-b09f-0a7f556a7e71","4b57a030-26f3-43ee-95f0-3fae8e921799","2de9bef5-15b9-49fe-81f6-c132fa703c36","01fe8c81-5d8e-4875-896e-50c273841001","d3afb4c7-fd13-4bd6-9a18-421d1cb5c79c","b949f0ef-fae5-4a03-bf5f-ae1edbf6a6a2","9477946e-75e9-4232-b34b-e5269f6874e7","53fe7fc4-1d27-4417-ab7d-c7ba6071e1aa","6cd64a51-5a4d-4db6-ae43-886088baedad","9590d5e3-b8a8-4752-a2f2-4079264d28b2","2b37c979-b118-414e-b6e0-b8bb644eb989","55cc7616-5144-47a7-8ab1-323453d72555","64759c04-adff-43e2-96ee-de5ea6027ed1","b9f20bad-1efd-45eb-9241-09f322a37dd2","9370b8ad-5e7f-469c-bb0c-cf16866fbc9d","cc710adf-6804-43e4-8075-603ce11d1f60","1798d9f1-8186-4c11-a088-407a5e612a35","59ffc07d-9777-4c9c-a3e7-b5a4f49d4490","0738c673-eb20-40fe-9c87-be60dff3df6b","aed780b2-3d2a-4188-8b91-5563dba2e602","14be64d8-c897-43f9-bff1-6c77f779ead7","07826ba2-d6d9-4249-a2cf-33d4a74492d7","a3b6e597-5123-4c97-b772-f11ae6dbce42","ad06a59b-eb3d-432f-a540-ae81b29afe7c","dace7562-4fe1-4ef5-aa83-32021727c384","3bff9384-5969-4c3e-a2a7-b654a8926c06","48e17fd6-e2bf-4bcd-8c25-1cea4e57ed13","bf76494c-9d83-449a-b9e4-0855ff1453ca","c58511f9-21a8-4851-970c-aeef2a015e73","800b0b9b-7a93-4b27-8ba7-172676ae6336","d97623c5-ea20-420d-a796-8df2bf69cb04","10efc219-76cd-4cb4-9852-e7dba2f6850c","4f2c986a-90cb-4cf2-b7f9-26712753b8c9","7b984dc8-dc02-4272-ada9-4c52f379e19e","95aa8174-7797-4fda-9754-b011798d03dc","1202634a-f24f-4371-96b6-d5eab1ad9e5e","2d807ac4-3df7-4a6a-867e-2ecc512cec96","9125490b-0c7a-45d3-8c3d-859ed5fe5852","2cafbe04-a268-49f3-b361-082f5af80a1f","fa2ff635-2a88-4dfb-957d-2afa862ce8c5","f503eb28-0fb1-4e18-89bb-7a85be32e039","2e5d878f-a78c-4fcc-b464-479aa86d1b16","82ae11e5-dcf1-49d9-b20f-d41ce1864e5c","bbe2e2d9-4461-458a-87f9-2362931c4382","1f4535bf-df9e-4864-9eca-151098018af8","cc4f8577-5569-455c-a7af-fff728834265","774ff22f-b900-4dc0-a7a1-c3d0d59c4a6b","8ca4e5d9-3082-4a64-b085-6518f422db57"],"format":{"page_icon":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/425f0231-9af0-4f62-a9f7-f9f567cfe460/golang_logo_icon_171073.png","page_cover":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/47263733-11bc-4ae7-9e1e-c3401a49c171/Manning.100.Go.Mistakes.and.How.to.Avoid.Them.2022-1%EF%BC%88%E6%8B%96%E7%A7%BB%E9%A1%B9%E7%9B%AE%EF%BC%89.png","page_full_width":false,"page_cover_position":0.6714},"created_time":1667651040000,"last_edited_time":1677505799423,"parent_id":"89829c97-9e4b-43b0-b37c-457a3da9ad96","parent_table":"collection","alive":true,"file_ids":["091acf41-baa0-415c-b759-ccc9503d287d","9b86af0c-f3a8-4fa6-9f93-39a51e31dc58","47263733-11bc-4ae7-9e1e-c3401a49c171","59a72c98-21b4-4bf9-840c-078088d5202e","8a428e1a-1bba-4e86-94d5-f0619df83ea5","425f0231-9af0-4f62-a9f7-f9f567cfe460"],"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"e7596c25-bafa-4ece-94b6-e7973c7a2ab3":{"role":"reader","value":{"id":"e7596c25-bafa-4ece-94b6-e7973c7a2ab3","version":49,"type":"collection_view","view_ids":["11f62eb2-ba92-4ffd-91b4-c964b8cedfeb"],"collection_id":"89829c97-9e4b-43b0-b37c-457a3da9ad96","format":{"collection_pointer":{"id":"89829c97-9e4b-43b0-b37c-457a3da9ad96","table":"collection","spaceId":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"},"copied_from_pointer":{"id":"4176c3f0-95d8-4ac1-9df1-7f705120857b","table":"block","spaceId":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"created_time":1667525160616,"last_edited_time":1677290922625,"parent_id":"72a66971-7cf6-42c2-a252-4439d99d8f44","parent_table":"block","alive":true,"copied_from":"4176c3f0-95d8-4ac1-9df1-7f705120857b","created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"72a66971-7cf6-42c2-a252-4439d99d8f44":{"role":"reader","value":{"id":"72a66971-7cf6-42c2-a252-4439d99d8f44","version":612,"type":"page","properties":{"title":[["流心家的羊"]]},"content":["393dcf2e-3358-490d-a8e7-ef0eb89e8dcb","23b11c7c-8146-4639-912c-14406e078331","416b3867-4b4b-4ac0-bc8e-196792a57c07","fec36412-bc7e-4ec3-972d-b67b1ddd20f8","8b4d1555-cb50-45a3-a875-87242a4548bb","4176c3f0-95d8-4ac1-9df1-7f705120857b","1118fa3e-20b3-488c-976d-3346081fde80","e7596c25-bafa-4ece-94b6-e7973c7a2ab3","20cd31e6-ea32-4c1b-b7ef-c70749c2f4cb","ab7c7afa-73c5-4b21-9759-89a9dee4d7e8","82aad922-cb77-4452-81bf-56f4e8e5a408"],"format":{"page_icon":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/37907dd5-3c76-4966-a419-daa027a84972/IMG_2189.jpg","page_full_width":false,"page_small_text":false,"copied_from_pointer":{"id":"bd32b787-e471-49f3-8941-174a9c6846b6","table":"block","spaceId":"bb9288f4-efb5-417f-bf44-1a79fa04feb1"}},"permissions":[{"role":"editor","type":"user_permission","user_id":"d1805983-7869-451d-bf8b-64135a5d4ee7"},{"role":"reader","type":"public_permission","added_timestamp":1660963691744,"allow_duplicate":false}],"created_time":1660961589760,"last_edited_time":1677510866522,"parent_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6","parent_table":"space","alive":true,"copied_from":"bd32b787-e471-49f3-8941-174a9c6846b6","file_ids":["63e89fe9-f5cd-4414-be0e-53d91aa54fc3","37907dd5-3c76-4966-a419-daa027a84972"],"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"ed844a22-47fe-449d-b716-e380549c489f":{"role":"reader","value":{"id":"ed844a22-47fe-449d-b716-e380549c489f","version":164,"type":"sub_header","properties":{"title":[["关于本书"]]},"created_time":1677389862135,"last_edited_time":1677389891129,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"50c109cb-7b01-4be7-87e9-9cee7c62c61a":{"role":"reader","value":{"id":"50c109cb-7b01-4be7-87e9-9cee7c62c61a","version":12,"type":"bookmark","properties":{"link":[["https://book.douban.com/subject/36084407/"]],"title":[["100 Go Mistakes and How to Avoid Them"]],"description":[["Spot errors in your Go code you didn’t even know you were making and boost your productivity by avoi..."]]},"format":{"bookmark_icon":"https://img1.doubanio.com/favicon.ico","bookmark_cover":"https://img2.doubanio.com/view/subject/l/public/s34311243.jpg"},"created_time":1677389855503,"last_edited_time":1677389858512,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"c09840e2-48f9-4818-8db1-3883f5db1ff0":{"role":"reader","value":{"id":"c09840e2-48f9-4818-8db1-3883f5db1ff0","version":4,"type":"sub_header","properties":{"title":[["2. Code and Project organization"]]},"created_time":1668042842283,"last_edited_time":1677389862135,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"b58b16be-26d8-4b5d-81f6-80a630f44e0e":{"role":"reader","value":{"id":"b58b16be-26d8-4b5d-81f6-80a630f44e0e","version":389,"type":"text","properties":{"title":[["本节主要讲解代码和项目的结构组织，目的是教会大家 ："]]},"created_time":1677389730608,"last_edited_time":1677389764178,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"3381720f-1fac-4996-9c13-daceb413394c":{"role":"reader","value":{"id":"3381720f-1fac-4996-9c13-daceb413394c","version":18,"type":"bulleted_list","properties":{"title":[["以符合go语言习惯的组织代码 "]]},"created_time":1677389764526,"last_edited_time":1677389805414,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"f1b01222-efae-4667-aee1-ba2282e17059":{"role":"reader","value":{"id":"f1b01222-efae-4667-aee1-ba2282e17059","version":31,"type":"bulleted_list","properties":{"title":[["代码能高效的处理抽象：接口和泛型"]]},"created_time":1677389768443,"last_edited_time":1677389798745,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"716c8d0f-deeb-4c25-925e-3bc48f09622f":{"role":"reader","value":{"id":"716c8d0f-deeb-4c25-925e-3bc48f09622f","version":22,"type":"bulleted_list","properties":{"title":[["提供构建项目的最佳实践"]]},"created_time":1677389771421,"last_edited_time":1677389802225,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"e0a8cd8c-a281-437a-994a-f50d4b6dd01d":{"role":"reader","value":{"id":"e0a8cd8c-a281-437a-994a-f50d4b6dd01d","version":124,"type":"sub_sub_header","properties":{"title":[["2.1 #1 Unintended variable shadowing（变量遮蔽带来的意外行为 ）"]]},"created_time":1668042993352,"last_edited_time":1668476760000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"ea523e78-a4f2-47d6-84fd-a79eb4dfceca":{"role":"reader","value":{"id":"ea523e78-a4f2-47d6-84fd-a79eb4dfceca","version":31,"type":"text","properties":{"title":[["Bad Code",[["b"]]]]},"created_time":1668043260000,"last_edited_time":1668043320000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"590ae368-eec1-48db-83c4-30a0116582ef":{"role":"reader","value":{"id":"590ae368-eec1-48db-83c4-30a0116582ef","version":410,"type":"code","properties":{"title":[["// 这种场景在if语句中使用 := 声明了和最外层client同名的变量，这样会出现内部变量覆盖外层变量的\n// 情况，编写这样错误代码的原因是没有了解go中声明新变量的用法\nvar client *http.Client\nif tracing {\n\tclient, err := createClientWithTracing()\n\tif err != nil {\n\t\treturn err\n\t}\n\tlog.Println(client)\n} else {\n\tclient, err := createDefaultClient()\n\tif err != nil {\n\t\treturn err\n\t}\n\tlog.Println(client)\n}"]],"language":[["Go"]]},"created_time":1668043051783,"last_edited_time":1668043260000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"667ba7dc-d0ec-4b2c-813e-de53718f6094":{"role":"reader","value":{"id":"667ba7dc-d0ec-4b2c-813e-de53718f6094","version":23,"type":"text","properties":{"title":[["Good Code",[["b"]]]]},"created_time":1668043140000,"last_edited_time":1668043320000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"6375a534-b72a-4f0d-82cb-4f86a2f8cc62":{"role":"reader","value":{"id":"6375a534-b72a-4f0d-82cb-4f86a2f8cc62","version":292,"type":"code","properties":{"title":[["// 把判断语句中的声明语法换成赋值语法，同样在最外层声明err，可以做到减少代码量的效果\nvar client *http.Client\nvar err error\nif tracing {\n\tclient, err = createClientWithTracing()\n} else {\n\tclient, err = createDefaultClient()\n}\nif err != nil {\n\t\treturn err\n}\nlog.Println(client)"]],"language":[["Go"]]},"format":{"copied_from_pointer":{"id":"590ae368-eec1-48db-83c4-30a0116582ef","table":"block","spaceId":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"created_time":1668043346678,"last_edited_time":1668043440000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"copied_from":"590ae368-eec1-48db-83c4-30a0116582ef","created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"46fffdc7-fd79-489d-8bae-57c56540f464":{"role":"reader","value":{"id":"46fffdc7-fd79-489d-8bae-57c56540f464","version":79,"type":"sub_sub_header","properties":{"title":[["2.2 #2 Unnecessary nested code （没有必要的代码嵌套 ）"]]},"created_time":1668043492777,"last_edited_time":1668476760000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"a75d0f96-6835-4a64-958d-59682ddd914c":{"role":"reader","value":{"id":"a75d0f96-6835-4a64-958d-59682ddd914c","version":152,"type":"text","properties":{"title":[["代码的嵌套层数可以用来评价代码的可读性"]]},"created_time":1668043680000,"last_edited_time":1668043740000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"89de5eb9-f72c-4343-8ae7-42525d8b94fd":{"role":"reader","value":{"id":"89de5eb9-f72c-4343-8ae7-42525d8b94fd","version":19,"type":"text","properties":{"title":[["Bad Code",[["b"]]]]},"created_time":1668043500000,"last_edited_time":1668043500000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"5d7fbbb8-2987-4f5b-9248-3322384045e3":{"role":"reader","value":{"id":"5d7fbbb8-2987-4f5b-9248-3322384045e3","version":7,"type":"code","properties":{"title":[["func join(s1, s2 string, max int) (string, error) {\n\tif s1 == \"\" {\n\t\treturn \"\", errors.New(\"s1 is empty\")\n\t} else {\n\t\tif s2 == \"\" {\n\t\t\treturn \"\", errors.New(\"s2 is empty\")\n\t\t} else {\n\t\t\tconcat, err := concatenate(s1, s2)\n\t\t\tif err != nil {\n\t\t\t\treturn \"\", errors\n\t\t\t} else {\n\t\t\t\tif len(concat) \u003e max {\n\t\t\t\t\treturn concat[:max], nil\n\t\t\t\t} else {\n\t\t\t\t\treturn concat, nil\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}"]],"language":[["Go"]]},"created_time":1668043516228,"last_edited_time":1668043920000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"380c1088-8419-4dbd-b6cb-9bba2e9672a7":{"role":"reader","value":{"id":"380c1088-8419-4dbd-b6cb-9bba2e9672a7","version":328,"type":"text","properties":{"title":[["上面的代码因为夹杂了多种判断导致代码嵌套层数太多，代码可读性大大降低，并且维护性也变差。我们使用下面的代码代替上面的写法。"]]},"created_time":1668043500000,"last_edited_time":1668044160000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"82b2f078-b032-4950-ae20-41100cc1308a":{"role":"reader","value":{"id":"82b2f078-b032-4950-ae20-41100cc1308a","version":2,"type":"text","properties":{"title":[["Good Code",[["b"]]]]},"created_time":1668043500000,"last_edited_time":1668044100000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"51914de0-b4c6-4fcd-b3bb-8d73e95493ef":{"role":"reader","value":{"id":"51914de0-b4c6-4fcd-b3bb-8d73e95493ef","version":7,"type":"code","properties":{"title":[["func join(s1, s2 string, max int) (string, error) {\n\tif s1 == \"\" {\n\t\treturn \"\", errors.New(\"s1 is empty\")\n\t}\n\tif s2 == \"\" {\n\t\treturn \"\", errors.New(\"s2 is empty\")\n\t}\n\tconcat, err := concatenate(s1, s2)\n\tif err != nil {\n\t\treturn \"\", err\n\t}\n\tif len(concat) \u003e max {\n\t\treturn concat[:max], nil\n\t}\n\treturn concat, nil\n}"]],"language":[["Go"]]},"created_time":1668043528015,"last_edited_time":1668044100000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"3e0e20b4-4815-438a-9351-acada3e14511":{"role":"reader","value":{"id":"3e0e20b4-4815-438a-9351-acada3e14511","version":201,"type":"text","properties":{"title":[["经过修改后的代码，我们只需要简单的心智负担就能阅读和理解代码。"]]},"created_time":1668044160000,"last_edited_time":1668044340000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"accc59b4-c433-40b3-a4b9-dccd21760e44":{"role":"reader","value":{"id":"accc59b4-c433-40b3-a4b9-dccd21760e44","version":15,"type":"callout","properties":{"title":[["Align the happy path to the left; you should quickly be able to scan down one column to\nsee the expected execution flow."]]},"format":{"page_icon":"💡","block_color":"gray_background"},"created_time":1668044332490,"last_edited_time":1668212340000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"9378d796-8fb2-46c1-b17b-a4a03e467d30":{"role":"reader","value":{"id":"9378d796-8fb2-46c1-b17b-a4a03e467d30","version":476,"type":"text","properties":{"title":[["把代码逻辑靠最左边实现，能够让代码可读性增强，这里最左边的路径被Gopher成为 Happy Path,阅读代码时候，第一层级的逻辑是预期代码行为的执行流程，第二层级为Error Handler，具体处理边缘情况。"]]},"created_time":1668044337367,"last_edited_time":1668044820000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"efca4439-8355-41a4-931e-b2fe1a54b904":{"role":"reader","value":{"id":"efca4439-8355-41a4-931e-b2fe1a54b904","version":12,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbgs8tjrc2j30nx0c7n0m.jpg"]]},"format":{"block_width":816,"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbgs8tjrc2j30nx0c7n0m.jpg","block_full_width":false,"block_page_width":false},"created_time":1677386084480,"last_edited_time":1677505781598,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"a2aca5a6-2817-47a3-bc39-a2437aff8b3a":{"role":"reader","value":{"id":"a2aca5a6-2817-47a3-bc39-a2437aff8b3a","version":114,"type":"text","properties":{"title":[["下面列出几个优化代码的规则"]]},"created_time":1668044700000,"last_edited_time":1668044940000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"d8cf60a1-ffdf-4d0c-abc9-06b56f6e7021":{"role":"reader","value":{"id":"d8cf60a1-ffdf-4d0c-abc9-06b56f6e7021","version":336,"type":"callout","properties":{"title":[["1. 如果if块会直接执行return返回，请不要再写else块，这样else里的逻辑会被放在Happy Path，便于后面的阅读"]]},"format":{"page_icon":"💡","block_color":"gray_background"},"created_time":1668044974355,"last_edited_time":1668045240000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"e35e1247-da64-4302-941d-95849024ddfd":{"role":"reader","value":{"id":"e35e1247-da64-4302-941d-95849024ddfd","version":12,"type":"column_list","content":["072c7908-8f8c-4b68-a65f-569042acf307","e4d8824e-7da0-4fcb-a945-3086c3c11398"],"created_time":1668045120000,"last_edited_time":1668045180000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"072c7908-8f8c-4b68-a65f-569042acf307":{"role":"reader","value":{"id":"072c7908-8f8c-4b68-a65f-569042acf307","version":11,"type":"column","content":["a4d14b39-8725-45f5-89f0-5533db0228aa"],"format":{"column_ratio":0.5},"created_time":1668045120000,"last_edited_time":1668045180000,"parent_id":"e35e1247-da64-4302-941d-95849024ddfd","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"e4d8824e-7da0-4fcb-a945-3086c3c11398":{"role":"reader","value":{"id":"e4d8824e-7da0-4fcb-a945-3086c3c11398","version":11,"type":"column","content":["745f0484-5d23-4c25-96a4-bab75f21efae"],"format":{"column_ratio":0.5},"created_time":1668045120000,"last_edited_time":1668045180000,"parent_id":"e35e1247-da64-4302-941d-95849024ddfd","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"a4d14b39-8725-45f5-89f0-5533db0228aa":{"role":"reader","value":{"id":"a4d14b39-8725-45f5-89f0-5533db0228aa","version":35,"type":"code","properties":{"title":[["if foo() {\n\t// ...\n\treturn true\n} else {\n\t// ...\n}"]],"caption":[["Bad Code ⇒ "]],"language":[["Go"]]},"created_time":1668045087875,"last_edited_time":1668045180000,"parent_id":"072c7908-8f8c-4b68-a65f-569042acf307","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"745f0484-5d23-4c25-96a4-bab75f21efae":{"role":"reader","value":{"id":"745f0484-5d23-4c25-96a4-bab75f21efae","version":24,"type":"code","properties":{"title":[["if foo() {\n\t// ...\n\treturn true\n}\n// ...\n"]],"caption":[["Good Code"]],"language":[["Go"]]},"created_time":1668045144075,"last_edited_time":1668045180000,"parent_id":"e4d8824e-7da0-4fcb-a945-3086c3c11398","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"19560b4f-87c0-4f08-acfd-29b322440e00":{"role":"reader","value":{"id":"19560b4f-87c0-4f08-acfd-29b322440e00","version":108,"type":"callout","properties":{"title":[["2. 遇到错误及时抛出，让主要逻辑放在 Happy Path 上"]]},"format":{"page_icon":"💡","block_color":"gray_background"},"created_time":1668045308538,"last_edited_time":1668045420000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"cc507eaf-d030-42da-a50f-2d748bf5009d":{"role":"reader","value":{"id":"cc507eaf-d030-42da-a50f-2d748bf5009d","version":5,"type":"column_list","content":["b2f6a55e-7b78-44c1-b53c-50eb086a127c","d8b65ea0-7782-4826-9e65-906663714236"],"created_time":1668045300000,"last_edited_time":1668045300000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"b2f6a55e-7b78-44c1-b53c-50eb086a127c":{"role":"reader","value":{"id":"b2f6a55e-7b78-44c1-b53c-50eb086a127c","version":5,"type":"column","content":["d482399a-8633-4568-8620-d29728ce60c6"],"format":{"column_ratio":0.5},"created_time":1668045300000,"last_edited_time":1668045300000,"parent_id":"cc507eaf-d030-42da-a50f-2d748bf5009d","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"d8b65ea0-7782-4826-9e65-906663714236":{"role":"reader","value":{"id":"d8b65ea0-7782-4826-9e65-906663714236","version":5,"type":"column","content":["a56d52a0-7531-410b-9af5-e7ea66c457b0"],"format":{"column_ratio":0.5},"created_time":1668045300000,"last_edited_time":1668045300000,"parent_id":"cc507eaf-d030-42da-a50f-2d748bf5009d","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"d482399a-8633-4568-8620-d29728ce60c6":{"role":"reader","value":{"id":"d482399a-8633-4568-8620-d29728ce60c6","version":33,"type":"code","properties":{"title":[["if s != \"\" {\n\t// ...\n} else {\n\treturn errors.New(\"empty string\")\n}"]],"caption":[["Bad Code ⇒ "]],"language":[["Go"]]},"created_time":1668045313172,"last_edited_time":1668045300000,"parent_id":"b2f6a55e-7b78-44c1-b53c-50eb086a127c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"a56d52a0-7531-410b-9af5-e7ea66c457b0":{"role":"reader","value":{"id":"a56d52a0-7531-410b-9af5-e7ea66c457b0","version":21,"type":"code","properties":{"title":[["if s == \"\" {\n\t\treturn errors.New(\"empty string\")\n}\n// ...\n"]],"caption":[["Good Code"]],"language":[["Go"]]},"created_time":1668045335369,"last_edited_time":1668045360000,"parent_id":"d8b65ea0-7782-4826-9e65-906663714236","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"00f36e76-430e-4a08-a2f7-3bf9972f453b":{"role":"reader","value":{"id":"00f36e76-430e-4a08-a2f7-3bf9972f453b","version":212,"type":"callout","properties":{"title":[["个人建议：不要为了路径在第一层而写代码，主要还是要代码可读性，以及在for循环的场景下，要考虑到cpu分支预测的场景"]]},"format":{"page_icon":"💡","block_color":"gray_background"},"created_time":1669252992053,"last_edited_time":1669253040000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"2de22f1e-c263-42a8-a24b-8934886ee4d3":{"role":"reader","value":{"id":"2de22f1e-c263-42a8-a24b-8934886ee4d3","version":3,"type":"sub_sub_header","properties":{"title":[["2.3 #3 Misusing init functions（错误使用和理解 init 函数）"]]},"created_time":1668128940967,"last_edited_time":1669252980000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"75312713-bdeb-43da-b1c3-b63b438c8955":{"role":"reader","value":{"id":"75312713-bdeb-43da-b1c3-b63b438c8955","version":170,"type":"callout","properties":{"title":[["一个包内有多个init函数，执行顺序按照包内文件名的字典序执行"]]},"format":{"page_icon":"💡","block_color":"gray_background"},"created_time":1668129136916,"last_edited_time":1668129180000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"a07f4142-bb01-4cb9-a176-bb53d8c02c9e":{"role":"reader","value":{"id":"a07f4142-bb01-4cb9-a176-bb53d8c02c9e","version":39,"type":"text","properties":{"title":[["init函数有3个缺点："]]},"created_time":1668129180000,"last_edited_time":1668129180000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"d919c7ec-3650-4c9f-9c3d-1a5192bed396":{"role":"reader","value":{"id":"d919c7ec-3650-4c9f-9c3d-1a5192bed396","version":147,"type":"numbered_list","properties":{"title":[["init函数无法抛出异常，错误处理有限制，极端情况只能panic"]]},"created_time":1668129180000,"last_edited_time":1668129240000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"179d05ab-90c6-4634-85a9-c53a44bba621":{"role":"reader","value":{"id":"179d05ab-90c6-4634-85a9-c53a44bba621","version":212,"type":"numbered_list","properties":{"title":[["增加了测试的复杂性，因为在测试代码执行前，包内的init函数"]]},"created_time":1668129240000,"last_edited_time":1668129300000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"2203bc7d-520b-4f4a-841d-ae5d677eadec":{"role":"reader","value":{"id":"2203bc7d-520b-4f4a-841d-ae5d677eadec","version":85,"type":"numbered_list","properties":{"title":[["如果init函数需要设置状态，往往需要一个全局变量存储。"]]},"created_time":1668129300000,"last_edited_time":1668129360000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"968dbfe1-f3b3-456f-8cb0-55c7a5460eb5":{"role":"reader","value":{"id":"968dbfe1-f3b3-456f-8cb0-55c7a5460eb5","version":15,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbgs8kjr79j30gk07pwg1.jpg"]]},"format":{"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbgs8kjr79j30gk07pwg1.jpg"},"created_time":1677386065033,"last_edited_time":1677505796058,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"1731b540-8476-4572-b675-c5105de7d33e":{"role":"reader","value":{"id":"1731b540-8476-4572-b675-c5105de7d33e","version":4,"type":"text","properties":{"title":[["init函数适用的场景："]]},"created_time":1668129840000,"last_edited_time":1677386057995,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"5f8a357b-75a2-4a00-a94e-cfa5b77abce9":{"role":"reader","value":{"id":"5f8a357b-75a2-4a00-a94e-cfa5b77abce9","version":175,"type":"numbered_list","properties":{"title":[["定义静态配置, go的官方博客使用 init 函数定义静态配置"]]},"created_time":1668129960000,"last_edited_time":1668130140000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"c3451800-03c8-42d4-b438-8ced8e4baf18":{"role":"reader","value":{"id":"c3451800-03c8-42d4-b438-8ced8e4baf18","version":20,"type":"code","properties":{"title":[["// Copyright 2013 The Go Authors.  All rights reserved.\n// Use of this source code is governed by a BSD-style\n// license that can be found in the LICENSE file.\n\n// Command blog is a web server for the Go blog that can run on App Engine or\n// as a stand-alone HTTP server.\npackage main\n\nimport (\n\t\"net/http\"\n\t\"strings\"\n\t\"time\"\n\n\t\"golang.org/x/tools/blog\"\n\t\"golang.org/x/website/content/static\"\n\n\t_ \"golang.org/x/tools/playground\"\n)\n\nconst hostname = \"blog.golang.org\" // default hostname for blog server\n\nvar config = blog.Config{\n\tHostname:     hostname,\n\tBaseURL:      \"https://\" + hostname,\n\tGodocURL:     \"https://golang.org\",\n\tHomeArticles: 5,  // articles to display on the home page\n\tFeedArticles: 10, // articles to include in Atom and JSON feeds\n\tPlayEnabled:  true,\n\tFeedTitle:    \"The Go Programming Language Blog\",\n}\n// here\nfunc init() {\n\t// Redirect \"/blog/\" to \"/\", because the menu bar link is to \"/blog/\"\n\t// but we're serving from the root.\n\tredirect := func(w http.ResponseWriter, r *http.Request) {\n\t\thttp.Redirect(w, r, \"/\", http.StatusFound)\n\t}\n\thttp.HandleFunc(\"/blog\", redirect)\n\thttp.HandleFunc(\"/blog/\", redirect)\n\n\t// Keep these static file handlers in sync with app.yaml.\n\tstatic := http.FileServer(http.Dir(\"static\"))\n\thttp.Handle(\"/favicon.ico\", static)\n\thttp.Handle(\"/fonts.css\", static)\n\thttp.Handle(\"/fonts/\", static)\n\n\thttp.Handle(\"/lib/godoc/\", http.StripPrefix(\"/lib/godoc/\", http.HandlerFunc(staticHandler)))\n}\n\nfunc staticHandler(w http.ResponseWriter, r *http.Request) {\n\tname := r.URL.Path\n\tb, ok := static.Files[name]\n\tif !ok {\n\t\thttp.NotFound(w, r)\n\t\treturn\n\t}\n\thttp.ServeContent(w, r, name, time.Time{}, strings.NewReader(b))\n}"]],"language":[["Go"]]},"created_time":1668130133350,"last_edited_time":1668130140000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"31919d1e-6531-4b0c-bdab-fb2f7610dacc":{"role":"reader","value":{"id":"31919d1e-6531-4b0c-bdab-fb2f7610dacc","version":73,"type":"sub_sub_header","properties":{"title":[[" 2.4 #4 Overusing getters and setters（过度使用 getters 和 setters）"]]},"created_time":1668130239339,"last_edited_time":1668476820000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"2eb5e2a8-f65e-413f-9396-770c0c55fd1b":{"role":"reader","value":{"id":"2eb5e2a8-f65e-413f-9396-770c0c55fd1b","version":211,"type":"text","properties":{"title":[["在Go中 setter 和 getter 并不是惯用的方式，标准库的代码也没有非得使用这种方式获取结构体字段。"]]},"created_time":1668130260000,"last_edited_time":1668130380000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"0e302893-a0d2-4f97-aacc-2efc6f8e8bc2":{"role":"reader","value":{"id":"0e302893-a0d2-4f97-aacc-2efc6f8e8bc2","version":6,"type":"code","properties":{"title":[["timer := time.NewTimer(time.Second)\n\u003c-timer.C"]],"language":[["Go"]]},"created_time":1668130430329,"last_edited_time":1668130380000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"d3abc660-7674-4bbc-82d4-d6db2e41101f":{"role":"reader","value":{"id":"d3abc660-7674-4bbc-82d4-d6db2e41101f","version":54,"type":"text","properties":{"title":[["使用 getters 和 setters的好处："]]},"created_time":1668130200000,"last_edited_time":1668130440000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"c117f0fe-5223-4ad5-872c-3b69d4d5cb1b":{"role":"reader","value":{"id":"c117f0fe-5223-4ad5-872c-3b69d4d5cb1b","version":11,"type":"numbered_list","properties":{"title":[["They encapsulate a behavior associated with getting or setting a field, allowing new functionality to be added later (for example, validating a field, returning a computed value, or wrapping the access to a field around a mutex)."]]},"created_time":1668130440000,"last_edited_time":1668130440000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"987432dd-4a68-4ed3-b552-2e61d1be8422":{"role":"reader","value":{"id":"987432dd-4a68-4ed3-b552-2e61d1be8422","version":8,"type":"numbered_list","properties":{"title":[["They hide the internal representation, giving us more flexibility in what we expose."]]},"created_time":1668130440000,"last_edited_time":1668130500000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"b33ab293-4877-471f-a254-b67531f3231e":{"role":"reader","value":{"id":"b33ab293-4877-471f-a254-b67531f3231e","version":5,"type":"numbered_list","properties":{"title":[["They provide a debugging interception point for when the property changes at\nrun time, making debugging easier."]]},"created_time":1668130500000,"last_edited_time":1668130500000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"b8c6ac44-7331-49a3-82b9-c7b0c0a2a941":{"role":"reader","value":{"id":"b8c6ac44-7331-49a3-82b9-c7b0c0a2a941","version":36,"type":"sub_sub_header","properties":{"title":[["2.5 #5 Interface pollution （接口污染）"]]},"created_time":1668387508112,"last_edited_time":1668946980000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"44bd4fb8-da45-4486-bb3d-48ae78914eaa":{"role":"reader","value":{"id":"44bd4fb8-da45-4486-bb3d-48ae78914eaa","version":163,"type":"text","properties":{"title":[["接口污染的概念是代码里存在大量的抽象导致代码难以理解"]]},"created_time":1668387540000,"last_edited_time":1668387720000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"d2e36cae-64f8-4ea6-8bc6-46ca9105dcfb":{"role":"reader","value":{"id":"d2e36cae-64f8-4ea6-8bc6-46ca9105dcfb","version":18,"type":"callout","properties":{"title":[["It’s a common mistake made by devel- opers coming from another language with different habits.",[["b"]]]]},"format":{"page_icon":"💡","block_color":"gray_background"},"created_time":1668387795956,"last_edited_time":1668388140000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"2eafac0e-a4e7-4825-bf38-09653986a5f6":{"role":"reader","value":{"id":"2eafac0e-a4e7-4825-bf38-09653986a5f6","version":563,"type":"text","properties":{"title":[["在公司经常看到这样的代码，我也是头皮发麻，有些人经常高举着语言不重要的大旗，依赖自己已有编程语言的领域知识，四处污染代码…，看到推上的一个吐槽，只能说我也头皮发麻。（不用杠，杠就是你对）。"]]},"created_time":1668387900000,"last_edited_time":1668388140000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"279673a5-1ca0-42b2-9304-f0826196942e":{"role":"reader","value":{"id":"279673a5-1ca0-42b2-9304-f0826196942e","version":7,"type":"tweet","properties":{"source":[["https://twitter.com/brabalawuka/status/1589625687119638529?s=46\u0026t=2Kr-vorVZZDMX8ucjvgjWg"]]},"created_time":1668387960000,"last_edited_time":1668387960000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"d86d41b8-8395-44f0-b082-4b5ddb1e1dcd":{"role":"reader","value":{"id":"d86d41b8-8395-44f0-b082-4b5ddb1e1dcd","version":336,"type":"text","properties":{"title":[["接口的抽象力度",[["b"]]]]},"created_time":1668388320000,"last_edited_time":1668389580000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"2193418d-1e29-4c75-b2cf-1a9e541f340d":{"role":"reader","value":{"id":"2193418d-1e29-4c75-b2cf-1a9e541f340d","version":307,"type":"text","properties":{"title":[["越少的接口抽象程度越高，而且接口是要被发现而不是自己创建出来的，没有必要一上来就定义一堆接口，然后再实现。"]]},"created_time":1668474420000,"last_edited_time":1668474480000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"e781ed43-f235-474e-a4c0-17b4fa34c83a":{"role":"reader","value":{"id":"e781ed43-f235-474e-a4c0-17b4fa34c83a","version":150,"type":"callout","properties":{"title":[["The bigger the interface, the weaker the abstraction.  —Rob Pike"]]},"format":{"page_icon":"💡","block_color":"gray_background"},"created_time":1668388820669,"last_edited_time":1668389580000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"6763d338-aff4-4abe-8f49-2a92d479d231":{"role":"reader","value":{"id":"6763d338-aff4-4abe-8f49-2a92d479d231","version":7,"type":"callout","properties":{"title":[["Don’t design with interfaces, discover them.  —Rob Pike"]]},"format":{"page_icon":"💡","block_color":"gray_background","copied_from_pointer":{"id":"e781ed43-f235-474e-a4c0-17b4fa34c83a","table":"block","spaceId":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"created_time":1668474427884,"last_edited_time":1668474480000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"copied_from":"e781ed43-f235-474e-a4c0-17b4fa34c83a","created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"ebba10a9-8a9e-4fef-bc17-0e1bd2aab18f":{"role":"reader","value":{"id":"ebba10a9-8a9e-4fef-bc17-0e1bd2aab18f","version":14,"type":"text","properties":{"title":[["此外，我们还可以组合细粒度接口来创建更高级别的抽象"]]},"created_time":1668388833245,"last_edited_time":1668388980000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"63946b3a-0a2e-41bf-848e-4f6987dee9a3":{"role":"reader","value":{"id":"63946b3a-0a2e-41bf-848e-4f6987dee9a3","version":18,"type":"code","properties":{"title":[["type ReadWriter interface {\n    Reader\n    Writer \n}"]],"language":[["Go"]]},"created_time":1668388992704,"last_edited_time":1668474360000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"7cbfc990-74eb-4ab3-9f3e-2d711975a91d":{"role":"reader","value":{"id":"7cbfc990-74eb-4ab3-9f3e-2d711975a91d","version":43,"type":"text","properties":{"title":[["何时使用接口",[["b"]]]]},"created_time":1668389100000,"last_edited_time":1668389400000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"a32a3e73-962d-41b5-a5c7-3b4878e5625b":{"role":"reader","value":{"id":"a32a3e73-962d-41b5-a5c7-3b4878e5625b","version":459,"type":"numbered_list","properties":{"title":[["多种类型有相同的行为，像sort包提供的sort方法只需要类型实现下面的接口就可以被排序"]]},"content":["431573b6-c678-43b6-b669-ec9d7b76f98c"],"created_time":1668389437405,"last_edited_time":1677397005395,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"431573b6-c678-43b6-b669-ec9d7b76f98c":{"role":"reader","value":{"id":"431573b6-c678-43b6-b669-ec9d7b76f98c","version":10,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbgs7y27gwj30jl03tq3s.jpg"]]},"format":{"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbgs7y27gwj30jl03tq3s.jpg"},"created_time":1677386029314,"last_edited_time":1677386034947,"parent_id":"a32a3e73-962d-41b5-a5c7-3b4878e5625b","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"ba888732-2ef3-406d-9101-67aa9c1fe779":{"role":"reader","value":{"id":"ba888732-2ef3-406d-9101-67aa9c1fe779","version":71,"type":"numbered_list","properties":{"title":[[" 代码解耦，结构体中包含接口成员而不是具体的结构体，能够帮助我们更好的解耦，不需要做大量的代码修改就能切换其他成员。"]]},"format":{"list_start_index":2},"created_time":1668389400000,"last_edited_time":1677397034382,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"286f8e95-1c4d-4612-98c7-1b31601436e6":{"role":"reader","value":{"id":"286f8e95-1c4d-4612-98c7-1b31601436e6","version":5,"type":"column_list","content":["d3cdeab4-3747-401a-8d07-f601f1502513","029e417f-154d-4a4e-ac9b-45e6862e956d"],"created_time":1668389940000,"last_edited_time":1668389940000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"d3cdeab4-3747-401a-8d07-f601f1502513":{"role":"reader","value":{"id":"d3cdeab4-3747-401a-8d07-f601f1502513","version":7,"type":"column","content":["35bc0ca7-ec03-4e15-ae38-27ff1ad1326e","427c10e4-f64b-4dec-98cf-a8b2aac7c70b"],"format":{"column_ratio":0.5},"created_time":1668389940000,"last_edited_time":1677397096697,"parent_id":"286f8e95-1c4d-4612-98c7-1b31601436e6","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"029e417f-154d-4a4e-ac9b-45e6862e956d":{"role":"reader","value":{"id":"029e417f-154d-4a4e-ac9b-45e6862e956d","version":7,"type":"column","content":["50ec760d-027c-4f4d-8685-fa97d504960c"],"format":{"column_ratio":0.5},"created_time":1668389940000,"last_edited_time":1668389940000,"parent_id":"286f8e95-1c4d-4612-98c7-1b31601436e6","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"35bc0ca7-ec03-4e15-ae38-27ff1ad1326e":{"role":"reader","value":{"id":"35bc0ca7-ec03-4e15-ae38-27ff1ad1326e","version":30,"type":"image","properties":{"size":[["78.3KB"]],"title":[["Untitled"]],"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbgs75cj9mj30jt05e3zy.jpg"]],"caption":[["Bad Code"]]},"format":{"block_width":713,"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbgs75cj9mj30jt05e3zy.jpg","block_full_width":false,"block_page_width":true,"block_aspect_ratio":0.2720897615708275,"block_preserve_scale":true},"created_time":1668389880000,"last_edited_time":1677385988307,"parent_id":"d3cdeab4-3747-401a-8d07-f601f1502513","parent_table":"block","alive":true,"file_ids":["f754d98c-708d-447d-86d4-b5425312cf49"],"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"50ec760d-027c-4f4d-8685-fa97d504960c":{"role":"reader","value":{"id":"50ec760d-027c-4f4d-8685-fa97d504960c","version":29,"type":"image","properties":{"size":[["101.0KB"]],"title":[["Untitled"]],"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbgs7fp17lj30i207awgk.jpg"]],"caption":[["Good Code"]]},"format":{"block_width":650,"block_height":262,"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbgs7fp17lj30i207awgk.jpg","block_full_width":false,"block_page_width":false,"block_aspect_ratio":0.40307692307692305,"block_preserve_scale":true},"created_time":1668389880000,"last_edited_time":1677386000372,"parent_id":"029e417f-154d-4a4e-ac9b-45e6862e956d","parent_table":"block","alive":true,"file_ids":["3950c0af-9aa5-492e-9e28-4f64949800f5"],"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"427c10e4-f64b-4dec-98cf-a8b2aac7c70b":{"role":"reader","value":{"id":"427c10e4-f64b-4dec-98cf-a8b2aac7c70b","version":4,"type":"text","created_time":1677397096696,"last_edited_time":1677397096697,"parent_id":"d3cdeab4-3747-401a-8d07-f601f1502513","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"199a5130-f9dc-4bc1-aa0d-2ed40ac76de5":{"role":"reader","value":{"id":"199a5130-f9dc-4bc1-aa0d-2ed40ac76de5","version":110,"type":"numbered_list","properties":{"title":[[" 可以代码限制行为，在这个例子里，调用Foo的代码，只能获取到阈值，却不能修改阈值，这就达到了限制行为的作"]]},"format":{"list_start_index":3},"created_time":1668389400000,"last_edited_time":1677397092773,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"a57c3dba-cc4a-4d27-84b3-a9dc4413a9b4":{"role":"reader","value":{"id":"a57c3dba-cc4a-4d27-84b3-a9dc4413a9b4","version":291,"type":"image","properties":{"size":[["106.6KB"]],"title":[["Untitled"]],"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbgs6lmsygj30ke07ldho.jpg"]]},"format":{"block_width":734,"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbgs6lmsygj30ke07ldho.jpg","block_full_width":false,"block_page_width":true,"block_aspect_ratio":0.37193460490463215,"block_preserve_scale":true},"created_time":1668390120000,"last_edited_time":1677397092378,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"file_ids":["600979c4-ea88-4ca1-935a-053b77477ac0"],"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"bb6f6827-2a65-4a52-a5c5-7ae5ce5db014":{"role":"reader","value":{"id":"bb6f6827-2a65-4a52-a5c5-7ae5ce5db014","version":141,"type":"sub_sub_header","properties":{"title":[["2.6 #6 Interface on the producer side （错误的把接口定义在实现端）"]]},"created_time":1668474537613,"last_edited_time":1668476820000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"5232f2f1-38a9-458f-a6e4-9f328f335da8":{"role":"reader","value":{"id":"5232f2f1-38a9-458f-a6e4-9f328f335da8","version":7,"type":"column_list","content":["a778e85c-4c07-4d3b-b4af-0225e189f154","8c271c37-bc04-410c-b5cb-185b2ea9716c"],"created_time":1677385901627,"last_edited_time":1677385901629,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"a778e85c-4c07-4d3b-b4af-0225e189f154":{"role":"reader","value":{"id":"a778e85c-4c07-4d3b-b4af-0225e189f154","version":8,"type":"column","content":["a47de96b-2289-412f-b77b-72bb6570c724"],"format":{"column_ratio":0.5},"created_time":1677385901626,"last_edited_time":1677385901629,"parent_id":"5232f2f1-38a9-458f-a6e4-9f328f335da8","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"8c271c37-bc04-410c-b5cb-185b2ea9716c":{"role":"reader","value":{"id":"8c271c37-bc04-410c-b5cb-185b2ea9716c","version":6,"type":"column","content":["453a54e6-751b-425e-adea-5e5e424d5bfd"],"format":{"column_ratio":0.5},"created_time":1677385901628,"last_edited_time":1677385901629,"parent_id":"5232f2f1-38a9-458f-a6e4-9f328f335da8","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"a47de96b-2289-412f-b77b-72bb6570c724":{"role":"reader","value":{"id":"a47de96b-2289-412f-b77b-72bb6570c724","version":14,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbgs5e3i9kj30b309ign7.jpg"]]},"format":{"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbgs5e3i9kj30b309ign7.jpg"},"created_time":1677385881259,"last_edited_time":1677385901629,"parent_id":"a778e85c-4c07-4d3b-b4af-0225e189f154","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"453a54e6-751b-425e-adea-5e5e424d5bfd":{"role":"reader","value":{"id":"453a54e6-751b-425e-adea-5e5e424d5bfd","version":16,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbgs5hpt95j30al09ata7.jpg"]]},"format":{"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbgs5hpt95j30al09ata7.jpg"},"created_time":1677385888004,"last_edited_time":1677385901629,"parent_id":"8c271c37-bc04-410c-b5cb-185b2ea9716c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"077ccb01-e80a-4046-a31d-d90f5a2400f2":{"role":"reader","value":{"id":"077ccb01-e80a-4046-a31d-d90f5a2400f2","version":4,"type":"text","properties":{"title":[["默认情况下，我们会把接口定义在接口的实现侧(包)里，但是"],["本文建议把接口定义在客户(调用)侧(包)",[["b"]]],["，这样建议的原则还是："]]},"created_time":1668474660000,"last_edited_time":1677385871563,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"0ec99a5f-23b7-4dbc-ae74-71d984e1d2c1":{"role":"reader","value":{"id":"0ec99a5f-23b7-4dbc-ae74-71d984e1d2c1","version":6,"type":"callout","properties":{"title":[["Don’t design with interfaces, discover them.  —Rob Pike"]]},"format":{"page_icon":"💡","block_color":"gray_background","copied_from_pointer":{"id":"6763d338-aff4-4abe-8f49-2a92d479d231","table":"block","spaceId":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"created_time":1668474778777,"last_edited_time":1668474780000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"copied_from":"6763d338-aff4-4abe-8f49-2a92d479d231","created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"db349756-ebcb-40e7-8344-381303805881":{"role":"reader","value":{"id":"db349756-ebcb-40e7-8344-381303805881","version":638,"type":"text","properties":{"title":[["因为接口是被发现，而不是创建出来的，只有在客户端的程序才知道自己需要什么样的接口，这样抽象程度更高，不会出现一个接口出现了很多冗余的方法。如果放在实现侧定义的话，受到开发者自己的主观影响，往往没法定义出一个由较好抽象的接口。PS: 这种规则在标准库里不适用,原因自行体会。"]]},"created_time":1668474780000,"last_edited_time":1668475080000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"b23d5743-0236-4ec4-96b3-ce0ec09f6bf2":{"role":"reader","value":{"id":"b23d5743-0236-4ec4-96b3-ce0ec09f6bf2","version":36,"type":"sub_sub_header","properties":{"title":[["2.7 #7 Returning interfaces  (返回接口)"]]},"created_time":1668475324397,"last_edited_time":1668476820000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"e9db0a94-341d-4064-aa5b-e056f2caca70":{"role":"reader","value":{"id":"e9db0a94-341d-4064-aa5b-e056f2caca70","version":276,"type":"text","properties":{"title":[["这条规则要配合上一条一起食用，如果在实现端，创建一个返回接口的函数，会因为引用循环的原因导致无法实现。"]]},"created_time":1668475020000,"last_edited_time":1668475860000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"689134f0-4be8-4fb1-aa3e-f3d4be533bf3":{"role":"reader","value":{"id":"689134f0-4be8-4fb1-aa3e-f3d4be533bf3","version":136,"type":"text","properties":{"title":[["本文在坚持2.6观点的前提下，提出了2点最佳实践："]]},"created_time":1668475860000,"last_edited_time":1668475920000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"76b6a3db-4868-47db-a698-f533625825ab":{"role":"reader","value":{"id":"76b6a3db-4868-47db-a698-f533625825ab","version":43,"type":"numbered_list","properties":{"title":[["返回结构体，而不是接口"]]},"created_time":1668475920000,"last_edited_time":1668475920000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"75e1db82-4b5f-4f99-9485-794b1d9ac083":{"role":"reader","value":{"id":"75e1db82-4b5f-4f99-9485-794b1d9ac083","version":88,"type":"numbered_list","properties":{"title":[["函数或者结构体尽量接受接口"]]},"created_time":1668475920000,"last_edited_time":1668475920000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"745f86ff-abac-4dc0-aa59-34dcd91ec019":{"role":"reader","value":{"id":"745f86ff-abac-4dc0-aa59-34dcd91ec019","version":102,"type":"text","properties":{"title":[["当然这2点提出也是引经据典引申出来的。"]]},"created_time":1668475980000,"last_edited_time":1668475980000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"261d4ee9-5809-42a4-9a45-68b93eb42e5c":{"role":"reader","value":{"id":"261d4ee9-5809-42a4-9a45-68b93eb42e5c","version":13,"type":"callout","properties":{"title":[["Be conservative in what you do, be liberal in what you accept from others. - Transmission Control Protocol"]]},"format":{"page_icon":"💡","block_color":"gray_background"},"created_time":1668475978347,"last_edited_time":1668475980000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"7d5fd879-40e0-4a52-b728-6c4c4fdd6f89":{"role":"reader","value":{"id":"7d5fd879-40e0-4a52-b728-6c4c4fdd6f89","version":263,"type":"text","properties":{"title":[["当然，规则不是100%准确的，比如 Error 类型经常被函数返回，标准库 io 包里也经常有返回接口的函数。"]]},"created_time":1668475980000,"last_edited_time":1668476220000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"0f2574e8-e836-4047-853e-e22ac77b1ad7":{"role":"reader","value":{"id":"0f2574e8-e836-4047-853e-e22ac77b1ad7","version":6,"type":"code","properties":{"title":[["func LimitReader(r Reader, n int64) Reader {\n    return \u0026LimitedReader{r, n}\n}"]],"language":[["Go"]]},"created_time":1668476272275,"last_edited_time":1668476220000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"2d1f81e8-1dda-475c-b2db-da4336d20e6e":{"role":"reader","value":{"id":"2d1f81e8-1dda-475c-b2db-da4336d20e6e","version":72,"type":"text","properties":{"title":[["如果我们知道(不是预见)一个抽象将对调用方有帮助，我们可以考虑返回一个接口"]]},"created_time":1668476220000,"last_edited_time":1677397173046,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"1f28517b-9a59-4709-8d37-4c4115d23076":{"role":"reader","value":{"id":"1f28517b-9a59-4709-8d37-4c4115d23076","version":50,"type":"sub_sub_header","properties":{"title":[["2.8  #8 any says nothing （any 类型表达性很弱）"]]},"created_time":1668647828284,"last_edited_time":1668648000000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"356490de-f366-4725-a0cd-2f60174e386e":{"role":"reader","value":{"id":"356490de-f366-4725-a0cd-2f60174e386e","version":422,"type":"text","properties":{"title":[["从Go,1.18出现了any类型其实底层代码就是interface{}, 本节提出了不能随意使用any作为类型，不然会丢失重要的类型信息，代码可读性降低。"]]},"created_time":1668647820000,"last_edited_time":1677397208457,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"2dcfb4c7-0765-4c54-b3fd-111fdf46c6b9":{"role":"reader","value":{"id":"2dcfb4c7-0765-4c54-b3fd-111fdf46c6b9","version":57,"type":"sub_sub_header","properties":{"title":[["2.9 #9: Being confused about when to use generics （不知道何时使用泛型）"]]},"created_time":1668647991553,"last_edited_time":1668648000000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"eca85853-6427-4c0e-9e99-f8b3202ba13e":{"role":"reader","value":{"id":"eca85853-6427-4c0e-9e99-f8b3202ba13e","version":149,"type":"text","properties":{"title":[["本节讲解了泛型的知识点，其中有一个例子显示，泛型可以限制类型范围，如下语法表示。"]]},"created_time":1668648180000,"last_edited_time":1668648300000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"225a6224-d5f4-406e-9637-b83a42461120":{"role":"reader","value":{"id":"225a6224-d5f4-406e-9637-b83a42461120","version":10,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbgs4b4dcjj30jd05mwgh.jpg"]]},"format":{"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbgs4b4dcjj30jd05mwgh.jpg"},"created_time":1677385818752,"last_edited_time":1677385820865,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"233c9bfc-98cf-4f4d-a8dc-38f9587c3682":{"role":"reader","value":{"id":"233c9bfc-98cf-4f4d-a8dc-38f9587c3682","version":294,"type":"code","properties":{"title":[["// customConstraint 接口要求实现类型的底层类型是int就可以了，并且可以实现String方法\n// 如果 ~int 改为 int，编译就会报错，int类型没有实现String方法\ntype customConstraint interface {\n    ~int\n    String() string\n}\n\n// customInt 满足 customConstraint 的要求，并且实现了 String 方法\ntype customInt int\nfunc (i customInt) String() string {\n    return strconv.Itoa(int(i))\n}"]],"language":[["Go"]]},"created_time":1668648357288,"last_edited_time":1677397217353,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"9bfff5a2-b613-484c-ae12-504898ba4417":{"role":"reader","value":{"id":"9bfff5a2-b613-484c-ae12-504898ba4417","version":4,"type":"text","properties":{"title":[["泛型可以用在函数参数中，也可以用在数据结构中。"]]},"created_time":1668648540000,"last_edited_time":1677385809425,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"897cf90e-31b6-48ab-b06e-a5e406bbbdd9":{"role":"reader","value":{"id":"897cf90e-31b6-48ab-b06e-a5e406bbbdd9","version":10,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbgs3v7b8lj30gp05dwfi.jpg"]]},"format":{"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbgs3v7b8lj30gp05dwfi.jpg"},"created_time":1677385793371,"last_edited_time":1677385795681,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"49afa39a-a401-4f7a-89d3-524bd7d6c96a":{"role":"reader","value":{"id":"49afa39a-a401-4f7a-89d3-524bd7d6c96a","version":33,"type":"text","properties":{"title":[["何时使用泛型",[["b"]]]]},"created_time":1668648600000,"last_edited_time":1677397237773,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"97c53b17-0084-4396-b349-dec208a815ff":{"role":"reader","value":{"id":"97c53b17-0084-4396-b349-dec208a815ff","version":124,"type":"numbered_list","properties":{"title":[["构建数据结构，例如，如果我们实现二叉树、链表或堆，我们可以使用泛型来分解出元素类型。"]]},"created_time":1668648660000,"last_edited_time":1677397263896,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"b4f5a2cb-7467-49d0-b505-126c905ab7dc":{"role":"reader","value":{"id":"b4f5a2cb-7467-49d0-b505-126c905ab7dc","version":75,"type":"numbered_list","properties":{"title":[["处理任何类型的slice、map和channel的函数-例如，合并两个channel的函数适用于任何通道类型。"]]},"content":["f74f3a4a-8a90-4fa6-8f64-438764a2703f"],"created_time":1668648660000,"last_edited_time":1677397324134,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"f74f3a4a-8a90-4fa6-8f64-438764a2703f":{"role":"reader","value":{"id":"f74f3a4a-8a90-4fa6-8f64-438764a2703f","version":33,"type":"code","properties":{"title":[["func merge[T any](ch1, ch2 \u003c-chan T) \u003c-chan T {\n\t// ...\n}"]],"language":[["Go"]]},"created_time":1668648710315,"last_edited_time":1677397327431,"parent_id":"b4f5a2cb-7467-49d0-b505-126c905ab7dc","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"a8d5c024-37c0-44cf-b0cd-2d1bdfee0529":{"role":"reader","value":{"id":"a8d5c024-37c0-44cf-b0cd-2d1bdfee0529","version":1178,"type":"numbered_list","properties":{"title":[["众多类型在实现接口方法时候拥有相似的处理逻辑，例如调用sort包方法对数组排序，需要数组元素类型实现Interface接口，没有泛型的时候，int,int32,int64,float都要实现一遍接口，而这些类型的实际方法的逻辑都是一样的，用泛型能够减少大量冗余代码"]]},"content":["3101f52f-dde2-4887-b9ea-0372911d0d89","5e463322-8bd8-469a-ad91-2db63cbd7b0a","da5e0b32-f95d-4ea9-80b7-083944dc12e4"],"created_time":1668648660000,"last_edited_time":1677397527821,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"30b3e19e-5a34-49d1-a935-19ffd889331f":{"role":"reader","value":{"id":"30b3e19e-5a34-49d1-a935-19ffd889331f","version":42,"type":"text","properties":{"title":[["何时不使用泛型",[["b"]]]]},"created_time":1668648840000,"last_edited_time":1668648900000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"68028f34-8e6d-4814-ac6b-bd8a9bcdc24d":{"role":"reader","value":{"id":"68028f34-8e6d-4814-ac6b-bd8a9bcdc24d","version":245,"type":"numbered_list","properties":{"title":[["下面的例子我们调用了接口的方法，使用泛型没有带来任何好处"]]},"content":["d91184bf-f11a-4968-a976-0cd227c64159"],"created_time":1668648879843,"last_edited_time":1677397594575,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"a230f488-c92e-4ed4-926b-092e3df7c061":{"role":"reader","value":{"id":"a230f488-c92e-4ed4-926b-092e3df7c061","version":137,"type":"numbered_list","properties":{"title":[["当使用泛型会带来更多复杂度"]]},"created_time":1668648900000,"last_edited_time":1677397613668,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"a085e89c-8fc6-46d4-8500-51f20db77691":{"role":"reader","value":{"id":"a085e89c-8fc6-46d4-8500-51f20db77691","version":92,"type":"sub_sub_header","properties":{"title":[["2.10 #10: Not being aware of the possible problems with type embedding （对类型嵌入的使用场景不熟悉）"]]},"created_time":1668648957407,"last_edited_time":1668648960000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"5e3ec5ed-e79f-4a2e-a71c-ddd222c731a4":{"role":"reader","value":{"id":"5e3ec5ed-e79f-4a2e-a71c-ddd222c731a4","version":301,"type":"numbered_list","properties":{"title":[["简单来说，类型嵌入可以避免编写大量的模板代码，使用嵌入类型的原则是，如果不想暴露成员的访问权，就尽量不使用类型嵌入。"]]},"created_time":1668648960000,"last_edited_time":1668649080000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"101a15a9-cb96-493f-baac-a8554a066029":{"role":"reader","value":{"id":"101a15a9-cb96-493f-baac-a8554a066029","version":146,"type":"numbered_list","properties":{"title":[["嵌入接口的话，嵌入类型还能够默认实现嵌入接口。"]]},"created_time":1668649080000,"last_edited_time":1668649140000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"7b034d7e-f858-4592-8fba-e40e263bdac9":{"role":"reader","value":{"id":"7b034d7e-f858-4592-8fba-e40e263bdac9","version":233,"type":"sub_sub_header","properties":{"title":[["2.11 #11: Not using the functional options pattern（编写构造函数的时候，使用option模式）"]]},"created_time":1668733394392,"last_edited_time":1677310198661,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"687b1372-ba49-4717-b443-0cece509c35f":{"role":"reader","value":{"id":"687b1372-ba49-4717-b443-0cece509c35f","version":276,"type":"text","properties":{"title":[["在很多场景下下，我们需要对对象的成员进行配置化，往往我们会在NewXXX函数中的参数中罗列配置化的值，这样就出现很多问题。"]]},"created_time":1668733380000,"last_edited_time":1668733740000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"29eb9559-b6a3-4841-aa47-0aa955977f34":{"role":"reader","value":{"id":"29eb9559-b6a3-4841-aa47-0aa955977f34","version":13,"type":"text","properties":{"title":[["Bad Code",[["b"]]]]},"created_time":1668733800000,"last_edited_time":1668733800000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"ffb64d53-0d19-499e-9c53-92c42e2cfcc7":{"role":"reader","value":{"id":"ffb64d53-0d19-499e-9c53-92c42e2cfcc7","version":10,"type":"code","properties":{"title":[["func NewServer(addr string, port int) (*http.Server, error) { \n\t// ...\n}"]],"language":[["Go"]]},"created_time":1668733827349,"last_edited_time":1668733800000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"e29240e4-0c0a-4ae9-896d-c20a88fd6987":{"role":"reader","value":{"id":"e29240e4-0c0a-4ae9-896d-c20a88fd6987","version":257,"type":"numbered_list","properties":{"title":[["如果不传递port的时候，我们希望使用默认值，但是这里port又必须要填写一个值"]]},"created_time":1668733800000,"last_edited_time":1668733920000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"a1949e3b-2690-4b58-8c93-eee956520e01":{"role":"reader","value":{"id":"a1949e3b-2690-4b58-8c93-eee956520e01","version":125,"type":"numbered_list","properties":{"title":[["额外增加参数的时候，会对函数签名有不兼容的修改。"]]},"created_time":1668733920000,"last_edited_time":1668733980000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"0d6c8f7d-efe1-4500-9fbe-5884a71cdd84":{"role":"reader","value":{"id":"0d6c8f7d-efe1-4500-9fbe-5884a71cdd84","version":111,"type":"text","properties":{"title":[["我们期望配置*http.Server的时候，可以做到下面几点："]]},"created_time":1668734040000,"last_edited_time":1668734040000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"2363de2c-05cc-44ab-9def-44e215fcbb21":{"role":"reader","value":{"id":"2363de2c-05cc-44ab-9def-44e215fcbb21","version":55,"type":"numbered_list","properties":{"title":[["如果port没有设置，我们使用默认值"]]},"created_time":1668734040000,"last_edited_time":1668734040000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"7eb5dca6-dda8-4bdc-bcc6-74063ebd43e5":{"role":"reader","value":{"id":"7eb5dca6-dda8-4bdc-bcc6-74063ebd43e5","version":72,"type":"numbered_list","properties":{"title":[["如果port是负数，抛出错误，这很重要"]]},"created_time":1668734040000,"last_edited_time":1668734100000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"3d2bc34b-1e19-45ef-b7a8-337817df896e":{"role":"reader","value":{"id":"3d2bc34b-1e19-45ef-b7a8-337817df896e","version":85,"type":"numbered_list","properties":{"title":[["如果port是0，那我们就随机生成端口"]]},"created_time":1668734100000,"last_edited_time":1668734100000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"b0dcbae6-9340-4206-ab30-efcc66f2c133":{"role":"reader","value":{"id":"b0dcbae6-9340-4206-ab30-efcc66f2c133","version":52,"type":"numbered_list","properties":{"title":[["其他场景，我们使用默认值"]]},"created_time":1668734100000,"last_edited_time":1668734100000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"cd0cef2a-4674-4d77-a166-43a3de853b04":{"role":"reader","value":{"id":"cd0cef2a-4674-4d77-a166-43a3de853b04","version":91,"type":"text","properties":{"title":[["解决方案一",[["b"]]],["："],["Config struct",[["b"]]]]},"created_time":1668734100000,"last_edited_time":1677397719537,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"f88bc03a-930c-4628-a40b-77c3749f2698":{"role":"reader","value":{"id":"f88bc03a-930c-4628-a40b-77c3749f2698","version":87,"type":"text","properties":{"title":[["第一种解决方案是，使用一个Config对象存储配置。"]]},"created_time":1668734160000,"last_edited_time":1668734460000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"64ca2bf0-c9c9-4102-b315-424d95d397d2":{"role":"reader","value":{"id":"64ca2bf0-c9c9-4102-b315-424d95d397d2","version":254,"type":"callout","properties":{"title":[["这里遇到第一个点，配置字段为指针类型，判断用户是否配置了该值"]]},"format":{"page_icon":"💡","block_color":"gray_background"},"created_time":1668734504426,"last_edited_time":1668735180000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"f2595135-32e8-43f6-b571-3b3890799865":{"role":"reader","value":{"id":"f2595135-32e8-43f6-b571-3b3890799865","version":7,"type":"column_list","content":["2847d5ac-6a2b-41f3-b0ad-60bcee197875","5342c807-ad16-458f-bf03-28fd3feec059"],"created_time":1677385755137,"last_edited_time":1677385755140,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"e39eeb25-a658-47b9-8bc8-5e2f019f7383":{"role":"reader","value":{"id":"e39eeb25-a658-47b9-8bc8-5e2f019f7383","version":249,"type":"code","properties":{"title":[["port := 0\n// 但是用户使用的时候需要传递指针类型给Config结构体，会给人造成困惑，\n// 配置一个端口需要传递一个int指针，所以这种设计并不API友好\nconfig := httplib.Config{\n\tPort: \u0026port,\n}\n// 当我们不想传递配置的时候，也不行，必要给一个空的结构提\nhttplib.NewServer(\"localhost\", httplib.Config{})"]],"language":[["Go"]]},"created_time":1668735128812,"last_edited_time":1668735180000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"4732007d-9b87-4515-b103-7ee0c00d8521":{"role":"reader","value":{"id":"4732007d-9b87-4515-b103-7ee0c00d8521","version":57,"type":"text","properties":{"title":[["解决方案二",[["b"]]],["："],["Builder pattern",[["b"]]]]},"created_time":1668734640000,"last_edited_time":1677397733721,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"9cf14437-0959-4169-89ab-2ce44e135eae":{"role":"reader","value":{"id":"9cf14437-0959-4169-89ab-2ce44e135eae","version":10,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbgs17zv73j30n70gzah9.jpg"]]},"format":{"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbgs17zv73j30n70gzah9.jpg"},"created_time":1677385641309,"last_edited_time":1677385643926,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"529346ab-ee48-4618-8323-78a45a8823b4":{"role":"reader","value":{"id":"529346ab-ee48-4618-8323-78a45a8823b4","version":10,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbgs0pztq1j30nh08h419.jpg"]]},"format":{"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbgs0pztq1j30nh08h419.jpg"},"created_time":1677385612770,"last_edited_time":1677385615373,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"7b03da77-c12f-4f5b-aa92-47e0be234934":{"role":"reader","value":{"id":"7b03da77-c12f-4f5b-aa92-47e0be234934","version":58,"type":"text","properties":{"title":[["解决方案三",[["b"]]],["："],["Functional options pattern",[["b"]]]]},"created_time":1668735540000,"last_edited_time":1677397747472,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"a90512ec-c922-4f5d-a22f-ab714a41fd8f":{"role":"reader","value":{"id":"a90512ec-c922-4f5d-a22f-ab714a41fd8f","version":10,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbgs05ff03j30lu08k0v0.jpg"]]},"format":{"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbgs05ff03j30lu08k0v0.jpg"},"created_time":1677385580276,"last_edited_time":1677385582487,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"8bda3954-6b7e-426b-86a4-1a11a7ade791":{"role":"reader","value":{"id":"8bda3954-6b7e-426b-86a4-1a11a7ade791","version":10,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbgrzkhnpuj30me09an0m.jpg"]]},"format":{"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbgrzkhnpuj30me09an0m.jpg"},"created_time":1677385546574,"last_edited_time":1677385549018,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"3d14694c-cc23-4a39-8977-1c475be6c3f1":{"role":"reader","value":{"id":"3d14694c-cc23-4a39-8977-1c475be6c3f1","version":10,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbgrxfm0cjj30o00fbjyj.jpg"]]},"format":{"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbgrxfm0cjj30o00fbjyj.jpg"},"created_time":1677385463932,"last_edited_time":1677385466045,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"9570a370-c6af-4c42-b058-f01cc96bf734":{"role":"reader","value":{"id":"9570a370-c6af-4c42-b058-f01cc96bf734","version":190,"type":"code","properties":{"title":[["// 构造函数，可以传递多个配置项\nserver, err := httplib.NewServer(\"localhost\",\n        httplib.WithPort(8080),\n        httplib.WithTimeout(time.Second))\n// 因为是可变参数，之前必填的cfg对象，可以省略\nserver, err := httplib.NewServer(\"localhost\")"]],"language":[["Go"]]},"created_time":1668735884241,"last_edited_time":1668735960000,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"c2de3f72-6e40-492a-aff5-671c585b19ce":{"role":"reader","value":{"id":"c2de3f72-6e40-492a-aff5-671c585b19ce","version":4,"type":"sub_sub_header","properties":{"title":[["2.12 #12: Project misorganization（推荐的项目组织结构）"]]},"created_time":1677310273292,"last_edited_time":1677385561061,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"1d5e5afe-6037-4e13-94dc-2da679391a66":{"role":"reader","value":{"id":"1d5e5afe-6037-4e13-94dc-2da679391a66","version":12,"type":"bookmark","properties":{"link":[["https://github.com/golang-standards/project-layout/blob/master/README_zh-CN.md"]],"title":[["project-layout/README_zh-CN.md at master · golang-standards/project-layout"]],"description":[["Standard Go Project Layout. Contribute to golang-standards/project-layout development by creating an account on GitHub."]]},"format":{"bookmark_icon":"https://github.com/fluidicon.png","bookmark_cover":"https://opengraph.githubassets.com/fd02d14603e11c05bdb114b0a9a7447975debdf60c1b3aebb46ab7284bdcb866/golang-standards/project-layout"},"created_time":1677310409161,"last_edited_time":1677310412168,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"c230c158-c326-4a47-9e00-b7138d74b096":{"role":"reader","value":{"id":"c230c158-c326-4a47-9e00-b7138d74b096","version":10,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbfrrr9exgj31fm0w07iq.jpg"]]},"format":{"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbfrrr9exgj31fm0w07iq.jpg"},"created_time":1677310363803,"last_edited_time":1677310366556,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"4acd42d3-adff-4944-99d2-f5bc52956959":{"role":"reader","value":{"id":"4acd42d3-adff-4944-99d2-f5bc52956959","version":78,"type":"sub_sub_header","properties":{"title":[["2.13 #13: Creating utility packages（不推荐使用utility包）"]]},"created_time":1677310855157,"last_edited_time":1677310892340,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"387067a6-8916-477e-b183-be6c3475ffff":{"role":"reader","value":{"id":"387067a6-8916-477e-b183-be6c3475ffff","version":338,"type":"text","properties":{"title":[["util、common、shared这类包名会抹去很多信息，不如直接使用有意义的包名来替代一些工具包"]]},"created_time":1677311082792,"last_edited_time":1677311157666,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"f30c7126-9626-4799-a8b0-0fd7895e6c7e":{"role":"reader","value":{"id":"f30c7126-9626-4799-a8b0-0fd7895e6c7e","version":43,"type":"code","properties":{"title":[["// bad\nset := util.NewStringSet(\"c\", \"a\", \"b\")\nfmt.Println(util.SortStringSet(set))\n\n// good\nset := stringset.New(\"c\", \"a\", \"b\")\nfmt.Println(stringset.Sort(set))"]],"language":[["Go"]]},"created_time":1677311011885,"last_edited_time":1677311080726,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"5d6cc20f-8cf5-4e4f-8178-85c030f21af2":{"role":"reader","value":{"id":"5d6cc20f-8cf5-4e4f-8178-85c030f21af2","version":116,"type":"sub_sub_header","properties":{"title":[["2.14 #14: Ignoring package name collisions（忽略包命名冲突）"]]},"created_time":1677311243365,"last_edited_time":1677311535549,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"f5d2f097-0f1e-498a-a685-d4c1261b2c1e":{"role":"reader","value":{"id":"f5d2f097-0f1e-498a-a685-d4c1261b2c1e","version":97,"type":"text","properties":{"title":[["一般IDE都会有冲突提醒"]]},"created_time":1677311703898,"last_edited_time":1677311712694,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"7aae9a0f-5fc7-4af8-becb-1d841ff857c2":{"role":"reader","value":{"id":"7aae9a0f-5fc7-4af8-becb-1d841ff857c2","version":99,"type":"code","properties":{"title":[["import \"xxx/redis\"\n\n// bad\nredis := redis.NewClient()\nv, err := redis.Get(\"foo\")"]],"language":[["Go"]]},"created_time":1677311583711,"last_edited_time":1677311660497,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"f804aa2a-0103-496a-a8b9-4fb17c489a44":{"role":"reader","value":{"id":"f804aa2a-0103-496a-a8b9-4fb17c489a44","version":55,"type":"text","properties":{"title":[["方案一"]]},"created_time":1677311662638,"last_edited_time":1677311692226,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"aaed1069-5667-477e-8848-9060b9cfad0c":{"role":"reader","value":{"id":"aaed1069-5667-477e-8848-9060b9cfad0c","version":26,"type":"code","properties":{"title":[["redisClient := redis.NewClient()\nv, err := redisClient.Get(\"foo\")"]],"language":[["Go"]]},"created_time":1677311677365,"last_edited_time":1677311695295,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"12b6de2e-b158-44a5-a304-f59f10b04143":{"role":"reader","value":{"id":"12b6de2e-b158-44a5-a304-f59f10b04143","version":43,"type":"text","properties":{"title":[["方案二"]]},"created_time":1677311668345,"last_edited_time":1677311673992,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"e8115cf1-682a-4bce-8cbf-e61781596389":{"role":"reader","value":{"id":"e8115cf1-682a-4bce-8cbf-e61781596389","version":13,"type":"code","properties":{"title":[["import redisapi \"mylib/redis\"\n\nredis := redisapi.NewClient()\nv, err := redis.Get(\"foo\")"]],"language":[["Go"]]},"created_time":1677311681022,"last_edited_time":1677311700942,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"ac6ccfad-09e7-45f4-9e1b-746904705c93":{"role":"reader","value":{"id":"ac6ccfad-09e7-45f4-9e1b-746904705c93","version":113,"type":"sub_sub_header","properties":{"title":[["2.15 #15: Missing code documentation（完善代码文档）"]]},"created_time":1677311771362,"last_edited_time":1677311887323,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"6c1001d5-dfde-43ac-92d8-e5d19f682e59":{"role":"reader","value":{"id":"6c1001d5-dfde-43ac-92d8-e5d19f682e59","version":32,"type":"text","properties":{"title":[["省略"]]},"created_time":1677330089540,"last_edited_time":1677330095493,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"8a8d6c2e-323a-447f-8ea9-ed86272f6540":{"role":"reader","value":{"id":"8a8d6c2e-323a-447f-8ea9-ed86272f6540","version":55,"type":"sub_sub_header","properties":{"title":[["2.16 #16: Not using linters（不使用linters）"]]},"created_time":1677311789752,"last_edited_time":1677311898194,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"ff1a2b24-92e5-4586-a06c-2cf3d8879ed2":{"role":"reader","value":{"id":"ff1a2b24-92e5-4586-a06c-2cf3d8879ed2","version":41,"type":"external_object_instance","format":{"uri":"https://github.com/golangci/golangci-lint","stale":false,"bot_id":"efde49d0-e017-4d2f-a301-c28f0da86161","domain":"github.com","attributes":[{"id":"title","name":"Name","type":"inline","format":{"type":"title","section":"title"},"values":["golangci-lint"]},{"id":"owner","name":"Owner","type":"relation","values":["https://github.com/golangci"]},{"id":"updated_at","name":"Updated At","type":"inline","format":{"type":"last_edited_time"},"values":[{"type":"datetime","time_zone":"UTC","start_date":"2023-02-27","start_time":"12:49"}]}],"original_url":"https://github.com/golangci/golangci-lint","external_object_id":"485444e8-e813-4974-999d-2a3b2db81dc0","related_external_object_uris_to_instance_ids":{"https://github.com/golangci":"79c8e308-c81c-4106-afaf-8541e9f50d81"}},"created_time":1677311980767,"last_edited_time":1677509651436,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"bot","last_edited_by_id":"efde49d0-e017-4d2f-a301-c28f0da86161","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"ba2d26c5-4200-4a8c-8284-231f1fd990c8":{"role":"reader","value":{"id":"ba2d26c5-4200-4a8c-8284-231f1fd990c8","version":4,"type":"sub_header","properties":{"title":[["3 Data types"]]},"created_time":1677310107487,"last_edited_time":1677311768051,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"e8b2f3c0-be40-4fbe-bfed-e6eb3a6e7676":{"role":"reader","value":{"id":"e8b2f3c0-be40-4fbe-bfed-e6eb3a6e7676","version":76,"type":"sub_sub_header","properties":{"title":[["3.1 #17: Creating confusion with octal literals（混淆八进制）"]]},"created_time":1677310117644,"last_edited_time":1677315122573,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"7c3ae5b0-c459-473e-8a87-e8e6962ed3c8":{"role":"reader","value":{"id":"7c3ae5b0-c459-473e-8a87-e8e6962ed3c8","version":193,"type":"text","properties":{"title":[["在GO中以0或者0o开头的数字被认为是8进制数"]]},"created_time":1677314606943,"last_edited_time":1677314837587,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"99247f40-1346-4c0b-81a0-9ef5c76fe9a6":{"role":"reader","value":{"id":"99247f40-1346-4c0b-81a0-9ef5c76fe9a6","version":51,"type":"code","properties":{"title":[["sum := 100 + 010\nfmt.Println(sum)\n\n// output\n// 108"]],"language":[["Go"]]},"created_time":1677314579595,"last_edited_time":1677314604901,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"e93a484e-ae21-47b3-89f0-ed91637307fe":{"role":"reader","value":{"id":"e93a484e-ae21-47b3-89f0-ed91637307fe","version":391,"type":"text","properties":{"title":[["在一些特殊场景，比较读取文件的时候使用八进制描述可以方便的指定权限"]]},"created_time":1677314857153,"last_edited_time":1677314897302,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"77e494a1-82bc-48ab-9634-323077398c25":{"role":"reader","value":{"id":"77e494a1-82bc-48ab-9634-323077398c25","version":7,"type":"code","properties":{"title":[["file, err := os.OpenFile(\"foo\", os.O_RDONLY, 0o644)"]],"language":[["Go"]]},"created_time":1677314910317,"last_edited_time":1677314910545,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"d1720e0e-0f36-482b-998f-684f40120ada":{"role":"reader","value":{"id":"d1720e0e-0f36-482b-998f-684f40120ada","version":147,"type":"bulleted_list","properties":{"title":[["二进制-使用0b或者0B作为前缀（0b100代表4）"]]},"created_time":1677314954839,"last_edited_time":1677315037806,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"fcd9efcf-783c-4f5d-9d68-bedf778e1741":{"role":"reader","value":{"id":"fcd9efcf-783c-4f5d-9d68-bedf778e1741","version":140,"type":"bulleted_list","properties":{"title":[["16进制-使用0x或者0X前缀（0xF代表15）"]]},"created_time":1677314990797,"last_edited_time":1677315039493,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"9ea7be39-3528-4d0f-8c37-0f049f8290cc":{"role":"reader","value":{"id":"9ea7be39-3528-4d0f-8c37-0f049f8290cc","version":174,"type":"bulleted_list","properties":{"title":[["虚数-使用i作为后缀（3i）"]]},"created_time":1677315023041,"last_edited_time":1677315053122,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"ea240d20-f374-4ced-be25-71db0a86d13e":{"role":"reader","value":{"id":"ea240d20-f374-4ced-be25-71db0a86d13e","version":265,"type":"text","properties":{"title":[["除此之外我们可以在数字中穿插下划线提升可读性：1_000_000_000"]]},"created_time":1677315054154,"last_edited_time":1677315097027,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"0c7a19f6-a54b-4863-8cf5-1878afdd6c72":{"role":"reader","value":{"id":"0c7a19f6-a54b-4863-8cf5-1878afdd6c72","version":107,"type":"sub_sub_header","properties":{"title":[["3.2 #18 Neglecting integer overflows（忽略整数溢出）"]]},"created_time":1677315126480,"last_edited_time":1677315146015,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"d0c9d9f1-48c7-4d4e-938b-793ec0712844":{"role":"reader","value":{"id":"d0c9d9f1-48c7-4d4e-938b-793ec0712844","version":120,"type":"text","properties":{"title":[["GO有专门处理大数的包：math/big"]]},"created_time":1677326973400,"last_edited_time":1677326987101,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"7718176b-4cbe-43e0-a7c3-8442b6e18bd6":{"role":"reader","value":{"id":"7718176b-4cbe-43e0-a7c3-8442b6e18bd6","version":532,"type":"code","properties":{"title":[["// 当对整数进行+1操作时，对溢出判断\nfunc Inc32(counter int32) int32 {\n\tif counter == math.MaxInt32 {\n\t\tpanic(\"int32 overflow\")\n\t}\n\treturn counter + 1\n}\n\nfunc IncInt(counter int) int {\n\tif counter == math.MaxInt {\n\t\tpanic(\"int overflow\")\n\t}\n\treturn counter + 1\n}\n\nfunc IncUint(counter uint) uint {\n\tif counter == math.MaxUint {\n\t\tpanic(\"uint overflow\")\n\t}\n\treturn counter + 1\n}\n\n// 当两个整数相加时，提前做溢出判断\nfunc AddInt(a, b int) int {\n\tif a \u003e math.MaxInt-b {\n\t\tpanic(\"int overflow\")\n\t}\n\n\treturn a + b\n}\n\n// 两数相乘时提前做溢出判断\nfunc MultiplyInt(a, b int) int {\n\tif a == 0 || b == 0 {\n\t\treturn 0\n\t}\n\n\tresult := a * b\n\tif a == 1 || b == 1 {\n\t\treturn result\n\t}\n\tif a == math.MinInt || b == math.MinInt {\n\t\tpanic(\"integer overflow\")\n\t}\n\tif result/b != a {\n\t\tpanic(\"integer overflow\")\n\t}\n\treturn result\n}"]],"language":[["Go"]]},"created_time":1677326745175,"last_edited_time":1677326901250,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"617d6e24-d3a2-45d2-a02e-8d93a962f37e":{"role":"reader","value":{"id":"617d6e24-d3a2-45d2-a02e-8d93a962f37e","version":135,"type":"sub_sub_header","properties":{"title":[["3.3 #19: Not understanding floating points（对浮点数理解欠缺）"]]},"created_time":1677327005403,"last_edited_time":1677327045222,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"c02382ca-3519-447b-9c35-61ed422c2b43":{"role":"reader","value":{"id":"c02382ca-3519-447b-9c35-61ed422c2b43","version":181,"type":"text","properties":{"title":[["浮点数的表示方式，可以阅读下面的参考文章："]]},"created_time":1677327820277,"last_edited_time":1677327869234,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"7395c8c0-3d1d-4449-a45c-301f9f3e47f2":{"role":"reader","value":{"id":"7395c8c0-3d1d-4449-a45c-301f9f3e47f2","version":12,"type":"bookmark","properties":{"link":[["https://zhuanlan.zhihu.com/p/144697348"]],"title":[["浮点数的二进制表示(IEEE 754标准)"]],"description":[["浮点数是我们在程序里常用的数据类型，它在内存中到底是怎么样的形式存在，是我了解之前是觉得好神奇，以此记录，作为学习笔记并分享。 现代计算机中，一般都以IEEE 754标准存储浮点数，这个标准的在内存中存储的…"]]},"format":{"bookmark_icon":"https://static.zhihu.com/heifetz/assets/apple-touch-icon-152.81060cab.png"},"created_time":1677327816719,"last_edited_time":1677327819730,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"17d0eed2-78da-48c6-9fe4-877c0bb97c7e":{"role":"reader","value":{"id":"17d0eed2-78da-48c6-9fe4-877c0bb97c7e","version":606,"type":"numbered_list","properties":{"title":[["float32和float64存储精度有限，可能会导致存储出现偏差。因此也会对使用方式产生影响：首先就是对2个浮点数进行比较大小，"],["因此对2个浮点数对比的时候，我们保证误差在可接受范围内",[["b"]]],["即可："]]},"created_time":1677327872526,"last_edited_time":1677329733148,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"38436952-2d35-4bf2-afef-ae872fc393b6":{"role":"reader","value":{"id":"38436952-2d35-4bf2-afef-ae872fc393b6","version":59,"type":"external_object_instance","format":{"uri":"https://github.com/stretchr/testify","stale":false,"bot_id":"efde49d0-e017-4d2f-a301-c28f0da86161","domain":"github.com","attributes":[{"id":"title","name":"Name","type":"inline","format":{"type":"title","section":"title"},"values":["testify"]},{"id":"owner","name":"Owner","type":"relation","values":["https://github.com/stretchr"]},{"id":"updated_at","name":"Updated At","type":"inline","format":{"type":"last_edited_time"},"values":[{"type":"datetime","time_zone":"UTC","start_date":"2023-02-27","start_time":"14:16"}]}],"original_url":"https://github.com/stretchr/testify","external_object_id":"5a5736df-d46d-4012-b0bd-daf9e36e63ba","related_external_object_uris_to_instance_ids":{"https://github.com/stretchr":"3c8bb51b-9794-4138-9381-47af5fb82f61"}},"created_time":1677328343315,"last_edited_time":1677507413043,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"bot","last_edited_by_id":"efde49d0-e017-4d2f-a301-c28f0da86161","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"1954be76-b441-4967-8ae8-64ace383fb24":{"role":"reader","value":{"id":"1954be76-b441-4967-8ae8-64ace383fb24","version":900,"type":"text","properties":{"title":[["仓库 "],["testify",[["b"]]],[" 就提供了 "],["InDelta",[["b"]]],[" 函数来断言两个值的误差在可接受范围内，因为不同机器的FPU(浮点单元)不一致，导致浮点数计算的精度也不一样，使用 InDelta 来对比2个数值也适用于使用不同机器运行的场景。"]]},"created_time":1677328345703,"last_edited_time":1677328721372,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"f556ec3c-6418-424c-a51c-1ee5c2484352":{"role":"reader","value":{"id":"f556ec3c-6418-424c-a51c-1ee5c2484352","version":321,"type":"numbered_list","properties":{"title":[["浮点运算的误差会随着执行次数累积：f2和f1的执行顺序不一致，导致f2的误差更低"]]},"format":{"list_start_index":2},"created_time":1677328497389,"last_edited_time":1677328841686,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"c5946f5e-b732-4ef7-bc7f-6e94f3da5bed":{"role":"reader","value":{"id":"c5946f5e-b732-4ef7-bc7f-6e94f3da5bed","version":13,"type":"code","properties":{"title":[["func f1(n int) float64 {\n\tresult := 10_000.\n\tfor i := 0; i \u003c n; i++ {\n\t\tresult += 1.0001\n\t}\n\treturn result\n}\n\nfunc f2(n int) float64 {\n\tresult := 0.\n\tfor i := 0; i \u003c n; i++ {\n\t\tresult += 1.0001\n\t}\n\treturn result + 10_000.\n}"]],"language":[["Go"]]},"created_time":1677328770682,"last_edited_time":1677329074957,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"9a3209f0-b293-4c53-99e8-2a05e4c51591":{"role":"reader","value":{"id":"9a3209f0-b293-4c53-99e8-2a05e4c51591","version":10,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbg0ncuieej316m09wgo9.jpg"]]},"format":{"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbg0ncuieej316m09wgo9.jpg"},"created_time":1677328794867,"last_edited_time":1677328797456,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"736ceb66-4f7f-4f61-b5d7-b0501df5bedf":{"role":"reader","value":{"id":"736ceb66-4f7f-4f61-b5d7-b0501df5bedf","version":67,"type":"text","properties":{"title":[["注意，浮点计算的顺序会影响结果的准确性",[["b"]]],["。当执行加减法链时，我们应该将操作分组，以添加或减去具有相似数量级的值，然后再添加或减去那些大小不接近的值。因为f2在最后加了10000，最终它产生的结果比f1更准确"]]},"created_time":1677328883316,"last_edited_time":1677329066553,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"5c759594-d836-418f-892e-d3e7fd5b2170":{"role":"reader","value":{"id":"5c759594-d836-418f-892e-d3e7fd5b2170","version":391,"type":"code","properties":{"title":[["a := 100000.001\nb := 1.0001\nc := 1.0002\n\nfmt.Println(a * (b + c))\n// 方式2精度更高，优先计算乘除，但是执行效率低\nfmt.Println(a*b + a*c)\n\n// output\n// 200030.00200030004\n// 200030.0020003"]],"language":[["Go"]]},"created_time":1677329081358,"last_edited_time":1677329764696,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"e977b333-7ac5-4566-b5b4-da25ca627f8c":{"role":"reader","value":{"id":"e977b333-7ac5-4566-b5b4-da25ca627f8c","version":300,"type":"text","properties":{"title":[["在进行浮点数操作的时候，记住下面几点："]]},"created_time":1677328883316,"last_edited_time":1677329887537,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"73e7c288-44ad-40e7-b912-686a5197f9df":{"role":"reader","value":{"id":"73e7c288-44ad-40e7-b912-686a5197f9df","version":244,"type":"bulleted_list","properties":{"title":[["浮点数比较大小的时候，检查2数误差在可接受范围内即可",[["b"]]]]},"created_time":1677329887788,"last_edited_time":1677329995131,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"c2be2616-4eee-4743-83d9-a288f2f52672":{"role":"reader","value":{"id":"c2be2616-4eee-4743-83d9-a288f2f52672","version":359,"type":"bulleted_list","properties":{"title":[["为了提升结果的精度，在进行加减操作时，把具有相似数量级的数进行分组操作",[["b"]]]]},"created_time":1677329931955,"last_edited_time":1677330000396,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"e5be9e62-168a-4996-82f9-0dedb586db6e":{"role":"reader","value":{"id":"e5be9e62-168a-4996-82f9-0dedb586db6e","version":11,"type":"bulleted_list","properties":{"title":[["为了提高准确性，如果一系列操作需要加法、减法、乘法或除法，请先执行乘法和除法操作",[["b"]]]]},"created_time":1677330001493,"last_edited_time":1677330024863,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"e059e418-9616-48c8-950d-8a4670a838b2":{"role":"reader","value":{"id":"e059e418-9616-48c8-950d-8a4670a838b2","version":121,"type":"sub_sub_header","properties":{"title":[["3.4 #20: Not understanding slice length and "],["capacity",[["b"]]],["（不理解切片len和cap）"]]},"created_time":1677330038136,"last_edited_time":1677331168652,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"93c758f0-2d9d-4773-9d92-4a89f61d1563":{"role":"reader","value":{"id":"93c758f0-2d9d-4773-9d92-4a89f61d1563","version":12,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbg1o2dzpqj318y0uwq8j.jpg"]]},"format":{"block_width":528,"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbg1o2dzpqj318y0uwq8j.jpg","block_full_width":false,"block_page_width":false},"created_time":1677330912771,"last_edited_time":1677331077574,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"ca26df1a-a2d8-4b19-bb42-a06295625c9a":{"role":"reader","value":{"id":"ca26df1a-a2d8-4b19-bb42-a06295625c9a","version":10,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbg25iwbs4j31si0wyk1o.jpg"]]},"format":{"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbg25iwbs4j31si0wyk1o.jpg"},"created_time":1677331917190,"last_edited_time":1677331923281,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"352a530d-4326-4166-90af-e968cb0e2a09":{"role":"reader","value":{"id":"352a530d-4326-4166-90af-e968cb0e2a09","version":173,"type":"sub_sub_header","properties":{"title":[["3.5 #21: Inefficient slice initialization（低效的切片初始化）"]]},"created_time":1677331961534,"last_edited_time":1677332028853,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"36f23040-dd44-41c0-b76d-192112cc6531":{"role":"reader","value":{"id":"36f23040-dd44-41c0-b76d-192112cc6531","version":720,"type":"code","properties":{"title":[["func convertEmptySlice(foos []Foo) []Bar {\n\tbars := make([]Bar, 0)\n\t// 如果foos过长，导致bars频繁申请内存，拷贝数组对执行效率和GC产生影响\n\tfor _, foo := range foos {\n\t\tbars = append(bars, fooToBar(foo))\n\t}\n\treturn bars\n}\n\nfunc convertGivenCapacity(foos []Foo) []Bar {\n\tn := len(foos)\n  // 预先指定 cap\n\tbars := make([]Bar, 0, n)\n\t\n\tfor _, foo := range foos {\n\t\tbars = append(bars, fooToBar(foo))\n\t}\n\treturn bars\n}\n\nfunc convertGivenLength(foos []Foo) []Bar {\n\tn := len(foos)\n\t// 预先指定len，通过下标赋值，比使用append内置函数效率更高一些\n\tbars := make([]Bar, n)\n\n\tfor i, foo := range foos {\n\t\tbars[i] = fooToBar(foo)\n\t}\n\treturn bars\n}"]],"language":[["Go"]]},"created_time":1677332472065,"last_edited_time":1677332663764,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"28c39cfd-83ed-428a-9468-717ac1296f10":{"role":"reader","value":{"id":"28c39cfd-83ed-428a-9468-717ac1296f10","version":10,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbg2fo3kslj31c609sdiq.jpg"]]},"format":{"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbg2fo3kslj31c609sdiq.jpg"},"created_time":1677332502340,"last_edited_time":1677332505046,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"75ea9e9a-cc0b-4aab-9054-b0152cb9b967":{"role":"reader","value":{"id":"75ea9e9a-cc0b-4aab-9054-b0152cb9b967","version":120,"type":"sub_sub_header","properties":{"title":[["3.6 #22: Being confused about nil vs. empty slices（区分nil和empty切片）"]]},"created_time":1677332824465,"last_edited_time":1677334753968,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"5cb4a6bb-ac47-4c9c-b9ce-408efceef4e8":{"role":"reader","value":{"id":"5cb4a6bb-ac47-4c9c-b9ce-408efceef4e8","version":10,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbg2x05784j311m0iw43u.jpg"]]},"format":{"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbg2x05784j311m0iw43u.jpg"},"created_time":1677333501323,"last_edited_time":1677333503745,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"cd4f2b90-c391-4808-a9dd-94c686cd705d":{"role":"reader","value":{"id":"cd4f2b90-c391-4808-a9dd-94c686cd705d","version":481,"type":"text","properties":{"title":[["nil 切片和 empty 切片的区别是 nil切片不占用空间，可以依次来判断是否使用nil 切片, 在json解析场景下，nil和empty的切片也不同",[["b"]]]]},"created_time":1677333514236,"last_edited_time":1677333720335,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"c58b397d-ef2f-4489-9172-e12b3150e165":{"role":"reader","value":{"id":"c58b397d-ef2f-4489-9172-e12b3150e165","version":184,"type":"code","properties":{"title":[["func main() {\n\tvar s1 []float32\n\tcustomer1 := customer{\n\t\tID:         \"foo\",\n\t\tOperations: s1,\n\t}\n\tb, _ := json.Marshal(customer1)\n\t// {\"ID\":\"foo\",\"Operations\":null} nil 的切片被解析为 null\n\tfmt.Println(string(b))\n\n\ts2 := make([]float32, 0)\n\tcustomer2 := customer{\n\t\tID:         \"bar\",\n\t\tOperations: s2,\n\t}\n\tb, _ = json.Marshal(customer2)\n  // {\"ID\":\"bar\",\"Operations\":[]} empty 的切片被解析为 []\n\tfmt.Println(string(b))\n}\n\ntype customer struct {\n\tID         string\n\tOperations []float32\n}"]],"language":[["Go"]]},"created_time":1677333597281,"last_edited_time":1677333691979,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"a73519eb-2d01-415b-94c6-470feee97f66":{"role":"reader","value":{"id":"a73519eb-2d01-415b-94c6-470feee97f66","version":102,"type":"sub_sub_header","properties":{"title":[["3.7 #23: Not properly checking if a slice is empty（判断切片为空）"]]},"created_time":1677333820592,"last_edited_time":1677334980393,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"2a321e34-25dd-4ea7-b13c-e35b57254f22":{"role":"reader","value":{"id":"2a321e34-25dd-4ea7-b13c-e35b57254f22","version":43,"type":"code","properties":{"title":[["len(s) == 0"]],"language":[["Go"]]},"created_time":1677335005148,"last_edited_time":1677335013313,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"c12f5559-af37-470e-bf1c-7975658e8fda":{"role":"reader","value":{"id":"c12f5559-af37-470e-bf1c-7975658e8fda","version":107,"type":"sub_sub_header","properties":{"title":[["3.8 #24: Not making slice copies correctly（没有正确的复制切片）"]]},"created_time":1677335026111,"last_edited_time":1677335053079,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"75b8938a-8cd2-44f9-95b3-c5cf431d2b13":{"role":"reader","value":{"id":"75b8938a-8cd2-44f9-95b3-c5cf431d2b13","version":190,"type":"text","properties":{"title":[["copy函数会复制元素的个数为2个切片长度最小值"]]},"created_time":1677336015001,"last_edited_time":1677336038946,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"b524da49-ebe5-467c-ab72-8d2d706b2cb7":{"role":"reader","value":{"id":"b524da49-ebe5-467c-ab72-8d2d706b2cb7","version":7,"type":"code","properties":{"title":[["func bad() {\n\tsrc := []int{0, 1, 2}\n\tvar dst []int\n\tcopy(dst, src)\n\tfmt.Println(dst)\n\n\t_ = src\n\t_ = dst\n}\n\nfunc correct() {\n\tsrc := []int{0, 1, 2}\n\tdst := make([]int, len(src))\n\tcopy(dst, src)\n\tfmt.Println(dst)\n\n\t_ = src\n\t_ = dst\n}"]],"language":[["Go"]]},"created_time":1677335158429,"last_edited_time":1677335158684,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"ea0f537e-7bae-4efb-9231-bc9a8da00ff5":{"role":"reader","value":{"id":"ea0f537e-7bae-4efb-9231-bc9a8da00ff5","version":167,"type":"sub_sub_header","properties":{"title":[["3.9 #25: Unexpected side effects using slice append（使用切片append时产生的副作用-s[low:high:max]用法）"]]},"created_time":1677336144008,"last_edited_time":1677338318190,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"768162d1-b71d-417d-a694-742245852ba6":{"role":"reader","value":{"id":"768162d1-b71d-417d-a694-742245852ba6","version":333,"type":"text","properties":{"title":[["s2和s1共享底层数组，当s2的cap大于len，对s2 append会影响s1的结果"]]},"created_time":1677337967189,"last_edited_time":1677338023663,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"1103f1d0-cde4-4546-a6f7-d011e2a8f05b":{"role":"reader","value":{"id":"1103f1d0-cde4-4546-a6f7-d011e2a8f05b","version":10,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbg51twz57j314k0fsadn.jpg"]]},"format":{"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbg51twz57j314k0fsadn.jpg"},"created_time":1677337940365,"last_edited_time":1677337943611,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"1f95b6f1-ff97-4a54-89dd-7395119f65f0":{"role":"reader","value":{"id":"1f95b6f1-ff97-4a54-89dd-7395119f65f0","version":968,"type":"code","properties":{"title":[["// 当调用f函数的时候，对s入参做的修改都会反应到上层函数中的s\nfunc listing1() {\n\ts := []int{1, 2, 3}\n\n\tf(s[:2])\n\tfmt.Println(s)\n}\n\n// 解决方案一：对s进行深拷贝\nfunc listing2() {\n\ts := []int{1, 2, 3}\n\tsCopy := make([]int, 2)\n\tcopy(sCopy, s)\n\n\tf(sCopy)\n\tresult := append(sCopy, s[2])\n\tfmt.Println(result)\n}\n\n// 解决方案二：使用 full slice expression: s[low:high:max]，这样就限制了切片的cap\n// cap = max-low = 2-0 = 2\n// 这样f函数对切片进行append操作就不用影响其他共享底层存储的切片了\nfunc listing3() {\n\ts := []int{1, 2, 3}\n\tf(s[:2:2])\n\tfmt.Println(s)\n}\n\nfunc f(s []int) {\n\t_ = append(s, 10)\n}"]],"language":[["Go"]]},"created_time":1677338073109,"last_edited_time":1677338302795,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"e2ff5248-07c2-4bc3-aaa4-be0a7662234a":{"role":"reader","value":{"id":"e2ff5248-07c2-4bc3-aaa4-be0a7662234a","version":83,"type":"sub_sub_header","properties":{"title":[["3.10 #26: Slices and memory leaks（切片的内存泄露）"]]},"created_time":1677338331854,"last_edited_time":1677339015536,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"57ce84a6-6a8d-4994-9397-8909a017c078":{"role":"reader","value":{"id":"57ce84a6-6a8d-4994-9397-8909a017c078","version":12,"type":"image","properties":{"size":[["109.0KB"]],"title":[["Untitled"]],"source":[["https://s3-us-west-2.amazonaws.com/secure.notion-static.com/610d8fa8-5bbe-43c4-a6c5-ed72b8b90fe1/Untitled.png"]]},"format":{"block_width":1220,"display_source":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/610d8fa8-5bbe-43c4-a6c5-ed72b8b90fe1/Untitled.png","block_full_width":false,"block_page_width":true,"block_aspect_ratio":0.5081967213114754,"block_preserve_scale":true},"created_time":1677338622713,"last_edited_time":1677338628501,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"file_ids":["610d8fa8-5bbe-43c4-a6c5-ed72b8b90fe1"],"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"98c47f40-fde2-4a2d-b9e7-52f47b94f70c":{"role":"reader","value":{"id":"98c47f40-fde2-4a2d-b9e7-52f47b94f70c","version":991,"type":"code","properties":{"title":[["func main() {\n\tfoos := make([]Foo, 1_000)\n\tprintAlloc()\n\n\tfor i := 0; i \u003c len(foos); i++ {\n\t\tfoos[i] = Foo{\n\t\t\tv: make([]byte, 1024*1024),\n\t\t}\n\t}\n\tprintAlloc()\n\t\n  // 和上面类似不会回收剩下998个元素\n\ttwo := keepFirstTwoElementsOnly(foos)\n\truntime.GC()\n\tprintAlloc()\n\truntime.KeepAlive(two)\n}\n\nfunc keepFirstTwoElementsOnly(foos []Foo) []Foo {\n\treturn foos[:2]\n}\n\n// keepFirstTwoElementsOnlyCopy 和 keepFirstTwoElementsOnlyMarkNil\n// 都能保证剩下的资源被回收，但是如果想留下的元素不是2，我们想保留500个元素，\n// 使用 keepFirstTwoElementsOnlyMarkNil 会有更高的效率，不用额外拷贝资源\nfunc keepFirstTwoElementsOnlyCopy(foos []Foo) []Foo {\n\tres := make([]Foo, 2)\n\tcopy(res, foos)\n\treturn res\n}\n\n// keepFirstTwoElementsOnlyMarkNil 给元素中的指针成员置为nil，能够让GC自动回收\nfunc keepFirstTwoElementsOnlyMarkNil(foos []Foo) []Foo {\n\tfor i := 2; i \u003c len(foos); i++ {\n\t\tfoos[i].v = nil\n\t}\n\treturn foos[:2]\n}\n\nfunc printAlloc() {\n\tvar m runtime.MemStats\n\truntime.ReadMemStats(\u0026m)\n\tfmt.Printf(\"%d KB\\n\", m.Alloc/1024)\n}"]],"language":[["Go"]]},"created_time":1677339022322,"last_edited_time":1677339278897,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"769b6782-f528-4aee-a4ce-d4db1a34ef90":{"role":"reader","value":{"id":"769b6782-f528-4aee-a4ce-d4db1a34ef90","version":62,"type":"sub_sub_header","properties":{"title":[["3.11 #27: Inefficient map initialization（低效的map初始化）"]]},"created_time":1677339290854,"last_edited_time":1677372578539,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"faaf32bb-8294-4233-b9db-5026e7696a98":{"role":"reader","value":{"id":"faaf32bb-8294-4233-b9db-5026e7696a98","version":12,"type":"bookmark","properties":{"link":[["https://golang.design/go-questions/map/principal/"]],"title":[["map 的实现原理"]],"description":[["什么是 map #  维基百科里这样定义 map：  In computer science, an associative array, map, symbol table, or dictionary is an abstract data type composed of a collection of (key, value) pairs, such that each possible key appears at most once in the collection.  简单说明一下：在计算机科学里，被称为相关数组、map、符号表或者字典，是由一组 \u003ckey, value\u003e 对组成的抽象数据结构，，并且同一个 key 只会出现一次。 有两个关键点：map 是由 key-value 对组成的；key 只会出现一次。 和 map 相关的操作主要是：  增加一个 k-v 对 —— Add or insert； 删除一个 k-v 对 —— Remove or delete； 修改某个 k 对应的 v —— Reassign； 查询某个 k 对应的 v —— Lookup；  简单说就是最基本的 增删查改。"]]},"format":{"bookmark_icon":"https://golang.design/go-questions/favicon.png"},"created_time":1677371605923,"last_edited_time":1677371608931,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"15042698-9bdb-44b5-b6e1-c89b1df18f1b":{"role":"reader","value":{"id":"15042698-9bdb-44b5-b6e1-c89b1df18f1b","version":14,"type":"callout","properties":{"title":[["bmap",[["c"]]],["就是我们常说的“桶”，桶里面会最多装 8 个 key，这些 key 之所以会落入同一个桶，是因为它们经过哈希计算后，哈希结果是“一类”的。在桶内，又会根据 key 计算出来的 hash 值的高 8 位来决定 key 到底落入桶内的哪个位置（一个桶内最多有8个位置）"]]},"format":{"page_icon":"💡","block_color":"gray_background"},"created_time":1677372318297,"last_edited_time":1677372325986,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"62e7b5ff-db7d-4e99-b559-ed5fdf209377":{"role":"reader","value":{"id":"62e7b5ff-db7d-4e99-b559-ed5fdf209377","version":10,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbgllsfsmhj315k0s847g.jpg"]]},"format":{"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbgllsfsmhj315k0s847g.jpg"},"created_time":1677372301132,"last_edited_time":1677372303854,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"5302d800-7df6-453d-9329-206eff1f7eb3":{"role":"reader","value":{"id":"5302d800-7df6-453d-9329-206eff1f7eb3","version":12,"type":"text","properties":{"title":[["触发 map 扩容的时机：在向 map 插入新 key 的时候，会进行条件检测，符合下面这 2 个条件，就会触发扩容："]]},"created_time":1677372337402,"last_edited_time":1677372428532,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"4e710b13-3da9-4ad2-a208-19734e7a3dc2":{"role":"reader","value":{"id":"4e710b13-3da9-4ad2-a208-19734e7a3dc2","version":12,"type":"numbered_list","properties":{"title":[["装载因子超过阈值，源码里定义的阈值是 6.5。("],["loadFactor := count / (2^B)",[["c"]]],[") count 就是 map 的元素个数，2^B 表示 bucket 数量。"]]},"created_time":1677372443371,"last_edited_time":1677372468658,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"86548953-b93e-423f-8e3b-a7277e4a75fd":{"role":"reader","value":{"id":"86548953-b93e-423f-8e3b-a7277e4a75fd","version":2,"type":"numbered_list","properties":{"title":[["overflow 的 bucket 数量过多：当 B 小于 15，也就是 bucket 总数 2^B 小于 2^15 时，如果 overflow 的 bucket 数量超过 2^B；当 B \u003e= 15，也就是 bucket 总数 2^B 大于等于 2^15，如果 overflow 的 bucket 数量超过 2^15。"]]},"created_time":1677372443371,"last_edited_time":1677372443375,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"7148b04f-a2a2-4c42-bc95-3bcc235a9d66":{"role":"reader","value":{"id":"7148b04f-a2a2-4c42-bc95-3bcc235a9d66","version":21,"type":"text","properties":{"title":[["因此，就像切片一样，如果我们预先知道map将包含的元素数量，我们应该通过提供初始大小来创建它。这样做可以避免潜在的map增长，这是相当繁重的计算，因为它需要重新分配足够的空间并重新平衡所有元素。",[["b"]]]]},"created_time":1677372530750,"last_edited_time":1677372543759,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"dbd9077d-e8df-4546-abac-ad3aa22c6477":{"role":"reader","value":{"id":"dbd9077d-e8df-4546-abac-ad3aa22c6477","version":209,"type":"sub_sub_header","properties":{"title":[["3.12 #28: Maps and memory leaks（map类型的内存泄露，map中的值建议使用指针类型）"]]},"created_time":1677372557961,"last_edited_time":1677376171669,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"d0fe65f3-31b5-47d7-8f6f-0678b9c1242b":{"role":"reader","value":{"id":"d0fe65f3-31b5-47d7-8f6f-0678b9c1242b","version":12,"type":"bookmark","properties":{"link":[["https://mp.weixin.qq.com/s/Slvgl3KZax2jsy2xGDdFKw"]],"title":[["Go map 如何缩容？"]],"description":[["快速了解 map 缩容机制"]]},"format":{"bookmark_icon":"https://res.wx.qq.com/a/wx_fed/assets/res/NTI4MWU5.ico","bookmark_cover":"http://mmbiz.qpic.cn/mmbiz_jpg/KVl0giak5ib4hc7SL6H3h78GQv9jTbOnUasjE3al0ereICricRTh8dPHDS7QWMbVl27RgiajGRpUo2A25WJ0dOAGCg/0?wx_fmt=jpeg"},"created_time":1677373594526,"last_edited_time":1677373597570,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"a0a71e19-0be7-47f7-9ca0-c0402acecce9":{"role":"reader","value":{"id":"a0a71e19-0be7-47f7-9ca0-c0402acecce9","version":317,"type":"callout","properties":{"title":[["GO的缩容操作就是不增长内存，并没有实际上的缩容，所以创建一个较大的map之后，需要自己手动处理缩容的问题"]]},"format":{"page_icon":"💡","block_color":"gray_background"},"created_time":1677373608997,"last_edited_time":1677373647253,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"8864a47d-c49e-49ff-8b06-40f593d6619e":{"role":"reader","value":{"id":"8864a47d-c49e-49ff-8b06-40f593d6619e","version":57,"type":"code","properties":{"title":[["func main() {\n\t// Init\n\tn := 1_000_000\n\tm := make(map[int][128]byte)\n\tprintAlloc()\n\n\t// Add elements\n\tfor i := 0; i \u003c n; i++ {\n\t\tm[i] = randBytes()\n\t}\n\tprintAlloc()\n\n\t// Remove elements\n\tfor i := 0; i \u003c n; i++ {\n\t\tdelete(m, i)\n\t}\n\n\t// End\n\truntime.GC()\n\tprintAlloc()\n\truntime.KeepAlive(m)\n}\n// output\n// 0 MB\n// 461 MB\n// 293 MB\n\nfunc randBytes() [128]byte {\n\treturn [128]byte{}\n}\n\nfunc printAlloc() {\n\tvar m runtime.MemStats\n\truntime.ReadMemStats(\u0026m)\n\tfmt.Printf(\"%d MB\\n\", m.Alloc/1024/1024)\n}"]],"language":[["Go"]]},"created_time":1677373920809,"last_edited_time":1677374071679,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"81de24b2-5e9a-4f0e-b460-6d3ff759d0ff":{"role":"reader","value":{"id":"81de24b2-5e9a-4f0e-b460-6d3ff759d0ff","version":1131,"type":"text","properties":{"title":[["事例代码创建1000,000个元素的map后调用delete方法删除了每个元素，但是内存占用并没有明显的降低，因为GO的map没有真正意义上的缩容，删除了所有元素之后，降低的内存应该是bmap中overflow指向的bucket，map[int][128]byte中的数组[128]byte空值就占用128byte。"]]},"created_time":1677374103853,"last_edited_time":1677375712278,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"a86b4b41-c583-40b5-8ec1-bc6a437b07d8":{"role":"reader","value":{"id":"a86b4b41-c583-40b5-8ec1-bc6a437b07d8","version":273,"type":"bulleted_list","properties":{"title":[["解决方案一是不断的拷贝新的map，但是在下个gc周期前，内存会翻倍；"]]},"created_time":1677375712706,"last_edited_time":1677375823718,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"0f97c85b-92f3-4ab5-a412-293e12d70823":{"role":"reader","value":{"id":"0f97c85b-92f3-4ab5-a412-293e12d70823","version":293,"type":"bulleted_list","properties":{"title":[["解决方案二"],["修改map中value的类型为指针，减少value空值占用的空间",[["b"]]],["；"]]},"created_time":1677375778041,"last_edited_time":1677376141317,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"96e7f28b-4eee-4dc7-b30c-60b7b18760d9":{"role":"reader","value":{"id":"96e7f28b-4eee-4dc7-b30c-60b7b18760d9","version":284,"type":"text","properties":{"title":[["对于方案二,可以看到扩缩容场景的内存占用更小："]]},"created_time":1677375831676,"last_edited_time":1677375976389,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"1c046974-a92a-4b97-b1b9-8d3fd57a8160":{"role":"reader","value":{"id":"1c046974-a92a-4b97-b1b9-8d3fd57a8160","version":10,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbgnbhers4j316y0a8q5j.jpg"]]},"format":{"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbgnbhers4j316y0a8q5j.jpg"},"created_time":1677375852477,"last_edited_time":1677375855387,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"d95a1b1e-6100-44f8-9e5d-2e4d5314fd7f":{"role":"reader","value":{"id":"d95a1b1e-6100-44f8-9e5d-2e4d5314fd7f","version":12,"type":"callout","properties":{"title":[["如果键或值超过128字节，Go不会将其直接存储在映射存储桶中。相反，Go存储一个指针来引用键或值。"]]},"format":{"page_icon":"💡","block_color":"gray_background"},"created_time":1677375924361,"last_edited_time":1677375945701,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"dfd75c6b-7aa2-4d95-8590-7550720dfd52":{"role":"reader","value":{"id":"dfd75c6b-7aa2-4d95-8590-7550720dfd52","version":331,"type":"text","properties":{"title":[["所以当你可以估算value或者key大于128的时候可以不用关心value是采用指针或者值。"]]},"created_time":1677375949023,"last_edited_time":1677376127715,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"85f163fe-a8e6-422a-9ad0-614404297b56":{"role":"reader","value":{"id":"85f163fe-a8e6-422a-9ad0-614404297b56","version":65,"type":"sub_sub_header","properties":{"title":[["3.13 #29: Comparing values incorrectly（错误的对比值）"]]},"created_time":1677376185848,"last_edited_time":1677376201688,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"e29bbc97-38ba-44bd-a807-4fe7adb6d43e":{"role":"reader","value":{"id":"e29bbc97-38ba-44bd-a807-4fe7adb6d43e","version":215,"type":"bulleted_list","properties":{"title":[["对与一些不可比较的类型：slice不能直接使用 == 来比较"]]},"content":["345c7f81-b5fa-40e3-a86c-e377a99b23c0"],"created_time":1677376202539,"last_edited_time":1677377016908,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"ec026dd4-dbce-438a-9eb4-794e8b8a1b77":{"role":"reader","value":{"id":"ec026dd4-dbce-438a-9eb4-794e8b8a1b77","version":425,"type":"bulleted_list","properties":{"title":[["使用 reflect.DeepEqual 方法可以根据类型不同进行不同的比较，但是运行时间是 == 的100倍，因此在对性能有需要的场景，建议自行编写对比函数。"]]},"content":["e815113a-27ce-4efe-9c40-0f340dc1556e"],"created_time":1677376719261,"last_edited_time":1677377036744,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"f5e7e9d1-a8b8-4914-b75b-a07824222c18":{"role":"reader","value":{"id":"f5e7e9d1-a8b8-4914-b75b-a07824222c18","version":9,"type":"sub_header","properties":{"title":[["4 Control structures"]]},"created_time":1677377232520,"last_edited_time":1677377241573,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"f78ef250-7ea6-4ebd-a885-78bfb188720c":{"role":"reader","value":{"id":"f78ef250-7ea6-4ebd-a885-78bfb188720c","version":98,"type":"sub_sub_header","properties":{"title":[["4.1 #30: Ignoring the fact that elements are copied in range loops（range loop中的值为副本）"]]},"created_time":1677377248009,"last_edited_time":1677378833555,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"de537daf-f654-488c-932c-d8117ac58f29":{"role":"reader","value":{"id":"de537daf-f654-488c-932c-d8117ac58f29","version":18,"type":"callout","properties":{"title":[["我们应该记住，range loops 中的 value 元素是一个副本。"]]},"format":{"page_icon":"💡","block_color":"gray_background"},"created_time":1677378597781,"last_edited_time":1677378641742,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"273461ce-81fc-4893-a0e6-38e99ac6f396":{"role":"reader","value":{"id":"273461ce-81fc-4893-a0e6-38e99ac6f396","version":668,"type":"code","properties":{"title":[["func main() {\n\taccounts := createAccounts()\n\tfor _, a := range accounts {\n\t\ta.balance += 1000\n\t}\n  // [{100} {200} {300}]\n\tfmt.Println(accounts)\n\t\n\t// 方案一：直接使用下标访问到特定的值，仍然使用 range loop\n\taccounts = createAccounts()\n\tfor i := range accounts {\n\t\taccounts[i].balance += 1000\n\t}\n  // [{1100} {1200} {1300}]\n\tfmt.Println(accounts)\n\n\t// 方案二：直接使用下标访问到特定的值，自己计算下标值\n\taccounts = createAccounts()\n\tfor i := 0; i \u003c len(accounts); i++ {\n\t\taccounts[i].balance += 1000\n\t}\n  // [{1100} {1200} {1300}]\n\tfmt.Println(accounts)\n\t\n\t// 方案三：迭代指针类型，及时a为副本但是仍然指向同一个内存地址\n\taccountsPtr := createAccountsPtr()\n\tfor _, a := range accountsPtr {\n\t\ta.balance += 1000\n\t}\n}\n\nfunc createAccounts() []account {\n\treturn []account{\n\t\t{balance: 100.},\n\t\t{balance: 200.},\n\t\t{balance: 300.},\n\t}\n}\n\nfunc createAccountsPtr() []*account {\n\treturn []*account{\n\t\t{balance: 100.},\n\t\t{balance: 200.},\n\t\t{balance: 300.},\n\t}\n}"]],"language":[["Go"]]},"created_time":1677378392359,"last_edited_time":1677378788869,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"0ec49291-cf77-41b3-984d-1eebb74f911e":{"role":"reader","value":{"id":"0ec49291-cf77-41b3-984d-1eebb74f911e","version":118,"type":"sub_sub_header","properties":{"title":[["4.2 #31: Ignoring how arguments are evaluated in range loops（忽略rang的对象是何时被计算）"]]},"created_time":1677378805149,"last_edited_time":1677380386392,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"af867877-d196-4b99-97f4-ee96778e83d1":{"role":"reader","value":{"id":"af867877-d196-4b99-97f4-ee96778e83d1","version":35,"type":"text","properties":{"title":[["slice",[["b"]]]]},"created_time":1677380288928,"last_edited_time":1677380297245,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"6fe82d12-380a-4fe0-a7fa-f48322e68255":{"role":"reader","value":{"id":"6fe82d12-380a-4fe0-a7fa-f48322e68255","version":1065,"type":"code","properties":{"title":[["// range loop 的对象是一个表达式，这个表达式可以是 string, slice等，当执行\n// 循环的时候，exp只会被计算一次，对原始迭代值进行拷贝生成一个副本\nfor i, v := range exp\n\n// 迭代对象只计算一次，迭代3次就结束，不会无限循环\ns := []int{0, 1, 2}\nfor range s {\n    s = append(s, 10)\n}\n\n// 但是下面这种写法就会无限循环\ns := []int{0, 1, 2}\nfor i := 0; i \u003c len(s); i++ {\n    s = append(s, 10)\n}"]],"language":[["Go"]]},"created_time":1677379262161,"last_edited_time":1677380114112,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"d88435b1-013e-4ebb-aa0f-1e611888dc56":{"role":"reader","value":{"id":"d88435b1-013e-4ebb-aa0f-1e611888dc56","version":10,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbgpbma14pj316m0hewjo.jpg"]]},"format":{"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbgpbma14pj316m0hewjo.jpg"},"created_time":1677380016343,"last_edited_time":1677380018612,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"bb48638e-4b22-4700-8006-b5169145562c":{"role":"reader","value":{"id":"bb48638e-4b22-4700-8006-b5169145562c","version":26,"type":"text","properties":{"title":[["channel",[["b"]]]]},"created_time":1677380301564,"last_edited_time":1677380311827,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"6c7c0ad4-7e41-4c56-8714-6391d3727965":{"role":"reader","value":{"id":"6c7c0ad4-7e41-4c56-8714-6391d3727965","version":305,"type":"code","properties":{"title":[["func main() {\n\tch1 := make(chan int, 3)\n\tgo func() {\n\t\tch1 \u003c- 0\n\t\tch1 \u003c- 1\n\t\tch1 \u003c- 2\n\t\tclose(ch1)\n\t}()\n\n\tch2 := make(chan int, 3)\n\tgo func() {\n\t\tch2 \u003c- 10\n\t\tch2 \u003c- 11\n\t\tch2 \u003c- 12\n\t\tclose(ch2)\n\t}()\n\n\tch := ch1\n\t// rang loop里的ch一直指向ch1，只会迭代3次\n\tfor v := range ch {\n\t\tfmt.Println(v)\n\t\tch = ch2\n\t}\n}\n// output\n// 0 1 2"]],"language":[["Go"]]},"created_time":1677380214487,"last_edited_time":1677380761945,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"256122a4-f4fa-4bd3-af84-6eac1e3323a2":{"role":"reader","value":{"id":"256122a4-f4fa-4bd3-af84-6eac1e3323a2","version":177,"type":"sub_sub_header","properties":{"title":[["4.3 #32: Ignoring the impact of using pointer elements in range loops （错误的引用range loop的生成值）"]]},"created_time":1677380794140,"last_edited_time":1677381890433,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"f949c026-933a-4971-a0be-88796a580e55":{"role":"reader","value":{"id":"f949c026-933a-4971-a0be-88796a580e55","version":618,"type":"text","properties":{"title":[["当在迭代对象的时候，把range loop生成元素的指针赋值给其他对象，会产生问题！"]]},"created_time":1677381346761,"last_edited_time":1677381470710,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"9a8d1ef1-9f61-4351-919c-4b6413764fe2":{"role":"reader","value":{"id":"9a8d1ef1-9f61-4351-919c-4b6413764fe2","version":1363,"type":"code","properties":{"title":[["type Customer struct {\n\tID      string\n\tBalance float64\n}\n\ntype Store struct {\n\tm map[string]*Customer\n}\n\nfunc main() {\n\ts := Store{\n\t\tm: make(map[string]*Customer),\n\t}\n\ts.storeCustomers([]Customer{\n\t\t{ID: \"1\", Balance: 10},\n\t\t{ID: \"2\", Balance: -10},\n\t\t{ID: \"3\", Balance: 0},\n\t})\n\tprint(s.m)\n}\n\n// 问题来源：\nfunc (s *Store) storeCustomers(customers []Customer) {\n\tfor _, customer := range customers {\n\t\t// 每次迭代的时候 customer 都是同一个对象，只是 customer 的值会不断被新的值覆盖\n\t\tfmt.Printf(\"%p\\n\", \u0026customer)\n\t\t// 最终map中的每个key都指向了同一个内存地址\n\t\ts.m[customer.ID] = \u0026customer\n\t}\n}\n\n// 解决方案一：把每次迭代的值copy到一个新的临时变量\nfunc (s *Store) storeCustomers2(customers []Customer) {\n\tfor _, customer := range customers {\n\t\tcurrent := customer\n\t\ts.m[current.ID] = \u0026current\n\t}\n}\n\n// 解决方案二：直接引用切片的元素\n// 问题：如果slice出现扩容的时候，那原本地址还是被引用，可能出现内存泄露\nfunc (s *Store) storeCustomers3(customers []Customer) {\n\tfor i := range customers {\n\t\tcustomer := \u0026customers[i]\n\t\ts.m[customer.ID] = customer\n\t}\n}\n\nfunc print(m map[string]*Customer) {\n\tfor k, v := range m {\n\t\tfmt.Printf(\"key=%s, value=%#v\\n\", k, v)\n\t}\n}"]],"language":[["Go"]]},"created_time":1677381339766,"last_edited_time":1677381713184,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"85e2bdbe-87d9-4082-87bd-9e1c9b8b00c5":{"role":"reader","value":{"id":"85e2bdbe-87d9-4082-87bd-9e1c9b8b00c5","version":10,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbgq6uyv0xj319c0bm77n.jpg"]]},"format":{"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbgq6uyv0xj319c0bm77n.jpg"},"created_time":1677381816248,"last_edited_time":1677381819573,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"fae14f22-a6ec-483c-9cb5-ac66f8c4ce71":{"role":"reader","value":{"id":"fae14f22-a6ec-483c-9cb5-ac66f8c4ce71","version":125,"type":"sub_sub_header","properties":{"title":[["4.4 #33: Making wrong assumptions during map iterations（在迭代map的时候做出了错误的假设）"]]},"created_time":1677381851194,"last_edited_time":1677381914201,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"eb4d7c7a-cf40-454c-a1a1-d268bc56ed22":{"role":"reader","value":{"id":"eb4d7c7a-cf40-454c-a1a1-d268bc56ed22","version":393,"type":"bulleted_list","properties":{"title":[["迭代map的时候，GO不保证有序，甚至还估计打乱迭代顺序。如果想要按顺序迭代map，可以使用第三方库"]]},"content":["83a5908e-22eb-4620-9c02-d37821858ae3"],"created_time":1677384861252,"last_edited_time":1677390176145,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"11e26bf9-8f15-4ac7-aa81-d5d0887e0b96":{"role":"reader","value":{"id":"11e26bf9-8f15-4ac7-aa81-d5d0887e0b96","version":461,"type":"bulleted_list","properties":{"title":[["边迭代map边增加map的值，GO的行为不可预测，有可能迭代到新加入的值有可能迭代不到"]]},"created_time":1677384908860,"last_edited_time":1677384972476,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"a37d28ed-5036-4587-aad0-ca8cfd70ef57":{"role":"reader","value":{"id":"a37d28ed-5036-4587-aad0-ca8cfd70ef57","version":4,"type":"sub_sub_header","properties":{"title":[["4.5 #34: Ignoring how the break statement works（不明确break语句是如何工作-break label的使用）"]]},"created_time":1677382234160,"last_edited_time":1677390148260,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"c76ed8ef-97e0-4f40-bc55-025a8c5becd1":{"role":"reader","value":{"id":"c76ed8ef-97e0-4f40-bc55-025a8c5becd1","version":592,"type":"text","properties":{"title":[["在switch和select语句中使用break只会跳出switch和select的作用域，如果这2个语句被for循环包裹是不会跳出for循环的,可以在break的时候指定label标签来跳出循环"]]},"created_time":1677382260367,"last_edited_time":1677385123522,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"96ee4d97-a382-497f-b1f0-87a7ef5c99eb":{"role":"reader","value":{"id":"96ee4d97-a382-497f-b1f0-87a7ef5c99eb","version":16,"type":"code","properties":{"title":[["func listing() {\nloop:\n\tfor i := 0; i \u003c 5; i++ {\n\t\tfmt.Printf(\"%d \", i)\n\t\tswitch i {\n\t\tdefault:\n\t\tcase 2:\n\t\t\tbreak loop\n\t\t}\n\t}\n}"]],"language":[["Go"]]},"created_time":1677385078371,"last_edited_time":1677385086388,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"9609fee7-4935-4b73-8f3e-b4d50e02443f":{"role":"reader","value":{"id":"9609fee7-4935-4b73-8f3e-b4d50e02443f","version":127,"type":"sub_sub_header","properties":{"title":[["4.6 #35: Using defer inside a loop（在loop循环中使用defer语句）"]]},"created_time":1677382273650,"last_edited_time":1677382291541,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"bb4199a9-e309-4889-94c9-7668a56185de":{"role":"reader","value":{"id":"bb4199a9-e309-4889-94c9-7668a56185de","version":651,"type":"text","properties":{"title":[["在每个for循环的迭代作用域中调用defer是不会在迭代结束的时候执行，只有最内层函数调用返回的时候才会执行defer，如果每次迭代都打开了一个文件描述符，想要及时关闭："]]},"created_time":1677385150506,"last_edited_time":1677385228183,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"5be3e127-fbc9-49bd-b19f-99e2f58e628e":{"role":"reader","value":{"id":"5be3e127-fbc9-49bd-b19f-99e2f58e628e","version":179,"type":"bulleted_list","properties":{"title":[["每次迭代之后就主动关闭，不借助于defer的能力"]]},"created_time":1677385240805,"last_edited_time":1677385271712,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"b06a79ce-cd55-46b6-8c52-8ece057207d5":{"role":"reader","value":{"id":"b06a79ce-cd55-46b6-8c52-8ece057207d5","version":273,"type":"bulleted_list","properties":{"title":[["放在一个函数闭包内，当闭包执行完之后执行defer"]]},"created_time":1677385251400,"last_edited_time":1677385292504,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"9d04ad07-e867-411c-88a6-dec1001ad0bd":{"role":"reader","value":{"id":"9d04ad07-e867-411c-88a6-dec1001ad0bd","version":109,"type":"code","properties":{"title":[["func readFiles(ch \u003c-chan string) error {\n\tfor path := range ch {\n\t\t\n\t\terr := func() error {\n\t\t\tfile, err := os.Open(path)\n\t\t\tif err != nil {\n\t\t\t\treturn err\n\t\t\t}\n\n\t\t\tdefer file.Close()\n\n\t\t\t// Do something with file\n\t\t\treturn nil\n\t\t}() // 放在闭包内并及时调用\n\t\tif err != nil {\n\t\t\treturn err\n\t\t}\n\t}\n\treturn nil\n}"]],"language":[["Go"]]},"created_time":1677385315249,"last_edited_time":1677391949829,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"0ac3c7e8-0693-424b-b7b6-e7b7028418f1":{"role":"reader","value":{"id":"0ac3c7e8-0693-424b-b7b6-e7b7028418f1","version":9,"type":"sub_header","properties":{"title":[["5 Strings"]]},"created_time":1677389650329,"last_edited_time":1677389656971,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"e5a1574e-bfd0-4d30-b834-3e3a52ed0661":{"role":"reader","value":{"id":"e5a1574e-bfd0-4d30-b834-3e3a52ed0661","version":104,"type":"sub_sub_header","properties":{"title":[["5.1 #36: Not understanding the concept of a rune（不理解rune的概念）"]]},"created_time":1677390771847,"last_edited_time":1677390794095,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"f52fa7c8-77dd-4028-bd3f-c695034589ce":{"role":"reader","value":{"id":"f52fa7c8-77dd-4028-bd3f-c695034589ce","version":11,"type":"bulleted_list","properties":{"title":[["Go源代码使用UTF-8进行编码。因此，所有字符串都是UTF-8字符串。但是，由于字符串可以包含任意字节，如果它来自其他地方（而不是源代码），则不能保证基于UTF-8编码"]]},"created_time":1677390999401,"last_edited_time":1677391436487,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"bde7509b-5f50-467d-8f03-3ccc8389cafc":{"role":"reader","value":{"id":"bde7509b-5f50-467d-8f03-3ccc8389cafc","version":255,"type":"bulleted_list","properties":{"title":[["rune对应着Unicode中的码点的概念，一个rune代表Unicode中的一个字符"]]},"created_time":1677391107179,"last_edited_time":1677391281993,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"b19c1702-adf5-43ee-a3dd-66683e23d32a":{"role":"reader","value":{"id":"b19c1702-adf5-43ee-a3dd-66683e23d32a","version":25,"type":"bulleted_list","properties":{"title":[["使用UTF-8编码，Unicode码点可以编码为1到4个字节"]]},"created_time":1677391300519,"last_edited_time":1677391309671,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"c5d10ace-1981-4c7f-a687-1144b7995555":{"role":"reader","value":{"id":"c5d10ace-1981-4c7f-a687-1144b7995555","version":130,"type":"bulleted_list","properties":{"title":[["len函数返回的是字节长度，而不是rune的长度"]]},"created_time":1677391312096,"last_edited_time":1677391345210,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"0621e0e9-d8dc-480d-8e71-1dc7be50459d":{"role":"reader","value":{"id":"0621e0e9-d8dc-480d-8e71-1dc7be50459d","version":174,"type":"code","properties":{"title":[["func main() {\n\ts := \"hello\"\n\t// output: 5\n\tfmt.Println(len(s))\n\n\ts = \"汉\"\n  // output: 3\n\tfmt.Println(len(s))\n\t\n  // 汉 被编码为3个字节\n\ts = string([]byte{0xE6, 0xB1, 0x89})\n\tfmt.Printf(\"%s\\n\", s)\n}"]],"language":[["Go"]]},"created_time":1677391376174,"last_edited_time":1677391418545,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"953e1180-dc6f-4038-87c2-5f69437920da":{"role":"reader","value":{"id":"953e1180-dc6f-4038-87c2-5f69437920da","version":312,"type":"sub_sub_header","properties":{"title":[["5.2 #37: Inaccurate string iteration（错误的迭代string-当string中的字符并非单字节Utf-8编码时）"]]},"created_time":1677391941081,"last_edited_time":1677393728744,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"29e66b77-b924-4bf5-8943-3cb9fabba638":{"role":"reader","value":{"id":"29e66b77-b924-4bf5-8943-3cb9fabba638","version":14,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbgvwhko0uj31cm0pgn88.jpg"]]},"format":{"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbgvwhko0uj31cm0pgn88.jpg"},"created_time":1677393491645,"last_edited_time":1677393675385,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"fd653c88-4f19-47f9-8f5e-25ac7190e8bc":{"role":"reader","value":{"id":"fd653c88-4f19-47f9-8f5e-25ac7190e8bc","version":653,"type":"text","properties":{"title":[["如果想要按照rune为单位返回下标和长度,把string转为[]rune，但是这种作为会有O(n)的时间复杂度和内存拷贝开销，一般情况迭代字符串使用 range loop的方式迭代"]]},"created_time":1677393505350,"last_edited_time":1677393809351,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"6ba2d867-315c-4bfa-aec2-40c58205301b":{"role":"reader","value":{"id":"6ba2d867-315c-4bfa-aec2-40c58205301b","version":90,"type":"code","properties":{"title":[["runes := []rune(s)\nfor i, r := range runes {\n\tfmt.Printf(\"position %d: %c\\n\", i, r)\n}\n// output\n// position 0: h\n// position 1: ê\n// position 2: l\n// position 3: l\n// position 4: o"]],"language":[["Go"]]},"created_time":1677393567878,"last_edited_time":1677393617202,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"555f2471-b815-4f90-93d0-7d48de751dbf":{"role":"reader","value":{"id":"555f2471-b815-4f90-93d0-7d48de751dbf","version":130,"type":"text","properties":{"title":[["fmt.Println(utf8.RuneCountInString(s)) // 5",[["c"]]],[" 方法可以计算string中rune的个数"]]},"created_time":1677393619862,"last_edited_time":1677393907402,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"c0419f58-e4c2-4e79-9750-d05a19e86791":{"role":"reader","value":{"id":"c0419f58-e4c2-4e79-9750-d05a19e86791","version":68,"type":"sub_sub_header","properties":{"title":[["5.3 #38: Misusing trim functions（错误使用 trim 函数）"]]},"created_time":1677393918784,"last_edited_time":1677393939384,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"2c745b4b-64e9-4372-b79d-106c226bbe3c":{"role":"reader","value":{"id":"2c745b4b-64e9-4372-b79d-106c226bbe3c","version":317,"type":"code","properties":{"title":[["func main() {\n\t// output: 123\n\t// TrimRight removes all the trailing runes contained in a given set\n\tfmt.Println(strings.TrimRight(\"123oxo\", \"xo\"))\n\t\n\t// output: 123o\n\t// TrimSuffix returns a string without a provided trailing suffix\n\tfmt.Println(strings.TrimSuffix(\"123oxo\", \"xo\"))\n\t\n\t// output: 123\n\t// TrimLeft like TrimRight\n\tfmt.Println(strings.TrimLeft(\"oxo123\", \"ox\"))\n\n\t// output: o123\n\t// TrimPrefix like TrimSuffix\n\tfmt.Println(strings.TrimPrefix(\"oxo123\", \"ox\"))\n\t\n\t// output: 123\n\tfmt.Println(strings.Trim(\"oxo123oxo\", \"ox\"))\n}"]],"language":[["Go"]]},"created_time":1677393984013,"last_edited_time":1677394197538,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"1e2ca2f3-8db1-402d-8ea1-60ad3d73a3e9":{"role":"reader","value":{"id":"1e2ca2f3-8db1-402d-8ea1-60ad3d73a3e9","version":135,"type":"sub_sub_header","properties":{"title":[["5.4 #39: Under-optimized string concatenation（如何高效的字符串拼接-strings.Builder）"]]},"created_time":1677394223025,"last_edited_time":1677395100088,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"25ed213b-e543-4528-af90-8a26b9779bde":{"role":"reader","value":{"id":"25ed213b-e543-4528-af90-8a26b9779bde","version":21,"type":"code","properties":{"title":[["func concatV1(values []string) string {\n\ts := \"\"\n\tfor _, value := range values {\n\t\ts += value\n\t}\n\treturn s\n}\n\nfunc concatV2(values []string) string {\n\tsb := strings.Builder{}\n\tfor _, value := range values {\n\t\t_, _ = sb.WriteString(value)\n\t}\n\treturn sb.String()\n}\n\nfunc concatV3(values []string) string {\n\ttotal := 0\n\tfor i := 0; i \u003c len(values); i++ {\n\t\ttotal += len(values[i])\n\t}\n\n\tsb := strings.Builder{}\n\tsb.Grow(total)\n\tfor _, value := range values {\n\t\t_, _ = sb.WriteString(value)\n\t}\n\treturn sb.String()\n}"]],"language":[["Go"]]},"created_time":1677394981275,"last_edited_time":1677395061943,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"9409d722-3bd4-4592-bb37-da8eb627ef24":{"role":"reader","value":{"id":"9409d722-3bd4-4592-bb37-da8eb627ef24","version":10,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbgwnhm8f8j315o04w0vb.jpg"]]},"format":{"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbgwnhm8f8j315o04w0vb.jpg"},"created_time":1677395232210,"last_edited_time":1677395234597,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"84dfa1f1-2f63-4fcb-b96a-c0ac62955f50":{"role":"reader","value":{"id":"84dfa1f1-2f63-4fcb-b96a-c0ac62955f50","version":4,"type":"sub_sub_header","properties":{"title":[["5.5 #40: Useless string conversions（无用的字符串转换）"]]},"created_time":1677394271505,"last_edited_time":1677395230372,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"1a706965-a701-4cfa-8dc8-219b6730b670":{"role":"reader","value":{"id":"1a706965-a701-4cfa-8dc8-219b6730b670","version":471,"type":"bulleted_list","properties":{"title":[["bytes 包支持很多和strings包类似的方法，很多时候没有必要一定要把[]byte转化为string：比如"],["bytes.TrimSpace ",[["b"]]],["方法"]]},"created_time":1677395326007,"last_edited_time":1677395435155,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"154068f6-cadf-483c-9f16-61d556177b44":{"role":"reader","value":{"id":"154068f6-cadf-483c-9f16-61d556177b44","version":90,"type":"sub_sub_header","properties":{"title":[["5.6 #41: Substrings and memory leaks（子字符串和内存泄露-Consistent with #26）"]]},"created_time":1677394304507,"last_edited_time":1677394384714,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"6356e40e-131e-4d96-9a5f-3dee0881691f":{"role":"reader","value":{"id":"6356e40e-131e-4d96-9a5f-3dee0881691f","version":381,"type":"text","properties":{"title":[["和 #26 条类似，子字符串引用了一个较长父字符串的部分内容，导致父字符串不能被GC，导致内存暴增"]]},"created_time":1677395496727,"last_edited_time":1677395552845,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"5d4bffd9-193f-48ed-8ae2-9878c6daf396":{"role":"reader","value":{"id":"5d4bffd9-193f-48ed-8ae2-9878c6daf396","version":7,"type":"code","properties":{"title":[["func main() {\n\ts1 := \"Hello, World!\"\n\ts2 := s1[:5]\n\tfmt.Println(s2)\n\n\ts1 = \"Hêllo, World!\"\n\ts2 = string([]rune(s1)[:5])\n\tfmt.Println(s2)\n}\n\ntype store struct{}\n\nfunc (s store) handleLog1(log string) error {\n\tif len(log) \u003c 36 {\n\t\treturn errors.New(\"log is not correctly formatted\")\n\t}\n\tuuid := log[:36]\n\ts.store(uuid)\n\t// Do something\n\treturn nil\n}\n\nfunc (s store) handleLog2(log string) error {\n\tif len(log) \u003c 36 {\n\t\treturn errors.New(\"log is not correctly formatted\")\n\t}\n\tuuid := string([]byte(log[:36]))\n\ts.store(uuid)\n\t// Do something\n\treturn nil\n}\n\nfunc (s store) handleLog3(log string) error {\n\tif len(log) \u003c 36 {\n\t\treturn errors.New(\"log is not correctly formatted\")\n\t}\n\tuuid := string(strings.Clone(log[:36]))\n\ts.store(uuid)\n\t// Do something\n\treturn nil\n}"]],"language":[["Go"]]},"created_time":1677395487052,"last_edited_time":1677395487623,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"c4ca192b-03ed-4bde-926d-3820dcf9f3c4":{"role":"reader","value":{"id":"c4ca192b-03ed-4bde-926d-3820dcf9f3c4","version":4,"type":"sub_header","properties":{"title":[["6 Functions and methods"]]},"created_time":1677164131939,"last_edited_time":1677394201288,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"11fc98b5-9f99-41b8-bfbd-791bbc25ecb2":{"role":"reader","value":{"id":"11fc98b5-9f99-41b8-bfbd-791bbc25ecb2","version":114,"type":"sub_sub_header","properties":{"title":[["6.1 #42: Not knowing which type of receiver to use（不知道receiver应该使用什么样的类型）"]]},"created_time":1677164557521,"last_edited_time":1677165441134,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"2849d072-81ed-46dd-9d69-90d7919929e8":{"role":"reader","value":{"id":"2849d072-81ed-46dd-9d69-90d7919929e8","version":7,"type":"column_list","content":["2fd4e3ee-0d84-4d69-b063-3db26b3493e0","1119521e-f935-4cf9-a146-e6f457236a0c"],"created_time":1677166405991,"last_edited_time":1677166405995,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"402c93ff-d0a3-45e7-b154-451d85baaa95":{"role":"reader","value":{"id":"402c93ff-d0a3-45e7-b154-451d85baaa95","version":310,"type":"text","properties":{"title":[["提供几个场景供我们决定选择receiver的类型："]]},"created_time":1677166407484,"last_edited_time":1677166970124,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"54c48b4d-85b4-4412-bbe4-fd2fc48600f9":{"role":"reader","value":{"id":"54c48b4d-85b4-4412-bbe4-fd2fc48600f9","version":96,"type":"text","properties":{"title":[["一定要用指针类型的场景",[["b"]]]]},"created_time":1677166970424,"last_edited_time":1677167176247,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"f401b0cc-750b-4a53-b09f-0a7f556a7e71":{"role":"reader","value":{"id":"f401b0cc-750b-4a53-b09f-0a7f556a7e71","version":124,"type":"bulleted_list","properties":{"title":[["方法需要修改receiver的值"]]},"created_time":1677166989782,"last_edited_time":1677167456570,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"4b57a030-26f3-43ee-95f0-3fae8e921799":{"role":"reader","value":{"id":"4b57a030-26f3-43ee-95f0-3fae8e921799","version":133,"type":"bulleted_list","properties":{"title":[["如果receiver的成员不能被拷贝"]]},"created_time":1677167056331,"last_edited_time":1677167461472,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"2de9bef5-15b9-49fe-81f6-c132fa703c36":{"role":"reader","value":{"id":"2de9bef5-15b9-49fe-81f6-c132fa703c36","version":150,"type":"text","properties":{"title":[["应该使用指针类型的场景",[["b"]]]]},"created_time":1677167079912,"last_edited_time":1677167291894,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"01fe8c81-5d8e-4875-896e-50c273841001":{"role":"reader","value":{"id":"01fe8c81-5d8e-4875-896e-50c273841001","version":686,"type":"bulleted_list","properties":{"title":[["如果receiver是一个大的对象，使用指针类型可以更高效的处理程序，这里大的具体数值不好界定，需要看实际的场景，这里可以使用benchmark来估计。"]]},"created_time":1677167101835,"last_edited_time":1677167475118,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"d3afb4c7-fd13-4bd6-9a18-421d1cb5c79c":{"role":"reader","value":{"id":"d3afb4c7-fd13-4bd6-9a18-421d1cb5c79c","version":116,"type":"text","properties":{"title":[["一定要使用值类型的场景",[["b"]]]]},"created_time":1677167278434,"last_edited_time":1677167432618,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"b949f0ef-fae5-4a03-bf5f-ae1edbf6a6a2":{"role":"reader","value":{"id":"b949f0ef-fae5-4a03-bf5f-ae1edbf6a6a2","version":112,"type":"bulleted_list","properties":{"title":[["如果强制要求receiver是不可变的"]]},"created_time":1677167437368,"last_edited_time":1677167497069,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"9477946e-75e9-4232-b34b-e5269f6874e7":{"role":"reader","value":{"id":"9477946e-75e9-4232-b34b-e5269f6874e7","version":254,"type":"bulleted_list","properties":{"title":[["如果receiver是一个map、function、channel类型，否则会有编译错误"]]},"created_time":1677167497295,"last_edited_time":1677167540892,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"53fe7fc4-1d27-4417-ab7d-c7ba6071e1aa":{"role":"reader","value":{"id":"53fe7fc4-1d27-4417-ab7d-c7ba6071e1aa","version":74,"type":"text","properties":{"title":[["应该使用值类型的场景",[["b"]]]]},"created_time":1677167545244,"last_edited_time":1677167555945,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"6cd64a51-5a4d-4db6-ae43-886088baedad":{"role":"reader","value":{"id":"6cd64a51-5a4d-4db6-ae43-886088baedad","version":163,"type":"bulleted_list","properties":{"title":[["receiver是一个slice，并且一定需要修改"]]},"created_time":1677167563732,"last_edited_time":1677167603567,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"9590d5e3-b8a8-4752-a2f2-4079264d28b2":{"role":"reader","value":{"id":"9590d5e3-b8a8-4752-a2f2-4079264d28b2","version":151,"type":"bulleted_list","properties":{"title":[["receiver是一个array或者是一个没有可变字段的struct，如time.Time"]]},"created_time":1677167603850,"last_edited_time":1677167742567,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"2b37c979-b118-414e-b6e0-b8bb644eb989":{"role":"reader","value":{"id":"2b37c979-b118-414e-b6e0-b8bb644eb989","version":18,"type":"bulleted_list","properties":{"title":[["receiver是基本类型，例如int、float64或string。"]]},"created_time":1677167677895,"last_edited_time":1677167686980,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"55cc7616-5144-47a7-8ab1-323453d72555":{"role":"reader","value":{"id":"55cc7616-5144-47a7-8ab1-323453d72555","version":102,"type":"text","properties":{"title":[["结构体组成复杂的场景",[["b"]]]]},"created_time":1677168045876,"last_edited_time":1677241464728,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"64759c04-adff-43e2-96ee-de5ea6027ed1":{"role":"reader","value":{"id":"64759c04-adff-43e2-96ee-de5ea6027ed1","version":9,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbdv5mjrvoj317s0asac3.jpg"]]},"format":{"block_width":528,"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbdv5mjrvoj317s0asac3.jpg","block_full_width":false,"block_page_width":false},"created_time":1677167923096,"last_edited_time":1677168032274,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"b9f20bad-1efd-45eb-9241-09f322a37dd2":{"role":"reader","value":{"id":"b9f20bad-1efd-45eb-9241-09f322a37dd2","version":12,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbeukpyoqpj316y0guafu.jpg"]]},"format":{"block_width":528,"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbeukpyoqpj316y0guafu.jpg","block_full_width":false,"block_page_width":false},"created_time":1677241475771,"last_edited_time":1677241491549,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"9370b8ad-5e7f-469c-bb0c-cf16866fbc9d":{"role":"reader","value":{"id":"9370b8ad-5e7f-469c-bb0c-cf16866fbc9d","version":4,"type":"bulleted_list","properties":{"title":[["这种场景建议receiver的类型设为指针类型，能明确的告诉使用者这个方法会修改成员的值"]]},"created_time":1677168078972,"last_edited_time":1677241471823,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"cc710adf-6804-43e4-8075-603ce11d1f60":{"role":"reader","value":{"id":"cc710adf-6804-43e4-8075-603ce11d1f60","version":7,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbdvbzn08cj31fi0ng1du.jpg"]]},"format":{"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbdvbzn08cj31fi0ng1du.jpg"},"created_time":1677168292447,"last_edited_time":1677168295646,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"1798d9f1-8186-4c11-a088-407a5e612a35":{"role":"reader","value":{"id":"1798d9f1-8186-4c11-a088-407a5e612a35","version":117,"type":"sub_sub_header","properties":{"title":[["6.2 #43: Never using named result parameters （“永远”不要使用命名结果参数）"]]},"created_time":1677168362311,"last_edited_time":1677245563475,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"59ffc07d-9777-4c9c-a3e7-b5a4f49d4490":{"role":"reader","value":{"id":"59ffc07d-9777-4c9c-a3e7-b5a4f49d4490","version":334,"type":"text","properties":{"title":[["这里永远要加引号，因为这一节都大部分内容都在说使用命名结果参数的好处。"]]},"created_time":1677245567057,"last_edited_time":1677245605553,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"0738c673-eb20-40fe-9c87-be60dff3df6b":{"role":"reader","value":{"id":"0738c673-eb20-40fe-9c87-be60dff3df6b","version":496,"type":"text","properties":{"title":[["接口定义的函数使用命名结果参数，可以提升可读性",[["b"]]],["，但是实现接口的方法没有强制要求返回值有命名"]]},"created_time":1677245263208,"last_edited_time":1677245354310,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"aed780b2-3d2a-4188-8b91-5563dba2e602":{"role":"reader","value":{"id":"aed780b2-3d2a-4188-8b91-5563dba2e602","version":12,"type":"image","properties":{"size":[["38.3KB"]],"title":[["Untitled"]],"source":[["https://s3-us-west-2.amazonaws.com/secure.notion-static.com/0e169106-d7be-4ec7-8f95-199e4ffc41ec/Untitled.png"]]},"format":{"block_width":1572,"display_source":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/0e169106-d7be-4ec7-8f95-199e4ffc41ec/Untitled.png","block_full_width":false,"block_page_width":true,"block_aspect_ratio":0.15139949109414758,"block_preserve_scale":true},"created_time":1677241601113,"last_edited_time":1677241607667,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"file_ids":["0e169106-d7be-4ec7-8f95-199e4ffc41ec"],"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"14be64d8-c897-43f9-bff1-6c77f779ead7":{"role":"reader","value":{"id":"14be64d8-c897-43f9-bff1-6c77f779ead7","version":944,"type":"text","properties":{"title":[["以标准库的函数为例，返回值使用命名参数，可以减少代码行数 ",[["b"]]],["，但是这种裸返回（不指定返回值）比较适合实现行数比较短的函数，因为代码行数太长会导致可读性大大降低。"]]},"created_time":1677244746795,"last_edited_time":1677245542434,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"07826ba2-d6d9-4249-a2cf-33d4a74492d7":{"role":"reader","value":{"id":"07826ba2-d6d9-4249-a2cf-33d4a74492d7","version":10,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbew5l36m2j31820ds0wg.jpg"]]},"format":{"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbew5l36m2j31820ds0wg.jpg"},"created_time":1677244734574,"last_edited_time":1677244737150,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"a3b6e597-5123-4c97-b772-f11ae6dbce42":{"role":"reader","value":{"id":"a3b6e597-5123-4c97-b772-f11ae6dbce42","version":250,"type":"sub_sub_header","properties":{"title":[["6.3  #44: Unintended side effects with named result parameters （使用命名参数可能会出现意向不到的副作用）"]]},"created_time":1677245623653,"last_edited_time":1677245684647,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"ad06a59b-eb3d-432f-a540-ae81b29afe7c":{"role":"reader","value":{"id":"ad06a59b-eb3d-432f-a540-ae81b29afe7c","version":436,"type":"text","properties":{"title":[["按照编程惯性，遇到错误就直接返回err，但是这里err因为初始化为空值，直接返回就会有问题。"]]},"created_time":1677246348827,"last_edited_time":1677246455796,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"dace7562-4fe1-4ef5-aa83-32021727c384":{"role":"reader","value":{"id":"dace7562-4fe1-4ef5-aa83-32021727c384","version":12,"type":"image","properties":{"size":[["107.8KB"]],"title":[["Untitled"]],"source":[["https://s3-us-west-2.amazonaws.com/secure.notion-static.com/e102136f-1e34-44a3-a799-b61eacba81e9/Untitled.png"]]},"format":{"block_width":1750,"display_source":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/e102136f-1e34-44a3-a799-b61eacba81e9/Untitled.png","block_full_width":false,"block_page_width":true,"block_aspect_ratio":0.3942857142857143,"block_preserve_scale":true},"created_time":1677246345575,"last_edited_time":1677246348949,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"file_ids":["e102136f-1e34-44a3-a799-b61eacba81e9"],"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"3bff9384-5969-4c3e-a2a7-b654a8926c06":{"role":"reader","value":{"id":"3bff9384-5969-4c3e-a2a7-b654a8926c06","version":308,"type":"sub_sub_header","properties":{"title":[["6.4 ⚠️ #45: Returning a nil receiver（返回了一个nil的值，该值的指针类型实现了某一接口）"]]},"created_time":1677247184514,"last_edited_time":1677248962462,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"48e17fd6-e2bf-4bcd-8c25-1cea4e57ed13":{"role":"reader","value":{"id":"48e17fd6-e2bf-4bcd-8c25-1cea4e57ed13","version":389,"type":"code","properties":{"title":[["// MultiError 实现了 Error 接口\ntype MultiError struct {\n    errs []string\n}\nfunc (m *MultiError) Add(err error) {\n    m.errs = append(m.errs, err.Error())\n}\nfunc (m *MultiError) Error() string {\n    return strings.Join(m.errs, \";\")\n}\n\nfunc (c Customer) Validate() error {\n    var m *MultiError\n    if c.Age \u003c 0 {\n        m = \u0026MultiError{}\n        m.Add(errors.New(\"age is negative\"))\n    }\n    if c.Name == \"\" {\n        if m == nil {\n            m = \u0026MultiError{}\n\t\t\t\t}\n        m.Add(errors.New(\"name is nil\"))\n    }\n    // 按照惯性思维，如果校验通过m也就是个nil，直接返回nil表示没有错误\n\t\treturn m \n}"]],"language":[["Go"]]},"created_time":1677249184513,"last_edited_time":1677249298654,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"bf76494c-9d83-449a-b9e4-0855ff1453ca":{"role":"reader","value":{"id":"bf76494c-9d83-449a-b9e4-0855ff1453ca","version":326,"type":"text","properties":{"title":[["执行下面的测试代码会发现，及时满足校验条件返回的error也还是非空的"]]},"created_time":1677247271019,"last_edited_time":1677249344879,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"c58511f9-21a8-4851-970c-aeef2a015e73":{"role":"reader","value":{"id":"c58511f9-21a8-4851-970c-aeef2a015e73","version":37,"type":"code","properties":{"title":[["customer := Customer{Age: 33, Name: \"John\"}\nif err := customer.Validate(); err != nil {\n    log.Fatalf(\"customer is invalid: %v\", err)\n}\n// output\n// 2021/05/08 13:47:28 customer is invalid: \u003cnil\u003e"]],"language":[["Go"]]},"created_time":1677249247672,"last_edited_time":1677249355870,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"800b0b9b-7a93-4b27-8ba7-172676ae6336":{"role":"reader","value":{"id":"800b0b9b-7a93-4b27-8ba7-172676ae6336","version":12,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbeyji5l91j31380jwq79.jpg"]]},"format":{"block_width":528,"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbeyji5l91j31380jwq79.jpg","block_full_width":false,"block_page_width":false},"created_time":1677249692885,"last_edited_time":1677249718333,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"d97623c5-ea20-420d-a796-8df2bf69cb04":{"role":"reader","value":{"id":"d97623c5-ea20-420d-a796-8df2bf69cb04","version":712,"type":"text","properties":{"title":[["这类属于常见的错误",[["b"]]],["，和for循环中的临时变量的错误差不多，当返回值指针实现了一个接口，即使这个指针为nil，函数返回的时候转化为接口也会被当成非nil的值。"]]},"created_time":1677250080068,"last_edited_time":1677250209112,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"10efc219-76cd-4cb4-9852-e7dba2f6850c":{"role":"reader","value":{"id":"10efc219-76cd-4cb4-9852-e7dba2f6850c","version":142,"type":"text","properties":{"title":[["上面的例子可以这样改为正确的："]]},"created_time":1677250216781,"last_edited_time":1677250232951,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"4f2c986a-90cb-4cf2-b7f9-26712753b8c9":{"role":"reader","value":{"id":"4f2c986a-90cb-4cf2-b7f9-26712753b8c9","version":23,"type":"code","properties":{"title":[["if c.Age \u003c 0 {\n    // ...\n}\nif c.Name == \"\" {\n\t// ... \n}\nif m != nil {\n    return m\n}\nreturn nil"]],"language":[["Go"]]},"created_time":1677250234754,"last_edited_time":1677250264743,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"7b984dc8-dc02-4272-ada9-4c52f379e19e":{"role":"reader","value":{"id":"7b984dc8-dc02-4272-ada9-4c52f379e19e","version":218,"type":"sub_sub_header","properties":{"title":[["6.5 #46: Using a filename as a function input（没有考虑好函数参数抽象）"]]},"created_time":1677250303107,"last_edited_time":1677287633933,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"95aa8174-7797-4fda-9754-b011798d03dc":{"role":"reader","value":{"id":"95aa8174-7797-4fda-9754-b011798d03dc","version":10,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbfgp35mn4j31ok0i8qe3.jpg"]]},"format":{"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbfgp35mn4j31ok0i8qe3.jpg"},"created_time":1677287374327,"last_edited_time":1677287376702,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"1202634a-f24f-4371-96b6-d5eab1ad9e5e":{"role":"reader","value":{"id":"1202634a-f24f-4371-96b6-d5eab1ad9e5e","version":873,"type":"text","properties":{"title":[["这一节主要是提醒我们定义函数的时候，要考虑可扩展性，使用一个统一的接口类型作为参数不仅能方便代码测试，也可以提升代码的抽象能力，把所有的数据源(file, http, string) 使用 i"],["o.Reader ",[["b"]]],["类型代替，会是一个更好的解决方案。"]]},"created_time":1677287393226,"last_edited_time":1677287517892,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"2d807ac4-3df7-4a6a-867e-2ecc512cec96":{"role":"reader","value":{"id":"2d807ac4-3df7-4a6a-867e-2ecc512cec96","version":23,"type":"code","properties":{"title":[["func countEmptyLines(reader io.Reader) (int, error) {\n    scanner := bufio.NewScanner(reader)\n    for scanner.Scan() {\n\t\t\t// ... \n\t\t}\n}"]],"language":[["Go"]]},"created_time":1677287549506,"last_edited_time":1677287561116,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"9125490b-0c7a-45d3-8c3d-859ed5fe5852":{"role":"reader","value":{"id":"9125490b-0c7a-45d3-8c3d-859ed5fe5852","version":214,"type":"sub_sub_header","properties":{"title":[["6.6 ⚠️ #47: Ignoring how defer arguments and receivers are evaluated（认清defer是如何以及何时计算函数参数）"]]},"created_time":1677250354338,"last_edited_time":1677289891409,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"2cafbe04-a268-49f3-b361-082f5af80a1f":{"role":"reader","value":{"id":"2cafbe04-a268-49f3-b361-082f5af80a1f","version":177,"type":"numbered_list","properties":{"title":[["defer调用函数时候常犯的错误",[["b"]]]]},"created_time":1677289845923,"last_edited_time":1677289886124,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"fa2ff635-2a88-4dfb-957d-2afa862ce8c5":{"role":"reader","value":{"id":"fa2ff635-2a88-4dfb-957d-2afa862ce8c5","version":12,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbfhpe5h8qj31bm0qqk08.jpg"]]},"format":{"block_width":576,"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbfhpe5h8qj31bm0qqk08.jpg","block_full_width":false,"block_page_width":false},"created_time":1677289467184,"last_edited_time":1677289604053,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"f503eb28-0fb1-4e18-89bb-7a85be32e039":{"role":"reader","value":{"id":"f503eb28-0fb1-4e18-89bb-7a85be32e039","version":174,"type":"text","properties":{"title":[["defer调用函数的时候函数参数使用指针类型"]]},"created_time":1677289896470,"last_edited_time":1677289922823,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"2e5d878f-a78c-4fcc-b464-479aa86d1b16":{"role":"reader","value":{"id":"2e5d878f-a78c-4fcc-b464-479aa86d1b16","version":10,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbfhrmpgepj31jg0fkdnn.jpg"]]},"format":{"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbfhrmpgepj31jg0fkdnn.jpg"},"created_time":1677289600282,"last_edited_time":1677289605144,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"82ae11e5-dcf1-49d9-b20f-d41ce1864e5c":{"role":"reader","value":{"id":"82ae11e5-dcf1-49d9-b20f-d41ce1864e5c","version":208,"type":"text","properties":{"title":[["defer调用函数的时候，把函数放在闭包内，利用闭包引用环境变量的能力。"]]},"created_time":1677289924513,"last_edited_time":1677289961364,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"bbe2e2d9-4461-458a-87f9-2362931c4382":{"role":"reader","value":{"id":"bbe2e2d9-4461-458a-87f9-2362931c4382","version":10,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbfhtu2i9yj31gq0fetg4.jpg"]]},"format":{"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbfhtu2i9yj31gq0fetg4.jpg"},"created_time":1677289726965,"last_edited_time":1677289729510,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"1f4535bf-df9e-4864-9eca-151098018af8":{"role":"reader","value":{"id":"1f4535bf-df9e-4864-9eca-151098018af8","version":265,"type":"numbered_list","properties":{"title":[["defer执行的是一个方法时，执行结果和receiver的类型有关",[["b"]]]]},"format":{"list_start_index":2},"created_time":1677290399668,"last_edited_time":1677290491555,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"cc4f8577-5569-455c-a7af-fff728834265":{"role":"reader","value":{"id":"cc4f8577-5569-455c-a7af-fff728834265","version":7,"type":"column_list","content":["974f9f3a-63c1-42d4-999e-a9d617649596","cb20580c-889b-4a54-b53b-e39aced5b5f6"],"created_time":1677290395003,"last_edited_time":1677290395006,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"774ff22f-b900-4dc0-a7a1-c3d0d59c4a6b":{"role":"reader","value":{"id":"774ff22f-b900-4dc0-a7a1-c3d0d59c4a6b","version":327,"type":"code","properties":{"title":[["// 可以把方法转化为下面的形式，会帮助你理解\nprint(s Struct) vs print(s \u0026Struct)"]],"language":[["Go"]]},"created_time":1677290585988,"last_edited_time":1677290640297,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"8ca4e5d9-3082-4a64-b085-6518f422db57":{"role":"reader","value":{"id":"8ca4e5d9-3082-4a64-b085-6518f422db57","version":3,"type":"text","created_time":1677290643015,"last_edited_time":1677290643015,"parent_id":"db80f497-e22c-4bff-bdcb-0ac06b5c4528","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"3101f52f-dde2-4887-b9ea-0372911d0d89":{"role":"reader","value":{"id":"3101f52f-dde2-4887-b9ea-0372911d0d89","version":114,"type":"code","properties":{"title":[["// sort package\n// This interface is used by different functions such as sort.Ints or \n// sort .Float64s. Using type parameters, we could factor out the sorting \n// behavior (for example, by defining a struct holding a slice and a comparison function):\ntype Interface interface {\n     Len() int\n     Less(i, j int) bool\n     Swap(i, j int)\n}"]],"language":[["Go"]]},"created_time":1668648744650,"last_edited_time":1677310553997,"parent_id":"a8d5c024-37c0-44cf-b0cd-2d1bdfee0529","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"5e463322-8bd8-469a-ad91-2db63cbd7b0a":{"role":"reader","value":{"id":"5e463322-8bd8-469a-ad91-2db63cbd7b0a","version":9,"type":"image","properties":{"size":[["94.7KB"]],"title":[["Untitled"]],"source":[["https://s3-us-west-2.amazonaws.com/secure.notion-static.com/43f8d294-32ae-4674-8aff-be89bff7af16/Untitled.png"]]},"format":{"block_width":818,"display_source":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/43f8d294-32ae-4674-8aff-be89bff7af16/Untitled.png","block_full_width":false,"block_page_width":true,"block_aspect_ratio":0.25183374083129584,"block_preserve_scale":true},"created_time":1668648780000,"last_edited_time":1668648780000,"parent_id":"a8d5c024-37c0-44cf-b0cd-2d1bdfee0529","parent_table":"block","alive":true,"file_ids":["43f8d294-32ae-4674-8aff-be89bff7af16"],"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"da5e0b32-f95d-4ea9-80b7-083944dc12e4":{"role":"reader","value":{"id":"da5e0b32-f95d-4ea9-80b7-083944dc12e4","version":26,"type":"code","properties":{"title":[["s := SliceFn[int]{\n\tS: []int{3, 2, 1},\n\tCompare: func(a, b int) bool {\n\t\treturn a \u003c b\n\t}\n}\nsort.Sort(s)\nfmt.Println(s.S)"]],"language":[["Go"]]},"created_time":1668648824733,"last_edited_time":1677310582925,"parent_id":"a8d5c024-37c0-44cf-b0cd-2d1bdfee0529","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"d91184bf-f11a-4968-a976-0cd227c64159":{"role":"reader","value":{"id":"d91184bf-f11a-4968-a976-0cd227c64159","version":11,"type":"code","properties":{"title":[["func foo[T io.Writer](w T) {\n\tb := getBytes()\n\t_, _ = w.Write(b)\n}"]],"language":[["Go"]]},"created_time":1668648889977,"last_edited_time":1677397595181,"parent_id":"68028f34-8e6d-4814-ac6b-bd8a9bcdc24d","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"2847d5ac-6a2b-41f3-b0ad-60bcee197875":{"role":"reader","value":{"id":"2847d5ac-6a2b-41f3-b0ad-60bcee197875","version":7,"type":"column","content":["8fc7b341-c7e8-428b-8603-8f5781bda6b6"],"format":{"column_ratio":0.5},"created_time":1677385755137,"last_edited_time":1677385755140,"parent_id":"f2595135-32e8-43f6-b571-3b3890799865","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"5342c807-ad16-458f-bf03-28fd3feec059":{"role":"reader","value":{"id":"5342c807-ad16-458f-bf03-28fd3feec059","version":6,"type":"column","content":["2c495420-3b05-43b7-9569-36f11d7a250e"],"format":{"column_ratio":0.5},"created_time":1677385755138,"last_edited_time":1677385755140,"parent_id":"f2595135-32e8-43f6-b571-3b3890799865","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"345c7f81-b5fa-40e3-a86c-e377a99b23c0":{"role":"reader","value":{"id":"345c7f81-b5fa-40e3-a86c-e377a99b23c0","version":27,"type":"code","properties":{"title":[["var cust1 any = customer{id: \"x\", operations: []float64{1.}}\nvar cust2 any = customer{id: \"x\", operations: []float64{1.}}\nfmt.Println(cust1 == cust2)\n\n// panic: runtime error: comparing uncomparable type main.customer"]],"language":[["Go"]]},"created_time":1677377016907,"last_edited_time":1677377024465,"parent_id":"e29bbc97-38ba-44bd-a807-4fe7adb6d43e","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"e815113a-27ce-4efe-9c40-0f340dc1556e":{"role":"reader","value":{"id":"e815113a-27ce-4efe-9c40-0f340dc1556e","version":303,"type":"code","properties":{"title":[["cust1 := customer{id: \"x\", operations: []float64{1.}} \ncust2 := customer{id: \"x\", operations: []float64{1.}} \n// 1. reflect.DeepEqual 执行效率低\nfmt.Println(reflect.DeepEqual(cust1, cust2))\n// 2. equal 执行效率是 reflect.DeepEqual 的 96 倍\nfmt.Println(cust1.equal(cust2))\n\nfunc (a customer) equal(b customer) bool {\n\tif a.id != b.id {\n\t\treturn false\n\t}\n\tif len(a.operations) != len(b.operations) {\n\t\treturn false\n\t}\n\tfor i := 0; i \u003c len(a.operations); i++ {\n\t\tif a.operations[i] != b.operations[i] {\n\t\t\treturn false\n\t\t}\n\t}\n\treturn true\n}"]],"language":[["Go"]]},"created_time":1677377000093,"last_edited_time":1677377145200,"parent_id":"ec026dd4-dbce-438a-9eb4-794e8b8a1b77","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"83a5908e-22eb-4620-9c02-d37821858ae3":{"role":"reader","value":{"id":"83a5908e-22eb-4620-9c02-d37821858ae3","version":44,"type":"external_object_instance","format":{"uri":"https://github.com/emirpasic/gods","stale":false,"bot_id":"efde49d0-e017-4d2f-a301-c28f0da86161","domain":"github.com","attributes":[{"id":"title","name":"Name","type":"inline","format":{"type":"title","section":"title"},"values":["gods"]},{"id":"owner","name":"Owner","type":"relation","values":["https://github.com/emirpasic"]},{"id":"updated_at","name":"Updated At","type":"inline","format":{"type":"last_edited_time"},"values":[{"type":"datetime","time_zone":"UTC","start_date":"2023-02-27","start_time":"12:35"}]}],"original_url":"https://github.com/emirpasic/gods","external_object_id":"ac06e71b-5b08-40e5-840b-0ebae86ec19a","related_external_object_uris_to_instance_ids":{"https://github.com/emirpasic":"81d3f5b8-f3a9-467b-91eb-24d47c4201d9"}},"created_time":1677390144041,"last_edited_time":1677509651880,"parent_id":"eb4d7c7a-cf40-454c-a1a1-d268bc56ed22","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"bot","last_edited_by_id":"efde49d0-e017-4d2f-a301-c28f0da86161","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"2fd4e3ee-0d84-4d69-b063-3db26b3493e0":{"role":"reader","value":{"id":"2fd4e3ee-0d84-4d69-b063-3db26b3493e0","version":9,"type":"column","content":["41cf54b7-15d2-4abd-a5f6-bd498116759c","4f77e555-7a44-4f9b-be2c-0b6ca3875904"],"format":{"column_ratio":0.5},"created_time":1677166405991,"last_edited_time":1677376174883,"parent_id":"2849d072-81ed-46dd-9d69-90d7919929e8","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"1119521e-f935-4cf9-a146-e6f457236a0c":{"role":"reader","value":{"id":"1119521e-f935-4cf9-a146-e6f457236a0c","version":6,"type":"column","content":["18f349cd-cfa4-4bf9-b6ee-fb04d1d65252"],"format":{"column_ratio":0.5},"created_time":1677166405993,"last_edited_time":1677166405995,"parent_id":"2849d072-81ed-46dd-9d69-90d7919929e8","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"974f9f3a-63c1-42d4-999e-a9d617649596":{"role":"reader","value":{"id":"974f9f3a-63c1-42d4-999e-a9d617649596","version":14,"type":"column","content":["187dc049-a76d-495f-88f1-81644f7b7b9c"],"format":{"column_ratio":0.375},"created_time":1677290395002,"last_edited_time":1677290414224,"parent_id":"cc4f8577-5569-455c-a7af-fff728834265","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"cb20580c-889b-4a54-b53b-e39aced5b5f6":{"role":"reader","value":{"id":"cb20580c-889b-4a54-b53b-e39aced5b5f6","version":12,"type":"column","content":["02e5df4e-5f5f-4df1-9ac1-c9606f17bdf4"],"format":{"column_ratio":0.625},"created_time":1677290395004,"last_edited_time":1677290414224,"parent_id":"cc4f8577-5569-455c-a7af-fff728834265","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"8fc7b341-c7e8-428b-8603-8f5781bda6b6":{"role":"reader","value":{"id":"8fc7b341-c7e8-428b-8603-8f5781bda6b6","version":14,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbgs2q252pj30c5046jsd.jpg"]]},"format":{"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbgs2q252pj30c5046jsd.jpg"},"created_time":1677385727874,"last_edited_time":1677385755140,"parent_id":"2847d5ac-6a2b-41f3-b0ad-60bcee197875","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"2c495420-3b05-43b7-9569-36f11d7a250e":{"role":"reader","value":{"id":"2c495420-3b05-43b7-9569-36f11d7a250e","version":15,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbgs2tuaotj30dc02vwfa.jpg"]]},"format":{"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbgs2tuaotj30dc02vwfa.jpg"},"created_time":1677385744614,"last_edited_time":1677385755140,"parent_id":"5342c807-ad16-458f-bf03-28fd3feec059","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"41cf54b7-15d2-4abd-a5f6-bd498116759c":{"role":"reader","value":{"id":"41cf54b7-15d2-4abd-a5f6-bd498116759c","version":11,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbdtxxe05ij31f80ig44e.jpg"]]},"format":{"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbdtxxe05ij31f80ig44e.jpg"},"created_time":1677165516784,"last_edited_time":1677166405995,"parent_id":"2fd4e3ee-0d84-4d69-b063-3db26b3493e0","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"4f77e555-7a44-4f9b-be2c-0b6ca3875904":{"role":"reader","value":{"id":"4f77e555-7a44-4f9b-be2c-0b6ca3875904","version":4,"type":"text","created_time":1677376174882,"last_edited_time":1677376174883,"parent_id":"2fd4e3ee-0d84-4d69-b063-3db26b3493e0","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"18f349cd-cfa4-4bf9-b6ee-fb04d1d65252":{"role":"reader","value":{"id":"18f349cd-cfa4-4bf9-b6ee-fb04d1d65252","version":12,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbdu8fcbeoj31de0io791.jpg"]]},"format":{"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbdu8fcbeoj31de0io791.jpg"},"created_time":1677166017829,"last_edited_time":1677166405995,"parent_id":"1119521e-f935-4cf9-a146-e6f457236a0c","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"187dc049-a76d-495f-88f1-81644f7b7b9c":{"role":"reader","value":{"id":"187dc049-a76d-495f-88f1-81644f7b7b9c","version":16,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbfi4ymcb7j30t60jitbc.jpg"]]},"format":{"block_width":288,"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbfi4ymcb7j30t60jitbc.jpg","block_full_width":false,"block_page_width":true},"created_time":1677290366618,"last_edited_time":1677290405309,"parent_id":"974f9f3a-63c1-42d4-999e-a9d617649596","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"02e5df4e-5f5f-4df1-9ac1-c9606f17bdf4":{"role":"reader","value":{"id":"02e5df4e-5f5f-4df1-9ac1-c9606f17bdf4","version":16,"type":"image","properties":{"source":[["http://tva1.sinaimg.cn/large/006r0i4lly1hbfi59d76cj316w0j0tc9.jpg"]]},"format":{"display_source":"http://tva1.sinaimg.cn/large/006r0i4lly1hbfi59d76cj316w0j0tc9.jpg"},"created_time":1677290382627,"last_edited_time":1677290395006,"parent_id":"cb20580c-889b-4a54-b53b-e39aced5b5f6","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"dd2baae1-8900-4073-854b-bdde392d5b36":{"role":"reader","value":{"id":"dd2baae1-8900-4073-854b-bdde392d5b36","version":68,"type":"page","properties":{"title":[["About"]]},"content":["e34dbc42-98d0-4e1d-ad9e-dc6631aa7273","36cdda23-4789-4ff5-8d18-99142f89bec4","770dde4e-b74e-4848-8b48-8b1ce3c111ea","2ca1f27b-da43-46f8-b8c0-ef3e05e583d9"],"format":{"page_icon":"https://s3-us-west-2.amazonaws.com/secure.notion-static.com/0dba7a3b-a420-477f-a184-076421f71ce6/external-author-literature-flaticons-lineal-color-flat-icons-2.png"},"permissions":[{"role":"editor","type":"user_permission","user_id":"d1805983-7869-451d-bf8b-64135a5d4ee7"},{"role":"reader","type":"public_permission","added_timestamp":1666532032810}],"created_time":1666531980000,"last_edited_time":1666655220000,"parent_id":"314bb437-f8b5-44ca-a749-b2b1413baa58","parent_table":"block","alive":true,"file_ids":["5349e794-a695-40dd-8bb5-4ea012d8b3f0","0dba7a3b-a420-477f-a184-076421f71ce6"],"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"314bb437-f8b5-44ca-a749-b2b1413baa58":{"role":"reader","value":{"id":"314bb437-f8b5-44ca-a749-b2b1413baa58","version":5,"type":"column","content":["dd2baae1-8900-4073-854b-bdde392d5b36"],"format":{"column_ratio":0.5},"created_time":1666625040000,"last_edited_time":1666625040000,"parent_id":"82aad922-cb77-4452-81bf-56f4e8e5a408","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"82aad922-cb77-4452-81bf-56f4e8e5a408":{"role":"reader","value":{"id":"82aad922-cb77-4452-81bf-56f4e8e5a408","version":5,"type":"column_list","content":["314bb437-f8b5-44ca-a749-b2b1413baa58","c7c8db4e-2a84-4461-9042-c0ccd0c86b7a"],"created_time":1666625040000,"last_edited_time":1666625040000,"parent_id":"72a66971-7cf6-42c2-a252-4439d99d8f44","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}},"e34dbc42-98d0-4e1d-ad9e-dc6631aa7273":{"role":"reader","value":{"id":"e34dbc42-98d0-4e1d-ad9e-dc6631aa7273","version":385,"type":"text","properties":{"title":[["你好呀！欢迎访问我的博客，我是 yangsoon，一名从事 Paas 开发的程序员，一直想写一些不一样的文章，不过一直在当鸽子…"]]},"created_time":1666624500000,"last_edited_time":1666624920000,"parent_id":"dd2baae1-8900-4073-854b-bdde392d5b36","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","last_edited_by_table":"notion_user","last_edited_by_id":"d1805983-7869-451d-bf8b-64135a5d4ee7","space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}}},"collection":{"89829c97-9e4b-43b0-b37c-457a3da9ad96":{"role":"reader","value":{"id":"89829c97-9e4b-43b0-b37c-457a3da9ad96","version":50,"name":[["读书笔记"]],"schema":{"Zr\u003cq":{"name":"Tags","type":"multi_select","options":[{"id":"24b84736-a103-42ac-9240-4822e0f65e43","color":"brown","value":"golang"}]},"vRhJ":{"name":"Created","type":"created_time"},"z`pV":{"name":"Text","type":"text"},"title":{"name":"Name","type":"title"}},"icon":"/icons/book_gray.svg","format":{"copied_from_pointer":{"id":"802f1041-8e8c-4dfb-9a7e-828adc379fe9","table":"collection","spaceId":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"},"collection_page_properties":[{"visible":true,"property":"vRhJ"},{"visible":true,"property":"Zr\u003cq"}]},"parent_id":"e7596c25-bafa-4ece-94b6-e7973c7a2ab3","parent_table":"block","alive":true,"file_ids":["bc7d6ffa-a7ed-4623-9b4b-760071f91143","53747170-d36e-41e1-b2b7-bc3fe775c828","2f5c27c6-3d03-4a36-9426-254d118d3831","43cb5540-5d53-449b-83bd-609b24688d0b","982ec7e7-aebe-4e08-b2be-22f8f4fe0275","85f9e952-304a-46a7-99e1-0b8806f8fa2e","76a743a7-2ac6-426f-810b-87b2b7091d16"],"copied_from":"802f1041-8e8c-4dfb-9a7e-828adc379fe9","migrated":true,"space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}}},"collection_view":{"11f62eb2-ba92-4ffd-91b4-c964b8cedfeb":{"role":"reader","value":{"id":"11f62eb2-ba92-4ffd-91b4-c964b8cedfeb","version":7,"type":"gallery","name":"Blog","format":{"gallery_cover":{"type":"page_cover"},"collection_pointer":{"id":"89829c97-9e4b-43b0-b37c-457a3da9ad96","table":"collection","spaceId":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"},"gallery_properties":[{"visible":true,"property":"title"},{"visible":true,"property":"vRhJ"},{"visible":true,"property":"Zr\u003cq"},{"visible":true,"property":"z`pV"}],"collection_peek_mode":"full_page","gallery_cover_aspect":"cover"},"parent_id":"e7596c25-bafa-4ece-94b6-e7973c7a2ab3","parent_table":"block","alive":true,"page_sort":["6838510a-0002-4284-b31b-f6587ab3eae0","d3ecd552-789f-452c-8753-2f0226325f65","a8bd2ec9-1288-4669-9940-ad46c5539100","3397e27f-0e8a-49b8-89ae-67d10e3d94fa","db80f497-e22c-4bff-bdcb-0ac06b5c4528","f8e41082-81f4-4d47-a6f3-3489e7c3453c","e04337ab-49dd-4dfe-80b2-0330e8da5e06"],"query2":{"aggregations":[{"aggregator":"count"}]},"space_id":"fe0e4127-6cf7-4d6d-8491-aa23773532f6"}}},"notion_user":{},"collection_query":{},"signed_urls":{"db80f497-e22c-4bff-bdcb-0ac06b5c4528":"https://s3.us-west-2.amazonaws.com/secure.notion-static.com/47263733-11bc-4ae7-9e1e-c3401a49c171/Manning.100.Go.Mistakes.and.How.to.Avoid.Them.2022-1%EF%BC%88%E6%8B%96%E7%A7%BB%E9%A1%B9%E7%9B%AE%EF%BC%89.png?X-Amz-Algorithm=AWS4-HMAC-SHA256\u0026X-Amz-Content-Sha256=UNSIGNED-PAYLOAD\u0026X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20230227%2Fus-west-2%2Fs3%2Faws4_request\u0026X-Amz-Date=20230227T152323Z\u0026X-Amz-Expires=86400\u0026X-Amz-Signature=1fd7d4707f819403ab31bc92ee321761eb57ec581f06a5219fc211c8ff3d77a5\u0026X-Amz-SignedHeaders=host\u0026x-id=GetObject","5e463322-8bd8-469a-ad91-2db63cbd7b0a":"https://s3.us-west-2.amazonaws.com/secure.notion-static.com/43f8d294-32ae-4674-8aff-be89bff7af16/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256\u0026X-Amz-Content-Sha256=UNSIGNED-PAYLOAD\u0026X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20230227%2Fus-west-2%2Fs3%2Faws4_request\u0026X-Amz-Date=20230227T152323Z\u0026X-Amz-Expires=86400\u0026X-Amz-Signature=7c550bc15a34376cda746cebc47caf1409cfe05f4c825e5dc7f2f46fc10535c1\u0026X-Amz-SignedHeaders=host\u0026x-id=GetObject","57ce84a6-6a8d-4994-9397-8909a017c078":"https://s3.us-west-2.amazonaws.com/secure.notion-static.com/610d8fa8-5bbe-43c4-a6c5-ed72b8b90fe1/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256\u0026X-Amz-Content-Sha256=UNSIGNED-PAYLOAD\u0026X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20230227%2Fus-west-2%2Fs3%2Faws4_request\u0026X-Amz-Date=20230227T152323Z\u0026X-Amz-Expires=86400\u0026X-Amz-Signature=6f720f82e57d23a2b7674d0fd9dc812e09d813c7c671bbc6c3e263f4c6549bee\u0026X-Amz-SignedHeaders=host\u0026x-id=GetObject","aed780b2-3d2a-4188-8b91-5563dba2e602":"https://s3.us-west-2.amazonaws.com/secure.notion-static.com/0e169106-d7be-4ec7-8f95-199e4ffc41ec/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256\u0026X-Amz-Content-Sha256=UNSIGNED-PAYLOAD\u0026X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20230227%2Fus-west-2%2Fs3%2Faws4_request\u0026X-Amz-Date=20230227T152323Z\u0026X-Amz-Expires=86400\u0026X-Amz-Signature=11209f04719db7a90e8e62e5ae9c51409c824de053dfc9362c1df13657ca9b58\u0026X-Amz-SignedHeaders=host\u0026x-id=GetObject","dace7562-4fe1-4ef5-aa83-32021727c384":"https://s3.us-west-2.amazonaws.com/secure.notion-static.com/e102136f-1e34-44a3-a799-b61eacba81e9/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256\u0026X-Amz-Content-Sha256=UNSIGNED-PAYLOAD\u0026X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20230227%2Fus-west-2%2Fs3%2Faws4_request\u0026X-Amz-Date=20230227T152323Z\u0026X-Amz-Expires=86400\u0026X-Amz-Signature=9d68b0660139ff89184e53819d37fd06a2ebc312a647f51822b3bf16f7362245\u0026X-Amz-SignedHeaders=host\u0026x-id=GetObject"},"preview_images":{"notion.so/image/s3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F47263733-11bc-4ae7-9e1e-c3401a49c171%2FManning.100.Go.Mistakes.and.How.to.Avoid.Them.2022-1%EF%BC%88%E6%8B%96%E7%A7%BB%E9%A1%B9%E7%9B%AE%EF%BC%89.png":{"originalWidth":2000,"originalHeight":2508,"dataURIBase64":"data:image/webp;base64,UklGRkoAAABXRUJQVlA4ID4AAACQAQCdASoNABAABUB8JZQAAUJYnCAA/i3sgO0Yegdb+5LvlWhw/psHDLyVDpX8zYYcjaZB/BXtD4y71SAAAA=="},"notion.so/image/s3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F425f0231-9af0-4f62-a9f7-f9f567cfe460%2Fgolang_logo_icon_171073.png":{"originalWidth":2000,"originalHeight":2000,"dataURIBase64":"data:image/webp;base64,UklGRq4AAABXRUJQVlA4WAoAAAAQAAAADwAADwAAQUxQSEcAAAARL6CobSM2VyZF0P+4ERGBN3VgFUlyqqnEADqAf3wCUEDIv58oiOh/clAtpz6pdL++8f3aTO1/JnqlHZkwwr/KBWnLewuOAQBWUDggQAAAABACAJ0BKhAAEAAFQHwlsAJ0ugDUM/X/BIAA/hMYaKC879Rlyz46bow1vD8/yvn/lXfaU8coFRx9f9Y0KIVnwAA="},"notion.so/image/s3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F37907dd5-3c76-4966-a419-daa027a84972%2FIMG_2189.jpg":{"originalWidth":2000,"originalHeight":2003,"dataURIBase64":"data:image/webp;base64,UklGRmoAAABXRUJQVlA4IF4AAADQAQCdASoQABAABUB8JbACdAERATxWoAD+0Vlxx+kOh3kDC0Z3s4OjUZzRpnTiXUiN5qtuCLGbw3Q3meKHmbJDj3X9KoWlb/kas/KasMX31nkEcPwD09TPGVsO8AAA"},"notion.so/image/img2.doubanio.com%2Fview%2Fsubject%2Fl%2Fpublic%2Fs34311243.jpg":{"originalWidth":2000,"originalHeight":2507,"dataURIBase64":"data:image/webp;base64,UklGRk4AAABXRUJQVlA4IEIAAACwAQCdASoNABAABUB8JZQAAcCzMdgAAP1pPb5smyxoh54e7LDGK8Yk2gEHbh/20RBmhShKjfB1bjvvEl7pU7XAAAA="},"notion.so/image/img1.doubanio.com%2Ffavicon.ico":null,"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbgs8tjrc2j30nx0c7n0m.jpg":{"originalWidth":2000,"originalHeight":1020,"dataURIBase64":"data:image/webp;base64,UklGRi4AAABXRUJQVlA4ICIAAABwAQCdASoQAAgABUB8JaWM+AGIAAD+8E0IL0R79HrNokAA"},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbgs8kjr79j30gk07pwg1.jpg":{"originalWidth":2000,"originalHeight":930,"dataURIBase64":"data:image/webp;base64,UklGRiwAAABXRUJQVlA4ICAAAABwAQCdASoQAAcABUB8JaWZAAGIAAD+8HyRurtV5poAAA=="},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbgs7y27gwj30jl03tq3s.jpg":{"originalWidth":2000,"originalHeight":389,"dataURIBase64":"data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoQAAMABUB8JaQAA3AA/vBdAAA="},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbgs75cj9mj30jt05e3zy.jpg":{"originalWidth":2000,"originalHeight":544,"dataURIBase64":"data:image/webp;base64,UklGRiwAAABXRUJQVlA4ICAAAAAwAQCdASoQAAQABUB8JaQAA3AA/vCAarNdBqSUpgAAAA=="},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbgs7fp17lj30i207awgk.jpg":{"originalWidth":2000,"originalHeight":806,"dataURIBase64":"data:image/webp;base64,UklGRioAAABXRUJQVlA4IB4AAAAwAQCdASoQAAYABUB8JaQAA3AA/vBN55jFL5/ogAA="},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbgs6lmsygj30ke07ldho.jpg":{"originalWidth":2000,"originalHeight":744,"dataURIBase64":"data:image/webp;base64,UklGRi4AAABXRUJQVlA4ICIAAADQAQCdASoQAAYABUB8JaQAAveHlveWAAD+78stLqsAAAAA"},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbgs5e3i9kj30b309ign7.jpg":{"originalWidth":2000,"originalHeight":1714,"dataURIBase64":"data:image/webp;base64,UklGRkIAAABXRUJQVlA4IDYAAACwAQCdASoQAA4ABUB8JZQAApe1xY4AAP7oZl5rOjFMQT/TLYoOcMhNRVNVM1+t0cB7eUH5AAA="},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbgs5hpt95j30al09ata7.jpg":{"originalWidth":2000,"originalHeight":1753,"dataURIBase64":"data:image/webp;base64,UklGRj4AAABXRUJQVlA4IDIAAACwAQCdASoQAA4ABUB8JZQAAsel6k4AAP7h4OulSKiYK3llj/zFaSO+yTYGGeVYAANIAA=="},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbgs4b4dcjj30jd05mwgh.jpg":{"originalWidth":2000,"originalHeight":580,"dataURIBase64":"data:image/webp;base64,UklGRjAAAABXRUJQVlA4ICQAAAAwAQCdASoQAAUABUB8JZwAA3AA/vBn8OOYluXUP+vtKB5WAAA="},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbgs3v7b8lj30gp05dwfi.jpg":{"originalWidth":2000,"originalHeight":642,"dataURIBase64":"data:image/webp;base64,UklGRioAAABXRUJQVlA4IB4AAAAwAQCdASoQAAUABUB8JaQAA3AA/vB+pxrYjSx0AAA="},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbgs17zv73j30n70gzah9.jpg":{"originalWidth":2000,"originalHeight":1463,"dataURIBase64":"data:image/webp;base64,UklGRj4AAABXRUJQVlA4IDIAAACwAQCdASoQAAwABUB8JZQAAuP6P7TgAP7v0iugBDOVzmhVy59JqYcE8gs34BM+SAAAAA=="},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbgs0pztq1j30nh08h419.jpg":{"originalWidth":2000,"originalHeight":722,"dataURIBase64":"data:image/webp;base64,UklGRjAAAABXRUJQVlA4ICQAAADQAQCdASoQAAYABUB8JaQAAxZr4vVGAAD+7+JpoMIZWxgAAAA="},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbgs05ff03j30lu08k0v0.jpg":{"originalWidth":2000,"originalHeight":784,"dataURIBase64":"data:image/webp;base64,UklGRjgAAABXRUJQVlA4ICwAAACwAQCdASoQAAYABUB8JZQAAudVfYKAAP7v4se31ds2YDKiDwSCrUkQFHIAAA=="},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbgrzkhnpuj30me09an0m.jpg":{"originalWidth":2000,"originalHeight":829,"dataURIBase64":"data:image/webp;base64,UklGRi4AAABXRUJQVlA4ICIAAAAwAQCdASoQAAcABUB8JZwAA3AA/vBKH3pYZvk0KroPAAAA"},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbgrxfm0cjj30o00fbjyj.jpg":{"originalWidth":2000,"originalHeight":1275,"dataURIBase64":"data:image/webp;base64,UklGRjwAAABXRUJQVlA4IDAAAADwAQCdASoQAAoABUB8JYwAAujdUQfX+AAA/u/SFeWM6AREJFNY1PJydpEbEd0+AAA="},"notion.so/image/opengraph.githubassets.com%2Ffd02d14603e11c05bdb114b0a9a7447975debdf60c1b3aebb46ab7284bdcb866%2Fgolang-standards%2Fproject-layout":{"originalWidth":2000,"originalHeight":1000,"dataURIBase64":"data:image/webp;base64,UklGRjYAAABXRUJQVlA4ICoAAACwAQCdASoQAAgABUB8JZQAAubLWB0QAP7tiz3IbZfx5vGEznGTQFYAAAA="},"notion.so/image/github.com%2Ffluidicon.png":{"originalWidth":2000,"originalHeight":2000,"dataURIBase64":"data:image/webp;base64,UklGRvAAAABXRUJQVlA4WAoAAAAQAAAADwAADwAAQUxQSFQAAAARL0AmbZusm7J/zMEiIljjwSiSJEW9IIAVXKyBgz8LWGj/Ym7WQ0T/JwBw66IAuEF+CqgkmeEoqlOyVcpNKl06Zm1SpXxK1kkK7VcAN8hPAXDPrgBWUDggdgAAALACAJ0BKhAAEAAFQHwlpAAPiy4AHjU65ecof+2RAAD+xGswCIhSkhS6JfNcCW/805WZrrDGLKz5cfb0NnXkvm0HViG9PTcLpWomr4Mdh7YWdpmJZ29nvCdguIfRS6U8v5t9dDxAblZTQIuLW1uV9wjG4UKAAAA="},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbfrrr9exgj31fm0w07iq.jpg":{"originalWidth":2000,"originalHeight":1240,"dataURIBase64":"data:image/webp;base64,UklGRi4AAABXRUJQVlA4ICIAAABwAQCdASoQAAoABUB8JaV/2AGIAAD+79kcrY+X1AHPR4AA"},"notion.so/image/static.zhihu.com%2Fheifetz%2Fassets%2Fapple-touch-icon-152.81060cab.png":{"originalWidth":2000,"originalHeight":2000,"dataURIBase64":"data:image/webp;base64,UklGRrYAAABXRUJQVlA4WAoAAAAQAAAADwAADwAAQUxQSDgAAAARD9D/iAiwqa29yZe2RlM8ZOpZYwCUsLaJtXcc4AQT6Ijof2j0JOARpfxMNeSk/q5WBwq8WJExAlZQOCBYAAAAMAIAnQEqEAAQAAVAfCWwAnS6ABCSD7Rp2IAA/Rq9d/8IprfV7WTm9aip9ilUb3xYIZJjsRUozTXvOQ8J1LIspl6/6D5nunMzyQ0H8jfeZ9M97aFyegAAAA=="},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbg0ncuieej316m09wgo9.jpg":{"originalWidth":2000,"originalHeight":464,"dataURIBase64":"data:image/webp;base64,UklGRiwAAABXRUJQVlA4ICAAAACQAQCdASoQAAQABUB8JZwAAudVMbgA/uDZOq2MJ5YAAA=="},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbg1o2dzpqj318y0uwq8j.jpg":{"originalWidth":2000,"originalHeight":1375,"dataURIBase64":"data:image/webp;base64,UklGRkAAAABXRUJQVlA4IDQAAACwAQCdASoQAAsABUB8JaQAAxf3/5RAAP7rJqpLrgMztl46zhkQWsRX581QCC/9FnPAlfAA"},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbg25iwbs4j31si0wyk1o.jpg":{"originalWidth":2000,"originalHeight":1022,"dataURIBase64":"data:image/webp;base64,UklGRkIAAABXRUJQVlA4IDYAAADQAQCdASoQAAgABUB8JaQAAl1lPZqkAAD+6xzBdAp11qvvvD6X1yYkfv1ax7Xhkh+A0QcAAAA="},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbg2fo3kslj31c609sdiq.jpg":{"originalWidth":2000,"originalHeight":406,"dataURIBase64":"data:image/webp;base64,UklGRjAAAABXRUJQVlA4ICQAAAAwAQCdASoQAAMABUB8JaQAA3AA/vAO4dy6C5I4y/0LQ9epOAA="},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbg2x05784j311m0iw43u.jpg":{"originalWidth":2000,"originalHeight":1004,"dataURIBase64":"data:image/webp;base64,UklGRjQAAABXRUJQVlA4ICgAAACwAQCdASoQAAgABUB8JYwAAtq5Z/gAAP7vw5B6y6j/niKXLEuT5wAA"},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbg51twz57j314k0fsadn.jpg":{"originalWidth":2000,"originalHeight":778,"dataURIBase64":"data:image/webp;base64,UklGRiwAAABXRUJQVlA4ICAAAAAwAQCdASoQAAYABUB8JZQAA3AA/vBjpypP5YEtAFLAAA=="},"s3.us-west-2.amazonaws.com/secure.notion-static.com/610d8fa8-5bbe-43c4-a6c5-ed72b8b90fe1/Untitled.png":{"originalWidth":1220,"originalHeight":620,"dataURIBase64":"data:image/webp;base64,UklGRkgAAABXRUJQVlA4IDwAAADwAQCdASoQAAgABUB8JaAC7AEN+rDzTqAA/u/D9G3aZXpwnPcss23/Np9ZkAHZutvZqSIptmFejOAAAAA="},"notion.so/image/golang.design%2Fgo-questions%2Ffavicon.png":{"originalWidth":2000,"originalHeight":2000,"dataURIBase64":"data:image/webp;base64,UklGRnwAAABXRUJQVlA4WAoAAAAQAAAADwAADwAAQUxQSD0AAAARL0AWYJocyO4IEugqIgK/FAohSXLmEE5hFR4hGPz6w3w2iOj/BPB/2HYPtOSwLIPa5mAvSdOwHUBmJj8BAFZQOCAYAAAAMAEAnQEqEAAQAAVAfCWkAANwAP7w5sAA"},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbgllsfsmhj315k0s847g.jpg":{"originalWidth":2000,"originalHeight":1358,"dataURIBase64":"data:image/webp;base64,UklGRj4AAABXRUJQVlA4IDIAAABQAQCdASoQAAsABUB8JSvPgDEAAP7wM31S7KlYK+9/0EmNLF5EZzJbgq4dhszQxnfAAA=="},"notion.so/image/mmbiz.qpic.cn%2Fmmbiz_jpg%2FKVl0giak5ib4hc7SL6H3h78GQv9jTbOnUasjE3al0ereICricRTh8dPHDS7QWMbVl27RgiajGRpUo2A25WJ0dOAGCg%2F0":{"originalWidth":2000,"originalHeight":850,"dataURIBase64":"data:image/webp;base64,UklGRkoAAABXRUJQVlA4ID4AAADwAQCdASoQAAcABUB8JYgCdH8AEaUqS0wA/okWhEisfNZ+c7nyMCDmzuSBWKc0tiVAUIz1fsXY9IlxqAAAAA=="},"notion.so/image/res.wx.qq.com%2Fa%2Fwx_fed%2Fassets%2Fres%2FNTI4MWU5.ico":{"originalWidth":32,"originalHeight":32,"dataURIBase64":"data:image/webp;base64,UklGRqIAAABXRUJQVlA4WAoAAAAQAAAADwAADwAAQUxQSFYAAAARL6CobSM2VEDzfSMiAuw8wSqyrTYXFKT+dwNABFQBlONfTIqGiP5PgH66cs+SdoBOFa8mEuCkz9i8DWyFACc3n+Xtzm9bfOuHN6v0WKV4QzCSM3Wtv1ZQOCAmAAAAkAEAnQEqEAAQAAVAfCWgAnS6AAOYAP7E7+vgCn7P+N5vNasQAAA="},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbgnbhers4j316y0a8q5j.jpg":{"originalWidth":2000,"originalHeight":476,"dataURIBase64":"data:image/webp;base64,UklGRi4AAABXRUJQVlA4ICIAAACQAQCdASoQAAQABUB8JZwAAveS6/AA/tUTVarna0AAAAAA"},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbgpbma14pj316m0hewjo.jpg":{"originalWidth":2000,"originalHeight":816,"dataURIBase64":"data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAADQAQCdASoQAAcABUB8JZQAAuguiuyBAAD+77+Q1KtW11k7JyKCu8wwmUzF8AAA"},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbgq6uyv0xj319c0bm77n.jpg":{"originalWidth":2000,"originalHeight":512,"dataURIBase64":"data:image/webp;base64,UklGRjQAAABXRUJQVlA4ICgAAACwAQCdASoQAAQABUB8JaQAAuRlW5AAAP7wOZFHbXDuuvvfZyF+AAAA"},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbgvwhko0uj31cm0pgn88.jpg":{"originalWidth":2000,"originalHeight":1047,"dataURIBase64":"data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACQAQCdASoQAAgABUB8JZQAAudZtgAA/u/Dbj5UHJFcpy2/VvgK9EInYwAAGoAA"},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbgwnhm8f8j315o04w0vb.jpg":{"originalWidth":2000,"originalHeight":235,"dataURIBase64":"data:image/webp;base64,UklGRjwAAABXRUJQVlA4IDAAAADQAQCdASoQAAIABUB8JQAR4ACkYwD7AAD+6pFOMynbsBHGrbEiDmUf0RxdRLAAAAA="},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbdv5mjrvoj317s0asac3.jpg":{"originalWidth":2000,"originalHeight":492,"dataURIBase64":"data:image/webp;base64,UklGRiwAAABXRUJQVlA4ICAAAAAwAQCdASoQAAQABUB8JaQAA3AA/vCAayOdlTuACwAAAA=="},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbeukpyoqpj316y0guafu.jpg":{"originalWidth":2000,"originalHeight":784,"dataURIBase64":"data:image/webp;base64,UklGRi4AAABXRUJQVlA4ICIAAACQAQCdASoQAAYABUB8JZwAAqHyA7AA/u/XjG3lsZ7cAAAA"},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbdvbzn08cj31fi0ng1du.jpg":{"originalWidth":2000,"originalHeight":910,"dataURIBase64":"data:image/webp;base64,UklGRjIAAABXRUJQVlA4ICYAAAAwAQCdASoQAAcABUB8JZQAA3AA/u7LcguQ1aGrNwWkrwvBjQ+AAA=="},"s3.us-west-2.amazonaws.com/secure.notion-static.com/0e169106-d7be-4ec7-8f95-199e4ffc41ec/Untitled.png":{"originalWidth":1572,"originalHeight":238,"dataURIBase64":"data:image/webp;base64,UklGRjQAAABXRUJQVlA4ICgAAACwAQCdASoQAAIABUB8JZQAApMJG8kAAP7v15OyyXBJ2AQk9XDlU5AA"},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbew5l36m2j31820ds0wg.jpg":{"originalWidth":2000,"originalHeight":625,"dataURIBase64":"data:image/webp;base64,UklGRjYAAABXRUJQVlA4ICoAAADQAQCdASoQAAUABUB8JQApgAeiF/HhAAD+8ChMLyDKy10QKypz0T2gAAA="},"s3.us-west-2.amazonaws.com/secure.notion-static.com/e102136f-1e34-44a3-a799-b61eacba81e9/Untitled.png":{"originalWidth":1750,"originalHeight":690,"dataURIBase64":"data:image/webp;base64,UklGRiwAAABXRUJQVlA4ICAAAAAwAQCdASoQAAYABUB8JZwAA3AA/vBo0Weoy8NuWgAAAA=="},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbeyji5l91j31380jwq79.jpg":{"originalWidth":2000,"originalHeight":1014,"dataURIBase64":"data:image/webp;base64,UklGRjwAAABXRUJQVlA4IDAAAADwAQCdASoQAAgABUB8JaQAAurgKD9x3AAA/u3NQ209sd7kobEFzLnGQKqrhS0EAAA="},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbfgp35mn4j31ok0i8qe3.jpg":{"originalWidth":2000,"originalHeight":602,"dataURIBase64":"data:image/webp;base64,UklGRj4AAABXRUJQVlA4IDIAAADQAQCdASoQAAUABUB8JaAAAvafQfoV0AD+78sWDrLyYmkRxrzgE4NpKvx72KOV7EugAA=="},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbfhpe5h8qj31bm0qqk08.jpg":{"originalWidth":2000,"originalHeight":1123,"dataURIBase64":"data:image/webp;base64,UklGRi4AAABXRUJQVlA4ICIAAACwAQCdASoQAAkABUB8JZwAAqy7HuGAAP7v15AMHwVVeAAA"},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbfhrmpgepj31jg0fkdnn.jpg":{"originalWidth":2000,"originalHeight":561,"dataURIBase64":"data:image/webp;base64,UklGRkIAAABXRUJQVlA4IDYAAABwAQCdASoQAAQABUB8JYjcAAATQAD+77jyuQMP2jbYTveq50AuY6N1Q3GZwD/3ZrnyOjSgAAA="},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbfhtu2i9yj31gq0fetg4.jpg":{"originalWidth":2000,"originalHeight":584,"dataURIBase64":"data:image/webp;base64,UklGRj4AAABXRUJQVlA4IDIAAADQAQCdASoQAAUABUB8JYgBTAA8NeXIQAD+78OU52wW6YmUH7YwV9RDqKXA7RgNsAAAAA=="},"s3.us-west-2.amazonaws.com/secure.notion-static.com/43f8d294-32ae-4674-8aff-be89bff7af16/Untitled.png":{"originalWidth":818,"originalHeight":206,"dataURIBase64":"data:image/webp;base64,UklGRigAAABXRUJQVlA4IBwAAAAwAQCdASoQAAQABUB8JaQAA3AA/u/yOtBODuAA"},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbgs2q252pj30c5046jsd.jpg":{"originalWidth":2000,"originalHeight":686,"dataURIBase64":"data:image/webp;base64,UklGRjYAAABXRUJQVlA4ICoAAACwAQCdASoQAAUABUB8JYwAAp1XppjqAP7tYQKUNHedgI/DdAhOU3AUQAA="},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbgs2tuaotj30dc02vwfa.jpg":{"originalWidth":2000,"originalHeight":429,"dataURIBase64":"data:image/webp;base64,UklGRjYAAABXRUJQVlA4ICoAAACQAQCdASoQAAMABUB8JagAAltQJwAA/vAKiBuEkLGBJYkLMr/+HbWgAAA="},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbdtxxe05ij31f80ig44e.jpg":{"originalWidth":2000,"originalHeight":720,"dataURIBase64":"data:image/webp;base64,UklGRjYAAABXRUJQVlA4ICoAAAAwAQCdASoQAAYABUB8JYwAA3AA/vBKAw+t41SSIeO5h5jAJwmtDoAF0AA="},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbdu8fcbeoj31de0io791.jpg":{"originalWidth":2000,"originalHeight":756,"dataURIBase64":"data:image/webp;base64,UklGRioAAABXRUJQVlA4IB4AAAAwAQCdASoQAAYABUB8JZwAA3AA/vCAX+s29I4AAAA="},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbfi4ymcb7j30t60jitbc.jpg":{"originalWidth":2000,"originalHeight":1337,"dataURIBase64":"data:image/webp;base64,UklGRjIAAABXRUJQVlA4ICYAAADQAQCdASoQAAsABUB8JaQAAudN9l3YAAD+78PydgI8ckT6lk5AAA=="},"notion.so/image/tva1.sinaimg.cn%2Flarge%2F006r0i4lly1hbfi59d76cj316w0j0tc9.jpg":{"originalWidth":2000,"originalHeight":886,"dataURIBase64":"data:image/webp;base64,UklGRioAAABXRUJQVlA4IB4AAAAwAQCdASoQAAcABUB8JaQAA3AA/vCAanqE+6QAAAA="},"notion.so/image/s3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F0dba7a3b-a420-477f-a184-076421f71ce6%2Fexternal-author-literature-flaticons-lineal-color-flat-icons-2.png":{"originalWidth":2000,"originalHeight":2000,"dataURIBase64":"data:image/webp;base64,UklGRgwBAABXRUJQVlA4WAoAAAAQAAAADwAADwAAQUxQSGAAAAARL6AgbQMW11J3IiLIXeGqtm1VWU8C+L8A/08DYAGurP5hIERE/yeA3+0soJkbHSD51AvyN6hM+tIvQ7xWfdDFa8qWrFo3BQQdb0DURwsE9VNBVC3YVCvI6gOIagk06z9WUDgghgAAAJACAJ0BKhAAEAAFQHwlsAJ0bX8PHM+2A3mHCuwAAP6hXarNYCY2KwqrvY8iGvMa6audCQRCtiQfjkfHagT2CXq04ZYf9Hwvg3FrJS69z33BCag6X1WhpLOFU896Yvx/Xd9bnVl4h1tNpPLg+3chbfFajbd9/5ZwSqmKkyUQP9VHthLmRgAA"}}},"pageId":"db80f497-e22c-4bff-bdcb-0ac06b5c4528"},"__N_SSG":true},"page":"/[pageId]","query":{"pageId":"100-go-mistakes-and-how-to-avoid-them--1"},"buildId":"tahmo-tEqlshjl7M9UE27","isFallback":false,"dynamicIds":[635,3358],"gsp":true,"scriptLoader":[]}</script></body></html>